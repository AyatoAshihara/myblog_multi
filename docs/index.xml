<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>äº¬éƒ½ã®é›»å­éƒ¨å“ãƒ¡ãƒ¼ã‚«ãƒ¼ã§åƒãç¤¾ä¼šäººãŒç ”ç©¶ã«æ²¡é ­ã™ã‚‹ãƒ–ãƒ­ã‚°</title>
    <link>/</link>
      <atom:link href="/index.xml" rel="self" type="application/rss+xml" />
    <description>äº¬éƒ½ã®é›»å­éƒ¨å“ãƒ¡ãƒ¼ã‚«ãƒ¼ã§åƒãç¤¾ä¼šäººãŒç ”ç©¶ã«æ²¡é ­ã™ã‚‹ãƒ–ãƒ­ã‚°</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>ja</language><lastBuildDate>Sat, 01 Jun 2030 13:00:00 +0000</lastBuildDate>
    <image>
      <url>/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png</url>
      <title>äº¬éƒ½ã®é›»å­éƒ¨å“ãƒ¡ãƒ¼ã‚«ãƒ¼ã§åƒãç¤¾ä¼šäººãŒç ”ç©¶ã«æ²¡é ­ã™ã‚‹ãƒ–ãƒ­ã‚°</title>
      <link>/</link>
    </image>
    
    <item>
      <title>Example Page 1</title>
      <link>/courses/example/example1/</link>
      <pubDate>Sun, 05 May 2019 00:00:00 +0100</pubDate>
      <guid>/courses/example/example1/</guid>
      <description>&lt;p&gt;In this tutorial, I&amp;rsquo;ll share my top 10 tips for getting started with Academic:&lt;/p&gt;
&lt;h2 id=&#34;tip-1&#34;&gt;Tip 1&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
&lt;h2 id=&#34;tip-2&#34;&gt;Tip 2&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Example Page 2</title>
      <link>/courses/example/example2/</link>
      <pubDate>Sun, 05 May 2019 00:00:00 +0100</pubDate>
      <guid>/courses/example/example2/</guid>
      <description>&lt;p&gt;Here are some more tips for getting started with Academic:&lt;/p&gt;
&lt;h2 id=&#34;tip-3&#34;&gt;Tip 3&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
&lt;h2 id=&#34;tip-4&#34;&gt;Tip 4&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Example Talk</title>
      <link>/talk/example/</link>
      <pubDate>Sat, 01 Jun 2030 13:00:00 +0000</pubDate>
      <guid>/talk/example/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click on the &lt;strong&gt;Slides&lt;/strong&gt; button above to view the built-in slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Slides can be added in a few ways:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Create&lt;/strong&gt; slides using Academic&amp;rsquo;s &lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;em&gt;Slides&lt;/em&gt;&lt;/a&gt; feature and link using &lt;code&gt;slides&lt;/code&gt; parameter in the front matter of the talk file&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Upload&lt;/strong&gt; an existing slide deck to &lt;code&gt;static/&lt;/code&gt; and link using &lt;code&gt;url_slides&lt;/code&gt; parameter in the front matter of the talk file&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Embed&lt;/strong&gt; your slides (e.g. Google Slides) or presentation video on this page using &lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;shortcodes&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Further talk details can easily be added to this page using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ã€å¾¹åº•æ¯”è¼ƒã€‘ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºæ‰‹æ³•ï¼ï¼ - ç¬¬2å›</title>
      <link>/post/post27/</link>
      <pubDate>Thu, 24 Mar 2022 00:00:00 +0000</pubDate>
      <guid>/post/post27/</guid>
      <description>&lt;script src=&#34;./post/post27/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;./post/post27/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;./post/post27/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;./post/post27/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºä¼ç”»ã®ç¬¬2å¼¾ã§ã™ã€‚
ä»Šå›ã¯è¾æ›¸ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºæ–¹æ³•ã‚’å®Ÿè·µã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-åˆ†ææ‰‹æ³•ã®èª¬æ˜&#34;&gt;1. åˆ†ææ‰‹æ³•ã®èª¬æ˜&lt;/h2&gt;
&lt;h3 id=&#34;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã¨ã¯&#34;&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã¨ã¯&lt;/h3&gt;
&lt;p&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã¯ãã®åã®é€šã‚Šã€è¾æ›¸ã‚’ç”¨ã„ã¦ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã™ã‚‹æ‰‹æ³•ã§ã™ã€‚å„å˜èªãŒæŒã¤æ„Ÿæƒ…æ¥µæ€§(ã“ã“ã§ã¯ã€ãƒã‚¸ãƒ†ã‚£ãƒ–ãªæ„å‘³ã‹ãƒã‚¬ãƒ†ã‚£ãƒ–ãªæ„å‘³ã‹ã‚’è¡¨ã™)ã‚’ã‚¹ã‚³ã‚¢åŒ–ã—ãŸã‚‚ã®ã‚’ã‚ã‚‰ã‹ã˜ã‚è¾æ›¸ã¨ã—ã¦ä¿å­˜ã—ã€æ–‡æ›¸å†…ã§å‡ºç¾ã—ãŸå˜èªã¨ãã‚Œãã‚Œã®è¾æ›¸ã‚¹ã‚³ã‚¢ã‚’ç´ä»˜ã‘ã€(ä½•ã‚‰ã‹ã®æ–¹æ³•ã§)é›†è¨ˆã™ã‚‹ã“ã¨ã§ã€ãã®æ–‡æ›¸å…¨ä½“ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’å‚ç…§ã™ã‚‹è¾æ›¸&#34;&gt;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’å‚ç…§ã™ã‚‹è¾æ›¸&lt;/h3&gt;
&lt;p&gt;ä¸Šè¨˜ã«ãŠã„ã¦ã¯ã€ã‚¹ã‚³ã‚¢ã‚’ã©ã®ã‚ˆã†ã«ç®—å‡ºã™ã‚‹ã®ã‹ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚ç¾åœ¨å…¬é–‹ã•ã‚Œã¦ã„ã‚‹æ—¥æœ¬èªè¾æ›¸ã®ä¸­ã§æœ‰åãªæ±äº¬å·¥æ¥­å¤§å­¦ã®é«˜æ‘ç ”ç©¶å®¤ãŒä½œæˆã—ãŸè¾æ›¸(Takamura, Inui, and Okumura 2005)ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ã§ç®—å‡ºã‚’è¡Œã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™(&lt;a href=&#34;http://lr-www.pi.titech.ac.jp/wp/?page_id=4&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸå…¸ã¯ã“ã¡ã‚‰&lt;/a&gt;)ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ã¾ãšï¼Œè¾æ›¸ï¼Œã‚·ã‚½ãƒ¼ãƒ©ã‚¹ï¼ˆé¡ç¾©èªè¾å…¸ï¼‰ï¼Œã‚³ãƒ¼ãƒ‘ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ï¼Œæ¥µæ€§ãŒåŒã˜ã«ãªã‚Šã‚„ã™ã„å˜èªãƒšã‚¢ã‚’æŠ½å‡ºã—ï¼Œãã—ã¦ãã‚Œã‚‰ã®ãƒšã‚¢ã‚’é€£çµã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šå·¨å¤§ãªèªå½™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’æ§‹ç¯‰ã—ã¾ã™ï¼ãŸã¨ãˆã°ï¼Œã€Œè‰¯ã„ã€ã¨ã€Œè‰¯å¥½ã€ãŒé¡ç¾©èªé–¢ä¿‚ã«ã‚ã‚‹ã®ã§ï¼Œã“ã®äºŒå˜èªã‚’çµã¶ãªã©ã®ä½œæ¥­ã‚’è¡Œã„ã¾ã™ï¼ã“ã“ã§ï¼Œå˜èªã®æ„Ÿæƒ…æ¥µæ€§ã‚’é›»å­ã‚¹ãƒ”ãƒ³ã®æ–¹å‘ã¨ã¿ãªã—ï¼Œèªå½™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ã‚¹ãƒ”ãƒ³ç³»ã¨ã¿ãªã—ã¦ï¼Œèªå½™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®çŠ¶æ…‹ï¼ˆå„ã‚¹ãƒ”ãƒ³ãŒã©ã®æ–¹å‘ã‚’å‘ã„ã¦ã„ã‚‹ã‹ï¼‰ã‚’è¨ˆç®—ã—ã¾ã™ï¼ã“ã®è¨ˆç®—çµæœã‚’è¦‹ã‚‹ã“ã¨ã«ã‚ˆã‚Šï¼Œå˜èªã®æ„Ÿæƒ…æ¥µæ€§ãŒã‚ã‹ã‚‹ã®ã§ã™ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã“ã¡ã‚‰ã®è¾æ›¸ã¯HPã§å…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€éå–¶åˆ©ç›®çš„ã§ã‚ã‚Œã°åˆ©ç”¨ãŒå¯èƒ½ã®ã‚ˆã†ã§ã™ã€‚ã¡ã‚‡ã£ã¨è¦—ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;##       å˜èª èª­ã¿ä»®å   å“è© æ„Ÿæƒ…æ¥µæ€§ã‚¹ã‚³ã‚¢
## 1   å„ªã‚Œã‚‹ ã™ãã‚Œã‚‹   å‹•è©       1.000000
## 2     è‰¯ã„     ã‚ˆã„ å½¢å®¹è©       0.999995
## 3     å–œã¶ ã‚ˆã‚ã“ã¶   å‹•è©       0.999979
## 4   è¤’ã‚ã‚‹   ã»ã‚ã‚‹   å‹•è©       0.999979
## 5 ã‚ã§ãŸã„ ã‚ã§ãŸã„ å½¢å®¹è©       0.999645
## 6     è³¢ã„ ã‹ã—ã“ã„ å½¢å®¹è©       0.999486
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã¯1ã‹ã‚‰-1ã¾ã§ã‚’å–ã‚Šã€1ã«è¿‘ã„ã»ã©ãƒã‚¸ãƒ†ã‚£ãƒ–ã‚’è¡¨ã—ã¾ã™ã€‚æœ€ã‚‚ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå˜èªã¯ã€Œå„ªã‚Œã‚‹ã€ã¨ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã®åˆ©ç‚¹æ¬ ç‚¹&#34;&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã®åˆ©ç‚¹ãƒ»æ¬ ç‚¹&lt;/h3&gt;
&lt;p&gt;&amp;lt;åˆ©ç‚¹&amp;gt;æ‰‹æ³•ã®ã‚ã‹ã‚Šã‚„ã™ã•/æ•™å¸«ãƒ‡ãƒ¼ã‚¿ãŒä¸è¦ğŸ‘&lt;br&gt;
è¾æ›¸ã‚’åˆ©ç”¨ã™ã‚‹è‰¯ã„ç‚¹ã¯ã€æ‰‹æ³•ã®ã‚ã‹ã‚Šã‚„ã™ã•ã¨æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã‚’å¿…è¦ã¨ã—ãªã„ç‚¹ã§ã™ã€‚ç‰¹ã«å¾Œè€…ã¯è¾æ›¸ãƒ™ãƒ¼ã‚¹ãªã‚‰ã§ã¯ã®é•·æ‰€ã§ã™ã€‚é€šå¸¸ã€æ–‡æ›¸åˆ†é¡å™¨ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã¯ã€ãã®æ–‡æ›¸ãŒãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ»ãƒã‚¬ãƒ†ã‚£ãƒ–ã®ã©ã¡ã‚‰ã§ã‚ã‚‹ã‹ã¨ã„ã†æ­£è§£ãƒ©ãƒ™ãƒ«ã®ä»˜ã„ãŸæ•™å¸«ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ã§ã™ã€‚å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã¯æ–‡è„ˆã«ã‚‚ã‚ˆã‚‹ã¨æ€ã„ã¾ã™ãŒã€å°‘ãªãã¨ã‚‚100ä»¶ã¯å¿…è¦ã§ã—ã‚‡ã†ã€‚ã“ã‚Œã¯åˆ†æè€…ãŒå°‘ãªãã¨ã‚‚100ä»¶ä»¥ä¸Šã®æ–‡æ›¸ã‚’èª­ã‚“ã§ã€æ‰‹ä½œæ¥­ã§ãƒ©ãƒ™ãƒ«ã‚’ä»˜ä¸ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&amp;lt;æ¬ ç‚¹&amp;gt;è¾æ›¸ã®æ€§èƒ½ã«çµæœãŒå¤§ããä¾å­˜ã™ã‚‹ğŸ‘&lt;br&gt;
çŸ­æ‰€ã¨ã—ã¦ã¯ã€ç‰¹æ®Šãªæ–‡è„ˆã«ãŠã‘ã‚‹ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’å‚é›†ã™ã‚‹å ´åˆã¯å°‚ç”¨ã®è¾æ›¸ãŒå¿…è¦ã«ãªã‚‹ã¨ã„ã†ç‚¹ã§ã™ã€‚è¾æ›¸ãƒ™ãƒ¼ã‚¹ã®åˆ†é¡æ³•ã®å ´åˆã€è¾æ›¸ã«å«ã¾ã‚Œãªã„å˜èªã¯ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã¸å½±éŸ¿ã‚’å…¨ãä¸ãˆã¾ã›ã‚“ã€‚ã¾ãŸã€ä¸€èˆ¬ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹è¾æ›¸ã¯wikipediaç­‰ã®ã‚ªãƒ¼ãƒ«ã‚¸ãƒ£ãƒ³ãƒ«ã®æ–‡æ›¸ã‚’å­¦ç¿’ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã€æ„Ÿæƒ…æ¥µæ€§ãŒæ–‡è„ˆã«å¯¾ã—ã¦ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚ˆã£ã¦ã€ä¾‹ãˆã°é‡‘èç­‰ã®æ–‡è„ˆã«ãŠã‘ã‚‹ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã™ã‚‹å ´åˆã€å°‚é–€ç”¨èªã®æ„Ÿæ€§æ¥µæ€§ãŒ0ã¨ãªã£ãŸã‚Šã€æ–‡è„ˆã‚’è€ƒæ…®ã—ãŸæ„Ÿæ€§æ¥µæ€§ãŒå¾—ã‚‰ã‚Œãªã„ã“ã¨ã‹ã‚‰ã€ç›´æ„Ÿã¨ç•°ãªã‚‹çµæœãŒå‡ºã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã®å®Ÿè·µ&#34;&gt;2. è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã®å®Ÿè·µ&lt;/h2&gt;
&lt;h3 id=&#34;ä½¿ç”¨ãƒ‡ãƒ¼ã‚¿&#34;&gt;ä½¿ç”¨ãƒ‡ãƒ¼ã‚¿&lt;/h3&gt;
&lt;p&gt;ã§ã¯ã€å®Ÿéš›ã«è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã‚’ç”¨ã„ã¦ã€æ™¯æ°—ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã®æ–‡ç« ã‹ã‚‰ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã®æŠ½å‡ºã‚’è©¦ã¿ã¾ã™ã€‚æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã§ã¯ã€ã‚¿ã‚¯ã‚·ãƒ¼é‹è»¢æ‰‹ã‚„å°å£²åº—ã®åº—ä¸»ã€æ—…é¤¨ã®çµŒå–¶è€…ãªã©æ™¯æ°—ã«æ•æ„Ÿãªæ–¹ã€…(æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼)ã«å¯¾ã—ã¦ã€5æ®µéšã®æ™¯æ³æ„Ÿã¨ãã®ç†ç”±ã‚’æ¯æœˆã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚5æ®µéšã¯ã€ã€Œè‰¯ã„(â—)ã€ã€ã€Œã‚„ã‚„è‰¯ã„(â—‹)ã€ã€ã€Œå¤‰ã‚ã‚‰ãªã„(â– )ã€ã€ã€Œã‚„ã‚„æ‚ªã„(â–²)ã€ã€ã€Œæ‚ªã„(Ã—)ã€ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã‚’è¦—ã„ã¦ã¿ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
åŸºæº–å¹´
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
åŸºæº–æ—¥
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
æ¥­ç¨®ãƒ»è·ç¨®
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
åˆ¤æ–­ã®ç†ç”±
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ—…è¡Œä»£ç†åº—ï¼ˆå¾“æ¥­å“¡ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
è²©å£²é‡ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»åº—é ­ã®å–æ‰±é¡ãŒå‰å¹´æ¯”ç´„120ï¼…ã¨å¥½èª¿ã§ã‚ã£ãŸã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
è¦³å…‰åæ‰€ï¼ˆå¾“æ¥­å“¡ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ¥å®¢æ•°ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å½“æ–½è¨­ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã¯ï¼‘æœˆ26æ—¥æ™‚ç‚¹ã§å‰å¹´æ¯”130.1ï¼…ã¨ãªã£ã¦ãŠã‚Šã€ï¼‘æœˆã¨ã—ã¦ã¯éå»æœ€é«˜ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã«ãªã‚‹ã“ã¨ãŒç¢ºå®šã—ãŸã»ã©ã®å…¥è¾¼çŠ¶æ³ã«ã‚ã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ä¸€èˆ¬å°å£²åº—ï¼»é…’ï¼½ï¼ˆçµŒå–¶è€…ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
å˜ä¾¡ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å¹´æœ«ã®æ¶ˆè²»ã®åå‹•ã‚‚ã‚ã£ã¦ã‹ã€å®¢ã®å‹•ããŒã‚„ã‚„éˆã„ã€‚ãŸã ã€ç›¸å¤‰ã‚ã‚‰ãšé«˜é¡å•†æãŒå£²ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€å£²ä¸Šã¯ãã‚Œãªã‚Šã®é‡‘é¡ã‚’ã‚­ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆå£²å ´ä¸»ä»»ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãŠå®¢æ§˜ã®æ§˜å­
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å¤–å›½äººè¦³å…‰å®¢ã«ã‚ˆã‚‹å£²ä¸ŠãŒå‰å¹´æ¯”152ï¼…ã¨å¥½èª¿ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ã»ã‹ã€æ¥å®¢æ•°ãŒå‰å¹´æ¯”102ï¼…ã¨å¥½èª¿ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚æœˆåŠã°ã«åœæ»ã—ãŸå£²ä¸Šã‚‚ä¸‹æ—¬ã«å…¥ã£ã¦ã‹ã‚‰å›å¾©å‚¾å‘ã«ã‚ã‚Šã€å®šä¾¡å“ã€ãƒãƒ¼ã‚²ãƒ³å“ã¨ã‚‚å‰å¹´ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆæ‹…å½“è€…ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ¥å®¢æ•°ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»ç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã«ã‚ã‚‹ã¨ã¾ã§ã¯ã„ã„ã¥ã‚‰ã„ã‚‚ã®ã®ã€ï¼“ã‹æœˆå‰ã¨ã®æ¯”è¼ƒã§ã¯æ”¹å–„ã—ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆè²©å£²ä¿ƒé€²æ‹…å½“ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãã‚Œä»¥å¤–
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»æ°—æ¸©ãŒå¹³å¹´ä¸¦ã¿ã¨ãªã‚Šã€ã“ã‚Œã¾ã§ã®æ¸©æš–ã€å°‘é›ªã®çŠ¶æ…‹ãŒã¿ã‚‰ã‚Œãªããªã£ã¦ããŸã“ã¨ã§ã€é˜²å¯’è¡£æ–™ã€é›‘è²¨å•†æã‚’ä¸­å¿ƒã«å¤šå°‘æ”¹å–„ã®å‚¾å‘ãŒã¿ã‚‰ã‚Œã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã€Œæ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã€ãŒæ™¯æ³æ„Ÿã‚’è¡¨ã—ã¦ãŠã‚Šã€ãã®åˆ¤æ–­ã®ç†ç”±ãŒã€Œè¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ã€ã«ã‚ã‚‹å½¢ã§ã™ã€‚ã‚ˆã£ã¦ã€å‰è€…ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã€å¾Œè€…ã‚’èª¬æ˜ãƒ‡ãƒ¼ã‚¿ã¨ã™ã‚‹æ•™å¸«ã‚ã‚Šå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å‰å‡¦ç†&#34;&gt;å‰å‡¦ç†&lt;/h3&gt;
&lt;p&gt;ã¾ãšã€å„æ‰‹æ³•ã§å…±é€šã®å‰å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚ä»¥ä¸‹ã§ã¯ã€ä½¿ç”¨ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã—ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ã†ã¡æœ‰åŠ¹å›ç­”ã®ã¿ã‚’æŠ½å‡ºã—ã¾ã™ã€‚
ãªãŠã€ä½¿ç”¨ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®é–¢ä¿‚ã§Pythonã§ã®å‡¦ç†ã‚’ç´¹ä»‹ã—ã¾ã™ãŒã€Rã§ã‚‚åŒã˜å‡¦ç†ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; tokenizer
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; dictionary
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.preprocessing &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; LabelEncoder
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd

sample &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_csv(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\Users\hogehoge\æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼\ç”Ÿãƒ‡ãƒ¼ã‚¿\watcher_2016.csv&amp;#34;&lt;/span&gt;,encoding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;shift-jis&amp;#34;&lt;/span&gt;)
sample &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample[(sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;âˆ’&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ï¼Š&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;False&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â–¡&amp;#39;&lt;/span&gt;)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«ã€æ–‡æ›¸ã®ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã‚’è¡Œã„ã¾ã™ã€‚æ—¥æœ¬èªã®ã‚ˆã†ãªè¨€èªã§ã¯è‹±èªãªã©ã¨ç•°ãªã‚Šå˜èªã”ã¨ã®é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒãªã„ãŸã‚ã€åˆ¥é€”åŒºåˆ‡ã‚Šã‚’å…¥ã‚Œã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚åŒºåˆ‡ã‚‰ã‚ŒãŸå„èªã¯å½¢æ…‹ç´ ã¨å‘¼ã°ã‚Œã€è¨€è‘‰ãŒæ„å‘³ã‚’æŒã¤ã¾ã¨ã¾ã‚Šã®å˜èªã®æœ€å°å˜ä½ã‚’æŒ‡ã—ã¾ã™ã€‚ã¾ãŸã€æ–‡ç« ã‚’å½¢æ…‹ç´ ã¸åˆ†å‰²ã™ã‚‹ã“ã¨ã‚’å½¢æ…‹ç´ è§£æã¨è¨€ã„ã¾ã™(è‹±èªã®ã‚ˆã†ãªå ´åˆå˜ã«Tokenizationã¨è¨€ã£ãŸã‚Šã—ã¾ã™)ã€‚å½¢æ…‹ç´ è§£æã‚’è¡Œã†ãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒå­˜åœ¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MeCab&lt;/li&gt;
&lt;li&gt;JUMAN&lt;/li&gt;
&lt;li&gt;JANOME&lt;/li&gt;
&lt;li&gt;Ginza&lt;/li&gt;
&lt;li&gt;Sudachi&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ãŠãã‚‰ãæœ€ã‚‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯Mecabã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ãŒã€æ¨™æº–è£…å‚™ã•ã‚Œã¦ã„ã‚‹è¾æ›¸(ipadic)ã®æ›´æ–°ãŒã‚¹ãƒˆãƒƒãƒ—ã—ã¦ãŠã‚Šã€æœ€è¿‘ã®æ–°èªã«å¯¾å¿œã§ããªã„ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯æ–°èªã«å¼·ã„NEologdè¾æ›¸ã‚’åŠ ãˆã‚‹ã“ã¨ã§ã€å¯¾å‡¦å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’åˆ¥è¨˜äº‹ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™ãŒã€ä»Šå›ã¯ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚ºãŒæä¾›ã—ã¦ã„ã‚‹Sudachi(Takaoka et al. 2018)ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚å…¬å¼Githubã‹ã‚‰Sudachiã®ç‰¹é•·ã‚’å¼•ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¤‡æ•°ã®åˆ†å‰²å˜ä½ã®ä½µç”¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¿…è¦ã«å¿œã˜ã¦åˆ‡ã‚Šæ›¿ãˆ&lt;/li&gt;
&lt;li&gt;å½¢æ…‹ç´ è§£æã¨å›ºæœ‰è¡¨ç¾æŠ½å‡ºã®èåˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤šæ•°ã®åéŒ²èªå½™&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UniDic ã¨ NEologd ã‚’ãƒ™ãƒ¼ã‚¹ã«èª¿æ•´&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ©Ÿèƒ½ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŒ–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡å­—æ­£è¦åŒ–ã‚„æœªçŸ¥èªå‡¦ç†ã«æ©Ÿèƒ½è¿½åŠ ãŒå¯èƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŒç¾©èªè¾æ›¸ã¨ã®é€£æº&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¾Œæ—¥å…¬é–‹äºˆå®š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç‰¹è³ªã™ã¹ãã¯ã€Œè¤‡æ•°ã®åˆ†å‰²å˜ä½ã®ä½µç”¨ã€ã§ã—ã‚‡ã†ã€‚Sudachiã§ã¯çŸ­ã„æ–¹ã‹ã‚‰ A, B, Cã®3ã¤ã®åˆ†å‰²ãƒ¢ãƒ¼ãƒ‰ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚Aã¯UniDicçŸ­å˜ä½ç›¸å½“ã€Cã¯å›ºæœ‰è¡¨ç¾ç›¸å½“ã€Bã¯A, Cã®ä¸­é–“çš„ãªå˜ä½ã¨ãªã£ã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«åŒã˜ã€Œé¸æŒ™ç®¡ç†å§”å“¡ä¼šã€ã¨ã„ã†å˜èªã§ã‚‚å½¢æ…‹ç´ ãŒç•°ãªã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚ã“ã‚Œã¯Sudachiç‰¹æœ‰ã®ç‰¹é•·ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dictionary&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dictionary()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;create()

mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;A
[m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¸æŒ™ç®¡ç†å§”å“¡ä¼š&amp;#34;&lt;/span&gt;, mode)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;é¸æŒ™&#39;, &#39;ç®¡ç†&#39;, &#39;å§”å“¡&#39;, &#39;ä¼š&#39;]
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;B
[m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¸æŒ™ç®¡ç†å§”å“¡ä¼š&amp;#34;&lt;/span&gt;, mode)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;é¸æŒ™&#39;, &#39;ç®¡ç†&#39;, &#39;å§”å“¡ä¼š&#39;]
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;C
[m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¸æŒ™ç®¡ç†å§”å“¡ä¼š&amp;#34;&lt;/span&gt;, mode)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;é¸æŒ™ç®¡ç†å§”å“¡ä¼š&#39;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ã¾ãŸã€è¾æ›¸ã«ã¤ã„ã¦ã‚‚UniDicã¨NEologdã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦æ›´æ–°ãŒç¶šã‘ã‚‰ã‚Œã¦ãŠã‚Šã€æ–°èªã«ã‚‚å¯¾å¿œã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;C
[m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹&amp;#34;&lt;/span&gt;, mode)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹&#39;]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å€‹äººçš„ã«ç´ æ™´ã‚‰ã—ã„ã¨æ€ã†ãƒã‚¤ãƒ³ãƒˆã¯è¡¨è¨˜æ­£è¦åŒ–ã‚„æ–‡å­—æ­£è¦åŒ–ãŒã§ãã‚‹ã¨è¨€ã†ã“ã¨ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ—§å­—ç­‰ã§åŒã˜æ„å‘³ã ãŒè¡¨è¨˜ãŒç•°ãªã‚‹å˜èªã‚„è‹±èª/æ—¥æœ¬èªã€æ›¸ãé–“é•ãˆç­‰ã‚’æ­£è¦åŒ–ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é™„å±&amp;#34;&lt;/span&gt;, mode)[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &#39;ä»˜å±&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SUMMER&amp;#34;&lt;/span&gt;, mode)[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &#39;ã‚µãƒãƒ¼&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚·ãƒ¥ãƒŸãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³&amp;#34;&lt;/span&gt;, mode)[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &#39;ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³&#39;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ã“ã®ã‚ˆã†ãªé«˜æ€§èƒ½ãªå½¢æ…‹ç´ è§£æãƒ„ãƒ¼ãƒ«ãŒç„¡å„Ÿã§ã—ã‹ã‚‚å•†ç”¨åˆ©ç”¨ã‚‚å¯ã¨ã„ã†ã¨ã“ã‚ã«é©šãã‚’éš ã›ã¾ã›ã‚“ã€‚å¾Œè¿°ã—ã¾ã™ãŒã€ã“ã®Sudachiã§å½¢æ…‹ç´ è§£æã‚’è¡Œã£ãŸWord2vecãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹Chiveã‚‚ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚ºã¯æä¾›ã‚’ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;èª¬æ˜ãŒé•·ããªã‚Šã¾ã—ãŸãŒSudachiã§Tokenizationã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚Sudachiã¯&lt;code&gt;Python&lt;/code&gt;ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚èª¬æ˜ãŒå‰å¾Œã—ã¦ã„ã¾ã™ãŒã€ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã§è¡Œã£ã¦ã„ã‚‹ã‚ˆã†ã«&lt;code&gt;tokenizer&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€&lt;code&gt;tokenize()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§æ–‡ç« ã‚’Tokenizeã—ã¾ã™ã€‚Tokenizeã•ã‚ŒãŸçµæœã¯&lt;code&gt;MorphemeList&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚&lt;code&gt;MorphemeList&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å„è¦ç´ ã«å¯¾ã—ã¦&lt;code&gt;normalized_form()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§æ­£è¦åŒ–ã•ã‚ŒãŸå½¢æ…‹ç´ ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã“ã¾ã§ã‚’ã‚„ã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dictionary&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dictionary()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;create()
mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;C
tokenizer_sudachi &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; t: [m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(t, mode)]
tokens &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;map(tokenizer_sudachi)
tokens&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0    [ãƒ», åº—é ­, ã®, å–ã‚Šæ‰±ã„, é¡, ãŒ, å‰å¹´, æ¯”, ç´„, 120, %, ã¨, å¥½èª¿...
## 1    [ãƒ», å½“, æ–½è¨­, ã®, åˆ©ç”¨, ä¹—é™, å®¢æ•°, ã¯, 1, æœˆ, 26, æ—¥, æ™‚ç‚¹, ...
## 2    [ãƒ», å¹´, æœ«, ã®, æ¶ˆè²», ã®, åå‹•, ã‚‚, æœ‰ã‚‹, ã¦, ã‹, ã€, å®¢, ã®, ...
## 3    [ãƒ», å¤–å›½äºº, è¦³å…‰å®¢, ã«, ã‚ˆã‚‹, å£²ã‚Šä¸Šã’, ãŒ, å‰å¹´, æ¯”, 152, %, ã¨...
## 4    [ãƒ», ç©æ¥µçš„, ã , æ™¯æ°—, ãŒ, ä¸Šå‘ã, ã«, æœ‰ã‚‹, ã¨, ã¾ã§, ã¯, è¨€ã†, è¾›...
## Name: è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜, dtype: object
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Tokenizeã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚æ¬¡ã«5æ®µéšã®æ™¯æ³åˆ¤æ–­ã‚’Label Encodingã«å¤‰æ›ã—ã¾ã™ã€‚å¤‰æ›ã«ã¯&lt;code&gt;Scikit-Learn&lt;/code&gt;ã®&lt;code&gt;LabelEncoder&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;score_mapping &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â—&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â—‹&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â–²&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Ã—&amp;#39;&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;}
label &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;map(score_mapping)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã‚Œã§å‰å‡¦ç†ã¯å®Œäº†ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã®æŠ½å‡º&#34;&gt;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã®æŠ½å‡º&lt;/h3&gt;
&lt;p&gt;ã§ã¯ã€å®Ÿè·µã§ã™ã€‚&lt;code&gt;quanteda&lt;/code&gt;ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã‚‹ãŸã‚ã€&lt;code&gt;R&lt;/code&gt;ã§è¡Œã£ã¦ã„ãã¾ã™ã€‚å‰å‡¦ç†ã¯&lt;code&gt;R&lt;/code&gt;ã§å®Ÿæ–½æ¸ˆã¿ã§ã€&lt;code&gt;toks_sent&lt;/code&gt;ã¨ã„ã†å¤‰æ•°ã«å„æ–‡æ›¸ã®å½¢æ…‹ç´ ãŒæ–‡æ›¸åˆ¥ã«æ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®&lt;code&gt;toks_sent&lt;/code&gt;ã‹ã‚‰æ–‡æ›¸è¡Œåˆ—ã‚’ç”Ÿæˆã—ã¾ã™ã€‚æ–‡æ›¸è¡Œåˆ—ã¨ã¯ã€å˜èªã¨æ–‡æ›¸ã®é–¢ä¿‚ã‚’è¡¨ã™è¡Œåˆ—ã§ã€å„è¡ŒãŒå˜èª(token)ã€å„åˆ—ãŒæ–‡æ›¸ã‚’è¡¨ã—ã€å„è¦ç´ ã¯æ–‡æ›¸ä¸­ã®å˜èªã®å‡ºç¾å›æ•°ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ–‡æ›¸è¡Œåˆ—ã®ç”Ÿæˆ&lt;/span&gt;
dfmt_sent &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; toks_sent &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
              quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm&lt;/span&gt;(remove &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
              quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm_trim&lt;/span&gt;(min_termfreq &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ–‡æ›¸è¡Œåˆ—&lt;code&gt;dfmt_sent&lt;/code&gt;ã¨å„å˜èªã®ã‚¹ã‚³ã‚¢ãƒ™ã‚¯ãƒˆãƒ«ã®å†…ç©ã‚’å–ã‚Šã€æ–‡æ›¸ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å˜èªæ„Ÿæƒ…æ¥µæ€§å¯¾å¿œè¡¨&lt;/span&gt;
PNdict &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read.delim&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://www.lr.pi.titech.ac.jp/~takamura/pubs/pn_ja.dic&amp;#34;&lt;/span&gt;,header&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;,sep&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;:&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# è¾æ›¸ã®ä¸¦ã³ã«åˆã‚ã›ã¦æ–‡æ›¸è¡Œåˆ—ã®åˆ—ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã€‚&lt;/span&gt;
dfmt_sent_arranged &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm_match&lt;/span&gt;(dfmt_sent, PNdict&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;V1)

&lt;span style=&#34;color:#75715e&#34;&gt;# æ–‡æ›¸ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡º&lt;/span&gt;
n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unname&lt;/span&gt;(quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rowSums&lt;/span&gt;(dfmt_sent_arranged))
score_dict &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ifelse&lt;/span&gt;(n&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rowSums&lt;/span&gt;(dfmt_sent_arranged &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; PNdict&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;V4)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;n, &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;)
sample_with_score_dict &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(score_dict) 
sample_with_score_dict &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   åŸºæº–å¹´  åŸºæº–æ—¥ æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­                 æ¥­ç¨®ãƒ»è·ç¨®   åˆ¤æ–­ã®ç†ç”±
## 1   2016 1æœˆ31æ—¥             â—       æ—…è¡Œä»£ç†åº—ï¼ˆå¾“æ¥­å“¡ï¼‰ è²©å£²é‡ã®å‹•ã
## 2   2016 1æœˆ31æ—¥             â—         è¦³å…‰åæ‰€ï¼ˆå¾“æ¥­å“¡ï¼‰ æ¥å®¢æ•°ã®å‹•ã
## 3   2016 1æœˆ31æ—¥             â—‹ ä¸€èˆ¬å°å£²åº—ï¼»é…’ï¼½ï¼ˆçµŒå–¶è€…ï¼‰   å˜ä¾¡ã®å‹•ã
## 4   2016 1æœˆ31æ—¥             â—‹         ç™¾è²¨åº—ï¼ˆå£²å ´ä¸»ä»»ï¼‰ ãŠå®¢æ§˜ã®æ§˜å­
## 5   2016 1æœˆ31æ—¥             â—‹           ç™¾è²¨åº—ï¼ˆæ‹…å½“è€…ï¼‰ æ¥å®¢æ•°ã®å‹•ã
## 6   2016 1æœˆ31æ—¥             â—‹     ç™¾è²¨åº—ï¼ˆè²©å£²ä¿ƒé€²æ‹…å½“ï¼‰     ãã‚Œä»¥å¤–
##                                                                                                                                                                               è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜
## 1                                                                                                                                                            ãƒ»åº—é ­ã®å–æ‰±é¡ãŒå‰å¹´æ¯”ç´„120ï¼…ã¨å¥½èª¿ã§ã‚ã£ãŸã€‚
## 2                                                            ãƒ»å½“æ–½è¨­ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã¯ï¼‘æœˆ26æ—¥æ™‚ç‚¹ã§å‰å¹´æ¯”130.1ï¼…ã¨ãªã£ã¦ãŠã‚Šã€ï¼‘æœˆã¨ã—ã¦ã¯éå»æœ€é«˜ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã«ãªã‚‹ã“ã¨ãŒç¢ºå®šã—ãŸã»ã©ã®å…¥è¾¼çŠ¶æ³ã«ã‚ã‚‹ã€‚
## 3                                                           ãƒ»å¹´æœ«ã®æ¶ˆè²»ã®åå‹•ã‚‚ã‚ã£ã¦ã‹ã€å®¢ã®å‹•ããŒã‚„ã‚„éˆã„ã€‚ãŸã ã€ç›¸å¤‰ã‚ã‚‰ãšé«˜é¡å•†æãŒå£²ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€å£²ä¸Šã¯ãã‚Œãªã‚Šã®é‡‘é¡ã‚’ã‚­ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã€‚
## 4 ãƒ»å¤–å›½äººè¦³å…‰å®¢ã«ã‚ˆã‚‹å£²ä¸ŠãŒå‰å¹´æ¯”152ï¼…ã¨å¥½èª¿ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ã»ã‹ã€æ¥å®¢æ•°ãŒå‰å¹´æ¯”102ï¼…ã¨å¥½èª¿ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚æœˆåŠã°ã«åœæ»ã—ãŸå£²ä¸Šã‚‚ä¸‹æ—¬ã«å…¥ã£ã¦ã‹ã‚‰å›å¾©å‚¾å‘ã«ã‚ã‚Šã€å®šä¾¡å“ã€ãƒãƒ¼ã‚²ãƒ³å“ã¨ã‚‚å‰å¹´ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã€‚
## 5                                                                                                                 ãƒ»ç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã«ã‚ã‚‹ã¨ã¾ã§ã¯ã„ã„ã¥ã‚‰ã„ã‚‚ã®ã®ã€ï¼“ã‹æœˆå‰ã¨ã®æ¯”è¼ƒã§ã¯æ”¹å–„ã—ã¦ã„ã‚‹ã€‚
## 6                                                                     ãƒ»æ°—æ¸©ãŒå¹³å¹´ä¸¦ã¿ã¨ãªã‚Šã€ã“ã‚Œã¾ã§ã®æ¸©æš–ã€å°‘é›ªã®çŠ¶æ…‹ãŒã¿ã‚‰ã‚Œãªããªã£ã¦ããŸã“ã¨ã§ã€é˜²å¯’è¡£æ–™ã€é›‘è²¨å•†æã‚’ä¸­å¿ƒã«å¤šå°‘æ”¹å–„ã®å‚¾å‘ãŒã¿ã‚‰ã‚Œã‚‹ã€‚
##     score_dict
## 1 -0.348178400
## 2 -0.565735877
## 3 -0.612866000
## 4 -0.325386370
## 5  0.006678875
## 6 -0.476283793
&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# çµæœã®å¯è¦–åŒ–&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(ggplot2)
&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(sample_with_score_dict, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;score_dict)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_boxplot&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post27/index_files/figure-html/unnamed-chunk-13-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã€Œæ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã€æ¯ã«boxplotã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸãŒã€ã±ã£ã¨è¦‹ã¯ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„çµæœã«ãªã‚Šã¾ã—ãŸã€‚
ã©ã®åˆ¤æ–­ã‚‚-0.5ãã‚‰ã„ãŒå¹³å‡ã§ã€ã»ã‚“ã®å°‘ã—ç·©ã‚„ã‹ã«å³è‚©ä¸ŠãŒã‚Šã®ã‚ˆã†ãªæ°—ã‚‚ã—ã¾ã™ãŒã€æ–‡æ›¸ã‚’åˆ†é¡ã§ãã¦ã„ã‚‹è¨€ãˆã‚‹çµæœã§ã¯ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-çµ‚ã‚ã‚Šã«&#34;&gt;3. çµ‚ã‚ã‚Šã«&lt;/h2&gt;
&lt;p&gt;æœ€ã‚‚ç°¡æ˜“ãªæ‰‹æ³•ã¨ã„ã†ã“ã¨ã§äºˆæƒ³ã¯ã—ã¦ã„ã¾ã—ãŸãŒã€è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã§ã¯ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã®æŠ½å‡ºã¯ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã¡ã‚ã‚“ã€ç§ã®ã‚„ã‚Šæ–¹ãŒæ‚ªã„ã®ãŒç†ç”±ã§ä¸Šæ‰‹ãã‚„ã‚Œã°æ–‡æ›¸ã®åˆ†é¡ã¯å¯èƒ½ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãŸã ã€çµŒæ¸ˆã«ç‰¹åŒ–ã—ãŸæ¥µæ€§è¾æ›¸ã‚’æº–å‚™ã—ãªã‘ã‚Œã°é›£ã—ã„ã®ã§ã¯ãªã„ã‹ã¨ã„ã†ã®ãŒã€ç§ã®æ„Ÿæƒ³ã§ã™ã€‚
æ¬¡ã¯ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã‚’ç”¨ã„ãŸæ–‡æ›¸åˆ†é¡ã«å–ã‚Šçµ„ã¿ã¾ã™ã€‚
ã“ã“ã¾ã§ã€èª­ã¿é€²ã‚ã¦é ‚ãã¾ã—ã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚æ¬¡å›ã®è¨˜äº‹ã‚‚æœŸå¾…ã—ã¦ã„ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;div id=&#34;refs&#34; class=&#34;references csl-bib-body hanging-indent&#34;&gt;
&lt;div id=&#34;ref-takamura2005&#34; class=&#34;csl-entry&#34;&gt;
&lt;p&gt;Takamura, Hiroya, Takashi Inui, and Manabu Okumura. 2005. â€œThe 43rd Annual Meeting.â€ In. Association for Computational Linguistics. &lt;a href=&#34;https://doi.org/10.3115/1219840.1219857&#34;&gt;https://doi.org/10.3115/1219840.1219857&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;ref-TAKAOKA18.8884&#34; class=&#34;csl-entry&#34;&gt;
&lt;p&gt;Takaoka, Kazuma, Sorami Hisamoto, Noriko Kawahara, Miho Sakamoto, Yoshitaka Uchida, and Yuji Matsumoto. 2018. â€œSudachi: A Japanese Tokenizer for Business.â€ In &lt;em&gt;Proceedings of the Eleventh International Conference on Language Resources and Evaluation (LREC 2018)&lt;/em&gt;, edited by Nicoletta Calzolari (Conference chair), Khalid Choukri, Christopher Cieri, Thierry Declerck, Sara Goggi, Koiti Hasida, Hitoshi Isahara, et al. Paris, France: European Language Resources Association (ELRA).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>ã€å¾¹åº•æ¯”è¼ƒã€‘ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºæ‰‹æ³•ï¼ï¼ - ç¬¬1å›</title>
      <link>/post/post25/</link>
      <pubDate>Mon, 21 Mar 2022 00:00:00 +0000</pubDate>
      <guid>/post/post25/</guid>
      <description>&lt;script src=&#34;./post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;./post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;./post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;./post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;./post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;./post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;./post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;./post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;./post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;./post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;./post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;./post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;./post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;./post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;./post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;./post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;./post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;./post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;./post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;./post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;./post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;./post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;./post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;./post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;./post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;./post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;./post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;./post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ãƒ†ã‚­ã‚¹ãƒˆè§£æã¯ãƒ‡ãƒ¼ã‚¿åˆ†æç•Œéšˆã§ã¯ã‚‚ã†ã‹ãªã‚Šå½“ãŸã‚Šå‰ã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆã®æ„Ÿæ€§æƒ…å ±(ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ)ã‚’æŠ½å‡ºã™ã‚‹æ‰‹æ³•ã«ã¯ã€ã©ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã‹ã‚ã‚‹ã®ã‹èª¿ã¹ãŸã¨ã“ã‚ã‹ãªã‚Šæ™‚ä»£ã¯é€²ã‚“ã§ã„ã‚‹ã¨å®Ÿæ„Ÿã—ã¾ã—ãŸã€‚ä»Šå›ã¯å®Ÿéš›ã«&lt;code&gt;R&lt;/code&gt;ã‚„&lt;code&gt;Python&lt;/code&gt;ã§ä½œæˆã—ãŸæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦ã€ãã‚Œã‚‰ã®ç²¾åº¦ã‚’æ¯”è¼ƒã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ ä»Šå›ã¯ãã®ç¬¬ï¼‘å›ç›®ã¨ã„ã†ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚„å…¨ä½“æ„Ÿã®ãŠè©±ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-è§£ããŸã„å•é¡Œ&#34;&gt;1. è§£ããŸã„å•é¡Œ&lt;/h2&gt;
&lt;p&gt;ä»Šå›è§£ããŸã„å•é¡Œã¯ã€Œæ™¯æ³æ„Ÿã‚’è¡¨ã™æ–‡æ›¸è¡¨ç¾ã‚’å­¦ç¿’ã—ã€å®Ÿéš›ã®æ™¯æ°—åˆ¤æ–­ã‚’äºˆæ¸¬ã™ã‚‹ã€ã¨ã„ã†ã‚¿ã‚¹ã‚¯ã§ã™ã€‚ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã¯ã€å†…é–£åºœãŒå‡ºã—ã¦ã„ã‚‹æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã¨ã¯&#34;&gt;æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã¨ã¯&lt;/h3&gt;
&lt;p&gt;æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã¨ã¯ã€å†…é–£åºœãŒæœˆæ¬¡ã§å…¬è¡¨ã—ã¦ã„ã‚‹æ™¯æ°—å‹•å‘åˆ¤æ–­ã®ãŸã‚ã®çµ±è¨ˆæƒ…å ±ã§ã™ã€‚èª¿æŸ»ã®ç›®çš„ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™(&lt;a href=&#34;https://www5.cao.go.jp/keizai3/watcher/watcher_mokuteki.html#mokuteki&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å†…é–£åºœWebã‚µã‚¤ãƒˆ&lt;/a&gt;ã‚ˆã‚Š)ã€‚&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;&amp;lt;èª¿æŸ»ã®ç›®çš„&amp;gt;&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;åœ°åŸŸã®æ™¯æ°—ã«é–¢é€£ã®æ·±ã„å‹•ãã‚’è¦³å¯Ÿã§ãã‚‹ç«‹å ´ã«ã‚ã‚‹äººã€…ã®å”åŠ›ã‚’å¾—ã¦ã€åœ°åŸŸã”ã¨ã®æ™¯æ°—å‹•å‘ã‚’çš„ç¢ºã‹ã¤è¿…é€Ÿã«æŠŠæ¡ã—ã€æ™¯æ°—å‹•å‘åˆ¤æ–­ã®åŸºç¤è³‡æ–™ã¨ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã™ã‚‹ã€‚&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;ã§ã¯ã€ã“ã®ã€Œåœ°åŸŸã®æ™¯æ°—ã«é–¢é€£ã®æ·±ã„å‹•ãã‚’è¦³å¯Ÿã§ãã‚‹ç«‹å ´ã«ã‚ã‚‹äººã€…ã€ã€ã€Œåœ°åŸŸã”ã¨ã®æ™¯æ°—å‹•å‘ã€ã€ã€Œçš„ç¢ºã‹ã¤è¿…é€Ÿã«ã€ã¨ã„ã†éƒ¨åˆ†ã«ã¤ã„ã¦å°‘ã—æ·±æ˜ã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;èª¿æŸ»ã®å¯¾è±¡ç¯„å›²&#34;&gt;èª¿æŸ»ã®å¯¾è±¡ç¯„å›²&lt;/h4&gt;
&lt;p&gt;èª¿æŸ»ã®å¯¾è±¡ç¯„å›²ã¯47éƒ½é“åºœçœŒã¨ãªã£ã¦ã„ã¾ã™ã€‚ã¾ãŸã€èª¿æŸ»å¯¾è±¡è€…ã¯ã€Œå®¶è¨ˆå‹•å‘ã€ä¼æ¥­å‹•å‘ã€é›‡ç”¨ç­‰ã€ä»£è¡¨çš„ãªçµŒæ¸ˆæ´»å‹•é …ç›®ã®å‹•å‘ã‚’æ•æ„Ÿã«åæ˜ ã™ã‚‹ç¾è±¡ã‚’è¦³å¯Ÿã§ãã‚‹æ¥­ç¨®ã®é©å½“ãªè·ç¨®ã®ä¸­ã‹ã‚‰é¸å®šã—ãŸ2,050äººã€ã¨ãªã£ã¦ãŠã‚Šã€ä¾‹ãˆã°å°å£²åº—ã‚„é£²é£Ÿåº—ã®åº—å“¡ãƒ»åº—é•·ã€ã‚¿ã‚¯ã‚·ãƒ¼é‹è»¢æ‰‹ã€è£½é€ æ¥­ãƒ»éè£½é€ æ¥­ä¼æ¥­ã®çµŒå–¶è€…ãƒ»å¾“æ¥­å“¡ã€äººææ´¾é£ä¼šç¤¾ç¤¾å“¡ãªã©ã‚’å¯¾è±¡ã«è¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;èª¿æŸ»æœŸæ—¥ãŠã‚ˆã³æœŸé–“&#34;&gt;èª¿æŸ»æœŸæ—¥ãŠã‚ˆã³æœŸé–“&lt;/h4&gt;
&lt;p&gt;èª¿æŸ»ã¯æœˆæ¬¡ã§è¡Œã‚ã‚Œã€æ¯æœˆ25æ—¥ã‹ã‚‰æœˆæœ«ã«ã‹ã‘ã¦å®Ÿæ–½ã•ã‚Œã¾ã™ã€‚å½“æœˆã®æ™¯æ³æ„Ÿã«ã¤ã„ã¦èª¿æŸ»ãŒè¡Œã‚ã‚Œã€ç¿Œæœˆã«å…¬è¡¨ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;èª¿æŸ»ã®å®Ÿæ–½æ–¹æ³•&#34;&gt;èª¿æŸ»ã®å®Ÿæ–½æ–¹æ³•&lt;/h4&gt;
&lt;p&gt;ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆèª¿æŸ»ã‚’é›»è©±ãƒ»Webã‚µã‚¤ãƒˆãƒ»é›»å­ãƒ¡ãƒ¼ãƒ«ã®ã„ãšã‚Œã‹ã§å›ç­”ã™ã‚‹ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚è³ªå•é …ç›®ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™(&lt;a href=&#34;https://www5.cao.go.jp/keizai3/watcher/chousahyo.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;èª¿æŸ»ç¥¨&lt;/a&gt;)ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ™¯æ°—ã®ç¾çŠ¶ã«å¯¾ã™ã‚‹åˆ¤æ–­ï¼ˆæ–¹å‘æ€§ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;1.ã®ç†ç”±&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2.ã®è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜(è‡ªç”±è¨˜è¿°)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ™¯æ°—ã®å…ˆè¡Œãã«å¯¾ã™ã‚‹åˆ¤æ–­(æ–¹å‘æ€§)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(4)ã®ç†ç”±&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(å‚è€ƒ)æ™¯æ°—ã®ç¾çŠ¶ã«å¯¾ã™ã‚‹åˆ¤æ–­(æ°´æº–)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ã”å‚è€ƒã¾ã§ã«2016å¹´1æœˆèª¿æŸ»ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ãŠè¦‹ã›ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(magrittr)
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_csv&lt;/span&gt;(r&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(C:\Users\aashi\Desktop\TextMining\æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼\ç”Ÿãƒ‡ãƒ¼ã‚¿\watcher_2016.csv)&amp;#34;&lt;/span&gt;,locale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;locale&lt;/span&gt;(encoding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SHIFT-JIS&amp;#34;&lt;/span&gt;), show_col_types&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;options&lt;/span&gt;(kableExtra.html.bsTable &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;)
knitr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(sample)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; åŸºæº–å¹´ &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; åŸºæº–æ—¥ &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; æ¥­ç¨®ãƒ»è·ç¨® &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; åˆ¤æ–­ã®ç†ç”± &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â— &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ—…è¡Œä»£ç†åº—ï¼ˆå¾“æ¥­å“¡ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è²©å£²é‡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»åº—é ­ã®å–æ‰±é¡ãŒå‰å¹´æ¯”ç´„120ï¼…ã¨å¥½èª¿ã§ã‚ã£ãŸã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â— &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è¦³å…‰åæ‰€ï¼ˆå¾“æ¥­å“¡ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ¥å®¢æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»å½“æ–½è¨­ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã¯ï¼‘æœˆ26æ—¥æ™‚ç‚¹ã§å‰å¹´æ¯”130.1ï¼…ã¨ãªã£ã¦ãŠã‚Šã€ï¼‘æœˆã¨ã—ã¦ã¯éå»æœ€é«˜ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã«ãªã‚‹ã“ã¨ãŒç¢ºå®šã—ãŸã»ã©ã®å…¥è¾¼çŠ¶æ³ã«ã‚ã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ä¸€èˆ¬å°å£²åº—ï¼»é…’ï¼½ï¼ˆçµŒå–¶è€…ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å˜ä¾¡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»å¹´æœ«ã®æ¶ˆè²»ã®åå‹•ã‚‚ã‚ã£ã¦ã‹ã€å®¢ã®å‹•ããŒã‚„ã‚„éˆã„ã€‚ãŸã ã€ç›¸å¤‰ã‚ã‚‰ãšé«˜é¡å•†æãŒå£²ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€å£²ä¸Šã¯ãã‚Œãªã‚Šã®é‡‘é¡ã‚’ã‚­ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç™¾è²¨åº—ï¼ˆå£²å ´ä¸»ä»»ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãŠå®¢æ§˜ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»å¤–å›½äººè¦³å…‰å®¢ã«ã‚ˆã‚‹å£²ä¸ŠãŒå‰å¹´æ¯”152ï¼…ã¨å¥½èª¿ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ã»ã‹ã€æ¥å®¢æ•°ãŒå‰å¹´æ¯”102ï¼…ã¨å¥½èª¿ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚æœˆåŠã°ã«åœæ»ã—ãŸå£²ä¸Šã‚‚ä¸‹æ—¬ã«å…¥ã£ã¦ã‹ã‚‰å›å¾©å‚¾å‘ã«ã‚ã‚Šã€å®šä¾¡å“ã€ãƒãƒ¼ã‚²ãƒ³å“ã¨ã‚‚å‰å¹´ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç™¾è²¨åº—ï¼ˆæ‹…å½“è€…ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ¥å®¢æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»ç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã«ã‚ã‚‹ã¨ã¾ã§ã¯ã„ã„ã¥ã‚‰ã„ã‚‚ã®ã®ã€ï¼“ã‹æœˆå‰ã¨ã®æ¯”è¼ƒã§ã¯æ”¹å–„ã—ã¦ã„ã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç™¾è²¨åº—ï¼ˆè²©å£²ä¿ƒé€²æ‹…å½“ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãã‚Œä»¥å¤– &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»æ°—æ¸©ãŒå¹³å¹´ä¸¦ã¿ã¨ãªã‚Šã€ã“ã‚Œã¾ã§ã®æ¸©æš–ã€å°‘é›ªã®çŠ¶æ…‹ãŒã¿ã‚‰ã‚Œãªããªã£ã¦ããŸã“ã¨ã§ã€é˜²å¯’è¡£æ–™ã€é›‘è²¨å•†æã‚’ä¸­å¿ƒã«å¤šå°‘æ”¹å–„ã®å‚¾å‘ãŒã¿ã‚‰ã‚Œã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;å•é¡Œè¨­å®š&#34;&gt;å•é¡Œè¨­å®š&lt;/h3&gt;
&lt;p&gt;ä»Šå›ã®å•é¡Œè¨­å®šã¯ã€ã€Œè¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ã€ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‚’ã‚‚ã¨ã«ã€ã€Œæ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã€ã‚’äºˆæ¸¬ã™ã‚‹ã‚¿ã‚¹ã‚¯ã«ãªã‚Šã¾ã™ã€‚
ã€Œæ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã€ã¯ã€Œè‰¯ã„ã€ã€ã€Œã‚„ã‚„è‰¯ã„ã€ã€ã€Œã©ã¡ã‚‰ã¨ã‚‚è¨€ãˆãªã„ã€ã€ã€Œã‚„ã‚„æ‚ªã„ã€ã€ã€Œæ‚ªã„ã€ã¨ãªã£ã¦ãŠã‚Šã€ã“ã‚Œã‚’2å€¤åˆ†é¡å•é¡Œã«ã—ã¦å­¦ç¿’ã‚’è¡Œã„ã¾ã™(ã©ã¡ã‚‰ã¨ã‚‚è¨€ãˆãªã„ã¯ãƒã‚¬ãƒ†ã‚£ãƒ–ã«åˆ†é¡)ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ãƒ†ã‚­ã‚¹ãƒˆè§£ææ‰‹æ³•ã®é€²åŒ–ã®è­œç³»&#34;&gt;2. ãƒ†ã‚­ã‚¹ãƒˆè§£ææ‰‹æ³•ã®é€²åŒ–ã®è­œç³»&lt;/h2&gt;
&lt;p&gt;ä¸Šè¨˜å•é¡Œè¨­å®šã‚’è§£ããŸã‚ã«ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‹ã‚‰æ„Ÿæ€§æƒ…å ±(ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ)ã‚’æŠ½å‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§ãŒèª¿ã¹ãŸæµ…ã„çŸ¥è­˜ã«ã‚ˆã‚‹ã¨ã€æ„Ÿæ€§æƒ…å ±ã®æŠ½å‡ºæ–¹æ³•ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ‰‹æ³•ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹&lt;/li&gt;
&lt;li&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨&lt;/li&gt;
&lt;li&gt;å˜èªåŸ‹ã‚è¾¼ã¿(Word Embedding)ã‚’ç”¨ã„ãŸæ–¹æ³•&lt;/li&gt;
&lt;li&gt;Recurrent neural network(RNN)&lt;/li&gt;
&lt;li&gt;Transformer&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ãŠãã‚‰ãã€ä¸‹ã«è¡Œãã«ã¤ã‚Œã¦ã‚ˆã‚Šæœ€æ–°ã®æ‰‹æ³•ã«ãªã£ã¦ãŠã‚Šã€ç²¾åº¦ã‚‚é«˜ã„ã®ã§ã¯ãªã„ã‹ã¨æ¨å¯Ÿã•ã‚Œã¾ã™ã€‚ ã¾ãŸã€1,2,3ã¯ã‚„ã‚Šæ–¹ã«ã‚‚ã‚ˆã‚‹ã‚“ã§ã—ã‚‡ã†ãŒæ–‡ç« ãŒä¸ãˆã‚‰ã‚ŒãŸéš›ã«ãã®èªé †é–¢ä¿‚ã‚’è€ƒæ…®ã—ã¾ã›ã‚“ã€‚ ä»Šå¾Œã€å„æ‰‹æ³•ã«ã¤ã„ã¦è§£æçµæœã®è¨˜äº‹ã‚’æŠ•ç¨¿ã™ã‚‹äºˆå®šã§ã™ã®ã§ã€è©³ã—ã„ä¸­èº«ã«ã¤ã„ã¦ã¯ãã‚Œãã‚Œã®å›ã§è§¦ã‚ŒãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æ¦‚è¦³&#34;&gt;3. ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æ¦‚è¦³&lt;/h2&gt;
&lt;h3 id=&#34;ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿&lt;/h3&gt;
&lt;p&gt;ä»Šå›ä½¿ç”¨ã™ã‚‹æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã®ã‚µãƒ³ãƒ—ãƒ«ã¯2016å¹´~2020å¹´ã®ã‚‚ã®ã¨ãªã£ã¦ã„ã¾ã™ã€‚ç¾çŠ¶åˆ¤æ–­ã®èª¿æŸ»çµæœã‚’æ ¼ã®ã—ãŸcsvãƒ•ã‚¡ã‚¤ãƒ«(æ™¯æ°—åˆ¤æ–­ç†ç”±é›†)ã‚’æœˆã”ã¨ã«å†…é–£åºœã®Webãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€æ•´å½¢ã—ãŸã‚‚ã®ã‚’å¹´ã”ã¨ã«é€£çµã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;filepath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; r&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(C:\Users\hogehoge\Watcher\RawData)&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;files &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(filepath, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;list.files&lt;/span&gt;(filepath, pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*.csv&amp;#34;&lt;/span&gt;))
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_csv&lt;/span&gt;(files, locale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;locale&lt;/span&gt;(encoding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SHIFT-JIS&amp;#34;&lt;/span&gt;), show_col_types &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œï¼ã€ã¯å›ç­”ãŒå­˜åœ¨ã—ãªã„ã€ã€Œï¼Šã€ã¯ä¸»ã ã£ãŸå›ç­”ç­‰ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€é™¤å¤–&lt;/span&gt;
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample[sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼&amp;#34;&lt;/span&gt;,]
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample[sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼Š&amp;#34;&lt;/span&gt;,]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;çŸ¥ã‚‰ãªã‹ã£ãŸã‚“ã§ã™ãŒã€&lt;code&gt;readr::read_csv&lt;/code&gt;ã£ã¦2.0.0ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆã‚’å¼•æ•°ã¨ã—ã¦csvã‚’èª­ã¿è¾¼ã¿ã€ãã®çµæœã‚’é€£çµã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã‚“ã§ã™ã­ã€‚åœ°å‘³ã«ä¾¿åˆ©ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;/h3&gt;
&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã¯76800ã§ã—ãŸã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã¨ã—ã¦ã¯ç”³ã—åˆ†ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(sample)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 76800
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¿µã®ãŸã‚ã€å„å¹´ã”ã¨ã«ã‚‚è¦‹ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(magrittr)
sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(åŸºæº–å¹´) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1)) %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; åŸºæº–å¹´ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 15168 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 19.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2017 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 16724 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 21.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2018 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 14756 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 19.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2019 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 14588 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 19.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2020 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 15564 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 20.3 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å„å¹´ãŠã‚ˆã14,000~16,000ã‚µãƒ³ãƒ—ãƒ«ã»ã©å­˜åœ¨ã™ã‚‹ã‚ˆã†ã§ã™ã€‚å¤§ããªãƒãƒ©ãƒ„ã‚­ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã®åˆ†å¸ƒ&#34;&gt;&lt;code&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/code&gt;ã®åˆ†å¸ƒ&lt;/h3&gt;
&lt;p&gt;ã“ã‚Œã‹ã‚‰äºˆæ¸¬ã‚’è¡Œã†&lt;code&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/code&gt;ã¯ã©ã®ã‚ˆã†ãªåˆ†å¸ƒã«ãªã£ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;factor&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­, levels&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â—&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â—‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–¡&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–²&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Ã—&amp;#34;&lt;/span&gt;))
sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1)) %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1569 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 14370 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 18.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â–¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 34438 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 44.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â–² &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 18642 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 24.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; Ã— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 7781 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 10.1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ€ã£ãŸã‚ˆã‚Šã‚­ãƒ¬ã‚¤ãªåˆ†å¸ƒã‚’ã—ã¦ã„ã‚‹å°è±¡ã§ã™ã€‚ã“ã®ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ã§ã¯ã€ã€Œã©ã¡ã‚‰ã¨ã‚‚è¨€ãˆãªã„ã€ãŒæœ€ã‚‚å¤šãã€ã¾ãŸã€æ¯”è¼ƒçš„ã€Œã‚„ã‚„æ‚ªã„ã€ã‚„ã€Œæ‚ªã„ã€ãŒå¤šã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã®ã‚ãŸã‚Šã¯2019å¹´åº¦ä»¥é™ã®ã‚³ãƒ­ãƒŠç¦ã®å½±éŸ¿ã‚’åæ˜ ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€æ–°ãŸã«æ™‚é–“è»¸ã‚’è¿½åŠ ã—ã€ã‚¯ãƒ­ã‚¹é›†è¨ˆã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(åŸºæº–å¹´, æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;tally&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  tidyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;spread&lt;/span&gt;(æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­, n) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  knitr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; åŸºæº–å¹´ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; â— &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; â—‹ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; â–¡ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; â–² &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; Ã— &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 235 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2455 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 7546 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4129 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 803 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2017 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 375 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4031 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8681 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3053 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 584 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2018 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 349 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3105 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 7340 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3336 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 626 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2019 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 237 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2050 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6743 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4516 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1042 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2020 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 373 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2729 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4128 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3608 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4726 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã‚„ã¯ã‚Šã€2019å¹´ä»¥é™ã€Œæ‚ªã„ã€ãŒå¤šãå‡ºç¾ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ä¸€æ–¹ã§ã€ã€Œã‚„ã‚„æ‚ªã„ã€ã¯ãã‚Œä»¥å‰ã®å¹´ã§ã‚‚æ’å¸¸çš„ã«å¤šã„ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å›ç­”è€…ã®å±æ€§&#34;&gt;å›ç­”è€…ã®å±æ€§&lt;/h3&gt;
&lt;p&gt;æ¬¡ã«å›ç­”è€…ã®å±æ€§ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚å›ç­”è€…ã®å±æ€§ã¯&lt;code&gt;æ¥­ç¨®ãƒ»è·ç¨®&lt;/code&gt;ã‹ã‚‰å–å¾—ã§ãã¾ã™ã€‚ã¾ãšã€ã©ã†ã„ã£ãŸæ¥­ç¨®ãŒå¤šãå›ç­”ã—ã¦ã„ã‚‹ã®ã‹ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚å›ç­”æ•°ä¸Šä½10ç•ªç›®ã¾ã§ã®æ¥­ç¨®ã‚’è¡¨ç¤ºã•ã›ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(æ¥­ç¨® &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_remove&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`æ¥­ç¨®ãƒ»è·ç¨®`, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼ˆ.+ï¼‰&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_remove&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼».+ï¼½&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(æ¥­ç¨®) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;arrange&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;desc&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;top_n&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1)) %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; æ¥­ç¨® &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç™¾è²¨åº— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4959 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 15.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ã‚¹ãƒ¼ãƒ‘ãƒ¼ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4738 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 14.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ä¸€èˆ¬å°å£²åº— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3851 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 11.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ã‚³ãƒ³ãƒ“ãƒ‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3772 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 11.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ä¹—ç”¨è»Šè²©å£²åº— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2967 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 9.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; é€šä¿¡ä¼šç¤¾ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2866 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å•†åº—è¡— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2734 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; äººææ´¾é£ä¼šç¤¾ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2700 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è¡£æ–™å“å°‚é–€åº— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2128 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è·æ¥­å®‰å®šæ‰€ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2088 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.4 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å›ç­”æ•°ä¸Šä½ã«ã¯ã€ç™¾è²¨åº—ã‚„ã‚¹ãƒ¼ãƒ‘ãƒ¼ãªã©å°å£²åº—ãŒç›®ç«‹ã¡ã¾ã™ã€‚ã¾ãŸã€è»Šã®ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®æ–¹ã‚„äººææ´¾é£ä¼šç¤¾ãªã©ç”Ÿç”£ãƒ»é›‡ç”¨ã«é–¢é€£ã™ã‚‹æ¥­ç¨®ã®å›ç­”è€…ã‚‚å¤šã„ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ã€çµŒå–¶è€…ã‚„è·å“¡ãªã©è·ç¨®ã®åˆ†å¸ƒã‚’ç¢ºèªã—ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚ä¸Šä½10ä½ã¾ã§ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(è·ç¨® &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`æ¥­ç¨®ãƒ»è·ç¨®`, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼ˆ.+ï¼‰&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_remove&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼ˆ&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
  stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_remove&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼‰&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(è·ç¨®) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;arrange&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;desc&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;top_n&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1)) %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; è·ç¨® &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; çµŒå–¶è€… &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 20612 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 40.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å–¶æ¥­æ‹…å½“ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 7057 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 13.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å¾“æ¥­å“¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4371 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; åº—é•· &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4343 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; NA &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3145 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è·å“¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3118 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç·å‹™æ‹…å½“ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2930 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ä»£è¡¨è€… &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2615 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç¤¾å“¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1796 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å½¹å“¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1518 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2.9 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è·ç¨®åˆ¥ã§ã¯çµŒå–¶è€…ãŒãƒ€ãƒ³ãƒˆãƒ„ã§å¤šã„çµæœã¨ãªã‚Šã¾ã—ãŸã€‚ä»£è¡¨è€…ãªã©è¡¨è¨˜æºã‚Œã‚‚ã‚ã‚Šã¾ã™ã®ã§ã€å®Ÿæ…‹ã¯ã‚‚ã†å°‘ã—å¤šã„ã¨æ€ã„ã¾ã™ã€‚æƒ³åƒã§ã¯ã€ç¾å ´ã®è·å“¡ã®æ–¹ã®å›ç­”ãŒå¤šã„ã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒäºˆæƒ³ã¨ã¯ç•°ãªã‚‹çµæœã¨ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ™¯æ°—åˆ¤æ–­ã®ç†ç”±ã®åˆ†å¸ƒ&#34;&gt;&lt;code&gt;(æ™¯æ°—)åˆ¤æ–­ã®ç†ç”±&lt;/code&gt;ã®åˆ†å¸ƒ&lt;/h3&gt;
&lt;p&gt;æ¬¡ã«&lt;code&gt;(æ™¯æ°—)åˆ¤æ–­ã®ç†ç”±&lt;/code&gt;ã®åˆ†å¸ƒã‚’è¦‹ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
            dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(åˆ¤æ–­ã®ç†ç”±) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
            dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
            dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;arrange&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;desc&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
            dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1))
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;            
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;results %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; åˆ¤æ–­ã®ç†ç”± &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ¥å®¢æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 17432 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 22.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è²©å£²é‡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 16153 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 21.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãŠå®¢æ§˜ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 11511 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 15.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å—æ³¨é‡ã‚„è²©å£²é‡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 9033 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 11.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å–å¼•å…ˆã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5034 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.6 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ±‚äººæ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4155 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãã‚Œä»¥å¤– &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4007 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å˜ä¾¡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3654 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç«¶äº‰ç›¸æ‰‹ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1603 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å‘¨è¾ºä¼æ¥­ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1161 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å—æ³¨ä¾¡æ ¼ã‚„è²©å£²ä¾¡æ ¼ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1099 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ±‚è·è€…æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 930 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ¡ç”¨è€…æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 666 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 0.9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; é›‡ç”¨å½¢æ…‹ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 361 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 0.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è²©å£²é‡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 0.0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã€Œæ¥å®¢æ•°ã®å‹•ãã€ã¨ã€Œè²©å£²é‡ã®å‹•ãã€ãŒå¤šãã€ã€ŒãŠå®¢æ§˜ã®æ§˜å­ã€ã‚„ã€Œå—æ³¨é‡ã‚„è²©å£²é‡ã®å‹•ãã€ã¾ã§å«ã‚ã‚‹ã¨7å‰²ã‚’å ã‚ã¾ã™ã€‚å›ç­”æ¥­ç¨®ã«å°å£²åº—ãŒå¤šã„ã“ã¨ã‹ã‚‰ã€ã“ã®ã‚ˆã†ãªé …ç›®ãŒä¸Šä½ã«ãã¦ã„ã‚‹ã®ã ã¨æ¨å¯Ÿã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-çµ‚ã‚ã‚Šã«&#34;&gt;4. çµ‚ã‚ã‚Šã«&lt;/h2&gt;
&lt;p&gt;ã“ã‚Œã‹ã‚‰å„å›ã§ä»¥ä¸‹ã®æ‰‹æ³•ã‚’ç”¨ã„ãŸäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰ã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚æ¬¡å›ã¯ã€è¾æ›¸ãƒ™ãƒ¼ã‚¹ã«åŸºã¥ãã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã®æŠ½å‡ºã‚’è¡Œã„ã€æ–‡æ›¸ã®ãƒã‚¸ãƒã‚¬åˆ†é¡ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹&lt;/li&gt;
&lt;li&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨&lt;/li&gt;
&lt;li&gt;å˜èªåŸ‹ã‚è¾¼ã¿(Word Embedding)ã‚’ç”¨ã„ãŸæ–¹æ³•&lt;/li&gt;
&lt;li&gt;Recurrent neural network(RNN)&lt;/li&gt;
&lt;li&gt;Transformer&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®Ÿã¯ã€è§£æè‡ªä½“ã¯å…¨ã¦å®Œäº†ã—ã¦ãŠã‚Šã€æ–‡æ›¸ã‚’æ›¸ãã ã‘ã®ãƒ•ã‚§ãƒ¼ã‚ºã«ãªã£ã¦ã„ã¾ã™ã€‚ã¡ã‚ƒã‚“ã¨çµæœã‚‚å‡ºã¦ã„ã¾ã™ã®ã§ã€ä¹ã†ã”æœŸå¾…ã§ã™ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>è»¢è·ã—ã¾ã™</title>
      <link>/post/post26/</link>
      <pubDate>Tue, 01 Feb 2022 00:00:00 +0000</pubDate>
      <guid>/post/post26/</guid>
      <description>&lt;h2 id=&#34;1-é€€è·ã—ã¾ã—ãŸ&#34;&gt;1. é€€è·ã—ã¾ã—ãŸ&lt;/h2&gt;
&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ã‹ãªã‚Šä¹…ã—ã¶ã‚Šã®æ›´æ–°ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã“ã®é–“ã€2021å¹´7æœˆ7æ—¥ã«çµå©šã—ã€æ—¢å©šè€…ã«ãªã‚Šã¾ã—ãŸã€‚ã¾ãŸã€2021å¹´4æœˆã«åŒã˜éƒ¨ç½²å†…ã®ãƒãƒ¼ãƒ ã‚’ç§»å‹•ã—ã€BPRãƒ»æ¥­å‹™ã‚¤ãƒ³ãƒ•ãƒ©æ•´å‚™ãƒ»é‡‘èè¦åˆ¶å¯¾å¿œãªã©ãƒ­ã‚¸å‘¨ã‚Šã®ä¼ç”»ã«å½¹å‰²ãŒå¤‰ã‚ã‚Šã¾ã—ãŸã€‚ãã—ã¦ã€2022å¹´2æœˆ28æ—¥ã«ç¾è·ã‚’é€€ç¤¾ã—(æœ€çµ‚å‡ºç¤¾ã¯1æœˆ28æ—¥)ã€3æœˆ1æ—¥ã‹ã‚‰é–¢è¥¿ã®é›»å­éƒ¨å“ãƒ¡ãƒ¼ã‚«ãƒ¼ã§åƒãã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-è»¢è·ç†ç”±&#34;&gt;2. è»¢è·ç†ç”±&lt;/h2&gt;
&lt;h3 id=&#34;å…¥ç¤¾ã—ã¦ã‚¨ã‚³ãƒãƒŸã‚¹ãƒˆãŒæ±‚ã‚ã‚‰ã‚Œã¦ã„ãªã„ã“ã¨ã«æ°—ã¥ã„ãŸ&#34;&gt;å…¥ç¤¾ã—ã¦ã‚¨ã‚³ãƒãƒŸã‚¹ãƒˆãŒæ±‚ã‚ã‚‰ã‚Œã¦ã„ãªã„ã“ã¨ã«æ°—ã¥ã„ãŸ&lt;/h3&gt;
&lt;p&gt;ãã‚‚ãã‚‚ã€ç¾è·ã®è³‡ç”£é‹ç”¨ä¼šç¤¾ã«ã¯ã‚¨ã‚³ãƒãƒŸã‚¹ãƒˆã‚’å¿—æœ›ã—ã¦å…¥ç¤¾ã—ã¾ã—ãŸã€‚é‡‘éŠ­çš„å•é¡Œã‹ã‚‰åšå£«èª²ç¨‹å¾ŒæœŸã®é€²å­¦ã‚’æ–­å¿µã—ã€å¤§å­¦é™¢æ™‚ä»£ã®ç ”ç©¶å†…å®¹ã«è¿‘ã„è·ç¨®ã«å°±ããŸã‹ã£ãŸãŸã‚ã§ã™ã€‚ãƒã‚¤ã‚µã‚¤ãƒ‰ã®ã‚¨ã‚³ãƒãƒŸã‚¹ãƒˆã‚’å¿—æœ›ã—ãŸã®ã¯ã€å˜ã«ãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ç›¸æ‰‹ã®æ–¹ãŒé«˜åº¦ãªåˆ†æã‚’ã—ã¦ã‚‚è¨±ã•ã‚Œã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã¨ã„ã†çŸ­çµ¡çš„ãªç†ç”±ã‹ã‚‰ã§ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;ã—ã‹ã—ã€å…¥ç¤¾ã—ã¦ã¿ã‚‹ã¨ã€å¸Œæœ›ã®éƒ¨ç½²ã«é…å±ã«ãªã‚‹ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã§ã—ãŸã€‚æœ€åˆã¯æ©Ÿé–¢æŠ•è³‡å®¶å–¶æ¥­ã«é…å±ã«ãªã‚Šã€æ©Ÿé–¢æŠ•è³‡å®¶å‘ã‘(å¹´é‡‘åŸºé‡‘ã‚„é‡‘èæ³•äºº)ã®é¡§å®¢å ±å‘Šæ›¸ã‚’ã²ãŸã™ã‚‰ä½œæˆã—ã¦ã„ã¾ã—ãŸã€‚ç¤¾å†…DBã‹ã‚‰å–å¾—ã—ãŸãƒ•ã‚¡ãƒ³ãƒ‰ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚„æ®‹é«˜ã‚’å®šã‚ã‚‰ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«è»¢è¨˜ã—ã€ãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’ã‚‚ã‚‰ã†ä»•äº‹ã§ã™ã€‚2éƒ¨ç½²ç›®(3å¹´ç›®)ã§é‹ç”¨ä¼ç”»ã«ç•°å‹•ã«ãªã‚Šã¾ã—ãŸãŒã€ã“ã¡ã‚‰ã§ã‚‚(ç¤¾å†…)è³‡æ–™ã‚’ä½œæˆã—ã¦ã„ã¾ã—ãŸã€‚ä¼ç”»ã®è­°è«–ã¯ç§˜åŒ¿æ€§ãŒé«˜ãåŸºæœ¬çš„ã«ã‚·ãƒ‹ã‚¢å±¤ã®ã¿ã§è¡Œã‚ã‚Œã‚‹ãŸã‚ã€è‹¥æ‰‹ã¯ç›®çš„ã‚‚ã¯ã£ãã‚Šã¨ã—ãªã„ã¾ã¾(ã–ã£ãã‚Šã¨ã—ãŸèª¬æ˜ã¯ã‚ã‚Šã¾ã™ãŒè©³ç´°ã¯èã‘ãªã„)ã€æ‰‹ã‚’å‹•ã‹ã™ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¦ã„ã¾ã—ãŸã€‚ã“ã®ã‚ˆã†ã«ã€è³‡æ–™ä½œæˆè¦å“¡ã¨ã—ã¦3å¹´ã»ã©éã”ã—ã€è‡ªåˆ†ã®æˆé•·ã¨ã—ã¦æ„Ÿã˜ã‚‰ã‚ŒãŸã®ã¯ã€Excelã‚„PowerPointã«ç¿’ç†Ÿã—ã¦ã„ãã“ã¨ã®ã¿ã§ã—ãŸã€‚æ¬¡ç¬¬ã«ã€Œå¸‚å ´ä¾¡å€¤ãªã©å…¨ããªã„äººæã«ãªã£ã¦ã‚‹ãªã€ã¨å±æ©Ÿæ„Ÿã‚’è¦šãˆã¾ã—ãŸãŒã€ä¸Šå¸ã‹ã‚‰ã¯ã€Œã¾ã è‹¥ã„ã‚“ã ã‹ã‚‰ã€ã¨çœŸé¢ç›®ã«å—ã‘æ­¢ã‚ã¦ã‚‚ã‚‰ãˆã¾ã›ã‚“ã§ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;åŒæ™‚ã«ã€ã‚¨ã‚³ãƒãƒŸã‚¹ãƒˆã®è¨€å‹•ã‚’å‚è€ƒã«ã—ã¦ã„ã‚‹ãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãªã©ã»ã¼å­˜åœ¨ã—ãªã„ã“ã¨ã‚‚åˆ†ã‹ã‚Šã¾ã—ãŸã€‚ã‚¨ã‚³ãƒãƒŸã‚¹ãƒˆã®ä»˜åŠ ä¾¡å€¤ã¯ã‚»ãƒŸãƒŠãƒ¼ã§ã®è¬›æ¼”ã§ã€ãã®è¬›æ¼”ã§ã‚‚è‡ªåˆ†ã§åˆ†æã—ãŸå†…å®¹ã‚’è©±ã™ã¨è¨€ã†ã‚ˆã‚Šã¯ã‚·ãƒ³ã‚¯ã‚¿ãƒ³ã‚¯ãªã©ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’è¦ç´„ã—ã¦è³‡æ–™ã‚’å†æ§‹æˆã—ã€èª¬æ˜ã™ã‚‹ã¨ã„ã†éç”Ÿç”£çš„ãªä»•äº‹ã‚’ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã—ãŸã€‚è‡ªåˆ†ã®å°±è·æ´»å‹•æ™‚ã®çŸ­çµ¡çš„ãªç™ºæƒ³ã‚’åçœã—ã¤ã¤ã€ã€Œã‚„ã¯ã‚Šãƒã‚¯ãƒ­çµŒæ¸ˆå­¦ã§ã¯ãŠé‡‘ã«ãªã‚‰ãªã„ã‚“ã ãªã€ã¨ã„ã†ã“ã¨ã‚’å†ç¢ºèªã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h3 id=&#34;è»¢è·ç†ç”±ã®åŠåˆ†ã¯çµå©š&#34;&gt;è»¢è·ç†ç”±ã®åŠåˆ†ã¯çµå©š&lt;/h3&gt;
&lt;p&gt;å…ˆè¿°ã®é€šã‚Šã€2021å¹´7æœˆ7æ—¥ã«çµå©šã—ã¾ã—ãŸã€‚å¦»ã¨ã¯å¤§å­¦ç”Ÿä»¥æ¥ã®ä»˜ãåˆã„ã§ã‚ã‚Šã€7å¹´ã®äº¤éš›æœŸé–“ãŒã‚ã‚Šã¾ã—ãŸã€‚ã©ã¡ã‚‰ã‚‚åœ°å…ƒãŒé–¢è¥¿ã§ã‚ã‚Šã€å­ä¾›ã«ã¯é–¢è¥¿å¼ã‚’ã—ã‚ƒã¹ã‚‰ã›ãŸã„ã¨ã„ã†æœ€å¤§ã®ç›®çš„ã‹ã‚‰ä»Šå¾Œã‚’è€ƒãˆã¦ç”Ÿæ´»æ‹ ç‚¹ã‚’æ±äº¬ã‹ã‚‰é–¢è¥¿ã«ç§»ã—ãŸã„ã¨æ€ã†ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ(ä»–ã«ã‚‚ãŠäº’ã„ã®èº«å¯„ã‚ŠãŒã„ã‚‹ã¨ã‹ç†ç”±ã¯ã‚ã‚Šã¾ã™)ã€‚ãã®æ™‚ç‚¹ã§ã¯ã€ã‚¨ã‚³ãƒãƒŸã‚¹ãƒˆå¿—æœ›ã§ã‚‚ãªã‹ã£ãŸã®ã§ã€ã€Œã‚‚ã¯ã‚„æ±äº¬ã«ã„ã‚‹æ„å‘³ã‚‚ãªã„ãªã€ã¨æ„Ÿã˜ã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;2021å¹´4æœˆã‹ã‚‰é…å±ã«ãªã£ãŸæ–°ã—ã„éƒ¨ç½²ã§ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚’è¡Œã†ç«‹å ´ã«ãªã‚Šã€ãƒã‚¦ãƒã‚¦ã‚‚ãªã„ä¸­ã§æ¥­å‹™ã‚³ãƒ³ã‚µãƒ«ã®ã‚ˆã†ãªæ¥­å‹™ã‚’è¡Œã£ã¦ã„ã¾ã—ãŸã€‚ã‚³ãƒ³ã‚µãƒ«ä¼šç¤¾ã§ã‚ã‚‹ã‚±ãƒ³ãƒ–ãƒªãƒƒã‚¸ã®æ›¸ç±ãªã©ã‚’èª­ã¿ã‚ã•ã‚Šã€ãƒˆãƒ©ã‚¤ã‚¢ãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼ã‚’ç¹°ã‚Šè¿”ã™ä¸­ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå‰é€²ã™ã‚‹ã“ã¨ã«é”æˆæ„Ÿã‚’æ„Ÿã˜ã€ç¾å ´ã®æ–¹ã‹ã‚‰ã®ä¿¡é ¼ã‚‚æ¬¡ç¬¬ã«å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚è‡ªåˆ†ãŸã¡ã®è€ƒãˆãŸä¼ç”»æ¡ˆãŒå…·ç¾åŒ–ã—ã¦ã„ãã“ã¨ã«ã‚„ã‚ŠãŒã„ã‚’æ„Ÿã˜ã€ã€Œã“ã®ä»•äº‹ã ã£ãŸã‚‰æ¥­ç¨®ã‚‚é¸ã°ãªã„ã—ã€é–¢è¥¿ã§ã‚‚åƒã‘ã‚‹ãªã€ã¨è»¢è·ã‚’è€ƒãˆå‡ºã—ãŸã®ãŒ8æœˆé ƒã§ã—ãŸã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ®‹ã‚Šã®åŠåˆ†ã¯ç¾è·ã§ã®ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ãŒæƒ³åƒã§ããªã‹ã£ãŸã‹ã‚‰&#34;&gt;æ®‹ã‚Šã®åŠåˆ†ã¯ç¾è·ã§ã®ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ãŒæƒ³åƒã§ããªã‹ã£ãŸã‹ã‚‰&lt;/h3&gt;
&lt;p&gt;ç”Ÿæ´»æ‹ ç‚¹ã‚’é–¢è¥¿ã«ç§»ã—ã€ãƒ—ãƒ­ãƒãƒã¨ã—ã¦åƒãã®ã¯ã€ç¾è·ã§ã‚‚é éš”åœ°å‹¤å‹™ã¨ã„ã†å‹¤å‹™å½¢æ…‹ã‚’åˆ©ç”¨ã™ã‚Œã°å¯èƒ½ã§ã—ãŸã€‚ç¾ã«ã€åŒã˜éƒ¨ç½²ã«ãã®åˆ¶åº¦ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹æ–¹ãŒã„ãŸã—ã€å°‘ãªãã¨ã‚‚2å¹´ã¯ã»ã¼ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã ã£ãŸã®ã§ã€ã†ã¡ã®éƒ¨ç½²ãªã‚‰å¯èƒ½ã ã‚ã†ãªã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚‚æ¹§ã„ã¦ã„ã¾ã—ãŸã€‚ãã®é¸æŠã‚’ã—ãªã‹ã£ãŸã®ã¯ã€ç¾è·ã§ã¯ã“ã®è·ç¨®ã§ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã‚’æ­©ã‚“ã§ã„ãäº‹ãŒæƒ³åƒã§ããªã‹ã£ãŸã‹ã‚‰ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;è³‡ç”£é‹ç”¨ä¼šç¤¾ã®èŠ±å½¢ã¯ãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚æ–°å’å…¥ç¤¾ã®å¤§åŠãŒãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼å¿—æœ›ã§å…¥ç¤¾ã—ã¾ã™ã€‚æ¥­ç•Œå†…ã§æœ‰åãªæ–¹ã‚‚è¤‡æ•°å­˜åœ¨ã—ã€é‹ç”¨è€…ã®ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã¯ãã‚Œãªã‚Šã«ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ãã‚‹ã¨æ€ã„ã¾ã™&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ã€‚ä¸€æ–¹ã§ã€é‹ç”¨è€…ä»¥å¤–ã®ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã¨ãªã‚‹ã¨ã€ã‹ãªã‚Šä¸æ˜ç­ã§å„åˆ†é‡ã§ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã¨ã—ã¦ä»•äº‹ã‚’ã—ã¦ã„ã‚‹æ–¹ã¯é™å®šçš„ã§ã‚ã‚‹å°è±¡ã‚’å—ã‘ã¾ã—ãŸã€‚ç§ãŒæ‰€å±ã—ã¦ã„ãŸéƒ¨ç½²ã¯ã€è‹¥æ‰‹ã«ã¨ã£ã¦ã¯é‹ç”¨ã¸ã®é€šéç‚¹ã¨ã„ã†ä½ç½®ã¥ã‘ã§ã€ã“ã®éƒ¨ç½²ã§ã®ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸å‡ºæ¥ã‚‹äººã¯ä¸Šå¸å«ã‚ã¦å­˜åœ¨ã—ã¦ã„ãªã‹ã£ãŸã¨æ€ã„ã¾ã™ã€‚éƒ¨ç½²ã«ãƒã‚¦ãƒã‚¦ã®è“„ç©ãŒã•ã‚Œã¦ãŠã‚‰ãšã€ã‚·ãƒ‹ã‚¢ã®ä»•äº‹ã®é€²ã‚æ–¹ã«ç–‘å•ã‚’æŠ±ãã“ã¨ã‚‚ã—ã°ã—ã°ã‚ã‚Šã€ç›®æŒ‡ã—ãŸã„ã¨æ€ãˆã‚‹äººç‰©ã‚‚å­˜åœ¨ã—ã¾ã›ã‚“ã§ã—ãŸ&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;ã€‚éƒ¨ç½²æŸ„ã€ä»–ã®éƒ¨ç½²ã®æ–¹ã¨ä»•äº‹ã‚’ã™ã‚‹æ©Ÿä¼šã‚‚å¤šã‹ã£ãŸã§ã™ãŒã€çŠ¶æ³ã¯ä»–ã®éƒ¨ç½²ã§ã‚‚åŒã˜ã‚ˆã†ã§ã€é‹ç”¨è€…å¿—æœ›ã§ã¯ãªãç¤¾å†…ã‚³ãƒ³ã‚µãƒ«æ¥­ã‚’å¿—æœ›ã™ã‚‹è‡ªåˆ†ã«ã¨ã£ã¦ã¯ã€å‘¨ã‚Šã®æ”¯æ´ãƒ»ç†è§£ãªã1äººå‰ã«ãªã‚‹æƒ³åƒãŒã§ããšã€ã€Œè»¢è·ã™ã‚‹ãªã‚‰æ—©ã„ã»ã†ãŒã‚ˆã„ãªã€ã¨æ€ã„ã¾ã—ãŸ[^3]ã€‚&lt;/p&gt;
&lt;p&gt;é‹ç”¨è€…å¿—æœ›ã®å¸Œæœ›ãŒå…¨å“¡å¶ã†ã‚ã‘ã§ã¯ãªãã€è‹¥æ‰‹ã®æ—©æœŸé€€è·è€…ã«æ‚©ã‚€äººäº‹ã¯å¤šã„ã¨æ€ã„ã¾ã™ãŒã€ä¸€æ–¹ã§é‹ç”¨è€…ä»¥å¤–ã®å—ã‘çš¿ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã¨ã¯è¨€ã„é›£ã„ã¨æ€ã„ã¾ã™ã€‚å°‘ãªãã¨ã‚‚ã€ãƒ•ãƒ­ãƒ³ãƒˆã¨ãã‚Œä»¥å¤–ã§ã¯æ¸©åº¦æ„ŸãŒå…¨ãé•ã„ã¾ã™(å¾Œè€…ã¯ã‚·ãƒ‹ã‚¢ã¾ã§ã»ã¼ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‹…å½“ã®å°è±¡ã§ã—ãŸ)ã€‚é‹ç”¨ä¼šç¤¾ã«ã¯é‡‘èå°‚é–€è·(ãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€ã‚¨ã‚³ãƒãƒŸã‚¹ãƒˆã€ã‚¢ãƒŠãƒªã‚¹ãƒˆ)ã¯ã„ã¦ã‚‚ã€ãƒ“ã‚¸ãƒã‚¹ãƒ‘ãƒ¼ã‚½ãƒ³ã¯ã„ãªã„ã€‚ã“ã®å•é¡Œã¯æ ¹ãŒæ·±ã„ã§ã™ã­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-æ¬¡ã®ä¼šç¤¾ä»•äº‹&#34;&gt;3. æ¬¡ã®ä¼šç¤¾ãƒ»ä»•äº‹&lt;/h2&gt;
&lt;p&gt;ä¸Šè¨˜ã®ã‚ˆã†ãªç†ç”±ã‹ã‚‰ã€9æœˆé ƒã«è»¢è·æ´»å‹•ã‚’ã¯ã˜ã‚ã¾ã—ãŸã€‚è¤‡æ•°ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã—ã€æ›¸é¡å¯©æŸ»ã‚’æœ¬æ ¼çš„ã«å‡ºã—å§‹ã‚ãŸã®ãŒ10æœˆåˆæ—¬ã”ã‚ã€é¢æ¥ã‚’å—ã‘å‡ºã—ãŸã®ãŒ10æœˆåŠã°ã§ã—ãŸã€‚ãã—ã¦ã€11æœˆã«å†…å®šã‚’é ‚ãã€æ¬¡ã®ä¼šç¤¾ã¸å…¥ç¤¾ã‚’æ±ºã‚ã¾ã—ãŸã€‚ã“ã®ä¼šç¤¾ã§ã¯ã€è‡ªéƒ¨ç½²ã§ã®ã‚­ãƒ£ãƒªã‚¢ã‚¹ãƒ†ãƒƒãƒ—ã®å…¸å‹ä¾‹ã‚’ç¤ºã—ã¦ãã ã•ã‚Šã€ãã®ä¸­ã«è‡ªåˆ†ã®ç›®æŒ‡ã—ãŸã„ã‚‚ã®ãŒã‚ã£ãŸã®ã§å…¥ç¤¾ã‚’æ±ºã‚ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;æ¬¡ã®ä¼šç¤¾ã¯é–¢è¥¿ã®é›»å­éƒ¨å“ãƒ¡ãƒ¼ã‚«ãƒ¼ã§ã™ã€‚æ¥­å‹™å†…å®¹ã¯ç¾è·ã§è¡Œã£ã¦ã„ã‚‹æ¥­å‹™ã¨ã•ã»ã©å¤‰ã‚ã‚‰ãªã„ã‚‚ã®ã¨èªè­˜ã—ã¦ã„ã¾ã™ã€‚ãŸã ã€ç¾è·ã‚ˆã‚Šã‚‚ãƒ‡ãƒ¼ã‚¿ã‚’èµ·ç‚¹ã«ã—ãŸä¼ç”»ã‚’è¡Œã†ã¨ã„ã†ã“ã¨ã§ã€BIãƒ„ãƒ¼ãƒ«ã‚„çµ±è¨ˆå‡¦ç†ãªã©ã‚‚å®ˆå‚™ç¯„å›²ã«å…¥ã£ã¦ããã†ã§ã™ã€‚ã“ã‚Œã¾ã§ã¯å¿…è¦ãªææ–™ã¯ç¾å ´ã¸ã®ãƒ’ã‚¢ãƒªãƒ³ã‚°ã®ã¿ã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦ãŠã‚Šã€Excelã‚’ã“ã­ãã‚Šå›ã—ã¦å‡ºãŸä¿¡é ¼æ€§ãŒã‚ã‹ã‚‰ãªã„çµæœã‚’PowerPointã‚¹ãƒ©ã‚¤ãƒ‰ã«ã™ã‚‹ã¨ã„ã†ã‚„ã‚Šæ–¹ã ã£ãŸã®ã§ã€ã²ã¨ã¤ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‹ãªã¨æ€ã„ã¾ã™ã€‚ã¾ãŸã€æ‰±ã†ãƒ‡ãƒ¼ã‚¿ã‚‚å£²ä¸Šæƒ…å ±ã‚„å—æ³¨æƒ…å ±ãªã©ã“ã‚Œã¾ã§ã®é‡‘èæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¨ã¯ç•°ãªã£ã¦ããã†ã§ã™ã€‚ãŸã ã€ãƒ“ã‚¸ãƒã‚¹ã¸ã®æ·±ã„ç†è§£ãŒå¿…è¦ã¨ã„ã†ç‚¹ã¯å¤‰ã‚ã‚‰ãªã„ã¨æ€ã†ã®ã§ã€ãã®ç‚¹ã¯æ—©ãã‚­ãƒ£ãƒƒãƒã‚¢ãƒƒãƒ—ã§ãã‚‹ã‚ˆã†ã«é ‘å¼µã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-ä»Šå¾Œã®ãƒ–ãƒ­ã‚°æ›´æ–°ã«ã¤ã„ã¦&#34;&gt;4. ä»Šå¾Œã®ãƒ–ãƒ­ã‚°æ›´æ–°ã«ã¤ã„ã¦&lt;/h2&gt;
&lt;p&gt;ã“ã‚Œã¾ã§ã®æŠ•ç¨¿ã¯é‡‘èãƒ»çµŒæ¸ˆã«é–¢é€£ã™ã‚‹ã‚‚ã®ã§ã—ãŸãŒã€ä»Šå¾Œã¯å¯è¦–åŒ–ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãªã©ã«å†…å®¹ãŒç§»ã£ã¦ããã†ã§ã™ã€‚ã“ã‚Œã¾ã§ã‚ˆã‚Šã‚‚ã€æ°—è»½ã«æŠ•ç¨¿ã™ã‚‹ã“ã¨ã¯å¢—ãˆã¦ãã‚‹ã¨æ€ã†ã®ã§ã€æ›´æ–°é »åº¦ã‚’ä¸Šã’ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ï¼&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆâ†’ã‚¢ãƒŠãƒªã‚¹ãƒˆâ†’FMã‚„ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ‹…å½“â†’æŠ•è³‡åˆ¤æ–­è€…ãªã©ã§ã—ã‚‡ã†ã‹ &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;ä¼šè­°ã®ãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ã‹ãªã‚Šæ‚©ã‚“ã§ã„ã¾ã—ãŸã€‚æœ¬å½“ã§ã‚ã‚Œã°ã€ä¼šè­°ãŒçµ‚ã‚ã£ãŸå¾Œã«ç´°ã‹ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é ‚ããŸã‹ã£ãŸã—ã€è‡ªåˆ†ã®èª²é¡Œã¯ã©ã“ã«ã‚ã‚‹ã®ã‹æŒ‡æ‘˜ã—ã¦é ‚ããŸã‹ã£ãŸã§ã™ãŒã€ãã®ã‚ˆã†ãªã“ã¨ãŒå‡ºæ¥ã‚‹äººãŒã„ã¾ã›ã‚“ã§ã—ãŸã€‚ã€Œä»Šã®ã‚„ã‚Šæ–¹ã®ã¾ã¾ä»•äº‹ã‚’é€²ã‚ã¦ãã‚ŒãŸã‚‰ã„ã„ã‹ã‚‰ã€ã—ã‹è¨€ã‚ã‚Œãªã‹ã£ãŸã€‚ &lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
    <item>
      <title>Pythonã®pandas_datareaderã‹ã‚‰è‰²ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã¿ã‚‹</title>
      <link>/post/post15/</link>
      <pubDate>Tue, 03 Nov 2020 00:00:00 +0000</pubDate>
      <guid>/post/post15/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚æœ€è¿‘ä¼šç¤¾ã®PCã«&lt;code&gt;Anaconda&lt;/code&gt;ã‚’å…¥ã‚Œã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚æ¥­å‹™ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ãªã„ã®ã§ã™ãŒã€ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ä½¿ç”¨ã™ã‚‹ã®ã§è‰²ã€…å‹‰å¼·ã—ã¦ã„ã¾ã™ã€‚ä»¥å‰ã€GoogleãŒæä¾›ã—ã¦ã„ã‚‹&lt;code&gt;Earth Engine&lt;/code&gt;ã‹ã‚‰è¡›æ˜Ÿç”»åƒã‚’å–å¾—ã—ã¦è§£æã—ãŸéš›ã«&lt;code&gt;Python&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã€ä»Šå›ã¯&lt;code&gt;Python&lt;/code&gt;ã‹ã‚‰æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã‚‹&lt;code&gt;pandas_datareader&lt;/code&gt;ã‚’ä½¿ç”¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;code&gt;pandas_datareader&lt;/code&gt;ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Tiingo&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IEX&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Alpha Vantage&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Enigma&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Quandl&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;St.Louis FED&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Kenneth French&amp;rsquo;s data library&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;World Bank&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;OECD&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eurostat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Thrift Saving Plan&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Nasdaq Trader symbol definitions&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Stooq&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MOEX&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Naver Finance&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ãªãŠã€ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯&lt;code&gt;Rstuio&lt;/code&gt;ã¨&lt;code&gt;blogdown&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€&lt;code&gt;git&lt;/code&gt;ã‚’çµ„ã¿åˆã‚ã›ã¦&lt;code&gt;github&lt;/code&gt;ä¸Šã«è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã™ã€‚ã§ã™ãŒã€&lt;code&gt;Rstudio&lt;/code&gt;ã¨&lt;code&gt;reticulate&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãŠã‹ã’ã§ã€&lt;code&gt;python&lt;/code&gt;ã‚’ä½¿ç”¨ã—ãŸè¨˜äº‹ã‚‚&lt;code&gt;rmd&lt;/code&gt;ã§ä½œæˆã—ã€&lt;code&gt;html&lt;/code&gt;ã¨ã—ã¦å‡ºåŠ›ã§ãã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¾ãšã€&lt;code&gt;reticulate&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã¦&lt;code&gt;conda&lt;/code&gt;ä»®æƒ³ç’°å¢ƒã¸æ¥ç¶šã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(reticulate)
conda_path &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\\Users\\hoge\\Anaconda3\\envs\\ç’°å¢ƒå&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;use_condaenv&lt;/span&gt;(conda_path)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã‚Œã§æ¥ç¶šã§ãã¾ã™ã€‚&lt;code&gt;conda_path&lt;/code&gt;ã«ã¯ä»®æƒ³ç’°å¢ƒã¸ã®ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; sys
sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;version
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &#39;3.7.7 (default, May  6 2020, 11:45:54) [MSC v.1916 64 bit (AMD64)]&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;1-econdbã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—&#34;&gt;1. ECONDBã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;pandas_datareader&lt;/code&gt;ã§ã¯ã€&lt;a href=&#34;https://www.econdb.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ECOMDB&lt;/a&gt;ã‹ã‚‰ãƒã‚¯ãƒ­çµŒæ¸ˆé–¢é€£ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;econdbã¨ã¯&#34;&gt;ECONDBã¨ã¯ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;econdb.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ECONDBã¯å„å›½ã®ä¸»è¦ãƒã‚¯ãƒ­çµŒæ¸ˆãƒ‡ãƒ¼ã‚¿ã‚’dashboardå½¢å¼ã§æä¾›ã—ã¦ãã‚Œã‚‹Webã‚µã‚¤ãƒˆã§ã€ã¾ãŸAPIã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€Pythonã‚„Excelã«ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€£ä¿‚ã—ã¦ãã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;econdb2.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;pandas_datareader&lt;/code&gt;ã‚’ç”¨ã„ãŸä½¿ç”¨æ–¹æ³•ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•&#34;&gt;åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;pandas_datareader&lt;/code&gt;ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas_datareader.data &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; web
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## C:\Users\aashi\Documents\R\win-library\4.1\reticulate\python\rpytools\loader.py:44: FutureWarning: pandas.util.testing is deprecated. Use the functions in the public API at pandas.testing instead.
##   level=level
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;EconDBã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€&lt;code&gt;DataReader&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«&lt;code&gt;data_source&lt;/code&gt;å¼•æ•°ã«&lt;code&gt;&#39;econdb&#39;&lt;/code&gt;ã¨é©å½“ãª&lt;code&gt;query&lt;/code&gt;ã‚’æ¸¡ã›ã°ã‚ˆã„ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(query, data_source&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;econdb&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;**&lt;/span&gt;kwargs)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å½¢å¼ã¯ã€å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ç¨®é¡ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ã‚¯ã‚¨ãƒªæŒ‡å®šæ–¹æ³•&#34;&gt;ã‚¯ã‚¨ãƒªæŒ‡å®šæ–¹æ³•&lt;/h4&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã¯ã„ãã¤ã‹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åˆ†å‰²ã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã¯ã€ãƒˆãƒ”ãƒƒã‚¯ã€é »åº¦ã€èª¿æŸ»æ–¹æ³•ãªã©ã®å…±é€šã®ç‰¹å¾´ã‚’æŠ½å‡ºã§ãã‚‹ãƒ†ã‚£ãƒƒã‚«ãƒ¼ãŒä»˜ä¸ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ¤œç´¢æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ¢ã™ã“ã¨ãŒã§ãã¾ã™ã€‚UST_MSPDãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä¾‹ã«ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;econdb3.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ãƒšãƒ¼ã‚¸ã«å…¥ã‚‹ã¨ã€ã„ãã¤ã‹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒã‚ã‚Šã€ç‰¹å®šã®ã‚·ãƒªãƒ¼ã‚ºã¨ç‰¹å®šã®ã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ã«é¸æŠã‚’çµã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚é©åˆ‡ãªãƒ•ã‚£ãƒ«ã‚¿ãŒè¨­å®šã•ã‚ŒãŸçŠ¶æ…‹ã§ã€&lt;code&gt;Export&lt;/code&gt;ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€é¸æŠã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®å¤šãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãã®ä¸­ã§ã‚‚ã€&lt;code&gt;Export to Python&lt;/code&gt;ã¯ã€äº‹å‰ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã¤ã‚³ãƒ¼ãƒ‰ã®é‡è¦ãªéƒ¨åˆ†ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¦ã—ã¾ãˆã°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;econdb4.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;query &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;amp;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join([
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dataset=UST_MSPD&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;v=Category&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;h=TIME&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;from=2018-01-01&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;to=2019-12-31&amp;#34;&lt;/span&gt;
])
df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(query, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;econdb&amp;#39;&lt;/span&gt;)
df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Category                         Bills  ... United States Savings Securities
## Holder      Intragovernmental Holdings  ...                           Totals
## TIME_PERIOD                             ...                                 
## 2018-01-01                      3830.0  ...                           159902
## 2018-02-01                      3748.0  ...                           159475
## 2018-03-01                      4552.0  ...                           159040
## 2018-04-01                      2641.0  ...                           158606
## 2018-05-01                       577.0  ...                           158233
## 
## [5 rows x 51 columns]
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å®Ÿè·µçš„ãªå–å¾—ã‚³ãƒ¼ãƒ‰&#34;&gt;å®Ÿè·µçš„ãªå–å¾—ã‚³ãƒ¼ãƒ‰&lt;/h4&gt;
&lt;p&gt;ã“ã‚“ãªã“ã¨ã‚‚ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; matplotlib &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pyplot &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; plt
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas_datareader.data &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; web
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; datetime &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; datetime
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; seaborn &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; sns

start &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; datetime(&lt;span style=&#34;color:#ae81ff&#34;&gt;1980&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
end &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; datetime(&lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;31&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# parameters for data from econdb&lt;/span&gt;
country &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;US&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;UK&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;JP&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;EU&amp;#39;&lt;/span&gt;]
indicator &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;RGDP&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CPI&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;URATE&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;HOU&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;POP&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;RETA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;IP&amp;#39;&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# Parse API from econdb&lt;/span&gt;
econ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataFrame()
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; cnty &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; country:
    temp2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataFrame()
    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; idctr &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; indicator:
        temp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ticker=&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; idctr &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; cnty,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;econdb&amp;#39;&lt;/span&gt;,start,end)
        temp&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;columns &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [idctr]
        temp2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;concat([temp2,temp],join&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;outer&amp;#39;&lt;/span&gt;,axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
    temp2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; temp2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;assign(kuni&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;cnty,kijyundate&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;temp2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;index)
    econ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;concat([econ,temp2],join&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;outer&amp;#39;&lt;/span&gt;)
    econ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; econ&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;reset_index(drop&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)
econ&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()

&lt;span style=&#34;color:#75715e&#34;&gt;# Plot CPI for example&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##         RGDP   CPI  URATE       CA  HOU       POP  RETA     IP kuni kijyundate
## 0  6842024.0  78.0    6.3 -10666.0  NaN  226554.0   NaN  52.17   US 1980-01-01
## 1        NaN  79.0    6.3      NaN  NaN  226753.0   NaN  52.20   US 1980-02-01
## 2        NaN  80.1    6.3      NaN  NaN  226955.0   NaN  51.98   US 1980-03-01
## 3  6701046.0  80.9    6.9   9844.0  NaN  227156.0   NaN  50.97   US 1980-04-01
## 4        NaN  81.7    7.5      NaN  NaN  227387.0   NaN  49.71   US 1980-05-01
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;sns&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;set
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;function set at 0x0000000031ED0B88&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;sns&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;relplot(data&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;econ,x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;kijyundate&amp;#39;&lt;/span&gt;,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CPI&amp;#39;&lt;/span&gt;,hue&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;kuni&amp;#39;&lt;/span&gt;,kind&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;line&amp;#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post15/index_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;282&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post15/index_files/figure-html/unnamed-chunk-8-2.png&#34; width=&#34;556&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;2-world-bankã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;2. World Bankã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;ä¸–ç•ŒéŠ€è¡Œã‹ã‚‰å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&#34;&gt;ä¸–ç•ŒéŠ€è¡Œã‹ã‚‰å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸–ç•ŒéŠ€è¡Œã¯å‰èº«ãŒå›½éš›å¾©èˆˆé–‹ç™ºéŠ€è¡Œ(IBRD)ã€å›½éš›é–‹ç™ºå”ä¼š(IDA)ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã‚‚ã‚ã‹ã‚‹ã‚ˆã†ã«é–‹ç™ºç³»ã®ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã¾ã™ã€‚æœ€è¿‘ã§ã¯COVID-19é–¢é€£ã®ãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ &lt;code&gt;pandas_datareader&lt;/code&gt;ã§ã¯ã€&lt;code&gt;wb&lt;/code&gt;é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€&lt;a href=&#34;https://data.worldbank.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;World Bank&amp;rsquo;s World Development Indicators&lt;/a&gt;ã¨å‘¼ã°ã‚Œã‚‹ä¸–ç•ŒéŠ€è¡Œã®æ•°åƒã‚‚ã®ãƒ‘ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ã«ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢æ–¹æ³•&#34;&gt;ãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;ä¾‹ãˆã°ã€åŒ—ç±³åœ°åŸŸã®å›½ã€…ã®ä¸€äººå½“ãŸã‚Šã®å›½å†…ç·ç”Ÿç”£ã‚’ãƒ‰ãƒ«ãƒ™ãƒ¼ã‚¹ã§æ¯”è¼ƒã—ãŸã„å ´åˆã¯ã€&lt;code&gt;search&lt;/code&gt;é–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; pandas_datareader &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; wb
matches &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; wb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;search(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;gdp.*capita.*const&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(matches&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;loc[:,[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##                          id                                               name
## 716      6.0.GDPpc_constant  GDP per capita, PPP (constant 2011 internation...
## 10411        NY.GDP.PCAP.KD                 GDP per capita (constant 2015 US$)
## 10413        NY.GDP.PCAP.KN                      GDP per capita (constant LCU)
## 10415     NY.GDP.PCAP.PP.KD  GDP per capita, PPP (constant 2017 internation...
## 10416  NY.GDP.PCAP.PP.KD.87  GDP per capita, PPP (constant 1987 internation...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;NY.GDP.PCAP.KD&lt;/code&gt;ãŒãã‚Œã«å½“ãŸã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚2010å¹´ã®USãƒ‰ãƒ«ãƒ™ãƒ¼ã‚¹ã§å®Ÿè³ªåŒ–ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿ã®å–å¾—æ–¹æ³•&#34;&gt;ãƒ‡ãƒ¼ã‚¿ã®å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;download&lt;/code&gt;é–¢æ•°ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;dat &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; wb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;download(indicator&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NY.GDP.PCAP.KD&amp;#39;&lt;/span&gt;, country&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;US&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CA&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;MX&amp;#39;&lt;/span&gt;], start&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2010&lt;/span&gt;, end&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2018&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(dat)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##                     NY.GDP.PCAP.KD
## country       year                
## Canada        2018    44917.369814
##               2017    44325.416776
##               2016    43536.913403
##               2015    43596.135537
##               2014    43635.095481
##               2013    42846.284196
##               2012    42315.807389
##               2011    42036.997844
##               2010    41155.323638
## Mexico        2018     9945.776845
##               2017     9842.400712
##               2016     9751.569083
##               2015     9616.645558
##               2014     9426.324588
##               2013     9282.991933
##               2012     9280.258638
##               2011     9076.301453
##               2010     8878.561377
## United States 2018    59821.592274
##               2017    58387.775808
##               2016    57418.933846
##               2015    56863.371496
##               2014    55574.356825
##               2013    54604.130054
##               2012    53989.248340
##               2011    53190.231121
##               2010    52759.998081
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;pandas&lt;/code&gt;ã®&lt;code&gt;dataframe&lt;/code&gt;å½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚å¹´ã¨å›½ãŒindexã«ãªã£ã¦ã„ã¾ã™ã­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-famafrench-data-libraryã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;3. Fama/French Data Libraryã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;famafrench-data-libraryã§å–ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&#34;&gt;Fama/French Data Libraryã§å–ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&lt;/h3&gt;
&lt;p&gt;é‡‘èé–¢é€£ãƒ‡ãƒ¼ã‚¿ã«ãªã‚Šã¾ã™ãŒã€æœ‰åãªFama/Frechã®3 Factor modelã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒ&lt;a href=&#34;http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fama/French Data Library&lt;/a&gt;ã‹ã‚‰å–å¾—ã§ãã¾ã™ã€‚&lt;code&gt;get_available_datasets&lt;/code&gt;é–¢æ•°ã¯ã€åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ãƒªã‚¹ãƒˆã‚’è¿”ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•-1&#34;&gt;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; pandas_datareader.famafrench &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; get_available_datasets
len(get_available_datasets())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 297
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯297ã§ã™ã€‚ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã©ã‚“ãªã‚‚ã®ãŒã‚ã‚‹ã‹ã€20å€‹ã»ã©ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; random
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(random&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sample(get_available_datasets(),&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;Japan_3_Factors_Daily&#39;, &#39;Developed_ex_US_Mom_Factor_Daily&#39;, &#39;Portfolios_Formed_on_ME&#39;, &#39;25_Portfolios_OP_INV_5x5&#39;, &#39;North_America_6_Portfolios_ME_OP&#39;, &#39;Europe_6_Portfolios_ME_Prior_250_20_daily&#39;, &#39;Portfolios_Formed_on_INV&#39;, &#39;10_Industry_Portfolios_Wout_Div&#39;, &#39;5_Industry_Portfolios&#39;, &#39;32_Portfolios_ME_OP_INV_2x4x4&#39;, &#39;Europe_32_Portfolios_ME_INV(TA)_OP_2x4x4&#39;, &#39;North_America_6_Portfolios_ME_Prior_12_2&#39;, &#39;Europe_25_Portfolios_ME_Prior_12_2&#39;, &#39;Developed_ex_US_25_Portfolios_ME_OP_Daily&#39;, &#39;Europe_3_Factors&#39;, &#39;Portfolios_Formed_on_E-P&#39;, &#39;Asia_Pacific_ex_Japan_25_Portfolios_ME_Prior_12_2&#39;, &#39;Europe_25_Portfolios_ME_OP&#39;, &#39;Developed_25_Portfolios_ME_BE-ME&#39;, &#39;38_Industry_Portfolios&#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ—¥æœ¬æ ªã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚‚å­˜åœ¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;ds &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;5_Industry_Portfolios&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;famafrench&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(ds[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;DESCR&amp;#39;&lt;/span&gt;])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 5 Industry Portfolios
## ---------------------
## 
## This file was created by CMPT_IND_RETS using the 202201 CRSP database. It contains value- and equal-weighted returns for 5 industry portfolios. The portfolios are constructed at the end of June. The annual returns are from January to December. Missing data are indicated by -99.99 or -999. Copyright 2022 Kenneth R. French
## 
##   0 : Average Value Weighted Returns -- Monthly (59 rows x 5 cols)
##   1 : Average Equal Weighted Returns -- Monthly (59 rows x 5 cols)
##   2 : Average Value Weighted Returns -- Annual (5 rows x 5 cols)
##   3 : Average Equal Weighted Returns -- Annual (5 rows x 5 cols)
##   4 : Number of Firms in Portfolios (59 rows x 5 cols)
##   5 : Average Firm Size (59 rows x 5 cols)
##   6 : Sum of BE / Sum of ME (5 rows x 5 cols)
##   7 : Value-Weighted Average of BE/ME (5 rows x 5 cols)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5ã¤ç›®ãŒãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã«å«ã¾ã‚Œã‚‹éŠ˜æŸ„æ•°ã€1ã¤ç›®ãŒvalue weightedãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®æœˆæ¬¡ãƒªã‚¿ãƒ¼ãƒ³ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;ds[&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##          Cnsmr  Manuf  HiTec  Hlth   Other
## Date                                      
## 2017-03    519    592    663    577   1025
## 2017-04    517    586    658    574   1018
## 2017-05    515    583    655    572   1009
## 2017-06    511    580    651    570   1000
## 2017-07    525    615    684    613   1056
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;ds[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##          Cnsmr  Manuf  HiTec  Hlth   Other
## Date                                      
## 2017-03   0.79  -0.20   1.91   0.03  -1.69
## 2017-04   1.82   0.36   2.19   0.91   0.23
## 2017-05   2.02   0.35   3.12  -0.25  -0.45
## 2017-06  -1.19   0.32  -2.12   5.54   4.22
## 2017-07  -0.07   2.31   4.02   0.70   1.49
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;4-ferdã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;4. FERDã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;fredã§å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&#34;&gt;FREDã§å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://fred.stlouisfed.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;FRED&lt;/a&gt;ã§ã¯å¤šç¨®å¤šæ§˜ãªçµŒæ¸ˆçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚µã‚¤ãƒˆã¸è¡Œãã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«çµ±è¨ˆæ¯ã«ãƒšãƒ¼ã‚¸ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã®çµ±è¨ˆåã®æ¨ªã«ã¤ã„ã¦ã„ã‚‹&lt;code&gt;CPIAUCSL&lt;/code&gt;ãŒTickerã«ãªã£ã¦ãŠã‚Šã€ã“ã‚Œã‚’æ¸¡ã™ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;FRED.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•-2&#34;&gt;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;å…ˆã»ã©è¦‹ãŸTickerã‚’&lt;code&gt;DataReader&lt;/code&gt;é–¢æ•°ã«æ¸¡ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’&lt;code&gt;fred&lt;/code&gt;ã¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; datetime
start &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; datetime&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;datetime(&lt;span style=&#34;color:#ae81ff&#34;&gt;2010&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
end &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; datetime&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;datetime(&lt;span style=&#34;color:#ae81ff&#34;&gt;2013&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;27&lt;/span&gt;)

gdp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;GDP&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;fred&amp;#39;&lt;/span&gt;, start, end)
inflation &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader([&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CPIAUCSL&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CPILFESL&amp;#39;&lt;/span&gt;], &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;fred&amp;#39;&lt;/span&gt;, start, end)

gdp&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##                   GDP
## DATE                 
## 2010-01-01  14764.611
## 2010-04-01  14980.193
## 2010-07-01  15141.605
## 2010-10-01  15309.471
## 2011-01-01  15351.444
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;inflation&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##             CPIAUCSL  CPILFESL
## DATE                          
## 2010-01-01   217.488   220.633
## 2010-02-01   217.281   220.731
## 2010-03-01   217.353   220.783
## 2010-04-01   217.403   220.822
## 2010-05-01   217.290   220.962
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;5-oecdã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;5. OECDã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://stats.oecd.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OECD&lt;/a&gt;ã¯ä»¥å‰ä»¥ä¸‹ã®è¨˜äº‹ã§ç´¹ä»‹ã—ã¾ã—ãŸãŒã€&lt;code&gt;pandas_datareader&lt;/code&gt;ã§ã‚‚å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;ttps://ayatoashihara.github.io/myblog_multi/post/post22/&#34;&gt;OECD.orgã‹ã‚‰ãƒã‚¯ãƒ­ãƒ‘ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’APIã§å–å¾—ã™ã‚‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ãŸã ã€&lt;code&gt;OECD dataset code&lt;/code&gt;ã‚’æŒ‡å®šã™ã‚‹ã ã‘&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ãªã®ã§ã€&lt;code&gt;pandasdmx&lt;/code&gt;ã‚ˆã‚Šã¯è‡ªç”±åº¦ãŒä½ã„ã§ã™ã€‚ ã‚ã¨ã€å‰å›å–å¾—ã—ãŸ&lt;code&gt;MEI_ARCHIVE&lt;/code&gt;ã¨ã‹æŒ‡å®šã™ã‚‹ã¨ãƒ‡ãƒ¼ã‚¿ãŒå¤šã™ãã¦ã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚OECDãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã¨ãã«ã¯ã€å›½ã‚„æœŸé–“ãªã©ç´°ã‹ã„æŒ‡å®šã®ã§ãã‚‹&lt;code&gt;pandasdmx&lt;/code&gt;ã®ã»ã†ãŒè‰¯ã„ã¨å€‹äººçš„ã«æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ãªãŠã€ä½¿ç”¨æ–¹æ³•ã¯FREDã¨åŒæ§˜ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«&lt;code&gt;oecd&lt;/code&gt;ã‚’æŒ‡å®šã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;TUD&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;oecd&amp;#39;&lt;/span&gt;)
df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Country                  Australia  ...                Slovenia
## Frequency                   Annual  ...                  Annual
## Measure    Percentage of employees  ... Percentage of employees
## Time                                ...                        
## 2018-01-01                     NaN  ...                     NaN
## 2019-01-01                     NaN  ...                     NaN
## 2020-01-01                     NaN  ...                     NaN
## 
## [3 rows x 39 columns]
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;6-eurostatã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;6. Eurostatã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;eurostatã‹ã‚‰å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&#34;&gt;Eurostatã‹ã‚‰å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&lt;/h3&gt;
&lt;p&gt;Eurostatã¯æ¬§å·é€£åˆã®çµ±è¨ˆå±€ã§ã€ä¸»ã«EUåœ°åŸŸã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å¤šå²ã«ã‚ãŸã£ã¦ãŠã‚Šã€çµŒæ¸ˆé‡‘èã ã‘ã§ãªãè¾²æ¥­ã‚„äººå£å‹•æ…‹ã€è¼¸é€ã€ç’°å¢ƒç­‰ã€…å¤šç¨®å¤šæ§˜ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;eurostat.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;IDã‚’ã©ã®ã‚ˆã†ã«å–å¾—ã™ã‚Œã°ã‚ˆã„ã®ã‹ã§ã™ãŒã€ä»¥ä¸‹ã®&lt;a href=&#34;https://ec.europa.eu/eurostat/data/database&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ãƒšãƒ¼ã‚¸&lt;/a&gt;ã«ã¦ã€å–å¾—ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã‚’é †ã€…ã«æ˜ã‚Šé€²ã‚ã¦ã„ãã¨é»„è‰²ã§è‰²ã‚’ä»˜ã‘ãŸã‚ˆã†ãªIDã‚³ãƒ¼ãƒ‰ãŒå‡ºã¦ãã¾ã™ã€‚ã“ã‚Œã§å–å¾—ãƒ‡ãƒ¼ã‚¿ã®IDã‚’ç‰¹å®šã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;eurostat2.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ãŸã ã€eurostatã‚‚OECDã¨åŒã˜ãsdmxã«å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚ã€&lt;code&gt;pandasdmx&lt;/code&gt;ã®ã»ã†ãŒä½¿ã„ã‚„ã™ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•-3&#34;&gt;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;ä¸€ä¾‹ã¨ã—ã¦ã€ å…ˆã»ã©è¦‹ãŸ&lt;code&gt;Employment and activity by sex and age - annual data&lt;/code&gt;ã‚’å–å¾—ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;lfsi_emp_a&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;eurostat&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unstack()
df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## UNIT                            INDIC_EM                                                   SEX      AGE                  GEO      FREQ    TIME_PERIOD
## Percentage of total population  Persons in the labour force (former name: active persons)  Females  From 15 to 24 years  Austria  Annual  2018-01-01     54.0
##                                                                                                                                           2019-01-01     52.7
##                                                                                                                                           2020-01-01     52.7
##                                                                                                                          Belgium  Annual  2018-01-01     27.8
##                                                                                                                                           2019-01-01     29.5
## dtype: float64
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æœ€å¾Œã«&#34;&gt;æœ€å¾Œã«&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;pandas_datareader&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¦ã€æ§˜ã€…ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰å¤šç¨®å¤šæ§˜ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã—ãŸã€‚è³‡ç”£é‹ç”¨ä¼šç¤¾ãªã©ã§åƒã„ã¦ã„ã‚‹æ–¹ã¯bloombergã‚„EIKONã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ãŸã‚ã€ã‚ã¾ã‚Šé­…åŠ›çš„ã«æ„Ÿã˜ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å€‹äººã§åˆ†æã‚’ã—ã¦ã„ã‚‹æ–¹ã‚„å®šæœŸçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã„æ–¹ã¯éå¸¸ã«ã‚ˆã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã¨æ€ã„ã¾ã™ã€‚è‡ªåˆ†è‡ªèº«ã€ã“ã®æ–°ã—ã„Webã‚µã‚¤ãƒˆã«ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã—ã¦ã‹ã‚‰ã€é€±æ¬¡ã‚„æœˆæ¬¡å˜ä½ã§çµŒæ¸ˆåˆ†æã‚’ä¸Šã’ã‚ˆã†ã‹ãªã¨æ€ã£ã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã‚’ä½¿ç”¨ã—ã¦çµŒæ¸ˆã®å®šç‚¹è¦³æ¸¬ã‚’ã—ãŸã„ãªã¨æ€ã£ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚çš†ã•ã‚“ã‚‚èˆˆå‘³ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’&lt;code&gt;pandas_datareader&lt;/code&gt;ã§è‡ªå‹•åé›†ã—ã¦ã¿ã¦ãã ã•ã„ï¼&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;ã‚µã‚¤ãƒˆã§çµ±è¨ˆã‚’é¸ã³ã€&lt;code&gt;export &amp;gt;- SDMX Query&lt;/code&gt;ã¨ã™ã‚‹ã¨ãã®çµ±è¨ˆã®ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã‚Œã¾ã™ã€‚ &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
    <item>
      <title>OECD.orgã‹ã‚‰ãƒã‚¯ãƒ­ãƒ‘ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’APIã§å–å¾—ã™ã‚‹</title>
      <link>/post/post22/</link>
      <pubDate>Mon, 19 Oct 2020 00:00:00 +0000</pubDate>
      <guid>/post/post22/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ãƒã‚¯ãƒ­çµŒæ¸ˆãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒã€å„å›½ã®ãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã‚‹ã¨ãªã‚‹ã¨ä¸€è‹¦åŠ´ã§ã™ã€‚ã§ã™ãŒã€OECDã‹ã‚‰APIçµŒç”±ã§ãƒ‡ãƒ¼ã‚¿å–å¾—ã™ã‚Œã°é¢å€’ãªå‡¦ç†ã‚’è‡ªå‹•åŒ–ã§ãã¾ã™ã€‚ä»Šæ—¥ã¯ãã®æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1oecdstat-web-api&#34;&gt;1.OECD.Stat Web API&lt;/h2&gt;
&lt;p&gt;OECD.orgã§ã¯&lt;a href=&#34;https://stats.oecd.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OECD.Stat&lt;/a&gt;ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ãŠã‚Šã€OECDåŠ ç›Ÿå›½ã¨ç‰¹å®šã®éåŠ ç›Ÿå›½ã®æ§˜ã€…ãªçµŒæ¸ˆãƒ‡ãƒ¼ã‚¿ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚WEBã‚µã‚¤ãƒˆã«è¡Œã‘ã°æ‰‹å‹•ã§csvãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€å®šæœŸçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€åˆ†æã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãªã‚‰ã°ãƒ‡ãƒ¼ã‚¿å–å¾—å‡¦ç†ã‚’è‡ªå‹•åŒ–ã—ãŸã„è¡å‹•ã«é§†ã‚‰ã‚Œã¾ã™ã€‚OECDã¯Web APIã‚’æä¾›ã—ã¦ã„ã‚‹ã®ã§ã€&lt;code&gt;Python&lt;/code&gt;ã‚„&lt;code&gt;R&lt;/code&gt;ã•ãˆä½¿ãˆã‚Œã°ã“ã‚Œã‚’å®Ÿç¾ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&amp;lt;OECDå®Ÿæ–½ã®å…·ä½“çš„ãªå†…å®¹&amp;gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ã¯ã€ç¾æ™‚ç‚¹ã§ã®ç‰¹å®šã®OECD REST SDMXã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…è©³ç´°ã®ãƒªã‚¹ãƒˆã§ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åŒ¿åã‚¯ã‚¨ãƒªã®ã¿ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã€èªè¨¼ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å„ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯1,000,000ä»¶ã®ã‚ªãƒ–ã‚¶ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ãƒªã‚¯ã‚¨ã‚¹ãƒˆURLã®æœ€å¤§é•·ã¯1000æ–‡å­—ã§ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã€&lt;code&gt;CORS&lt;/code&gt; ãƒ˜ãƒƒãƒ€ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ (&lt;code&gt;CORS &lt;/code&gt;ã«ã¤ã„ã¦ã®è©³ç´°ã¯ &lt;a href=&#34;http://www.html5rocks.com/en/tutorials/cors/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã‚’å‚ç…§)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã‚¨ãƒ©ãƒ¼ã¯çµæœã«ã¯è¿”ã•ã‚Œã¾ã›ã‚“ãŒã€HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ Web ã‚µãƒ¼ãƒ“ã‚¹ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¾“ã£ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­˜åœ¨ã—ãªã„ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒè¦æ±‚ã•ã‚ŒãŸå ´åˆã¯ã€401 UnauthorizedãŒè¿”ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;REST&lt;/code&gt; ã‚¯ã‚¨ãƒªã® source (ã¾ãŸã¯ Agency ID) ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å¿…é ˆã§ã™ãŒã€ã€ŒALLã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“: å¸¸ã«æœ€æ–°ã®å®Ÿè£…ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã®ä¸¦ã¹æ›¿ãˆã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;lastNObservations&lt;/code&gt;ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dimensionAtObservation=AllDimensions&lt;/code&gt; ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã§ã‚‚ã€è¦³æ¸¬ã¯æ™‚ç³»åˆ— (ã¾ãŸã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆå›ºæœ‰) ã®é †åºã«å¾“ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¾æ™‚ç‚¹ã§ã¯ã€å‚ç…§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2pandasdmx&#34;&gt;2.pandasdmx&lt;/h2&gt;
&lt;p&gt;Web APIã¯&lt;code&gt;sdmx-json&lt;/code&gt;ã¨ã„ã†å½¢å¼ã§æä¾›ã•ã‚Œã¾ã™ã€‚&lt;code&gt;Python&lt;/code&gt;ã§ã¯ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå­˜åœ¨ã—ã¾ã™ã€‚ãã‚ŒãŒ&lt;code&gt;**pandasdmx**&lt;/code&gt;ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ–¹æ³•ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;pandasdmx&lt;/code&gt;ã‚’&lt;code&gt;import&lt;/code&gt;ã—ã€&lt;code&gt;Request&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã«å¼•æ•°ã¨ã—ã¦&amp;rsquo;OECD&amp;rsquo;ã‚’æ¸¡ã—ã€&lt;code&gt;api.Request&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ä½œæˆã—ãŸ&lt;code&gt;api.Request&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®dataãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚¯ã‚¨ãƒªæ¡ä»¶ã‚’æ¸¡ã—ã€OECD.orgã‹ã‚‰&lt;code&gt;sdmx-json&lt;/code&gt;å½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’&lt;code&gt;to_pandas()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§&lt;code&gt;pandas&lt;/code&gt;ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¸æ•´å½¢ã™ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;3å®Ÿè£…&#34;&gt;3.å®Ÿè£…&lt;/h2&gt;
&lt;p&gt;ã§ã¯ã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å–å¾—ã™ã‚‹ã®ã¯ã€ã€Œ&lt;code&gt;**Revisions Analysis Dataset -- Infra-annual Economic Indicators**&lt;/code&gt;ã€ã¨ã„ã†ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã™ã€‚OECDã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ä¸€ã¤ã§ã‚ã‚‹&lt;code&gt;Monthly Ecnomic Indicator&lt;/code&gt;(MEI)ã®ä¿®æ­£ã‚’å«ã‚€å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ã®ã§ã€ä¸»è¦ãªçµŒæ¸ˆå¤‰æ•°(å›½å†…ç·ç”Ÿç”£ã¨ãã®æ”¯å‡ºé …ç›®ã€é‰±å·¥æ¥­ç”Ÿç”£ã¨å»ºè¨­ç”Ÿç”£æŒ‡æ•°ã€å›½éš›åæ”¯ã€è¤‡åˆä¸»è¦æŒ‡æ¨™ã€æ¶ˆè²»è€…ç‰©ä¾¡æŒ‡æ•°ã€å°å£²å–å¼•é«˜ã€å¤±æ¥­ç‡ã€å°±æ¥­è€…æ•°ã€æ™‚é–“å½“ãŸã‚Šè³ƒé‡‘ã€è²¨ãƒãƒãƒ¼ã‚µãƒ—ãƒ©ã‚¤ã€è²¿æ˜“çµ±è¨ˆãªã©)ã«ã¤ã„ã¦ã€åˆå‡ºæ™‚ã®é€Ÿå ±ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ä¿®æ­£ãŒåŠ ãˆã‚‰ã‚ŒãŸç¢ºå ±ãƒ‡ãƒ¼ã‚¿ã¾ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã¯ã€1999å¹´2æœˆã‹ã‚‰æ¯æœˆã®é–“éš”ã§ã€éå»ã«ä¸»è¦çµŒæ¸ˆæŒ‡æ¨™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§åˆ†æå¯èƒ½ã ã£ãŸãƒ‡ãƒ¼ã‚¿ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€å„æ™‚ç‚¹ã§å…¥æ‰‹å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã€äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰ãŒã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ãªã£ã¦ã„ã¾ã™ã€‚æœ€æ–°ã®ãƒ‡ãƒ¼ã‚¿ã¯æœ‰ç”¨ã§ã™ãŒé€Ÿå ±å€¤ãªã®ã§ä¸ç¢ºå®Ÿæ€§ãŒã¤ãã¾ã¨ã„ã¾ã™ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’è¡Œã†éš›ã«ã¯ã“ã®çŠ¶æ³ãŒå†ç¾ã§ããšå®Ÿéš›ã®é‹ç”¨ã‚ˆã‚Šã‚‚è‰¯ã„ç’°å¢ƒã§åˆ†æã—ã¦ã—ã¾ã†ã“ã¨ãŒå•é¡Œã«ãªã£ãŸã‚Šã—ã¾ã™ã€‚ã„ã‚ã‚†ã‚‹&lt;code&gt;Jagged edge&lt;/code&gt;å•é¡Œã§ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã¯å®Ÿé‹ç”¨ã®çŠ¶æ³ãŒå†ç¾ã§ãã‚‹ãŸã‚éå¸¸ã«æœ‰ç”¨ã§ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã¯ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿é …ç›®ã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;çµ±è¨ˆæ¦‚è¦&lt;/th&gt;
&lt;th&gt;çµ±è¨ˆID&lt;/th&gt;
&lt;th&gt;é »åº¦&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;GDP&lt;/td&gt;
&lt;td&gt;101&lt;/td&gt;
&lt;td&gt;å››åŠæœŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é‰±å·¥æ¥­ç”Ÿç”£æŒ‡æ•°&lt;/td&gt;
&lt;td&gt;201&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å°å£²æ¥­å–å¼•é«˜&lt;/td&gt;
&lt;td&gt;202&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ãƒãƒãƒ¼ã‚µãƒ—ãƒ©ã‚¤ - åºƒç¾©æµå‹•æ€§&lt;/td&gt;
&lt;td&gt;601&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è²¿æ˜“çµ±è¨ˆ&lt;/td&gt;
&lt;td&gt;702+703&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;çµŒå¸¸åæ”¯&lt;/td&gt;
&lt;td&gt;701&lt;/td&gt;
&lt;td&gt;å››åŠæœŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å°±æ¥­è€…æ•°&lt;/td&gt;
&lt;td&gt;502&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¤±æ¥­ç‡&lt;/td&gt;
&lt;td&gt;501&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ™‚é–“å½“ãŸã‚Šè³ƒé‡‘ï¼ˆè£½é€ æ¥­ï¼‰&lt;/td&gt;
&lt;td&gt;503&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å˜ä½ã‚ãŸã‚ŠåŠ´åƒã‚³ã‚¹ãƒˆ&lt;/td&gt;
&lt;td&gt;504&lt;/td&gt;
&lt;td&gt;å››åŠæœŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å»ºç¯‰ç”Ÿç”£æŒ‡æ•°&lt;/td&gt;
&lt;td&gt;203&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã¾ãšã€é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚å¼•æ•°ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDã€ãã®ä»–ID(å›½IDã‚„çµ±è¨ˆID)ã€é–‹å§‹åœ°ç‚¹ã€çµ‚äº†åœ°ç‚¹ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandasdmx &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; sdmx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## C:\Users\aashi\ANACON~1\lib\site-packages\pandasdmx\remote.py:13: RuntimeWarning: optional dependency requests_cache is not installed; cache options to Session() have no effect
##   RuntimeWarning,
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;oecd &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sdmx&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Request(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;OECD&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;resp_OECD&lt;/span&gt;(dsname,dimensions,start,end):
    dim_args &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;+&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(d) &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; d &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; dimensions]
    dim_str &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(dim_args)
    resp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; oecd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;data(resource_id&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dsname, key&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dim_str &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/all?startTime=&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; start &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;amp;endTime=&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; end)
    df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; resp&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_pandas()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;reset_index()
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;(df)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ¬¡å…ƒã‚’æŒ‡å®šã—ã¾ã™ã€‚ä»¥ä¸‹ã§ã¯ã€â‘ å›½ã€â‘¡çµ±è¨ˆé …ç›®ã€â‘¢å…¥æ‰‹æ™‚ç‚¹ã€â‘£é »åº¦ã‚’ã‚¿ãƒ—ãƒ«ã§æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;dimensions &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ((&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;USA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;JPN&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;GBR&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;FRA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;DEU&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ITA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CAN&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NLD&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;BEL&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;SWE&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CHE&amp;#39;&lt;/span&gt;),(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;201&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;202&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;601&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;702&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;703&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;701&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;502&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;503&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;504&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;203&amp;#39;&lt;/span&gt;),(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202001&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202002&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202003&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202004&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202005&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202006&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202007&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202008&amp;#34;&lt;/span&gt;),(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;M&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Q&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é–¢æ•°ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; resp_OECD(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;MEI_ARCHIVE&amp;#39;&lt;/span&gt;,dimensions,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2019-Q1&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2020-Q2&amp;#39;&lt;/span&gt;)
result&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;count()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## LOCATION       8266
## VAR            8266
## EDI            8266
## FREQUENCY      8266
## TIME_PERIOD    8266
## value          8266
## dtype: int64
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã®æœ€åˆæ•°ä»¶ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;result&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   LOCATION  VAR     EDI FREQUENCY TIME_PERIOD  value
## 0      BEL  201  202001         M     2019-01  112.5
## 1      BEL  201  202001         M     2019-02  111.8
## 2      BEL  201  202001         M     2019-03  109.9
## 3      BEL  201  202001         M     2019-04  113.5
## 4      BEL  201  202001         M     2019-05  112.1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ãŒTidyãªå½¢(Longå‹)ã§å…¥ã£ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚ä¸€ç•ªå³å´ã®&lt;code&gt;value&lt;/code&gt;ãŒå€¤ã¨ã—ã¦æ ¼ç´ã•ã‚Œã¦ãŠã‚Šã€ãã®ä»–ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;LOCATION - å›½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;VAR - çµ±è¨ˆé …ç›®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;EDI - å…¥æ‰‹æ™‚ç‚¹(MEI_ARCHIVEã®å ´åˆ)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FREQUENCY - é »åº¦(æœˆæ¬¡ã€å››åŠæœŸç­‰)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TIME_PERIOD - çµ±è¨ˆã®åŸºæº–æ™‚ç‚¹&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã‚ˆã£ã¦ã€&lt;code&gt;EDI&lt;/code&gt;ãŒç•°ãªã‚‹è¡Œã§åŒã˜&lt;code&gt;TIME_PERIOD&lt;/code&gt;ãŒå­˜åœ¨ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ä¸Šã§ã¯ãƒ™ãƒ«ã‚®ãƒ¼(&lt;code&gt;BEL&lt;/code&gt;)ã®é‰±å·¥æ¥­ç”Ÿç”£æŒ‡æ•°(201)ã®2020/01æ™‚ç‚¹ã§åˆ©ç”¨å¯èƒ½ãª2019-01~2019-05ã®ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚å¯è¦–åŒ–ã‚„å›å¸°ã‚‚è¡Œã„ã‚„ã™ã„Longãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã®æä¾›ãªã®ã§éå¸¸ã«ã‚ã‚ŠãŒãŸã„ã§ã™ã­ã€‚é‰±å·¥æ¥­ç”Ÿç”£æŒ‡æ•°ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ãæ§˜å­ã‚’å¯è¦–åŒ–ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; seaborn &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; sns
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd

result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; result[result[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;FREQUENCY&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;M&amp;#39;&lt;/span&gt;]
result[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;TIME_PERIOD&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_datetime(result[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;TIME_PERIOD&amp;#39;&lt;/span&gt;],format&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;%Y-%m&amp;#39;&lt;/span&gt;)
sns&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;relplot(data&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;result[&lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; df: (df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;VAR&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;201&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; (pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_numeric(df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;EDI) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;202004&lt;/span&gt;)],x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;TIME_PERIOD&amp;#39;&lt;/span&gt;,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;value&amp;#39;&lt;/span&gt;,hue&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;LOCATION&amp;#39;&lt;/span&gt;,kind&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;line&amp;#39;&lt;/span&gt;,col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;EDI&amp;#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post22/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;1056&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post22/index_files/figure-html/unnamed-chunk-6-2.png&#34; width=&#34;2035&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã‚³ãƒ­ãƒŠã®çµŒæ¸ˆçš„ãªè¢«å®³ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã¦æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ãŒè½ã¡è¾¼ã‚“ã§ã„ãæ§˜å­ãŒè¦‹ã¦å–ã‚Œã‚‹ä¸€æ–¹ã€å¾®å¦™ã«ã§ã™ãŒéå»å€¤ã«ã¤ã„ã¦ã‚‚é€Ÿå ±å€¤â†’ç¢ºå ±å€¤ã¸ã¨ä¿®æ­£ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€å›½ã«ã‚ˆã£ã¦çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®å…¬è¡¨ã«ãƒ©ã‚°ãŒã‚ã‚‹ã“ã¨ã‚‚åˆ†ã‹ã‚Šã¾ã™ã€‚ãƒ™ãƒ«ã‚®ãƒ¼ã¯æœ€ã‚‚å…¬è¡¨ãŒé…ã„ã‚ˆã†ã§ã™ã€‚æ™‚é–“ãŒã‚ã‚‹ã¨ãã«ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ãŸç°¡å˜ãªäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®åˆ†æã‚’è¿½è¨˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4åˆ¥ä»¶ã§ã™ãŒ&#34;&gt;4.åˆ¥ä»¶ã§ã™ãŒã€‚ã€‚ã€‚&lt;/h2&gt;
&lt;p&gt;Python 3 ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢èªå®šãƒ‡ãƒ¼ã‚¿åˆ†æè©¦é¨“ã«åˆæ ¼ã—ã¾ã—ãŸã€‚åˆæ ¼ç‡70%ã ã‘ã‚ã£ã¦ã€ã‹ãªã‚Šç°¡å˜ã§ã—ãŸãŒ&lt;code&gt;Python&lt;/code&gt;ã‚’åŸºç¤ã‹ã‚‰è¦‹è¿”ã™ã„ã„æ©Ÿä¼šã«ãªã‚Šã¾ã—ãŸã€‚ä»Šã‚„ã£ã¦ã„ã‚‹æ¥­å‹™ã§ã¯ãƒ‡ãƒ¼ã‚¿åˆ†æã¯ãŠã‚ã‹&lt;code&gt;Python&lt;/code&gt;ã‚„&lt;code&gt;R&lt;/code&gt;ã‚’ä½¿ã†æ©Ÿä¼šã™ã‚‰ãªã„ã®ã§ã€è»¢è·ã‚‚å«ã‚ãŸå¯èƒ½æ€§ã‚’è€ƒãˆã¦ã„ã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšã€ä»¥ä¸‹ã®è³‡æ ¼ã‚’ä»Šå¹´åº¦ä¸­ã«å–å¾—ã™ã‚‹äºˆå®šã§ã€é‡‘èã«ã“ã ã‚ã‚‰ãšã«ã‚¹ã‚­ãƒ«ã‚’æ´»ã‹ã›ã‚‹ãƒã‚¹ãƒˆã‚’æ¢ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã¨åŒã˜ã§å®£è¨€ã—ã¦è‡ªåˆ†ã‚’è¿½ã„è¾¼ã¾ãªã„ã¨ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Gæ¤œå®š&lt;/li&gt;
&lt;li&gt;Oracle Database Master Silver SQL&lt;/li&gt;
&lt;li&gt;Linuc ãƒ¬ãƒ™ãƒ« 1&lt;/li&gt;
&lt;li&gt;åŸºæœ¬æƒ…å ±æŠ€è¡“è€…&lt;/li&gt;
&lt;li&gt;AWS èªå®šã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ - ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆæ ¼çŠ¶æ³ã¯éƒ½åº¦ãƒ–ãƒ­ã‚°ã§å ±å‘Šã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Rcppã§ãƒ‡ãƒ¼ã‚¿ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’é«˜é€Ÿã«è¡Œã†(Tickãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã‚’äº‹ä¾‹ã«)</title>
      <link>/post/post21/</link>
      <pubDate>Thu, 10 Sep 2020 00:00:00 +0000</pubDate>
      <guid>/post/post21/</guid>
      <description>&lt;h2 id=&#34;0-ã‚„ã‚ŠãŸã„ã“ã¨&#34;&gt;0. ã‚„ã‚ŠãŸã„ã“ã¨&lt;/h2&gt;
&lt;p&gt;ä»Šå›ãŠè¦‹ã›ã™ã‚‹ã®ã¯å‰è¿°ã®é€šã‚Šã€ç‚ºæ›¿ã®Tickãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ãŸå‰å‡¦ç†(ã¨è§£æ)ã«ãªã‚Šã¾ã™ã€‚ä¸»çœ¼ã‚’&lt;code&gt;Rcpp&lt;/code&gt;ã‚’ç”¨ã„ãŸåŠ¹ç‡åŒ–ã«ç½®ã„ã¦ã„ã¾ã™ã®ã§è©³ã—ãã¯è¸ã¿å…¥ã‚Šã¾ã›ã‚“ãŒã€ã‚„ã‚ŠãŸã„ã“ã¨ã‚’ã–ã£ãã‚Šã¨å…ˆã«ç¤ºã—ã¦ãŠãã¾ã™ã€‚&lt;br&gt;
ã‚„ã‚ŠãŸã„ã®ã¯ã€JPY/USDãƒ¬ãƒ¼ãƒˆã®5åˆ†åˆ»ã¿ãƒªã‚¿ãƒ¼ãƒ³ã‹ã‚‰&lt;em&gt;Jump&lt;/em&gt;ã‚’æ¤œçŸ¥ã™ã‚‹ã“ã¨ã§ã™ã€‚ã“ã“ã§ã®Jumpã¨ã¯ãã‚Œã¾ã§ã¨æ¯”ã¹ã¦ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆãŒã‚¬ã‚¯ãƒƒã¨ä¸Šæ˜‡(ä¸‹è½)ã—ãŸç‚¹ã§ã™ã€‚æ—¥ä¸­ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã¯å°åˆ»ã¿ã«å‹•ãã¾ã™ãŒã€ãªã«ã‹ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚‹ã¨å¤§ããä¸Šæ˜‡(ä¸‹è½)ã—ã¾ã™ã€‚ã©ã‚“ãªã‚¤ãƒ™ãƒ³ãƒˆãŒJumpã‚’å¼•ãèµ·ã“ã™ã®ã‹ã¯éå¸¸ã«èˆˆå‘³æ·±ã„ç‚¹ã§ã™ã€‚ã“ã‚Œã‚’æ¤œè¨¼ã™ã‚‹ã«ã¯ã¾ãšJumpã‚’æ¤œçŸ¥ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã™ã€‚ å‚è€ƒã¨ã™ã‚‹ã®ã¯ä»¥ä¸‹ã®è«–æ–‡ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://academic.oup.com/rfs/article-abstract/21/6/2535/1574138?redirectedFrom=fulltext&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Suzanne S. Lee &amp;amp; Per A. Mykland, 2008. &amp;ldquo;Jumps in Financial Markets: A New Nonparametric Test and Jump Dynamics,&amp;rdquo; Review of Financial Studies, Society for Financial Studies, vol. 21(6), pages 2535-2563, November.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;CitationãŒ204ã‚‚ã‚ã‚‹éå¸¸ã«è©•ä¾¡ã•ã‚Œã¦ã„ã‚‹è«–æ–‡ã§ã™ã€‚æ¨å®šæ–¹æ³•ã‚’æ»ã„æ‘˜ã‚“ã§èª¬æ˜ã—ã¾ã™ã€‚ã¾ãšã€é€£ç¶šè¤‡åˆ©ãƒªã‚¿ãƒ¼ãƒ³ã‚’$d\log S(t)$ for $t&amp;gt;0$ã¨ã—ã¾ã™ã€‚ã“ã“ã§ã€$S(t)$ã¯$t$æ™‚ç‚¹ã§ã®è³‡ç”£ä¾¡æ ¼ã§ã™ã€‚å¸‚å ´ã«JumpãŒãªã„å ´åˆã€$S(t)$ã¯ä»¥ä¸‹ã®ç¢ºç‡éç¨‹ã«å¾“ã†ã¨ä»®å®šã—ã¾ã™ã€‚ 
$$
d\log S(t) = \mu(t)dt + \sigma(t)dW(t) \tag{1}
$$ 
ã“ã“ã§ã€$W(t)$ã¯æ¨™æº–ãƒ–ãƒ©ã‚¦ãƒ³é‹å‹•ã€$\mu(t)$ã¯ãƒ‰ãƒªãƒ•ãƒˆé …ã€$\sigma(t)$ã¯ã‚¹ãƒãƒƒãƒˆãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã™ã€‚ã¾ãŸã€JumpãŒã‚ã‚‹ã¨ãã€$S(t)$ã¯ 
$$
d\log S(t) = \mu(t)dt + \sigma(t)dW(t) + Y(t)dJ(t) \tag{2}
$$ 
ã«å¾“ã†ã¨ä»®å®šã—ã¾ã™ã€‚ã“ã“ã§ã€$J(t)$ã¯$W(t)$ã¨ã¯ç‹¬ç«‹ã—ãŸã‚«ã‚¦ãƒ³ãƒˆéç¨‹ã§ã™ã€‚&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;$Y(t)$ã¯ã‚¸ãƒ£ãƒ³ãƒ—ã®ã‚µã‚¤ã‚ºã‚’è¡¨ç¾ã—ã¦ãŠã‚Šã€äºˆæ¸¬å¯èƒ½ãªéç¨‹ã§ã‚ã‚‹ã¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ã€$S(t)$ã®å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã‚’è€ƒãˆã¾ã™ã€‚ãã‚Œã¯ã¤ã¾ã‚Š$\log S(t_i)/S(t_{i-1})$ã§ã™ãŒã€ã“ã‚Œã¯æ­£è¦åˆ†å¸ƒ$N(0,\sigma(t_i))$ã«å¾“ã„ã¾ã™ã€‚&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;ã“ã“ã§ã€$t_{i-1}$ã‹ã‚‰$t_{i}$ã«JumpãŒã‚ã£ãŸéš›ã®$t_i$æ™‚ç‚¹ã®çµ±è¨ˆé‡$\mathcal{L(i)}$ã‚’ä»¥ä¸‹ã§å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\mathcal{L(i)} \equiv \frac{|\log S(t_i)/S(t_{i-1})|}{\hat{\sigma}_{t_i}} \tag{3}
$$ 
ä¸Šè¨˜ã¯å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã®çµ¶å¯¾å€¤ã‚’å˜ç´”ã«æ¨™æº–åŒ–ã—ãŸã‚‚ã®ã§ã™ãŒã€æ¨™æº–åå·®ã®æ¨å®šé‡ã«ã¯ä»¥ä¸‹ã§å®šç¾©ã•ã‚Œã‚‹&amp;quot;Realized Bipower Variation&amp;quot;ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
$$
\hat{\sigma}_{t_i} = \frac{1}{K-2}\sum_{j=i-K+2}^{i-2}|\log S(t_j)/\log S(t_{j-1})||\log S(t_{j-1})/\log S(t_{j-2})| \tag{4}
$$ 
$K$ã¯Windowã«å«ã¾ã‚Œã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã®æ•°ã§ã™ã€‚ä»®ã«5minåˆ»ã¿ãƒªã‚¿ãƒ¼ãƒ³ã‚’ç”¨ã„ã€2020/9/10 10:00ã«JumpãŒç™ºç”Ÿã—ãŸå ´åˆã€$K=270$ã¨ã—ã¦ã„ã‚‹å ´åˆã¯å‰æ—¥2020/9/9 11:30ã‹ã‚‰2020/9/11 09:55ã¾ã§ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ç”¨ã„ã¦è¨ˆç®—ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯ã€ãƒªã‚¿ãƒ¼ãƒ³ã®çµ¶å¯¾å€¤ã‚’ã‹ã‘ãŸã‚‚ã®ã‚’è¶³ã—åˆã‚ã›ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ãŒã€ã“ã‚Œã§JumpãŒç”Ÿã˜ãŸæ¬¡ã®ç¬é–“(ã¤ã¾ã‚Š$t_{i+1}$ã¨ã‹ï¼‰ã®æ¨å®šå€¤ãŒJumpã«å½±éŸ¿ã•ã‚Œã«ãã„ã‚ˆã†ã§ã™ã€‚ã¡ãªã¿ã«$K=270$ã¯5minåˆ»ã¿ãƒªã‚¿ãƒ¼ãƒ³ã®å ´åˆã®æ¨å¥¨å€¤ã¨åˆ¥ã®æ–‡çŒ®ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã†ã—ã¦è¨ˆç®—ã•ã‚ŒãŸJumpçµ±è¨ˆé‡$\mathcal{L(i)}$ã‚’ã©ã®ã‚ˆã†ã«çµ±è¨ˆçš„æ¤œå®šã«ç”¨ã„ã¦Jumpã‚’æ¤œå‡ºã™ã‚‹ã‹ã«è©±ã‚’ç§»ã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã¯ç¢ºç‡å¤‰æ•°ã§ã‚ã‚‹$\mathcal{L(i)}$ã®æœ€å¤§å€¤(ã“ã¡ã‚‰ã‚‚ç¢ºç‡å¤‰æ•°)ã‚’è€ƒãˆã€ãã®åˆ†å¸ƒã‹ã‚‰å¤§ããé€¸è„±ã—ãŸå€¤ã‚’å–ã£ãŸå ´åˆ(95%ç‚¹ã¨ã‹)ã€ãã®ãƒªã‚¿ãƒ¼ãƒ³ã‚’Jumpã¨ã—ã¾ã™ã€‚
æœŸé–“$[t_{i-1},t_{i}]$ã«JumpãŒãªã„ã¨ã—ãŸå ´åˆã€ã“ã®æœŸé–“ã®é•·ã•$\Delta=t_{i}-t_{i-1}$ã‚’$0$ã«è¿‘ã¥ã‘ã‚‹ã¨ã€ã¤ã¾ã‚Š$\Delta\rightarrow0$ã¨ã™ã‚‹ã¨ã€æ¨™æº–æ­£è¦å¤‰æ•°ã®çµ¶å¯¾å€¤ã®æœ€å¤§å€¤ã¯ã€ã‚¬ãƒ³ãƒ™ãƒ«åˆ†å¸ƒã«åæŸã—ã¾ã™ã€‚çš†ã•ã‚“å¤§å¥½ãæ¥µå€¤çµ±è¨ˆã§ã™ã­ã€‚ã‚ˆã£ã¦ã€Jumpã¯ä»¥ä¸‹ã®æ¡ä»¶ãŒæº€ãŸã•ã‚ŒãŸéš›ã«å¸°ç„¡ä»®èª¬ãŒæ£„å´ã•ã‚Œã€æ¤œå‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ 
$$
\mathcal{L(i)} &amp;gt; G^{-1}(1-\alpha)S_{n} + C_{n} \tag{5}
$$ 
ã“ã“ã§ã€$G^{-1}(1-\alpha)$ã¯æ¨™æº–ã‚¬ãƒ³ãƒ™ãƒ«åˆ†å¸ƒã®$(1-\alpha)$åˆ†ä½é–¢æ•°ã§ã™ã€‚$\alpha=10%$ã ã¨2.25ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ 
$$
S_{n} = \frac{1}{c(2\log n)^{0.5}},~ \&lt;br&gt;
C_{n} = \frac{(2\log n)^{0.5}}{c}-\frac{\log \pi+\log(\log n)}{2c(2\log n)^{0.5}}
$$ 
ã§ã™(å°å‡ºã¯ã—ã¾ã›ã‚“ãŒã€1å¼ã¨2å¼ã‚’ä½¿ã£ã¦è¨¼æ˜ã§ãã¾ã™)ã€‚ã“ã“ã§ã€$c=(2/\pi)^{0.5}$ã§ã€$n$ã¯æ¨å®šã«ä½¿ç”¨ã™ã‚‹ç·ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã§ã™ã€‚ æœ€çµ‚çš„ã«ã€$Jump_{t_i}$ã¯
$$
Jump_{t_i} = \log\frac{S(t_i)}{S(t_{i-1})}Ã—I(\mathcal{L(i)} - G^{-1}(1-\alpha)S_{n} + C_{n})\tag{6}
$$ 
ã§æ±‚ã‚ã‚‰ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$I(ãƒ»)$ã¯ä¸­èº«ãŒ0ã‚ˆã‚Šå¤§ãã„ã¨1ã€ãã‚Œä»¥å¤–ã¯0ã‚’è¿”ã™Indicatoré–¢æ•°ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿&#34;&gt;1. ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿&lt;/h2&gt;
&lt;p&gt;ã§ã¯ã€æ¨å®šæ–¹æ³•ãŒã‚ã‹ã£ãŸã®ã§ã¾ãšTickãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚’ã—ã¾ã—ã‚‡ã†ã€‚ãƒ‡ãƒ¼ã‚¿ã¯&lt;code&gt;QuantDataManager&lt;/code&gt;ã‹ã‚‰csvã‚’å–å¾—ã—ã€ãã‚Œã‚’ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(magrittr)

&lt;span style=&#34;color:#75715e&#34;&gt;# Tick dataã®èª­ã¿è¾¼ã¿&lt;/span&gt;
strPath &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(C:\Users\hogehoge\JPYUSD_Tick_2011.csv)&amp;#34;&lt;/span&gt;
JPYUSD &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_csv&lt;/span&gt;(strPath)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é–¢ä¿‚ãªã„ã‚“ã§ã™ãŒã€æœ€è¿‘Rã‚’4.0.2ã¸ä¸Šã’ã¾ã—ãŸã€‚4.0ä»¥ä¸Šã§ã¯&lt;code&gt;Python&lt;/code&gt;ã§ã§ããŸæ–‡å­—åˆ—ã®EscapeãŒã§ãã‚‹ã¨ã†ã“ã¨ã§ä»Šã¾ã§ã®ã‚¹ãƒˆãƒ¬ã‚¹ãŒè§£æ¶ˆã•ã‚Œã¦ã‹ãªã‚Šã†ã‚Œã—ã„ã§ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã€æ—¥ä»˜ã®ä»–ã«Bidå€¤ã€Askå€¤ã¨å–å¼•é‡ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ãªãŠã€ã“ã“ã§ã¯2011å¹´ã®Tickã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚æ±æ—¥æœ¬å¤§éœ‡ç½ã®æ™‚ã®ãƒ‰ãƒ«å††ã‚’å¯¾è±¡ã¨ã™ã‚‹ãŸã‚ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(JPYUSD)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##     DateTime                        Bid             Ask            Volume     
##  Min.   :2011-01-03 07:00:00   Min.   :75.57   Min.   :75.58   Min.   : 1.00  
##  1st Qu.:2011-03-30 15:09:23   1st Qu.:77.43   1st Qu.:77.44   1st Qu.: 2.00  
##  Median :2011-06-15 14:00:09   Median :80.40   Median :80.42   Median : 2.00  
##  Mean   :2011-06-22 05:43:11   Mean   :79.91   Mean   :79.92   Mean   : 2.55  
##  3rd Qu.:2011-09-09 13:54:51   3rd Qu.:81.93   3rd Qu.:81.94   3rd Qu.: 3.00  
##  Max.   :2011-12-30 06:59:59   Max.   :85.52   Max.   :85.54   Max.   :90.00
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¡ãªã¿ã«ã€&lt;code&gt;DateTime&lt;/code&gt;ã¯UTCåŸºæº–ã§æ—¥æœ¬æ™‚é–“ã ã¨2011/1/3 07:00:00ã‹ã‚‰2011-12-30 06:59::59(ç±³å›½æ™‚é–“2011-12-30 16:59:59)ã¾ã§ã‚’å«ã‚“ã§ã„ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã¯ç´„1200ä¸‡ä»¶ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(JPYUSD)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 11946621
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;2-å‰å‡¦ç†&#34;&gt;2. å‰å‡¦ç†&lt;/h2&gt;
&lt;p&gt;ã§ã¯æ¬¡ã«Bidã¨Askã‹ã‚‰ä»²å€¤ã‚’è¨ˆç®—ã—ã€å¾Œã§ãƒªã‚¿ãƒ¼ãƒ³ã‚’ç®—å‡ºã™ã‚‹ãŸã‚ã«å¯¾æ•°ã‚’å–ã£ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Askã¨Bidã®ä»²å€¤ã‚’è¨ˆç®—ã—ã€å¯¾æ•°åŒ–(å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ç®—å‡ºç”¨)&lt;/span&gt;
JPYUSD &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; JPYUSD &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(Mid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (Ask&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;Bid)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                     dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(logMid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(Mid))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¾çŠ¶ä¸è¦å‰‡ã«ä¸¦ã‚“ã§ã„ã‚‹å–å¼•ãƒ‡ãƒ¼ã‚¿ã‚’5minåˆ»ã¿ã®ãƒªã‚¿ãƒ¼ãƒ³ã«æ•´å½¢ã—ã¾ã™ã€‚ã‚„ã‚Šæ–¹ã¯ã€&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;1å¹´é–“ã‚’5minæ¯ã«åˆ»ã‚“ã &lt;code&gt;POSIXct&lt;/code&gt;ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½œã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;1.ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã¨ã€ãã®5minã®Windowã®ã†ã¡ã€æœ€åˆã¨æœ€å¾Œã®ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã‚’é †ã€…ã«è¨ˆç®—ã™ã‚‹é–¢æ•°ã‚’ä½œæˆã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;å®Ÿè¡Œã€‚
ã¨ã„ã†è¨ˆç”»ã§ã™ã€‚ã¾ãšã€1.ã®ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 5minåˆ»ã¿ã§ã®ãƒªã‚¿ãƒ¼ãƒ³ã‚’ç®—å‡ºã™ã‚‹ãŸã‚ã®POSIXãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½œæˆ(288Ã—æ—¥æ•°)&lt;/span&gt;
start &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2011-01-02 22:00:00&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;)
end &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2011-12-31 21:55:00&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;)
from &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(from&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;start,to&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;end,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã§ã¯ã€2.ã«ç§»ã‚ã†ã¨ã„ã†ã“ã¨ãªã‚“ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ãŒ1200ä¸‡ä»¶ã‚‚ã‚ã‚‹ã¨&lt;code&gt;R&lt;/code&gt;ã§&lt;code&gt;purrr::map&lt;/code&gt;ã¨ã‹&lt;code&gt;apply&lt;/code&gt;å±ã‚’ä½¿ç”¨ã—ãŸã¨ã—ã¦ã‚‚ã€é–¢æ•°å‘¼ã³å‡ºã—ã«æ™‚é–“ãŒã‹ã‹ã£ã¦çµæ§‹éåŠ¹ç‡ã ã£ãŸã‚Šã—ã¾ã™ã€‚ã€‚ã€‚&lt;code&gt;sapply&lt;/code&gt;ã§ã‚„ã£ã¦ã¿ã¾ã—ãŸãŒãªã‹ãªã‹å‡¦ç†ãŒå®Œäº†ã›ãšã€å¼·åˆ¶çµ‚äº†ã—ã¾ã—ãŸã€‚ã“ã†ã„ã†ã¨ãã«ã¯ã€&lt;code&gt;Rccp&lt;/code&gt;ãŒä¾¿åˆ©ã§ã™ã€‚&lt;code&gt;R&lt;/code&gt;ã¯ã‚°ãƒ©ãƒ•ã‚„çµ±è¨ˆå‡¦ç†ã®ãŸã‚ã®éå¸¸ã«ä¾¿åˆ©ãªé–¢æ•°ãŒå¤šæ•°ã‚ã‚Šã¾ã™ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®šç¾©ã—ãŸé–¢æ•°ã®å‘¼ã³å‡ºã—ã‚’å«ã‚€ã€å¤§é‡ã®ç¹°ã‚Šè¿”ã—å‡¦ç†ã‚’è‹¦æ‰‹ã¨ã—ã¾ã™(ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªãªã®ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨€èªã‚ˆã‚Šã¯ã¨ã„ã†æ„å‘³ã§ã™)ã€‚ãªã®ã§ã€ç¹°ã‚Šè¿”ã—å‡¦ç†ã®éƒ¨åˆ†ã ã‘ã€&lt;code&gt;C++&lt;/code&gt;ã§æ›¸ã„ã¦ã—ã¾ã£ã¦ã€ãã‚Œã‚’&lt;code&gt;Rcpp&lt;/code&gt;ã‚’ã¤ã‹ã£ã¦&lt;code&gt;R&lt;/code&gt;ã®é–¢æ•°ã¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€å®Ÿè¡Œã€‚çµæœã®é›†è¨ˆã‚„å¯è¦–åŒ–ã€åŸ·ç­†ã¯&lt;code&gt;R&lt;/code&gt;ã§è¡Œã†ã¨ã„ã†ãƒ•ãƒ­ãƒ¼ãŒéå¸¸ã«åŠ¹ç‡çš„ã§ã™ã€‚
ã¾ãŸã€&lt;code&gt;Rccp&lt;/code&gt;ã¯&lt;code&gt;R&lt;/code&gt;ã«ä¼¼ãŸé•å’Œæ„Ÿã®å°‘ãªã„è¨˜è¿°æ–¹æ³•ã§&lt;code&gt;C++&lt;/code&gt;ã‚’è¨˜è¿°ã™ã‚‹ã®ã‚’åŠ©ã‘ã¦ãã‚Œã¾ã™ã€‚è©³ã—ã„ã“ã¨ã¯ä»¥ä¸‹ã‚’è¦‹ã‚Œã°å•é¡Œãªã„ã¨æ€ã„ã¾ã™ã€‚ã‹ãªã‚Šã¾ã¨ã¾ã£ã¦ã„ã¦æ§ãˆã‚ã«è¨€ã£ã¦ç¥ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://teuder.github.io/rcpp4everyone_ja/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã¿ã‚“ãªã®Rcpp&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã§ã¯ã€2.ã«ã‚ãŸã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«å½“ãŸã£ã¦ã¯ãƒãƒƒãƒˆä¸Šã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚&lt;code&gt;C++&lt;/code&gt;ã¯&lt;code&gt;R&lt;/code&gt;ã‚ˆã‚Šã‚‚æ­´å²ãŒã‚ã‚‹ã—ã€ä½¿ç”¨è€…ã‚‚å¤šã„ã®ã§çŸ¥ã‚ŠãŸã„æƒ…å ±ã¯ã™ãè¦‹ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;Rcpp.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;algorithm&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Rcpp;
&lt;span style=&#34;color:#75715e&#34;&gt;//[[Rcpp::plugins(cpp11)]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// [[Rcpp::export]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;DataFrame &lt;span style=&#34;color:#a6e22e&#34;&gt;Rolling_r_cpp&lt;/span&gt;(
    DataFrame input,               &lt;span style=&#34;color:#75715e&#34;&gt;//ï¼ˆè¨ˆæ¸¬æ™‚åˆ»time, è¨ˆæ¸¬å€¤dataï¼‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ 
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    newDatetimeVector from,        &lt;span style=&#34;color:#75715e&#34;&gt;//è¨ˆç®—ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®å§‹ç‚¹ãƒ™ã‚¯ãƒˆãƒ«
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; time_window &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;//è¨ˆç®—ã™ã‚‹windowå¹…ï¼ˆç§’ï¼‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;{ 
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆæ¸¬æ™‚åˆ»ã¨è¨ˆæ¸¬å€¤ã‚’ãƒ™ã‚¯ãƒˆãƒ«ã¨ã—ã¦å–ã‚Šå‡ºã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  newDatetimeVector time &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; input[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DateTime&amp;#34;&lt;/span&gt;]; &lt;span style=&#34;color:#75715e&#34;&gt;// ä»Šå›ã¯ time ã¯æ˜‡é †ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ãŒå‰æã§ã™ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  NumericVector     data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; input[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;logMid&amp;#34;&lt;/span&gt;];
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®çµ‚ç‚¹ãƒ™ã‚¯ãƒˆãƒ«
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  newDatetimeVector to &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; from &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; time_window;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã™ã‚‹æ•°
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  R_xlen_t N &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; from.length();
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// æ ¼ç´ã™ã‚‹ãƒ™ã‚¯ãƒˆãƒ«
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  NumericVector value(N);
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// ãƒ™ã‚¯ãƒˆãƒ«è¦ç´ ã®ä½ç½®ã‚’ã‚ã‚‰ã‚ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  newDatetimeVector&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;iterator begin &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; time.begin();
  newDatetimeVector&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;iterator end   &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; time.end();
  newDatetimeVector&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;iterator p1    &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; begin;
  newDatetimeVector&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;iterator p2    &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; begin;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// window i ã«ã¤ã„ã¦ãƒ«ãƒ¼ãƒ—
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;(R_xlen_t i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; N; &lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;i){
    &lt;span style=&#34;color:#75715e&#34;&gt;// Rcout &amp;lt;&amp;lt; &amp;#34;i=&amp;#34; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &amp;#34;\n&amp;#34;;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; f &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; from[i];         &lt;span style=&#34;color:#75715e&#34;&gt;//windowã®å§‹ç‚¹ã®æ™‚åˆ»
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; t &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; f &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; time_window; &lt;span style=&#34;color:#75715e&#34;&gt;//windowã®çµ‚ç‚¹ã®æ™‚åˆ»
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    &lt;span style=&#34;color:#75715e&#34;&gt;// windowã®çµ‚ç‚¹ãŒæœ€åˆã®è¨ˆæ¸¬æ™‚åˆ»ä»¥å‰ã®æ™‚ã¯NAã€ã¾ãŸã¯
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// windowã®å§‹ç‚¹ãŒæœ€å¾Œã®è¨ˆæ¸¬æ™‚åˆ»ã®ã‚ˆã‚Šå¾Œã®æ™‚ã¯NA
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;begin &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; f &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(end&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)){ 
      value[i]  &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL;
      &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;;&lt;span style=&#34;color:#75715e&#34;&gt;//æ¬¡ã®ãƒ«ãƒ¼ãƒ—ã¸
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    }
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// ãƒ™ã‚¯ãƒˆãƒ« time ã®ä½ç½® p1 ä»¥é™ã®è¦ç´ xã‹ã‚‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ™‚åˆ»ãŒwindowã®å§‹ç‚¹fã€Œä»¥é™ã€ã§ã‚ã‚‹ã€Œæœ€åˆã®è¦ç´ ã€ã®ä½ç½®ã‚’ p1 ã¨ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    p1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;find_if(p1, end, [&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;f](&lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; x){&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; f&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt;x;});
    &lt;span style=&#34;color:#75715e&#34;&gt;// p1 = std::lower_bound(p1, end, f); //ä¸Šã¨åŒç¾©
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    &lt;span style=&#34;color:#75715e&#34;&gt;// ãƒ™ã‚¯ãƒˆãƒ« time ã®ä½ç½® p1 ä»¥é™ã®è¦ç´ xã‹ã‚‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ™‚åˆ»ãŒwindowã®çµ‚ç‚¹tã€Œã‚ˆã‚Šå‰ã€ã§ã‚ã‚‹ã€Œæœ€å¾Œã®è¦ç´ ã€ã®ä½ç½®ã‚’ p2 ã¨ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ï¼ˆä¸‹ã§ã¯ã€æ™‚åˆ»ãŒwindowã®çµ‚ç‚¹tã€Œä»¥é™ã€ã§ã‚ã‚‹ã€Œæœ€åˆã®è¦ç´ ã€ã®ï¼‘ã¤å‰ã®ä½ç½®ã€ã«ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã—ã¦ã„ã‚‹â€™ï¼‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    p2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;find_if(p1, end, [&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;t](&lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; x){&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; t&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt;x;}) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ;
    &lt;span style=&#34;color:#75715e&#34;&gt;// p2 = std::lower_bound(p1, end, t) - 1 ;//ä¸Šã¨åŒç¾©
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    &lt;span style=&#34;color:#75715e&#34;&gt;// è¦ç´ ã®ä½ç½®p1,p2ã‚’ã€è¦ç´ ç•ªå·i1, i2ã«å¤‰æ›ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    R_xlen_t i1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; p1 &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; begin;
    R_xlen_t i2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; p2 &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; begin; 
    
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// è¦ç´ ç•ªå·ã®ç¢ºèª
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// C++ã¯è¦ç´ ç•ªå·ãŒ0ã‹ã‚‰å§‹ã¾ã‚‹ã®ã§Rã«åˆã‚ã›ã‚‹ãŸã‚ã«1ã‚’è¶³ã—ã¦ã„ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Rcout &amp;lt;&amp;lt; &amp;#34;i1 = &amp;#34; &amp;lt;&amp;lt; i1+1 &amp;lt;&amp;lt; &amp;#34; i2 = &amp;#34; &amp;lt;&amp;lt; i2+1 &amp;lt;&amp;lt; &amp;#34;\n&amp;#34;;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// è©²å½“ã™ã‚‹ç¯„å›²ã®ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦è¨ˆç®—ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(i1&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;i2) {
      value[i] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// windowå†…ã«ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; { 
      value[i] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; data[i2] &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; data[i1];
    }
    &lt;span style=&#34;color:#75715e&#34;&gt;// â†‘ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§æ§˜ã€…ãªwindowé–¢æ•°ã‚’ä½œæˆã§ãã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã—ãŸæ™‚é–“ã¨ã€å€¤ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  DataFrame out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
    DataFrame&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;create(
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;from&amp;#34;&lt;/span&gt;, from),
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;, value&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;));
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; out;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Rcpp::sourceCpp&lt;/code&gt;ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«&lt;code&gt;R&lt;/code&gt;ã®é–¢æ•°ã¨ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;system.time&lt;/span&gt;(results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Rolling_r_cpp&lt;/span&gt;(JPYUSD,from))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##    ãƒ¦ãƒ¼ã‚¶   ã‚·ã‚¹ãƒ†ãƒ        çµŒé  
##       0.06       0.00       0.07
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¯ã„ã€‚1200ä¸‡ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã«1ç§’ã‹ã‹ã‚Šã¾ã›ã‚“ã€‚ä¾¿åˆ©ãƒ¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(results)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##       from                           r         
##  Min.   :2011-01-02 22:00:00   Min.   :-1.823  
##  1st Qu.:2011-04-03 15:58:45   1st Qu.:-0.014  
##  Median :2011-07-03 09:57:30   Median : 0.000  
##  Mean   :2011-07-03 09:57:30   Mean   : 0.000  
##  3rd Qu.:2011-10-02 03:56:15   3rd Qu.: 0.015  
##  Max.   :2011-12-31 21:55:00   Max.   : 2.880  
##                                NA&#39;s   :29977
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å•é¡Œãªãã€ãƒªã‚¿ãƒ¼ãƒ³ãŒè¨ˆç®—ã•ã‚Œã¦ã„ã¾ã™ã€‚ã§ã¯ã€&lt;code&gt;Realized Bipower Variation&lt;/code&gt;ã®è¨ˆç®—ã«ç§»ã‚Šã¾ã—ã‚‡ã†ã€‚5minåˆ»ã¿ã®å ´åˆã¯Windowã®é•·ã•ã¯270ãŒæ¨å¥¨ã§ã—ãŸãŒã€ãã“ã‚‚å¼•æ•°ã¨ã—ã¦æŸ”è»Ÿã‚’æŒãŸã›ãŸä½œã‚Šã«ã—ã¾ã™ã€‚ã¾ãŸã€&lt;code&gt;NA&lt;/code&gt;ã®å‡¦ç†ã«ã¤ã„ã¦ã‚‚ä¸å¯§ã«è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;Rcpp.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;cmath&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Rcpp;
&lt;span style=&#34;color:#75715e&#34;&gt;//[[Rcpp::plugins(cpp11)]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// [[Rcpp::export]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbv_cpp&lt;/span&gt;(
    NumericVector x, &lt;span style=&#34;color:#75715e&#34;&gt;// rbvã‚’è¨ˆç®—ã™ã‚‹ãƒªã‚¿ãƒ¼ãƒ³ãƒ™ã‚¯ãƒˆãƒ«
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; na_rm &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; true) &lt;span style=&#34;color:#75715e&#34;&gt;// xã«NAãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€å–ã‚Šé™¤ã„ã¦è¨ˆç®—ã™ã‚‹ã‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;{
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—å›æ•°ã‚’å–å¾—
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  R_xlen_t N &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; x.length();
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—çµæœã‚’å…¥ã‚Œã‚‹å¤‰æ•°ã‚’å®šç¾©
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;

  &lt;span style=&#34;color:#75715e&#34;&gt;// xã®æ¬ ææœ‰ç„¡ã‚’ç¢ºèª
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  LogicalVector lg_NA &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; is_na(x);
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// xã«NAãŒå­˜åœ¨ã—ãŸå ´åˆã€ãã®NAã‚’é™¤ã„ã¦è¨ˆç®—ã™ã‚‹ã‹ã©ã†ã‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(any(lg_NA).is_true() and na_rm&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;FALSE){
    out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¨ˆç®—çµæœã¨ã—ã¦å‡ºåŠ›
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’é™¤ãå ´åˆ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (any(lg_NA).is_true() and na_rm&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;TRUE){
      x[is_na(x)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;TRUE] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.00&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã«0ã‚’åŸ‹ã‚ã€å®Ÿè³ªçš„ã«è¨ˆç®—ã‹ã‚‰é™¤å¤–ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    }
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// rbvã®åˆ†å­(ç·å’Œ)ã‚’è¨ˆç®—
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;(R_xlen_t i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;; i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; N; &lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;i){
      out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; out &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;abs(x[i])&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;abs(x[i&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]);
    }
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// å¹³å‡å€¤ã‚’è¨ˆç®—ã—ã€ãƒ«ãƒ¼ãƒˆã‚’ã¨ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; denomi; &lt;span style=&#34;color:#75715e&#34;&gt;//åˆ†æ¯
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(N&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sum(lg_NA)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      denomi &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; N&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sum(lg_NA)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
      denomi &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
    }
    out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; out&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;denomi;
    out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;sqrt(out);
  }
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; out;
}

&lt;span style=&#34;color:#75715e&#34;&gt;// [[Rcpp::export]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;DataFrame &lt;span style=&#34;color:#a6e22e&#34;&gt;Rolling_rbv_cpp&lt;/span&gt;(
    DataFrame input, &lt;span style=&#34;color:#75715e&#34;&gt;//ï¼ˆè¨ˆæ¸¬æ™‚åˆ»time, è¨ˆæ¸¬å€¤dataï¼‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ 
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; K &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;270&lt;/span&gt;, &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã™ã‚‹Rolling Windowå¹…
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; na_pad &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false, &lt;span style=&#34;color:#75715e&#34;&gt;// Windowå¹…ãŒè¶³ã‚Šãªã„ã¨ãã«NAã‚’è¿”ã™ã‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; na_remove &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false &lt;span style=&#34;color:#75715e&#34;&gt;// Windowå¹…ã®ä¸­ã«NAãŒå­˜åœ¨ã—ãŸå ´åˆã€é™¤ã„ã¦è¨ˆç®—ã‚’è¡Œã†ã‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;){
  &lt;span style=&#34;color:#75715e&#34;&gt;// ãƒªã‚¿ãƒ¼ãƒ³ãƒ™ã‚¯ãƒˆãƒ«ã¨ã‚µãƒ³ãƒ—ãƒ«æ•°ã‚’å–ã‚Šå‡ºã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  NumericVector data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; input[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;];
  R_xlen_t T &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; data.length();
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—çµæœã‚’æ ¼ç´ã™ã‚‹ãƒ™ã‚¯ãƒˆãƒ«ã‚’æº–å‚™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  NumericVector value(T);
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// Windowså¹…æ¯ã«RBVã‚’è¨ˆç®—ã—ã€æ ¼ç´ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(na_pad&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;TRUE){
    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// 0ã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// 0ã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  }
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;(R_xlen_t t &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;; t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; T; &lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;t){
    &lt;span style=&#34;color:#75715e&#34;&gt;// Windowså¹…ãŒè¶³ã‚Šã‚‹ã‹ã©ã†ã‹ã§å‡¦ç†ã‚’åˆ†å²
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (t&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;K&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      value[t] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; rbv_cpp(data[seq(t&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;K,t&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)],na_remove); &lt;span style=&#34;color:#75715e&#34;&gt;// é€šå¸¸è¨ˆç®—ã‚’å®Ÿè¡Œ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(na_pad&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;FALSE) {
      value[t] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; rbv_cpp(data[seq(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,t&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)],na_remove); &lt;span style=&#34;color:#75715e&#34;&gt;// Kã«æº€ãŸãªã„ä¸å®Œå…¨ãªWidnowså¹…ã§è¨ˆç®—ã‚’å®Ÿè¡Œ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
      value[t] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    }
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã—ãŸæ™‚é–“ã¨å€¤ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  DataFrame out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
    DataFrame&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;create(
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;from&amp;#34;&lt;/span&gt;, input[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;from&amp;#34;&lt;/span&gt;]),
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;, data),
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rbv&amp;#34;&lt;/span&gt;,value));
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; out;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã§ã¯ã€ã“ã‚Œã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€&lt;code&gt;R&lt;/code&gt;ã§å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;system.time&lt;/span&gt;(results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Rolling_rbv_cpp&lt;/span&gt;(na_remove &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##    ãƒ¦ãƒ¼ã‚¶   ã‚·ã‚¹ãƒ†ãƒ        çµŒé  
##       1.00       0.38       1.45
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã“ã¡ã‚‰ã‚‚ä¸€ç¬ã§ã™ã­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-jumpçµ±è¨ˆé‡ã®è¨ˆç®—&#34;&gt;3. Jumpçµ±è¨ˆé‡ã®è¨ˆç®—&lt;/h2&gt;
&lt;p&gt;ã§ã¯ã€æ¬¡ã«ä»Šè¨ˆç®—ã—ãŸãƒªã‚¿ãƒ¼ãƒ³ã¨æ¨™æº–åå·®ã‹ã‚‰çµ±è¨ˆé‡$\mathcal{L}_{t_i}$ã‚’è¨ˆç®—ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã®çµ¶å¯¾å€¤ã‚’æ¨™æº–åŒ–=Jumpçµ±è¨ˆé‡&lt;/span&gt;
results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(J&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ifelse&lt;/span&gt;(rbv&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;abs&lt;/span&gt;(r)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;rbv,&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»Šã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(results)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##       from                           r               rbv              J        
##  Min.   :2011-01-02 22:00:00   Min.   :-1.823   Min.   :0.00    Min.   : 0.00  
##  1st Qu.:2011-04-03 15:58:45   1st Qu.:-0.014   1st Qu.:0.02    1st Qu.: 0.28  
##  Median :2011-07-03 09:57:30   Median : 0.000   Median :0.02    Median : 0.64  
##  Mean   :2011-07-03 09:57:30   Mean   : 0.000   Mean   :0.03    Mean   : 0.93  
##  3rd Qu.:2011-10-02 03:56:15   3rd Qu.: 0.015   3rd Qu.:0.03    3rd Qu.: 1.23  
##  Max.   :2011-12-31 21:55:00   Max.   : 2.880   Max.   :0.16    Max.   :58.60  
##                                NA&#39;s   :29977    NA&#39;s   :44367   NA&#39;s   :44423
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã§ã¯ã€Jumpæ¤œå®šã«ç§»ã‚Šã¾ã—ã‚‡ã†ã€‚ã¾ãšã€å¿…è¦ãªé–¢æ•°ã‚’å®šç¾©ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Jumpæ¤œå®šã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®å®šæ•°&amp;amp;é–¢æ•°ã‚’æº–å‚™&lt;/span&gt;
c &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;pi&lt;/span&gt;)^0.5
Cn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(n){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;((&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(n))^0.5&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;c &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;pi&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(n)))&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;c&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(n))^0.5))
}
Sn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(n){
  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(c&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(n))^0.5)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã§ã¯æ¤œå®šã‚’è¡Œã„ã¾ã™ã€‚æ£„å´ã•ã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ã¯1ã€ãã‚Œä»¥å¤–ã¯0ã‚’è¿”ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Jumpæ¤œå®š(10%)ã‚’å®Ÿè¡Œ(è¿”ã‚Šå€¤ã¯logical)&lt;/span&gt;
N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(results&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;J)
results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(Jump &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; J &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2.25&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Sn&lt;/span&gt;(N) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Cn&lt;/span&gt;(N))
&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(results)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##       from                           r               rbv              J        
##  Min.   :2011-01-02 22:00:00   Min.   :-1.823   Min.   :0.00    Min.   : 0.00  
##  1st Qu.:2011-04-03 15:58:45   1st Qu.:-0.014   1st Qu.:0.02    1st Qu.: 0.28  
##  Median :2011-07-03 09:57:30   Median : 0.000   Median :0.02    Median : 0.64  
##  Mean   :2011-07-03 09:57:30   Mean   : 0.000   Mean   :0.03    Mean   : 0.93  
##  3rd Qu.:2011-10-02 03:56:15   3rd Qu.: 0.015   3rd Qu.:0.03    3rd Qu.: 1.23  
##  Max.   :2011-12-31 21:55:00   Max.   : 2.880   Max.   :0.16    Max.   :58.60  
##                                NA&#39;s   :29977    NA&#39;s   :44367   NA&#39;s   :44423  
##     Jump        
##  Mode :logical  
##  FALSE:59864    
##  TRUE :257      
##  NA&#39;s :44423    
##                 
##                 
## 
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;4-ggplot2ã‚’ç”¨ã„ãŸå¯è¦–åŒ–&#34;&gt;4. ggplot2ã‚’ç”¨ã„ãŸå¯è¦–åŒ–&lt;/h2&gt;
&lt;p&gt;æ•°å€¤ãŒè¨ˆç®—ã§ãã¾ã—ãŸã®ã§å¯è¦–åŒ–ã—ã¾ã—ã‚‡ã†ã€‚2011/03/11ã®æ—¥ä¸­ã®JPY/USDã®5minåˆ»ã¿å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã®æ¨ç§»ã¨Jumpã‚’é‡ã­ã¦Plotã—ã¾ã™ã€‚ã¡ãªã¿ã«æ¨ªè»¸ã¯æ—¥æœ¬æ™‚é–“ã«ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 2011/03/11ã®æ±æ—¥æœ¬å¤§éœ‡ç½ç™ºç”Ÿæ™‚ã®Jumpã«ã¤ã„ã¦Plot&lt;/span&gt;
results &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;filter&lt;/span&gt;(from &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2011-03-11 00:00:00&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;),from &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2011-03-12 00:00:00&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;from,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;r)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;geom_path&lt;/span&gt;(linetype&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;geom_path&lt;/span&gt;(ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;from,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;r&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;Jump,colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;red&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;scale_x_datetime&lt;/span&gt;(date_breaks &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2 hours&amp;#34;&lt;/span&gt;, labels &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; scales&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;date_format&lt;/span&gt;(format&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%H:%M&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Asia/Tokyo&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggtitle&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;JPY/USD Jumps within Tohoku earthquake on 2011-3-11&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Warning: Removed 36 row(s) containing missing values (geom_path).

## Warning: Removed 36 row(s) containing missing values (geom_path).
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã“ã“ã¾ã§åŸ·ç­†ã™ã‚‹ã®ã«çµæ§‹æ™‚é–“ä½¿ã£ã¦ã„ã¦ã€ä»Š23:37ãªã‚“ã§æ·±ã„è€ƒå¯Ÿã¯æ§ãˆã¾ã™ãŒã€éœ‡ç½ãŒç™ºç”Ÿã—ãŸã®ãŒ14:46:18ã§ã™ã‹ã‚‰å¸‚å ´ã¯éœ‡ç½ç›´å¾Œå³åº§ã«å††å®‰ã«åå¿œã—ãŸã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ãã®å¾Œãªãœã‹å††é«˜æ–¹å‘ã¸é€²ã¿19:00ã«ã¯ãƒ”ãƒ¼ã‚¯ã«ãªã£ã¦ã„ã¾ã™ã€‚å®‰å…¨è³‡ç”£ã®å††ã¨ã‹è¨€ã‚ã‚Œã¾ã™ãŒã€ã“ã®æ™‚ã°ã‹ã‚Šã¯ä¸ç¢ºå®Ÿæ€§ã®é«˜ã¾ã‚Šã‹ã‚‰ã—ã¦å®‰å…¨ã˜ã‚ƒãªã„ã ã‚ã¨æ€ã„ã¾ã™ãŒã€‚ã€‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;5-ã¾ã¨ã‚&#34;&gt;5. ã¾ã¨ã‚&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Rcpp&lt;/code&gt;ã‚’ä½¿ã£ãŸ&lt;code&gt;R&lt;/code&gt;åˆ†æã®åŠ¹ç‡åŒ–ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚&lt;code&gt;C++&lt;/code&gt;ã¯æ„šç›´ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã‚‚Rã‚ˆã‚Šæ ¼æ®µã«å‡¦ç†ãŒæ—©ã„ã®ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒŸã‚¹ã—ã«ãã„å°è±¡ã§ã™ã€‚å­¦è¡“çš„ãªå®Ÿè£…ã‚’ã‚„ã‚‹ã¨ãã¯å†…å®¹ãŒè¤‡é›‘ã«ãªã‚‹ã®ã§ã“ã‚Œã¯ã‚ã‚ŠãŒãŸã„ã§ã™ã€‚ã¾ãŸã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã£ã¦ã‚‚RStudioã‚’ä½¿ã£ã¦ã„ã‚Œã°ã©ã“ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã£ã¦ã„ã‚‹ã‹æ‰‹ãŒã‹ã‚Šã‚’ãã‚Œã¾ã™ã®ã§ãã®ç‚¹ã§ã‚‚ã‚¹ãƒˆãƒ¬ã‚¹ã¯ãªã„ã®ã§ãŠå‹§ã‚ã§ã™ã€‚&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;éè² ã€æ•´æ•°ã€éæ¸›å°‘ã®å€¤ã‚’æŒã¤ç¢ºç‡éç¨‹ã®ã“ã¨ã€‚ &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;å¹³å‡ã¯ãƒ‰ãƒªãƒ•ãƒˆé …ã®å½¢çŠ¶ã«ã‚ˆã‚Šå¿…ãšã—ã‚‚0ã«ã¯ãªã‚Šã¾ã›ã‚“ãŒã€ä»Šãƒ‰ãƒªãƒ•ãƒˆé …ã¯ååˆ†å°ã•ã„å€¤ã‚’æƒ³å®šã—ã¦ã„ã‚‹ã®ã§ã“ã®æ›¸ãæ–¹ã«ã•ã›ã¦ãã ã•ã„ã€‚è«–æ–‡ã§ã¯ã‚ˆã‚Šå³å¯†ã«å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ &lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
    <item>
      <title>Pytorchã®Pre-trainedãƒ¢ãƒ‡ãƒ«ã§é¦¬ä½“å†™çœŸã®èƒŒæ™¯ã‚’è‡ªå‹•ãƒˆãƒªãƒŸãƒ³ã‚°ã™ã‚‹</title>
      <link>/post/post20/</link>
      <pubDate>Wed, 12 Aug 2020 00:00:00 +0000</pubDate>
      <guid>/post/post20/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚å‰å›ã€ç«¶èµ°é¦¬ã®é¦¬ä½“å†™çœŸã‹ã‚‰CNNã‚’ç”¨ã„ã¦é †ä½ã‚’äºˆæƒ³ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚çµæœã¯èŠ³ã—ããªãã€ç‰¹ã«&lt;code&gt;shap&lt;/code&gt;å€¤ã‚’ç”¨ã„ãŸè¦å› åˆ†æã‚’è¡Œã†ã¨é¦¬ä½“ã‚ˆã‚Šã‚‚èƒŒæ™¯ã®å©èˆã«åå¿œã—ã¦ã„ã‚‹æ§˜å­ãŒè¦‹ãˆãŸã‚Šã¨åˆ†æã®ç²¾ç·»åŒ–ãŒå¿…è¦ã¨ãªã‚Šã¾ã—ãŸã€‚ä»Šå›ã¯&lt;code&gt;Pytorch&lt;/code&gt;ã®Pre-trainedãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦é¦¬ä½“å†™çœŸã‹ã‚‰èƒŒæ™¯ã‚’åˆ‡ã‚Šå‡ºã—ã€é¦¬ä½“ã®ã¿ã¨ãªã£ãŸå†™çœŸã§å†åˆ†æã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-pre-trainedãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰&#34;&gt;1. Pre-trainedãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰&lt;/h2&gt;
&lt;p&gt;ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://pytorch.org/hub/pytorch_vision_deeplabv3_resnet101/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã®ã‚‚ã®ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚ã¾ãšã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; numpy &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; np
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; cv2
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; torch
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; torchvision
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; torchvision &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; transforms
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; glob
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; PIL &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Image
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; PIL
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; os
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/span&gt;
device &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; torch&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;device(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cuda:0&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; torch&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;cuda&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;is_available() &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cpu&amp;#34;&lt;/span&gt;)
model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; torchvision&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;models&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;segmentation&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;deeplabv3_resnet101(pretrained&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)
model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to(device)
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;eval()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã©ã†ã‚„ã‚‰å…¨ã¦ã®Pre-trainedãƒ¢ãƒ‡ãƒ«ã¯ã€åŒã˜æ–¹æ³•ã§æ­£è¦åŒ–ã•ã‚ŒãŸå½¢çŠ¶$ï¼ˆN, 3, H, Wï¼‰$ã®3ãƒãƒ£ãƒ³ãƒãƒ«RGBç”»åƒã®ãƒŸãƒ‹ãƒãƒƒãƒã‚’æƒ³å®šã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã“ã§$N$ã¯ç”»åƒã®æ•°ã€$H$ã¨$W$ã¯å°‘ãªãã¨ã‚‚224ãƒ”ã‚¯ã‚»ãƒ«ã§ã‚ã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ç”»åƒã¯ã€[0, 1]ã®ç¯„å›²ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œã€ãã®å¾Œã€å¹³å‡å€¤ï¼[0.485, 0.456, 0.406]ã¨æ¨™æº–å€¤ï¼[0.229, 0.224, 0.225]ã‚’ä½¿ç”¨ã—ã¦æ­£è¦åŒ–ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¨ã„ã†ã“ã¨ã§ã€å‰å‡¦ç†ã‚’è¡Œã†é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#å‰å‡¦ç†&lt;/span&gt;
preprocess &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; transforms&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Compose([
    transforms&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;ToTensor(),
    transforms&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Normalize(mean&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0.485&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.456&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.406&lt;/span&gt;], std&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0.229&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.224&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.225&lt;/span&gt;]),
])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;2-èƒŒæ™¯å‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ&#34;&gt;2. èƒŒæ™¯å‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ&lt;/h2&gt;
&lt;p&gt;ã§ã¯ã€å‰å›è¨˜äº‹ã®&lt;code&gt;selenium&lt;/code&gt;ã‚’ç”¨ã„ãŸã‚³ãƒ¼ãƒ‰ã§åé›†ã—ãŸç”»åƒã‚’èª­ã¿è¾¼ã¿ã€1æš1æšèƒŒæ™¯å‰Šé™¤å‡¦ç†ã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®š&lt;/span&gt;
folders &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;listdir(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\Users\aashi\umanalytics\photo\image&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;#ãã‚Œãã‚Œã®ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ç”»åƒã‚’èª­ã¿è¾¼ã¿ã€Imageé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦RGBå€¤ãƒ™ã‚¯ãƒˆãƒ«(numpy array)ã¸å¤‰æ›&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i, folder &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; enumerate(folders):
  files &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; glob&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;glob(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:/Users/aashi/umanalytics/photo/image/&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; folder &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/*.jpg&amp;#34;&lt;/span&gt;)
  index &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; i
  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; k, file &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; enumerate(files):
    img_array &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fromfile(file, dtype&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;uint8)
    img &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imdecode(img_array, cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;IMREAD_COLOR)
    h,w,_ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; img&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shape
    input_tensor &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; preprocess(img)
    input_batch &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; input_tensor&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unsqueeze(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to(device)

    &lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt; torch&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;no_grad():
      output &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; model(input_batch)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;out&amp;#39;&lt;/span&gt;][&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]
    output_predictions &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; output&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;argmax(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
    mask_array &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; output_predictions&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;byte()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;cpu()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;numpy()
    Image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fromarray(mask_array&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;save(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\Users\aashi\umanalytics\photo\image\mask.jpg&amp;#39;&lt;/span&gt;)
    mask &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imread(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\Users\aashi\umanalytics\photo\image\mask.jpg&amp;#39;&lt;/span&gt;)
    bg &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;full_like(img,&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)
    img &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;multiply(img&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(float), mask&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(float)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)
    bg &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;multiply(bg&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(float), &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; mask&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(float)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)
    outImage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(img, bg)
    Image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fromarray(outImage&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;uint8))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;convert(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;L&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;save(file)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¡Œã£ã¦ã„ã‚‹å‡¦ç†ã¯Pre-trainedãƒ¢ãƒ‡ãƒ«ã§ä»¥ä¸‹ã®ã‚ˆã†ãª&lt;code&gt;mask&lt;/code&gt;ç”»åƒã‚’å‡ºåŠ›ã—ã€å®Ÿéš›ã®ç”»åƒã®&lt;code&gt;numpy&lt;/code&gt;é…åˆ—ã¨&lt;code&gt;mask&lt;/code&gt;ç”»åƒã‚’çµ±åˆã—ã¦ã€èƒŒæ™¯å‰Šé™¤ç”»åƒã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚å‡ºåŠ›ä¾‹ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;gray()
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;figure(figsize&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;))
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;subplot(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(img)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;subplot(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(mask)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;subplot(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(outImage)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post20/index_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;1920&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒ•ã‚©ãƒ«ãƒ€ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚ã†ã¾ãå‡¦ç†ã§ãã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Œã°èª¿æ•™å¸«ã®æ–¹ãŒæ˜ ã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ã‚‚ã‚ã‚Šã¾ã™ã­ã€‚ç‰©ä½“ã‚’è­˜åˆ¥ã—ã¦ã€é¦¬ã ã‘ã‚’&lt;code&gt;mask&lt;/code&gt;ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒã“ã®ãƒ¢ãƒ‡ãƒ«ã§ã¯ç‰©ä½“ã®ãƒ©ãƒ™ãƒªãƒ³ã‚°ã¾ã§ã¯ã§ããªã„ã®ã§ã“ã®ã¾ã¾é€²ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;maskhorse.PNG&#34; alt=&#34;ãƒ•ã‚©ãƒ«ãƒ€&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;3-cnnã‚’ç”¨ã„ãŸåˆ†æ&#34;&gt;3. CNNã‚’ç”¨ã„ãŸåˆ†æ&lt;/h2&gt;
&lt;p&gt;ã“ã“ã‹ã‚‰ã¯å‰å›è¨˜äº‹ã¨åŒã˜å†…å®¹ã§ã™ã€‚çµæœã®ã¿æ²è¼‰ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;## Test accuracy: 0.711864406779661
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;sklearn.metrics._plot.confusion_matrix.ConfusionMatrixDisplay object at 0x000000003694DFC8&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;./post/post20/index_files/figure-html/unnamed-chunk-9-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ•£ã€…ãªçµæœã«ãªã‚Šã¾ã—ãŸã€‚
ã¾ã£ãŸãè­˜åˆ¥ã§ãã¦ã„ã¾ã›ã‚“ã€‚é¦¬ä½“å†™çœŸã«ã¯é †ä½ã‚’äºˆæ¸¬ã™ã‚‹ã‚ˆã†ãªç‰¹å¾´é‡ã¯ãªã„ã‚“ã§ã—ã‚‡ã†ã‹ã€‚ãã‚Œã¨ã‚‚G1ã®å‡ºèµ°é¦¬ã§ã¯ãƒãƒ©ãƒ„ã‚­ãŒãªãã€è­˜åˆ¥ä¸å¯èƒ½ãªã®ã§ã—ã‚‡ã†ã‹ã€‚ã„ãšã‚Œã„ã«ã›ã‚ˆã€ã¡ã‚‡ã£ã¨å³ã—ãã†ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-shapå€¤ã‚’ç”¨ã„ãŸçµæœè§£é‡ˆ&#34;&gt;4. Shapå€¤ã‚’ç”¨ã„ãŸçµæœè§£é‡ˆ&lt;/h2&gt;
&lt;p&gt;å‰å›åŒæ§˜ã€ã©ã®ã‚ˆã†ã«å¤±æ•—ã—ãŸã®ã‹&lt;code&gt;shap&lt;/code&gt;å€¤ã‚’ä½¿ã£ã¦æ¤œè¨¼ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã®ç”»åƒã‚’ä¾‹ã¨ã—ã¦ä½¿ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(X_test[&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;])
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post20/index_files/figure-html/unnamed-chunk-10-5.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; shap
background &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; X_resampled[np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;random&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;choice(X_resampled&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shape[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;],&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;,replace&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)]

e &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;GradientExplainer(model,background)

shap_values &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shap_values(X_test[[&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]])
shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;image_plot(shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],X_test[[&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post20/index_files/figure-html/unnamed-chunk-11-7.png&#34; width=&#34;576&#34; /&gt;&lt;/p&gt;
&lt;p&gt;å‰è¶³ã‹ã‚‰é¡”ã«ã‹ã‘ã¦ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚æ„å¤–ã«è‡€éƒ¨ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹æ§˜å­ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;5ã¾ã¨ã‚&#34;&gt;5.ã¾ã¨ã‚&lt;/h2&gt;
&lt;p&gt;å©èˆèƒŒæ™¯ã‚’å‰Šé™¤ã—ã€å†å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸãŒçµæœå¤‰ã‚ã‚‰ãšã§ã—ãŸã€‚PyTorchã‚’ä½¿ã£ãŸã‚Šã€èƒŒæ™¯å‰Šé™¤ã‚’è¡Œã†ã„ã„çµŒé¨“ã«ã¯ãªã‚Šã¾ã—ãŸãŒçµæœã¯ä¼´ã‚ãšã¨ã„ã†ã“ã¨ã§é¦¬ä½“å†™çœŸã¯ã„ã£ãŸã‚“ã“ã“ã§ã‚¹ãƒˆãƒƒãƒ—ã§ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ãã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœ¬å½“ã«å†ç¾æ€§ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</title>
      <link>/post/post19/</link>
      <pubDate>Wed, 08 Jul 2020 00:00:00 +0000</pubDate>
      <guid>/post/post19/</guid>
      <description>&lt;h2 id=&#34;1-ä»Šå›ã®ãƒ†ãƒ¼ãƒãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¨ã¯&#34;&gt;1. ä»Šå›ã®ãƒ†ãƒ¼ãƒã€Œãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã€ã¨ã¯ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¯ã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹æŠ•è³‡æˆ¦ç•¥ã®ãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¯ã€ç«‹æ¡ˆã—ãŸæŠ•è³‡æˆ¦ç•¥ãŒã‚ã‚‹æœŸé–“ã«ã‚ãŸã£ã¦å®Ÿè¡Œã•ã‚Œã¦ã„ãŸå ´åˆã«ç™ºç”Ÿã—ãŸã§ã‚ã‚ã†åˆ©ç›Šã¨æå¤±ã‚’ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ç”¨ã„ã¦è¨ˆç®—ã—ã¾ã™ã€‚ãã®éš›ã€ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã‚„ã‚¤ãƒ³ãƒ•ã‚©ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ã‚·ã‚ªãªã©ã®æŠ•è³‡æˆ¦ç•¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è©•ä¾¡ã™ã‚‹ä¸€èˆ¬çš„ãªçµ±è¨ˆé‡ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚æŠ•è³‡å®¶ã¯é€šå¸¸ã€ã“ã‚Œã‚‰ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®çµ±è¨ˆé‡ã‚’èª¿æŸ»ã—ã€æœ€é«˜ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç™ºæ®ã™ã‚‹æŠ•è³‡(é‹ç”¨)æˆ¦ç•¥ã«è³‡ç”£é…åˆ†ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã€è³‡ç”£é‹ç”¨ä¼šç¤¾ã¯è‰¯å¥½ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¡€ã®ã«ã˜ã‚€ã‚ˆã†ãªå›æ•°ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’è©¦è¡ŒéŒ¯èª¤ã—ã€è³‡æ–™ã‚’ä½œã£ã¦ãƒ—ãƒ¬ã‚¼ãƒ³ã—ãŸã‚Šã™ã‚‹ã‚ã‘ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://stat.ameba.jp/user_images/20190212/22/nash210/51/5f/j/o0705061514355131242.jpg&#34; alt=&#34;3å€3åˆ†æ³•ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ&#34;&gt;&lt;/p&gt;
&lt;p&gt;æŠ•è³‡å®¶ã®ç«‹å ´ã«ç«‹ã¤ãªã‚‰ã€ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã•ã‚ŒãŸæŠ•è³‡æˆ¦ç•¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¤ã„ã¦ã¯ã€ã‚¤ãƒ³ã‚µãƒ³ãƒ—ãƒ«(IS)ã¨ã‚¢ã‚¦ãƒˆã‚ªãƒ–ã‚µãƒ³ãƒ—ãƒ«(OOS)ã‚’åŒºåˆ¥ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ISã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯ã€æŠ•è³‡æˆ¦ç•¥ã®è¨­è¨ˆã«ä½¿ç”¨ã—ãŸã‚µãƒ³ãƒ—ãƒ«ï¼ˆæ©Ÿæ¢°å­¦ç¿’ã®æ–‡çŒ®ã§ã¯ã€Œå­¦ç¿’æœŸé–“ã€ã‚„ã€Œè¨“ç·´ã‚»ãƒƒãƒˆã€ã¨å‘¼ã°ã‚Œã‚‹ç‰©ã§ã™ï¼‰ã§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ãŸã‚‚ã®ã§ã™ã€‚ä¸€æ–¹ã€OOSãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯ã€æŠ•è³‡æˆ¦ç•¥ã®è¨­è¨ˆã«ä½¿ç”¨ã•ã‚Œãªã‹ã£ãŸã‚µãƒ³ãƒ—ãƒ«ï¼ˆåˆ¥åã€Œãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã€ï¼‰ã§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¯ã€ãã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æŒã£ã¦ãã®æŠ•è³‡æˆ¦ç•¥ã®æœ‰åŠ¹æ€§ã‚’å ã†ç‰©ã§ã™ã®ã§ã€ISã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒOOSã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ä¸€è‡´ã—ã¦ã„ã‚‹å ´åˆã«å†ç¾æ€§ãŒæ‹…ä¿ã•ã‚Œã€ç¾å®Ÿçš„ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã ã€ã‚¢ã‚¦ãƒˆã‚µãƒ³ãƒ—ãƒ«ã®çµæœã¯ã“ã‚Œã‹ã‚‰ã®çµæœã§ã‚ã‚‹ã®ã§ã€ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’å—ã‘å–ã£ãŸæ™‚ç‚¹ã§ãã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãŒä¿¡é ¼ã«è¶³ã‚‹ã‚‚ã®ã‹åˆ¤æ–­ã™ã‚‹ã“ã¨ã¯é›£ã—ã„ã§ã™ã€‚hold-outæ³•ãªã©ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’åˆ†ã‘ã€OOSã§ã®ãƒ†ã‚¹ãƒˆã‚’è¡Œã£ã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ãŒã€OOSã®çµæœã‚’ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã—ã¦æˆ¦ç•¥ã®æ”¹å–„ãŒã§ãã‚‹ä»¥ä¸Šã€ç´”ç²‹ãªã‚¢ã‚¦ãƒˆã‚µãƒ³ãƒ—ãƒ«ã¨ã¯å‘¼ã¹ã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://www.triton.biz/blog1/wp-content/uploads/2018/04/pic001.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã§ã™ã®ã§ã€ãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‹ã‚‰è‰¯ã„çµæœã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’å—ã‘å–ã£ãŸå ´åˆã€ãã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒã©ã‚Œã ã‘ç¾å®Ÿçš„ã§ã‚ã‚‹ã‹ã‚’ãªã‚“ã¨ã‹ã—ã¦è©•ä¾¡ã™ã‚‹ã“ã¨ãŒéå¸¸ã«é‡è¦ã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚‚è‡ªèº«ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœãŒæŒã¤ä¸ç¢ºå®Ÿæ€§ã‚’ç†è§£ã—ã¦ãŠãã“ã¨ãŒé‡è¦ã§ã™ã€‚ä»Šå›ã¯ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¾å®Ÿæ€§ã‚’ã©ã®ã‚ˆã†ã«ã—ã¦è©•ä¾¡ã™ã‚‹ã®ã‹ã€å†ç¾æ€§ã®ã‚ã‚‹ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ãŸã‚ã«ã¯ä½•ã«æ³¨æ„ã™ã‚Œã°è‰¯ã„ã®ã‹ã‚’èª¿ã¹ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹&#34;&gt;2. ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2308659&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Bailey, Borwein, LÃ³pez de Prado and Zhu(2015)&lt;/a&gt;ã¯ã€ã©ã®ã‚ˆã†ãªé‡‘èæ™‚ç³»åˆ—ã§ã‚‚ã€ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆ(éå­¦ç¿’)ã•ã›ã‚‹ã“ã¨ãŒ(æ¯”è¼ƒçš„)ç°¡å˜ã«ã§ãã‚‹ã¨ä¸»å¼µã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã¨ã¯ã€æ©Ÿæ¢°å­¦ç¿’ã®æ¦‚å¿µã§ã‚ã‚Šï¼Œãƒ¢ãƒ‡ãƒ«ãŒä¸€èˆ¬çš„ãªæ§‹é€ ã‚ˆã‚Šã‚‚ç‰¹å®šã®è¦³å¯Ÿãƒ‡ãƒ¼ã‚¿(ISãƒ‡ãƒ¼ã‚¿)ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã¦ã—ã¾ã†çŠ¶æ³ã‚’è¡¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;Bailey et. al.(2015)ã§ã¯ã€ã“ã®ä¸»å¼µã®ä¸€ä¾‹ã¨ã—ã¦æ ªå¼æˆ¦ç•¥ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœãŒèŠ³ã—ããªã„çŠ¶æ³ãŒæŒ™ã’ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã§ã¯ãã®åã®é€šã‚Šéå»ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€å…·ä½“çš„ã«æå¤±ãŒç™ºç”Ÿã—ã¦ã„ã‚‹éŠ˜æŸ„ã‚’ç‰¹å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã€ãã®éŠ˜æŸ„ã®æ¨å¥¨ã‚’å‰Šé™¤ã™ã‚‹ãŸã‚ã«ã„ãã¤ã‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã€å–å¼•ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆã™ã‚‹ã“ã¨ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ã‚ã‘ã§ã™ï¼ˆã€Œãƒ‡ãƒ¼ã‚¿ãƒ»ã‚¹ãƒŒãƒ¼ãƒ”ãƒ³ã‚°ã€ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ï¼‰ã€‚æ•°å›ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç¹°ã‚Šè¿”ãˆã›ã°ã€ç‰¹å®šã®ã‚µãƒ³ãƒ—ãƒ«ã«å­˜åœ¨ã™ã‚‹ãŒã€æ¯é›†å›£ã®ä¸­ã§ã¯ç¨€ã§ã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ç‰¹å¾´ã‹ã‚‰åˆ©ç›Šã‚’å¾—ã‚‹ã€Œæœ€é©ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ã‚’å°ãã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;æ©Ÿæ¢°å­¦ç¿’ã®æ–‡çŒ®ã§ã¯ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã®å•é¡Œã‚’å¯¾å‡¦ã™ã‚‹ãŸã‚ã®è†¨å¤§ãªç ”ç©¶ã®è“„ç©ãŒã‚ã‚Šã¾ã™ã€‚ã§ã™ãŒã€Bailey et. al.(2015)ã¯ã€æ©Ÿæ¢°å­¦ç¿’ã®æ–‡è„ˆã§ææ¡ˆã•ã‚Œã¦ã„ã‚‹æ‰‹æ³•ã¯ä¸€èˆ¬çš„ã«è¤‡æ•°ã®æŠ•è³‡å•é¡Œã«ã¯é©ç”¨ã§ããªã„ã¨ä¸»å¼µã—ã¾ã™ã€‚ãã®ç†ç”±ã¯ä»¥ä¸‹4ç‚¹ã®ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ©Ÿæ¢°å­¦ç¿’ã§ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚’é˜²ãæ‰‹æ³•ã¯ã€äºˆæ¸¬ã®èª¬æ˜åŠ›ã‚„è³ªã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã€ãã®äº‹è±¡ãŒå®šç¾©ã•ã‚Œã‚‹é ˜åŸŸã«ãŠã„ã¦æ˜ç¤ºçš„ãªç‚¹æ¨å®šã¨ä¿¡é ¼åŒºé–“ã‚’å¿…è¦ã¨ã—ã¾ã™ãŒã€ã“ã®ã‚ˆã†ãªæ˜ç¢ºãªäºˆæ¸¬ã‚’è¡Œã†æŠ•è³‡æˆ¦ç•¥ã¯ã»ã¨ã‚“ã©ãªã„ãŸã‚ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¾‹ãˆã°ã€ã€ŒE-mini S&amp;amp;P500ã¯ã€é‡‘æ›œæ—¥ã®çµ‚å€¤ã§1æ¨™æº–åå·®5ãƒã‚¤ãƒ³ãƒˆã§1,600å‰å¾Œã«ãªã‚‹ã¨äºˆæ¸¬ã•ã‚Œã¦ã„ã¾ã™ã€ã¨ã¯ã‚ã¾ã‚Šè¨€ã‚ã‚Œãšã€ã‚€ã—ã‚ã€Œè²·ã„ã€ã¾ãŸã¯ã€Œå¼·ã„è²·ã„ã€ã¨ã„ã£ãŸå®šæ€§çš„ãªæ¨å¥¨ãŒæä¾›ã•ã‚Œã‚‹ã“ã¨ãŒä¸€èˆ¬çš„ã§ã™ã€‚ã—ã‹ã‚‚ã€ã“ã®äºˆæƒ³ã¯äºˆæ¸¬ã®æœ‰åŠ¹æœŸé™ã‚‚æ˜ç¤ºã•ã‚Œãšã€ãªã«ã‹äºˆæœŸã›ã¬äº‹è±¡ãŒç™ºç”Ÿã—ãŸéš›ã«å¤‰æ›´ãŒãªã•ã‚Œã¾ã™ã€‚ä¸€æ–¹ã€å®šé‡äºˆæ¸¬ã§ã¯é‡‘æ›œæ—¥ã®çµ‚å€¤ã¨æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»®ã«ç‰¹å®šã®æŠ•è³‡æˆ¦ç•¥ãŒäºˆæ¸¬å¼ã«ä¾å­˜ã—ã¦ã„ãŸã¨ã—ã¦ã‚‚ã€æŠ•è³‡æˆ¦ç•¥ã®ä»–ã®æ§‹æˆè¦ç´ ãŒã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¨€ã„æ›ãˆã‚Œã°ã€å˜ã«äºˆæ¸¬å¼ã‚’èª¿æ•´ã™ã‚‹ä»¥å¤–ã«ã‚‚ã€æŠ•è³‡æˆ¦ç•¥ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã•ã›ã‚‹æ–¹æ³•ã¯ãŸãã•ã‚“ã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å›å¸°ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã®æ–¹æ³•ã¯ãƒ‘ãƒ©ãƒ¡ãƒˆãƒªãƒƒã‚¯ã§ã‚ã‚Šã€é‡‘èã®å ´åˆè¦³å¯Ÿä¸å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã«é–¢ã™ã‚‹å¤šãã®ä»®å®šã‚’å«ã‚€ãŸã‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã„ãã¤ã‹ã®æ‰‹æ³•ã¯è©¦è¡Œå›æ•°ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã¦ã„ãªã„ãŸã‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Bailey et. al.(2015)ã§ã¯ã€ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ¯”è¼ƒçš„ä½ã„æŠ•è³‡æˆ¦ç•¥ã‚’ç‰¹å®šã™ã‚‹ãŸã‚ã«ã¯ã€&lt;strong&gt;æ¯”è¼ƒçš„å°‘ãªã„è©¦è¡Œå›æ•°&lt;/strong&gt;ãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ã“ã“ã§ã®è©¦è¡Œå›æ•°ã¨ã¯è©¦è¡ŒéŒ¯èª¤ã®å›æ•°ã ã¨æ€ã£ã¦ãã ã•ã„ã€‚ã¾ãŸã€è©¦è¡Œå›æ•°ã«å¿œã˜ã¦å¿…è¦ã¨ã•ã‚Œã‚‹ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®æœŸé–“ã§ã‚ã‚‹&lt;code&gt;the minimum backtest length&lt;/code&gt;ï¼ˆMinBTLï¼‰ã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚ã“ã®è«–æ–‡ã§ã¯ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«å¸¸ã«ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ãŒã€ä»–ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ã«ã‚‚å¿œç”¨ã§ãã‚‹ãã†ã§ã™ã€‚ãã®å†…å®¹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªãŒå¾“ã†åˆ†å¸ƒã¨ã¯&#34;&gt;3. ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªãŒå¾“ã†åˆ†å¸ƒã¨ã¯&lt;/h2&gt;
&lt;p&gt;MinBTLã‚’å°å‡ºã™ã‚‹ãŸã‚ã«ã€ã¾ãšã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®(æ¼¸è¿‘)åˆ†å¸ƒã‚’å°å‡ºã—ã¾ã™ã€‚ãã‚‚ãã‚‚ã€æŠ•è³‡æˆ¦ç•¥ã®è¨­è¨ˆã¯ã€é€šå¸¸ã€ç‰¹å®šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒé‡‘èå¤‰æ•°ã®å°†æ¥å€¤ã‚’äºˆæ¸¬ã™ã‚‹ã®ã«å½¹ç«‹ã¤ã‹ã‚‚ã—ã‚Œãªã„ã¨ã„ã†äº‹å‰çŸ¥è­˜ã¾ãŸã¯ä¿¡å¿µã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ã•ã¾ã–ã¾ãªæº€æœŸã®å‚µåˆ¸ã®é–“ã«ãƒªãƒ¼ãƒ‰ãƒ©ã‚°åŠ¹æœã‚’èªè­˜ã—ã¦ã„ã‚‹å ´åˆã¯ã€ã‚¤ãƒ¼ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ–ãŒä¸Šæ˜‡ã—ãŸå ´åˆã«å‡è¡¡å€¤ã¸ã®å›å¸°ã«è³­ã‘ã‚‹æˆ¦ç•¥ã‚’è¨­è¨ˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ãƒ¢ãƒ‡ãƒ«ã¯ã€cointegration equationã€ãƒ™ã‚¯ãƒˆãƒ«èª¤å·®è£œæ­£ãƒ¢ãƒ‡ãƒ«ã€ç¢ºç‡å¾®åˆ†æ–¹ç¨‹å¼ã®ã‚·ã‚¹ãƒ†ãƒ ãªã©ã®å½¢ã‚’ã¨ã‚‹ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®ã‚ˆã†ãªãƒ¢ãƒ‡ãƒ«æ§‹æˆï¼ˆã¾ãŸã¯è©¦è¡Œï¼‰ã®æ•°ã¯è†¨å¤§ã§ã‚ã‚Šã€ãƒ•ã‚¡ãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¯å½“ç„¶ã€æˆ¦ç•¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æœ€å¤§åŒ–ã™ã‚‹ã‚‚ã®ã‚’é¸æŠã—ãŸã„ã¨è€ƒãˆã€ãã®ãŸã‚ã«ãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼‰ã‚’è¡Œã„ã¾ã™(å‰è¿°)ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã§ã¯ã€æœ€é©ãªã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã€ã‚·ã‚°ãƒŠãƒ«ã®æ›´æ–°é »åº¦ã€ãƒªã‚¹ã‚¯ã‚µã‚¤ã‚¸ãƒ³ã‚°ã€ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ã€æœ€å¤§ä¿æœ‰æœŸé–“ãªã©ãªã©ã‚’ä»–ã®å¤‰æ•°ã¨ã®å…¼ã­åˆã„ã®ä¸­ã§è©•ä¾¡ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®è«–æ–‡ä¸­ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è©•ä¾¡ã®å°ºåº¦ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã‚‹ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã¯ã€éå»ã®ãƒªã‚¿ãƒ¼ãƒ³ã®ã‚µãƒ³ãƒ—ãƒ«ã«åŸºã¥ã„ã¦ã€æˆ¦ç•¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è©•ä¾¡ã™ã‚‹çµ±è¨ˆé‡ã§ã€BMã«å¯¾ã™ã‚‹å¹³å‡è¶…éãƒªã‚¿ãƒ¼ãƒ³/æ¨™æº–åå·®(ãƒªã‚¹ã‚¯)ã¨ã—ã¦å®šç¾©ã•ã‚Œã¾ã™ã€‚é€šå¸¸ã«ã¯ã€ã€Œãƒªã‚¹ã‚¯1æ¨™æº–åå·®ã«å¯¾ã™ã‚‹ãƒªã‚¿ãƒ¼ãƒ³ã€ã¨è§£é‡ˆã•ã‚Œã€è³‡ç”£ã‚¯ãƒ©ã‚¹ã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒ1ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã¨éå¸¸ã«è‰¯ã„æˆ¦ç•¥ã§ã‚ã‚‹ã¨è¦‹ãªã›ã¾ã™ã€‚ä»¥ä¸‹ã§ã¯ã€ã‚ã‚‹æˆ¦ç•¥ã®è¶…éãƒªã‚¿ãƒ¼ãƒ³$r_t$ãŒi.i.d.ã®ç¢ºç‡å¤‰æ•°ã§ã‚ã‚Šã€æ­£è¦åˆ†å¸ƒã«å¾“ã†ã¨ä»®å®šã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€$r_t$ã®åˆ†å¸ƒã¯$r_s(t\neq s)$ã¨ç‹¬ç«‹ã§ã‚ã‚‹ã“ã¨ã‚’ä»®å®šã—ã¦ã„ã¾ã™ã€‚ã‚ã¾ã‚Šç¾å®Ÿçš„ãªä»®å®šã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;$$
r_t \sim \mathcal{N}(\mu,\sigma^2)
$$
ã“ã“ã§ã€$\mathcal{N}$ã¯å¹³å‡$\mu$ã€åˆ†æ•£$\sigma^2$ã®æ­£è¦åˆ†å¸ƒã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ä»Šã€æ™‚ç‚¹t~t-q+1ã®è¶…éãƒªã‚¿ãƒ¼ãƒ³$r_{t}(q)$ã‚’&lt;/p&gt;
&lt;p&gt;$$
r_{t}(q) \equiv r_{t} + r_{t-1} + &amp;hellip; + r_{t-q+1}
$$
ã¨å®šç¾©ã™ã‚‹ã¨(è¤‡åˆ©éƒ¨åˆ†ã‚’ç„¡è¦–ã—ã¦ã¾ã™)ã€å¹´ç‡åŒ–ã•ã‚ŒãŸã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã¯&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} SR(q) &amp;amp;=&amp;amp; \frac{E[r_{t}(q)]}{\sqrt{Var(r_{t}(q))}}\\ &amp;amp;=&amp;amp; \frac{q\mu}{\sqrt{q}\sigma}\\ &amp;amp;=&amp;amp; \frac{\mu}{\sigma}\sqrt{q} \end{eqnarray}&lt;/code&gt;
$$
ã¨è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã“ã§ã€$q$ã¯å¹´æ¯ã®ãƒªã‚¿ãƒ¼ãƒ³ã®æ•°(é »åº¦)ã§ã™ã€‚ä¾‹ãˆã°ã€æ—¥æ¬¡ãƒªã‚¿ãƒ¼ãƒ³ã®å ´åˆ$q=365$ã¨ãªã‚Šã¾ã™(é–å¹´ã‚’é™¤ã)ã€‚
&lt;code&gt;\(\mu\)&lt;/code&gt;ã¨$\sigma$ã¯ä¸€èˆ¬ã«æœªçŸ¥ã§ã™ã®ã§ã€$SR$ã®çœŸå€¤ã‚’çŸ¥ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ãªã®ã§ã€$R_t$ã‚’æ¨™æœ¬ãƒªã‚¿ãƒ¼ãƒ³ã€ãƒªã‚¹ã‚¯ãƒ•ãƒªãƒ¼ãƒ¬ãƒ¼ãƒˆ$R^f$(å®šæ•°)ã¨ã™ã‚‹ã¨ã€æ¨™æœ¬å¹³å‡$\hat{\mu}=1/T\sum_{t=1}^T R_{t}-R^f$ã¨æ¨™æœ¬æ¨™æº–åå·®$\hat{\sigma}=\sqrt{1/T\sum_{t=1}^{T}(R_{t}-\hat{\mu})}$ã‚’ç”¨ã„ã¦ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®æ¨å®šå€¤ã‚’è¨ˆç®—ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™($T$ã¯ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)ã€‚&lt;/p&gt;
&lt;p&gt;$$
\hat{SR}(q) = \frac{\hat{\mu}}{\hat{\sigma}}\sqrt{q}
$$
å¿…ç„¶çš„ãªçµæœã¨ã—ã¦ã€$SR$ã®è¨ˆç®—ã¯ã‹ãªã‚Šã®æ¨å®šèª¤å·®ãŒä¼´ã†å¯èƒ½æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚ã§ã¯ã€æœ¬ç¯€ã®æœ¬é¡Œã€$\hat{SR}$ã®æ¼¸è¿‘åˆ†å¸ƒã‚’å°å‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã¾ãšã€$\hat{\mu}$ã¨$\hat{\sigma}^2$ã®æ¼¸è¿‘åˆ†å¸ƒã¯i.i.d.ã¨$\mu, \sigma$ãŒæœ‰é™ãªå€¤ã‚’ã¨ã‚‹ã“ã¨ã‹ã‚‰ä¸­å¿ƒæ¥µé™å®šç†ã‚’é©ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€&lt;/p&gt;
&lt;p&gt;$$
\sqrt{T}\hat{\mu}\sim^{a}\mathcal{N}(\mu,\sigma^2), \&lt;br&gt;
\sqrt{T}\hat{\sigma}^2\sim^a\mathcal{N}(\sigma^2,2\sigma^4)
$$
ã¨ãªã‚Šã¾ã™ã€‚ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã¯ã“ã®$\hat{\mu}$ã¨$\hat{\sigma}^2$ã‹ã‚‰è¨ˆç®—ã•ã‚Œã‚‹ç¢ºç‡å¤‰æ•°ã§ã‚ã‚‹ã®ã§ã€ã“ã®é–¢æ•°ã‚’$g(\hat{{\boldsymbol \theta}})$ã¨è¡¨ã—ã¾ã—ã‚‡ã†ã€‚ã“ã“ã§ã€$\hat{{\boldsymbol \theta}}=(\hat{\mu},\hat{\sigma}^2)&#39;$ã§ã™ã€‚ä»Šã€i.i.d.ã§ã‚ã‚‹ã®ã§$\hat{{\boldsymbol \theta}}$ã¯äº’ã„ã«ç‹¬ç«‹ã¨ãªã‚Šã€ä¸Šè¨˜ã®è­°è«–ã‹ã‚‰æ¼¸è¿‘åŒæ™‚åˆ†å¸ƒã¯&lt;/p&gt;
&lt;p&gt;$$
\sqrt{T}\hat{{\boldsymbol \theta}} \sim^a \mathcal{N}({\boldsymbol \theta},{\boldsymbol V_{\boldsymbol \theta}})
$$
ã¨æ›¸ã‘ã¾ã™ã€‚ã“ã“ã§ã€${\boldsymbol V_{\boldsymbol \theta}}$ã¯&lt;/p&gt;
&lt;p&gt;$$
{\boldsymbol V_{\boldsymbol \theta}} = \left( 
\begin{array}{cccc}
\sigma^2 &amp;amp; 0\&lt;br&gt;
0 &amp;amp; 2\sigma^4\&lt;br&gt;
\end{array}
\right)
$$
ã§ã™ã€‚ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®æ¨å®šå€¤ã¯ä»Š$g(\hat{{\boldsymbol \theta}})$ã¨$\hat{{\boldsymbol \theta}}$ã ã‘ã®é–¢æ•°ã«ãªã£ã¦ã„ã¾ã™ã®ã§ãƒ‡ãƒ«ã‚¿æ³•ã‚ˆã‚Šã€&lt;/p&gt;
&lt;p&gt;$$
\hat{SR} = g(\hat{{\boldsymbol \theta}}) \sim^a \mathcal{N}(g({\boldsymbol \theta}),\boldsymbol V_g)
$$
ã¨æ¼¸è¿‘çš„ã«æ­£è¦åˆ†å¸ƒã«å¾“ã„ã¾ã™ã€‚ã“ã“ã§ã€$\boldsymbol V_g$ã¯&lt;/p&gt;
&lt;p&gt;$$
\boldsymbol V_g=\frac{\partial g}{\partial{\boldsymbol \theta}}{\boldsymbol V_{\boldsymbol \theta}}\frac{\partial g}{\partial{\boldsymbol \theta}&#39;}
$$
ã§ã™ã€‚$g({\boldsymbol \theta})=\mu/\sigma$ãªã®ã§ã€&lt;/p&gt;
&lt;p&gt;$$
\frac{\partial g}{\partial{\boldsymbol \theta}&#39;} = \left[ 
\begin{array}{cccc}
\frac{\partial g}{\partial \mu}\&lt;br&gt;
\frac{\partial g}{\partial \sigma^2}\&lt;br&gt;
\end{array}
\right]
= \left[ 
\begin{array}{cccc}
\frac{1}{\sigma}\&lt;br&gt;
-\frac{\mu}{2\sigma^3}\&lt;br&gt;
\end{array}
\right]
$$
ã‚ˆã£ã¦ã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} \boldsymbol V_g &amp;amp;=&amp;amp; \left( \begin{array}{cccc} \frac{\partial g}{\partial \mu}, \frac{\partial g}{\partial \sigma}\\ \end{array} \right) \left(  \begin{array}{cccc} \sigma^2 &amp;amp; 0\\ 0 &amp;amp; 2\sigma^4\\ \end{array} \right) \left( \begin{array}{cccc} \frac{\partial g}{\partial \mu}\\ \frac{\partial g}{\partial \sigma}\\ \end{array} \right) \\ &amp;amp;=&amp;amp; \left( \begin{array}{cccc} \frac{\partial g}{\partial \mu}\sigma^2, \frac{\partial g}{\partial \sigma}2\sigma^4\\ \end{array} \right) \left( \begin{array}{cccc} \frac{\partial g}{\partial \mu}\\ \frac{\partial g}{\partial \sigma}\\ \end{array} \right) \\ &amp;amp;=&amp;amp; (\frac{\partial g}{\partial \mu})^2\sigma^2 + (\frac{\partial g}{\partial \sigma})^2\sigma^4 \\ &amp;amp;=&amp;amp; 1 + \frac{\mu^2}{2\sigma^2} \\ &amp;amp;=&amp;amp; 1 + \frac{1}{2}SR^2 \end{eqnarray}&lt;/code&gt;
$$
ã¨å°å‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®çµ¶å¯¾å€¤ãŒå¤§ãããªã‚‹ã»ã©æŒ‡æ•°çš„ã«åˆ†æ•£ãŒå¤§ãããªã‚‹å‚¾å‘ãŒã‚ã‚‹ã®ã§è‰¯ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è¦‹ãŸæ™‚ã«ã¯æ³¨æ„ãŒå¿…è¦ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å¹´ç‡åŒ–ã•ã‚ŒãŸã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®æ¨å®šå€¤$\hat{SR}(q)$ãŒå¾“ã†åˆ†å¸ƒã¯ã“ã“ã‹ã‚‰&lt;/p&gt;
&lt;p&gt;$$
\hat{SR}(q)\sim^a \mathcal{N}(\sqrt{q}SR,\frac{V(q)}{T}) \&lt;br&gt;
V(q) = q{\boldsymbol V}_g = q(1 + \frac{1}{2}SR^2)
$$
ã¨ãªã‚Šã¾ã™ã€‚ä»Šã€$y$ã‚’ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’è¡Œã†å¹´æ•°ã¨ã™ã‚‹ã¨$T=yq$ã¨æ›¸ã‘ã€ã“ã‚Œã‚’ç”¨ã„ã¦ä¸Šå¼ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™(æ—¥æ¬¡ãƒªã‚¿ãƒ¼ãƒ³ã§3å¹´è¨ˆæ¸¬ã®å ´åˆã€ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º$T$ã¯$T=3Ã—365=1095$)ã€‚&lt;/p&gt;
&lt;p&gt;$$
\hat{SR}(q)\sim^a \mathcal{N}(\sqrt{q}SR,\frac{1+\frac{1}{2}SR^2}{y}) \tag{1}
$$
é »åº¦$q$ã¯ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®å¹³å‡ã«ã¯å½±éŸ¿ã—ã¾ã™ãŒåˆ†æ•£ã«ã¯å½±éŸ¿ã‚’åŠã¼ã—ã¾ã›ã‚“ã€‚ã“ã‚Œã§ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®æ¨å®šå€¤ã®æ¼¸è¿‘åˆ†å¸ƒã‚’å°å‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã•ã¦ã€ã“ã‚Œã‚’ä½¿ã£ã¦ãªã«ã‚’ã—ãŸã‹ã£ãŸã®ã‹ã¨ã„ã†ã“ã¨ã§ã™ãŒã€ç§ãŸã¡ã¯ä»Šãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®ä¿¡é ¼æ€§ã«ã¤ã„ã¦è€ƒãˆã¦ã„ãŸã®ã§ã—ãŸã€‚ã¤ã¾ã‚Šã€FMãŒæ–°å•†å“ã‚’é–‹ç™ºã™ã‚‹ãŸã‚ã«é ­ã‚’ã²ã­ã£ã¦è€ƒãˆå‡ºã—ãŸ$N$å€‹ã®æŠ•è³‡æˆ¦ç•¥æ¡ˆã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’ã—ãŸéš›ã«ã€ãã‚Œã‚‰ã®ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®çœŸå€¤ãŒã©ã‚Œã‚‚0ã§ã‚ã‚‹ã«ã‚‚é–¢ã‚ã‚‰ãšã€éå¸¸ã«é«˜ã„(è‰¯ã„)å€¤ãŒå‡ºã‚‹ç¢ºç‡ã¯ã„ã‹ã»ã©ãªã®ã‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚Bailey et. al.(2015)ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;How high is the expected maximum Sharpe ratio IS among a set of strategy configurations where the true Sharpe ratio is zero?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ã¾ãŸã€æœŸå¾…æœ€å¤§ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®å€¤ã‚’å°ã•ãã™ã‚‹ãŸã‚ã«ã¯ã€ã„ã£ãŸã„ã©ã‚Œã»ã©ã®æœŸé–“ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’ã™ã¹ããªã®ã‹ã‚‚çŸ¥ã‚ŠãŸã„ã‚ã‘ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-the-minimum-backtest-lengthã‚’å°å‡ºã—ã¦ã¿ã‚‹&#34;&gt;4. &lt;code&gt;the minimum backtest length&lt;/code&gt;ã‚’å°å‡ºã—ã¦ã¿ã‚‹&lt;/h2&gt;
&lt;p&gt;ä»Šè€ƒãˆã¦ã„ã‚‹çŠ¶æ³ã¯ã€$\mu=0$ã§$y$ã‚’ç°¡å˜åŒ–ã®ãŸã‚ã«1å¹´ã¨ã™ã‚‹ã¨(1)å¼ã‚ˆã‚Š$\hat{SR}(q)$ã¯æ¨™æº–æ­£è¦åˆ†å¸ƒ$\mathcal{N}(0,1)$ã«å¾“ã„ã¾ã™ã€‚ã•ã¦ã€ä»Šã‹ã‚‰ç§ãŸã¡ã¯$\hat{SR}_n(n=1,2,&amp;hellip;N)$ã®æœ€å¤§å€¤$\max[\hat{SR}]_N$ã®æœŸå¾…å€¤ã«ã¤ã„ã¦è€ƒãˆã¦ã„ãã®ã§ã™ãŒã€å‹˜ã®è‰¯ã„äººãªã‚‰ãŠæ°—ã¥ãã®é€šã‚Šã€è­°è«–ã¯æ¥µå€¤çµ±è¨ˆã®æ–‡è„ˆã«å…¥ã£ã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã™ã€‚$\hat{SR}_n\sim\mathcal{N}(0,1)$ã¯i.i.d.ãªã®ã§ã€ãã®æœ€å¤§çµ±è¨ˆé‡ã®æ¥µå€¤åˆ†å¸ƒã¯Fisher-Tippett-Gnedenkoå®šç†ã‚ˆã‚Šã‚¬ãƒ³ãƒ™ãƒ«åˆ†å¸ƒã«ãªã‚Šã¾ã™(è¨¼æ˜è¿½ãˆã¦ãªã„ã§ã™ã€ã”ã‚ã‚“ãªã•ã„)ã€‚&lt;/p&gt;
&lt;p&gt;$$
\lim_{N\rightarrow\infty}prob[\frac{\max[\hat{SR}]_N-\alpha}{\beta}\leq x] = G(x) = e^{-e^{-x}}
$$
ã“ã“ã§ã€$\alpha=Z(x)^{-1}[1-1/N], \beta=Z(x)^{-1}[1-1/Ne^{-1}]-\alpha$ã§ã€$Z(x)$ã¯æ¨™æº–æ­£è¦åˆ†å¸ƒã®ç´¯ç©åˆ†å¸ƒé–¢æ•°ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã‚¬ãƒ³ãƒ™ãƒ«åˆ†å¸ƒã®ãƒ¢ãƒ¼ãƒ¡ãƒ³ãƒˆæ¯é–¢æ•°$M_x(t)$ã¯&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} M_x(t) &amp;amp;=&amp;amp; E[e^{tx}] = \int_{-\infty}^\infty e^{tx}e^{-x}e^{-e^{-x}}dx \\ \end{eqnarray}&lt;/code&gt;
$$
ã¨æ›¸ã‘ã€$x=-\log(y)$ã¨å¤‰æ•°å¤‰æ›ã™ã‚‹ã¨$dx/dy=-1/y=-(e^{-x})^{-1}$ãªã®ã§ã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} M_x(t) &amp;amp;=&amp;amp; \int_{\infty}^0-e^{-t\log(y)}e^{-y}dy \\ &amp;amp;=&amp;amp; \int_{0}^\infty y^{-t}e^{-y}dy \\ &amp;amp;=&amp;amp; \Gamma(1-t) \end{eqnarray}&lt;/code&gt;
$$
ã¨ãªã‚Šã¾ã™ã€‚$\Gamma(x)$ã¯ã‚¬ãƒ³ãƒé–¢æ•°ã§ã™ã€‚ã“ã“ã‹ã‚‰ã€æ¨™æº–åŒ–ã•ã‚ŒãŸæœ€å¤§çµ±è¨ˆé‡ã®æœŸå¾…å€¤(å¹³å‡)ã¯&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} \lim_{N\rightarrow\infty} E[\frac{\max[\hat{SR}]_N-\alpha}{\beta}] &amp;amp;=&amp;amp; M_x&#39;(t)|_{t=0} \\ &amp;amp;=&amp;amp; (-1)\Gamma&#39;(1) \\ &amp;amp;=&amp;amp; (-1)(-\gamma) = \gamma \end{eqnarray}&lt;/code&gt;
$$
ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$\gamma\approx0.5772156649&amp;hellip;$ã¯Euler-Mascheroniå®šæ•°ã§ã™ã€‚ã‚ˆã£ã¦ã€$N$ãŒå¤§ãã„ã¨ãã€i.i.d.ã®æ¨™æº–æ­£è¦åˆ†å¸ƒã®æœ€å¤§çµ±è¨ˆé‡ã®æœŸå¾…å€¤ã¯&lt;/p&gt;
&lt;p&gt;$$
E[\max[\hat{SR}]] \approx \alpha + \gamma\beta = (1-\gamma)Z^{-1}[1-\frac{1}{N}]+\gamma Z^{-1}[1-\frac{1}{N}e^{-1}] \tag{2}
$$
ã¨è¿‘ä¼¼ã§ãã¾ã™($N&amp;gt;1$)ã€‚ã“ã‚ŒãŒBailey et. al.(2015)ã®Proposition 1.ã«ãªã‚Šã¾ã™ã€‚$E[\max[\hat{SR}]]$ã‚’æˆ¦ç•¥æ•°(è©¦è¡ŒéŒ¯èª¤æ•°)$N$ã®é–¢æ•°ã¨ã—ã¦ãƒ—ãƒ­ãƒƒãƒˆã—ãŸã®ãŒä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(ggplot2)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Warning: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ &#39;ggplot2&#39; ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 4.1.3 ã® R ã®ä¸‹ã§é€ ã‚‰ã‚Œã¾ã—ãŸ
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;ExMaxSR &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(N){
  gamma_ct &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;digamma&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
  Z &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;qnorm&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.99&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;((&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;gamma_ct)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;Z&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1-1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;N) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; gamma_ct&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;Z&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1-1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;N&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)^{&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;}))
}
N &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)
result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; purrr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;map&lt;/span&gt;(N,ExMaxSR)
ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(ExpMaxSR &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;(result),N &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;(N)),&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;N,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ExpMaxSR)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;(size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ylim&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post19/index_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;å°ã•ã„$N$ã«å¯¾ã—ã¦æ€¥æ¿€ã«$\max[\hat{SR}]$ã®æœŸå¾…å€¤ãŒä¸Šæ˜‡ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚$N=10$ã®æ™‚ã€$\max[\hat{SR}]=1.54$ã¨ãªã£ã¦ãŠã‚Šã€å…¨ã¦ã®æˆ¦ç•¥ã®ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®çœŸå€¤ãŒ0ã«ã‚‚æ‹˜ã‚ã‚‰ãšã€å°‘ãªãã¨ã‚‚1ã¤ã¯è¦‹ã‹ã‘ä¸Šã‹ãªã‚Šè‰¯ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æˆ¦ç•¥ãŒè¦‹ã¤ã‹ã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ã€‚é‡‘èã§ã¯hold-outæ³•ã§ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¯ã—ã°ã—ã°ä½¿ç”¨ã•ã‚Œã‚‹ã‹ã¨æ€ã„ã¾ã™ãŒã€ã“ã®æ–¹æ³•ã¯è©¦è¡Œ(éŒ¯èª¤)å›æ•°ã‚’è€ƒæ…®ã«å…¥ã‚Œã¦ã„ãªã„ãŸã‚ã€$N$ãŒå¤§ãã„ã¨ãã«ã¯ä¿¡é ¼ã«è¶³ã‚‹çµæœã‚’è¿”ã—ã¦ãã‚Œãªã„ã‚ã‘ã§ã™ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®çµæœã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã€é—‡é›²ã«ã‚ã‚Œã‚„ã“ã‚Œã‚„ã¨ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ã¯éå¸¸ã«å±é™ºã ã¨æ€ã„ã¾ã›ã‚“ã‹ï¼Ÿæœ€çµ‚çš„ã«ãƒ—ãƒ¬ã‚¼ãƒ³è³‡æ–™ã«ä¸ŠãŒã£ã¦ãã‚‹ã®ã¯$N$å€‹ã®æˆ¦ç•¥ã®ã†ã¡ã€æœ€ã‚‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã„ã‚‚ã®ã®ã¿ã§ã™ã‹ã‚‰ã€ä»Šå›ã®ä¾‹ã®ã‚ˆã†ã«10å€‹æˆ¦ç•¥ã‚’è€ƒãˆãŸã ã‘ã§ã‚‚ã©ã‚Œã‹ã¯ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªãŒ1.87ä»˜è¿‘ã«åˆ†å¸ƒã—ã¦ã„ã‚‹ã‚ã‘ã§ã™ã€‚è©¦è¡ŒéŒ¯èª¤æ•°ãªã‚“ã¦ã‚‚ã¡ã‚ã‚“è³‡æ–™ã«ã¯è¨˜è¼‰ã—ã¾ã›ã‚“ã‹ã‚‰ã€éå¸¸ã«ãƒŸã‚¹ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãªã‚ã‘ã§ã™ã€‚ã“ã†ã„ã£ãŸè³‡æ–™ã‚’è©•ä¾¡ã™ã‚‹éš›ã«ã¯ã¾ãšå½é™½æ€§ã‚’ç–‘ã£ã¦ã‹ã‹ã£ãŸæ–¹ãŒã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;p&gt;ã§ã¯ã€ã©ã†ã™ã‚Œã°è‰¯ã„ã®ã‹ã¨ã„ã†è©±ã§ã™ãŒã€Bailey et. al.(2015)ã§ã¯ã€Minimum Backtest Lengthã‚’è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚è¦ã¯è©¦è¡Œ(éŒ¯èª¤)æ•°$N$ã‚’å¢—ã‚„ã™ã«ã¤ã‚Œã¦ã€ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®å¹´æ•°$y$ã‚‚ä¼¸ã°ã—ã¦ã„ã‘ã‚ˆã¨æˆ’ã‚ã¦ã„ã‚‹ã‚ã‘ã§ã™ã€‚$N$ã¨Minimum Backtest Lengthã®é–¢ä¿‚æ€§ã‚’ç¤ºã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚å…ˆã»ã©ã¨åŒã˜ã$\mu=0$ã‚’ä»®å®šã—ã¾ã™ãŒã€$y\neq 1$ã§ã‚ã‚‹ã‚±ãƒ¼ã‚¹ã‚’è€ƒãˆã¾ã™ã€‚å¹´ç‡åŒ–ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®æœ€å¤§çµ±è¨ˆé‡ã®æœŸå¾…å€¤ã¯(2)å¼ã‚ˆã‚Šã€&lt;/p&gt;
&lt;p&gt;$$
E[\max[\hat{SR}(q)]_N] \approx y^{-1/2}((1-\gamma)Z^{-1}[1-\frac{1}{N}]+\gamma Z^{-1}[1-\frac{1}{N}e^{-1}])
$$
ã¨ãªã‚Šã¾ã™ã€‚ã“ã‚Œã‚’$y$ã«å¯¾ã—ã¦è§£ã„ã¦ã‚„ã‚‹ã“ã¨ã§MinBTLãŒæ±‚ã¾ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
MinBTL \approx (\frac{(1-\gamma)Z^{-1}[1-\frac{1}{N}]+\gamma Z^{-1}[1-\frac{1}{N}e^{-1}]}{\bar{E[\max[\hat{SR}(q)]_N]}})^2
$$
ã“ã“ã§ã€$\bar{E[\max[\hat{SR}(q)]_N]}$ã¯$E[\max[\hat{SR}(q)]_N]$ã®ä¸Šé™å€¤ã§ã€ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®çœŸå€¤ãŒ0ã§ã‚ã‚‹$N$æˆ¦ç•¥ã§ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã®æœ€å¤§çµ±è¨ˆé‡ãŒå–ã‚Šã†ã‚‹å€¤ã‚’æŠ‘ãˆã¾ã™ã€‚ãã®éš›ã«ã€å¿…è¦ãªãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå¹´æ•°$y$ãŒMinBTLã¨ã—ã¦å°å‡ºã•ã‚Œã‚‹ã®ã§ã™ã€‚$\bar{E[\max[\hat{SR}(q)]_N]}=1$ã¨ã—ã¦ã€MinBTLã‚’$N$ã®é–¢æ•°ã¨ã—ã¦ãƒ—ãƒ­ãƒƒãƒˆã—ãŸã‚‚ã®ãŒä»¥ä¸‹ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;MinBTL &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(N,MaxSR){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;ExMaxSR&lt;/span&gt;(N)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;MaxSR)^2)
}
N &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)
result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; purrr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;map2&lt;/span&gt;(N,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,MinBTL)
ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(MinBTL &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;(result),N &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;(N)),&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;N,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;MinBTL)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;(size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ylim&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post19/index_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;simSR &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(T1){
    r &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rnorm&lt;/span&gt;(T1)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mean&lt;/span&gt;(r)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sd&lt;/span&gt;(r))
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»®ã«ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå¹´æ•°ãŒ3å¹´ä»¥å†…ã—ã‹ã§ããªã„å ´åˆã¯è©¦è¡Œ(éŒ¯èª¤)å›æ•°$N$ã¯ã»ã¼1å›ã«æŠ‘ãˆãªã„ã¨ã„ã‘ãªã„ã“ã¨ã«ãªã‚Šã¾ã™ã€‚3å¹´ä»¥å†…ã®å ´åˆã¯ä¸€ç™ºã§å½“ã¦ã¦ã­ã¨ã„ã†å³ã—ã‚ã®åˆ¶ç´„ã§ã™ã€‚æ³¨æ„ã—ãªã„ã¨ã„ã‘ãªã„ã®ã¯ã€MinBTLã®ç¯„å›²å†…ã§ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’è¡Œã£ã¦ã„ãŸã¨ã—ã¦ã‚‚ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹ã“ã¨ã¯è€ƒãˆã‚‰ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã¤ã¾ã‚Šã€MinBTLã¯å¿…è¦æ¡ä»¶ã§ã‚ã£ã¦ååˆ†æ¡ä»¶ã§ãªã„ã¨ã„ã†ã‚ã‘ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-çµ‚ã‚ã‚Šã«&#34;&gt;4. çµ‚ã‚ã‚Šã«&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3257497&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LÃ³pez de Prado(2018)&lt;/a&gt;ã§ã¯ã€ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚’é˜²ãæ±ç”¨çš„ãªæ‰‹æ®µã¨ã—ã¦ä»¥ä¸‹ãŒæŒ™ã’ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Develop models for entire asset classes or investment universes, rather than for specific securities. Investors diversify, hence they do not make mistake X only on security Y. If you find mistake X only on security Y, no matter how apparently profitable, it is likely a false discovery.
(æ‹™è¨³ï¼šç‰¹å®šã®æœ‰ä¾¡è¨¼åˆ¸ã§ã¯ãªãã€ã‚¢ã‚»ãƒƒãƒˆã‚¯ãƒ©ã‚¹å…¨ä½“ã¾ãŸã¯ãƒ¦ãƒ‹ãƒãƒ¼ã‚¹å…¨ä½“ã®ãƒ¢ãƒ‡ãƒ«ã‚’é–‹ç™ºã™ã‚‹ã“ã¨ã€‚æŠ•è³‡å®¶ã¯ãƒªã‚¹ã‚¯ã‚’åˆ†æ•£ã•ã›ã¦ã„ã‚‹ã®ã§ã€å½¼ã‚‰ã¯ã‚ã‚‹è¨¼åˆ¸Yã ã‘ã«å¯¾ã—ã¦ãƒŸã‚¹Xã‚’ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚ãªãŸãŒè¨¼åˆ¸Yã ã‘ã«ãƒŸã‚¹Xã‚’è¦‹ã¤ã‘ãŸå ´åˆã¯ã€ãã‚ŒãŒã©ã‚“ãªã«æ˜ã‚‰ã‹ã«æœ‰ç›Šã§ã‚ã£ã¦ã‚‚ã€èª¤ç™ºè¦‹ã§ã‚ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã€‚)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Apply bagging as a means to both prevent overfitting and reduce the variance of the forecasting error. If bagging deteriorates the performance of a strategy, it was likely overfit to a small number of observations or outliers.
(æ‹™è¨³ï¼šã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã‚’é˜²ãã€äºˆæ¸¬èª¤å·®ã®åˆ†æ•£ã‚’æ¸›ã‚‰ã™ãŸã‚ã®æ‰‹æ®µã¨ã—ã¦ã€ãƒã‚®ãƒ³ã‚°ã‚’é©ç”¨ã™ã‚‹ã“ã¨ã€‚ãƒã‚®ãƒ³ã‚°ãŒæˆ¦ç•¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ‚ªåŒ–ã•ã›ã‚‹å ´åˆã€ãã‚Œã¯å°‘æ•°ã®è¦³æ¸¬å€¤ã¾ãŸã¯å¤–ã‚Œå€¤ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã—ãŸå¯èƒ½æ€§ãŒé«˜ã„ã€‚)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Do not backtest until all your research is complete.&lt;/strong&gt;
(æ‹™è¨³ï¼š&lt;strong&gt;ã™ã¹ã¦ã®ãƒªã‚µãƒ¼ãƒãŒå®Œäº†ã™ã‚‹ã¾ã§ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’ã—ãªã„ã“ã¨ã€‚&lt;/strong&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Record every backtest conducted on a dataset so that the probability of backtest overfitting may be estimated on the final selected result (see &lt;a href=&#34;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2326253&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Bailey, Borwein, LÃ³pez de Prado and Zhu(2017)&lt;/a&gt;), and the Sharpe ratio may be properly deflated by the number of trials carried out (&lt;a href=&#34;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2465675&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Bailey and LÃ³pez de Prado(2014.b)&lt;/a&gt;).
(æ‹™è¨³ï¼šç ”ç©¶è€…ãŒæœ€çµ‚çš„ã«é¸æŠã—ãŸãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœãŒã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã—ã¦ã„ã‚‹ç¢ºç‡ã‚’æ¨å®šã§ãã‚‹ã‚ˆã†ã«ã€å˜ä¸€ã®(åŒã˜)ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§å®Ÿæ–½ã•ã‚ŒãŸãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’ã™ã¹ã¦è¨˜éŒ²ã™ã‚‹ã“ã¨ï¼ˆBailey, Borwein, LÃ³pez de Prado and Zhu [2017]ï¼‰ã€ã¾ãŸã€å®Ÿæ–½ã•ã‚ŒãŸè©¦è¡Œæ•°ã«ã‚ˆã£ã¦ã‚·ãƒ£ãƒ¼ãƒ—ãƒ¬ã‚·ã‚ªã‚’é©åˆ‡ã«ãƒ‡ãƒ•ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ï¼ˆBailey and LÃ³pez de Prado [2014]ï¼‰ã€‚)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Simulate scenarios rather than history. A standard backtest is a historical simulation, which can be easily overfit. History is just the random path that was realized, and it could have been entirely different. Your strategy should be profitable under a wide range of scenarios, not just the anecdotal historical path. It is harder to overfit the outcome of thousands of â€œwhat ifâ€ scenarios.
(æ‹™è¨³ï¼šãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ã§ã¯ãªãã‚·ãƒŠãƒªã‚ªã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã“ã¨ã€‚æ¨™æº–çš„ãªãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¯ãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚ã‚Šã€ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã—ã‚„ã™ã„ã€‚æ­´å²(ã“ã‚Œã¾ã§ã®å®Ÿç¸¾)ã¯ãƒ©ãƒ³ãƒ€ãƒ ãªãƒ‘ã‚¹ã®å®Ÿç¾å€¤ã«éããšã€å…¨ãé•ã£ãŸã‚‚ã®ã«ãªã£ã¦ã„ãŸå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚ãªãŸã®æˆ¦ç•¥ã¯ã€é€¸è©±çš„ãªãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ãƒ‘ã‚¹ã§ã¯ãªãã€æ§˜ã€…ãªã‚·ãƒŠãƒªã‚ªã®ä¸‹ã§åˆ©ç›Šã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã§ã‚ã‚‹ã¹ãã§ã™ã€‚ä½•åƒã‚‚ã®ã€Œã‚‚ã—ã‚‚ã€ã®ã‚·ãƒŠãƒªã‚ªçµæœã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒˆã•ã›ã‚‹ã®ã¯(ãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§éå­¦ç¿’ã™ã‚‹ã‚ˆã‚Šã‚‚)ã‚ˆã‚Šé›£ã—ã„ã“ã¨ã§ã™ã€‚)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Do not research under the influence of a backtest. If the backtest fails to identify a profitable strategy,
start from scratch. Resist the temptation of reusing those results.
(æ‹™è¨³ï¼šãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å—ã‘ã¦ãƒªã‚µãƒ¼ãƒã—ãªã„ã“ã¨ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãŒæœ‰ç›Šãªæˆ¦ç•¥ã‚’è¦‹ã¤ã‘å‡ºã™ã“ã¨ã«å¤±æ•—ã—ãŸå ´åˆã¯ã€ã‚¼ãƒ­ã‹ã‚‰ãƒªã‚µãƒ¼ãƒã‚’å†å§‹å‹•ã—ã¦ãã ã•ã„ã€‚ãã‚Œã‚‰ã®çµæœã‚’å†åˆ©ç”¨ã™ã‚‹èª˜æƒ‘ã«æŠ—ã£ã¦ãã ã•ã„ã€‚)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;3ã¨6ã¯æœ¬æ—¥ã®è«–æ–‡ã¨é–¢ä¿‚ã®ã‚ã‚‹æ–‡è„ˆã ã¨æ€ã„ã¾ã™ã€‚ã“ã®åˆ†é‡ã¯ä»–ã«ã‚‚ç ”ç©¶ã®è“„ç©ãŒã‚ã‚‹ã®ã§ã€æ¥­å‹™ã§ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’è¡Œã†ã¨ã„ã†äººã¯é‹ç”¨æ‰‹æ³•ã®å‹‰å¼·ã‚‚ã„ã„ã§ã™ãŒã€ãã‚‚ãã‚‚ã®ãŠä½œæ³•ã¨ã—ã¦ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®æ­£ã—ã„é‹ç”¨æ–¹æ³•ã«ã¤ã„ã¦å­¦ã¶ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚&lt;br&gt;
ã•ã¦ã€ã„ã¤ã‚‚ã¨ã¯é•ã†è¦³ç‚¹ã§ã€å°‘ã—ãƒ¡ã‚¿çš„ãªãƒˆãƒ”ãƒƒã‚¯ã«å–ã‚Šçµ„ã‚“ã§ã¿ã¾ã—ãŸã€‚è‡ªåˆ†è‡ªèº«ä»•äº‹æŸ„ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœãªã©ã‚’è¦‹ã‚‹ã“ã¨ã‚‚å¤šã„ã§ã™ã—ã€ã“ã®ãƒ–ãƒ­ã‚°ã§ã‚‚ã—ã°ã—ã°hold-outæ³•ã§ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’ã—ã¦ã„ã¾ã™ã€‚å¾—ã‚‰ã‚ŒãŸçµæœã®ä¸ç¢ºå®Ÿæ€§ã‚’ç†è§£ã—ã¦ã€è©•ä¾¡ã§ãã‚‹ã‚ˆã†ä»Šå¾Œã‚‚ã“ã®ãƒˆãƒ”ãƒƒã‚¯ã®ç ”ç©¶ã‚’è¿½ã£ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>CNNã‚’ä½¿ã£ã¦é¦¬ä½“å†™çœŸã‹ã‚‰é †ä½äºˆæƒ³ã—ã¦ã¿ãŸ</title>
      <link>/post/post18/</link>
      <pubDate>Sun, 05 Jul 2020 00:00:00 +0000</pubDate>
      <guid>/post/post18/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ä»Šå›ã¯ç«¶é¦¬äºˆæƒ³ã«ã¤ã„ã¦ã®è¨˜äº‹ã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚å‰å›ã€&lt;code&gt;LightGBM&lt;/code&gt;ã‚’ç”¨ã„ã¦yahooç«¶é¦¬ã‹ã‚‰å–å¾—ã—ãŸãƒ¬ãƒ¼ã‚¹çµæœãƒ‡ãƒ¼ã‚¿(ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ‡ãƒ¼ã‚¿)ã‚’ç”¨ã„ã¦ã€ç«¶é¦¬é †ä½äºˆæƒ³ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã¾ã—ãŸã€‚å‰å›ã¯æ§‹é€ ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¾ã—ãŸãŒã€ã“ã®ã”æ™‚ä¸–ã§ã™ã‹ã‚‰ã“ã‚“ãªåˆ†æã¯èª°ã«ã§ã‚‚ã§ãã‚‹ã‚ã‘ã§ã™ã€‚æ™‚ä»£ã¯éæ§‹é€ ãƒ‡ãƒ¼ã‚¿ã€ã¨ã„ã†ã‚ã‘ã§ä»Šå›ã¯é¦¬ä½“ç”»åƒã‹ã‚‰ç‰¹å¾´é‡ã‚’æŠ½å‡ºã—ã€é †ä½äºˆæƒ³ã‚’è¡Œã†ç•³ã¿è¾¼ã¿ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯(&lt;code&gt;Convolutional Neural Network&lt;/code&gt;, CNN)ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚ç”»åƒè§£æã¯&lt;code&gt;Earth Engine&lt;/code&gt;ã‚’ç”¨ã„ãŸè¡›æ˜Ÿç”»åƒã®è§£æã«ç¶šã„ã¦2å›ç›®ã€æ·±å±¤å­¦ç¿’ã¯ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯åˆã‚ã¦ã¨è¨€ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ãªãŠã€Pythonã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ãƒ‡ãƒ¼ã‚¿åé›†ã®ãŸã‚ã®ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°&#34;&gt;1. ãƒ‡ãƒ¼ã‚¿åé›†ã®ãŸã‚ã®ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°&lt;/h2&gt;
&lt;p&gt;ã¾ãšã€é¦¬ä½“ç”»åƒã‚’ãƒãƒƒãƒˆã‹ã‚‰åé›†ã™ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚1ç•ªè‰¯ã„ã®ã¯ãƒ¬ãƒ¼ã‚¹å½“æ—¥ã®ãƒ‘ãƒ‰ãƒƒã‚¯ã®å†™çœŸã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚ãŸã ã€ãƒ‘ãƒ‰ãƒƒã‚¯ã®å†™çœŸã‚’ã¾ã¨ã¾ã£ãŸå½¢ã§æ²è¼‰ã—ã¦ãã‚Œã¦ã„ã‚‹ã‚µã‚¤ãƒˆã¯èª¿ã¹ãŸé™ã‚Šã¯å­˜åœ¨ã—ã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã—ã‹ã—ãŸã‚‰ã€Youtubeã«ç«¶é¦¬ãƒ•ã‚¡ãƒ³ã®æ–¹ãŒãƒ‘ãƒ‰ãƒƒã‚¯å‹•ç”»ã‚’ä¸Šã’ã¦ã„ã‚‰ã£ã—ã‚ƒã‚‹ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã®ã§ã€ãã‚Œã‚’ç”»åƒã«åˆ‡ã‚ŠæŠœã„ã¦ä½¿ã† or å‹•ç”»ã¨ã—ã¦CNNâ†’RNNã®&lt;code&gt;Encoder-Decoder&lt;/code&gt;ãƒ¢ãƒ‡ãƒ«ã«é©ç”¨ã™ã‚‹ã¨é¢ç™½ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ãã“ã¾ã§ã®èƒ½åŠ›ã¯ä»Šã®è‡ªåˆ†ã«ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿ã‚’ã©ã“ã‹ã‚‰å–å¾—ã™ã‚‹ã‹&#34;&gt;ãƒ‡ãƒ¼ã‚¿ã‚’ã©ã“ã‹ã‚‰å–å¾—ã™ã‚‹ã‹&lt;/h3&gt;
&lt;p&gt;ãã“ã§ã€ä»Šå›ã¯&lt;a href=&#34;https://www.daily.co.jp/horse/horsecheck/photo/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ãƒ‡ã‚¤ãƒªãƒ¼ã®Webã‚µã‚¤ãƒˆ&lt;/a&gt;ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚ã“ã“ã«ã¯ç›´è¿‘1å¹´é–“?ã®G1ãƒ¬ãƒ¼ã‚¹ã«å‡ºé¦¬ã™ã‚‹ç«¶èµ°é¦¬ã®ãƒ¬ãƒ¼ã‚¹å‰ã®é¦¬ä½“å†™çœŸãŒæ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®ãƒ¬ãƒ¼ã‚¹å ´ã¸è¡Œã‘ãªã„é¦¬åˆ¸å¸«ã•ã‚“ãŸã¡ã¯ã“ã®å†™çœŸã‚’è¦‹ã¦é¦¬ã®çŠ¶æ…‹ã‚’åˆ†æã—ã¦ã„ã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚&lt;br&gt;
ãªãŠã€ã“ã®ã‚µã‚¤ãƒˆã«ã¯å‡ºé¦¬å…¨é ­ã®é¦¬ä½“å†™çœŸãŒæ²è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãŸã€G1ã®é™ã‚‰ã‚ŒãŸãƒ¬ãƒ¼ã‚¹ã®ã¿ã§ã™ã®ã§ã€ãã‚‚ãã‚‚å…¨ã¦ã®é¦¬ãŒä»•ä¸ŠãŒã£ã¦ã„ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã€å·®ãŒã¤ã‹ãªã„ã“ã¨ã‚‚ååˆ†äºˆæƒ³ã•ã‚Œã¾ã™ã€‚ãŸã ã€æ‰‹ã£å–ã‚Šæ—©ãã‚„ã£ã¦ã¿ã‚‹ã“ã¨ã‚’å„ªå…ˆã—ã€ä»Šå›ã¯ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;seleniumã§ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã™ã‚‹&#34;&gt;seleniumã§ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚’å®Ÿè¡Œã™ã‚‹&lt;/h3&gt;
&lt;p&gt;ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã«ã¯seleniumã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ä»Šå›ã¯CNNãŒãƒ¡ã‚¤ãƒ³ãªã®ã§Webã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã«ã¤ã„ã¦ã¯èª¬æ˜ã—ã¾ã›ã‚“ã€‚ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã§ã™ã€‚&lt;br&gt;
ã€æ³¨æ„ã€‘ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã•ã‚Œã‚‹å ´åˆã¯è‡ªå·±è²¬ä»»ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; webdriver
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.webdriver.chrome.options &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Options
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.webdriver.support.select &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Select
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.webdriver.common.by &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; By
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.webdriver.common.keys &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Keys
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.webdriver.common.alert &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Alert
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.webdriver.support.ui &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; WebDriverWait
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.webdriver.support &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; expected_conditions &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; EC
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.common.exceptions &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; TimeoutException
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; selenium.webdriver.common.action_chains &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; ActionChains
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; time &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; sleep
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; urllib &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; request
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; random

&lt;span style=&#34;color:#75715e&#34;&gt;# seleniumã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®šï¼ˆãŠã¾ã˜ãªã„ï¼‰&lt;/span&gt;
options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Options()
options&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add_argument(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;--disable-gpu&amp;#39;&lt;/span&gt;);
options&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add_argument(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;--disable-extensions&amp;#39;&lt;/span&gt;);
options&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add_argument(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;--proxy-server=&amp;#34;direct://&amp;#34;&amp;#39;&lt;/span&gt;);
options&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add_argument(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;--proxy-bypass-list=*&amp;#39;&lt;/span&gt;);
options&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add_argument(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;--start-maximized&amp;#39;&lt;/span&gt;);

&lt;span style=&#34;color:#75715e&#34;&gt;# driveræŒ‡å®š&lt;/span&gt;
DRIVER_PATH &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:/Users/aashi/Desktop/chromedriver_win32/chromedriver.exe&amp;#39;&lt;/span&gt;
driver &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; webdriver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Chrome(executable_path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;DRIVER_PATH, chrome_options&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;options)

&lt;span style=&#34;color:#75715e&#34;&gt;# urlã‚’æ¸¡ã—ã€ã‚µã‚¤ãƒˆã¸ã‚¢ã‚¯ã‚»ã‚¹&lt;/span&gt;
url &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;https://www.daily.co.jp/horse/horsecheck/photo/&amp;#39;&lt;/span&gt;
driver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(url)
driver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;implicitly_wait(&lt;span style=&#34;color:#ae81ff&#34;&gt;15&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ­ãƒ¼ãƒ‰å¾…ã¡ã®æœ€å¤§æ™‚é–“ã§ã“ã‚Œã‚’è¶Šãˆã‚‹ã¨ã‚¨ãƒ©ãƒ¼&lt;/span&gt;
sleep(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# webãƒšãƒ¼ã‚¸ã®é·ç§»ã‚’è¡Œã†ã®ã§1ç§’sleep&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# å„ãƒ¬ãƒ¼ã‚¹æ¯ã«ç”»åƒãƒ‡ãƒ¼ã‚¿ä¿å­˜&lt;/span&gt;
selector0 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;body &amp;gt; div &amp;gt; main &amp;gt; div &amp;gt; div.primaryContents &amp;gt; article &amp;gt; div &amp;gt; section &amp;gt; a&amp;#34;&lt;/span&gt;
elements &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;find_elements_by_css_selector(selector0)
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; range(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,len(elements)):
  elements &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;find_elements_by_css_selector(selector0)
  element &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; elements[i]
  element&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;click()
  sleep(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# webãƒšãƒ¼ã‚¸ã®é·ç§»ã‚’è¡Œã†ã®ã§5ç§’sleep&lt;/span&gt;

  target &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;find_element_by_link_text(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ï¼§ï¼‘é¦¬ä½“è¨ºæ–­å†™çœŸé›†ã®TOP&amp;#39;&lt;/span&gt;)
  actions &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ActionChains(driver)
  actions&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;move_to_element(target)
  actions&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;perform()
  sleep(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# webãƒšãƒ¼ã‚¸ã®é·ç§»ã‚’è¡Œã†ã®ã§5ç§’sleep&lt;/span&gt;
  selector &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;body &amp;gt; div.wrapper.horse.is-fixedHeader.is-fixedAnimation &amp;gt; main &amp;gt; div &amp;gt; div.primaryContents &amp;gt; article &amp;gt; article &amp;gt; div.photoDetail-wrapper &amp;gt; section &amp;gt; div &amp;gt; figure&amp;#34;&lt;/span&gt;
  figures &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;find_elements_by_css_selector(selector)
  download_dir &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\Users\aashi\umanalytics\photo\image&amp;#39;&lt;/span&gt;
  selector &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;body &amp;gt; div &amp;gt; main &amp;gt; div &amp;gt; div.primaryContents &amp;gt; article &amp;gt; article &amp;gt; div.photoDetail-wrapper &amp;gt; section &amp;gt; h1&amp;#34;&lt;/span&gt;
  race_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; driver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;find_element_by_css_selector(selector)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;text
  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; figure &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; figures:
    img_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; figure&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;find_element_by_tag_name(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;figcaption&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;text
    horse_src &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; figure&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;find_element_by_tag_name(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;img&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get_attribute(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;src&amp;#34;&lt;/span&gt;)    
    save_name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; download_dir &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; race_name &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;_&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; img_name &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.jpg&amp;#39;&lt;/span&gt;
    request&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;urlretrieve(horse_src,save_name)
  driver&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;back()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¿å­˜ã—ãŸç”»åƒã‚’å®Ÿéš›ã®ãƒ¬ãƒ¼ã‚¹çµæœã¨çªåˆã—ã€æ‰‹ä½œæ¥­ã§ä¸Šä½3ä½ä»¥å†…ã‚°ãƒ«ãƒ¼ãƒ—ã¨ãã‚Œä»¥å¤–ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†ã‘ã¾ã—ãŸã€‚ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ç”»åƒãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;horse_photo.PNG&#34; alt=&#34;ä¿å­˜ã•ã‚ŒãŸé¦¬ä½“ç”»åƒ&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã“ã‚Œã§å…ƒãƒ‡ãƒ¼ã‚¿ã®åé›†ãŒå®Œäº†ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-kerasã‚’ç”¨ã„ã¦cnnã‚’å­¦ç¿’ã•ã›ã‚‹&#34;&gt;2. &lt;code&gt;Keras&lt;/code&gt;ã‚’ç”¨ã„ã¦CNNã‚’å­¦ç¿’ã•ã›ã‚‹&lt;/h2&gt;
&lt;h3 id=&#34;kerasã¨ã¯&#34;&gt;Kerasã¨ã¯ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ã•ã¦ã€æ¬¡ã«&lt;code&gt;Keras&lt;/code&gt;ã‚’ä½¿ã£ã¦CNNã‚’å­¦ç¿’ã•ã›ã¾ã—ã‚‡ã†ã€‚ã¾ãšã€&lt;code&gt;Keras&lt;/code&gt;ã¨ã¯&lt;code&gt;Tensorflow&lt;/code&gt;ã‚„&lt;code&gt;Theano&lt;/code&gt;ä¸Šã§å‹•ã&lt;code&gt;Neural Network&lt;/code&gt;ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®1ã¤ã§ã™ã€‚&lt;code&gt;Keras&lt;/code&gt;ã¯æ¯”è¼ƒçš„çŸ­ã„ã‚³ãƒ¼ãƒ‰ã§ãƒ¢ãƒ‡ãƒ«ã‚’çµ„ã‚€ã“ã¨ãŒã§ãã€ã¾ãŸå­¦ç¿’ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒå¤šã„ã“ã¨ãŒç‰¹å¾´ã®ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;cnnã¨ã¯&#34;&gt;CNNã¨ã¯ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;CNNã¯ç”»åƒè§£æã‚’è¡Œã†éš›ã«ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹&lt;code&gt;(Deep) Neural Network&lt;/code&gt;ã®1ç¨®ã§ã€ãã®åã®é€šã‚Š&lt;code&gt;Convolution&lt;/code&gt;(ç•³ã¿è¾¼ã¿)ã‚’è¿½åŠ ã—ãŸç‰©ã¨ãªã£ã¦ã„ã¾ã™ã€‚ç•³ã¿è¾¼ã¿ã¨ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå‡¦ç†ã®ã“ã¨ã‚’è¨€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://cdn-ak.f.st-hatena.com/images/fotolife/t/tdualdir/20180501/20180501211957.png&#34; alt=&#34;ç•³ã¿è¾¼ã¿å±¤ã®å‡¦ç†&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã“ã“ã®ã‚¤ãƒ³ãƒ—ãƒƒãƒˆã¨ã¯ç”»åƒãƒ‡ãƒ¼ã‚¿ã®ã“ã¨ã§ã™ã€‚ç”»åƒè§£æã§ã¯ç”»åƒã‚’æ•°å€¤ã¨ã—ã¦èªè­˜ã—ã€è§£æã‚’è¡Œã„ã¾ã™ã€‚ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ä¸Šã®ç”»åƒã¯&lt;code&gt;RGB&lt;/code&gt;å€¤ã¨ã„ã†ã€èµ¤(Red)ã€ç·‘(Green)ã€é’(Blue)ã®3è‰²ã®0~255ã¾ã§ã®æ•°å€¤ã®å¼·å¼±ã§è¡¨ç¾ã•ã‚Œã¦ã„ã¾ã™ã€‚èµ¤255ã€ç·‘0ã€é’0ã¨ã„ã£ãŸå½¢ã§3å±¤ã®ãƒ™ã‚¯ãƒˆãƒ«ã«ãªã£ã¦ãŠã‚Šã€ã“ã®å ´åˆå®Œå…¨ãªèµ¤ãŒè¡¨ç¾ã•ã‚Œã¾ã™ã€‚ä¸Šå›³ã®å ´åˆã€a,b,cãªã©ãŒå„ãƒ”ã‚¯ã‚»ãƒ«ã®&lt;code&gt;RGB&lt;/code&gt;å€¤ã®ã„ãšã‚Œã‹ã‚’è¡¨ã—ã¦ã„ã‚‹ã¨è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ç•³ã¿è¾¼ã¿ã¯ã“ã®&lt;code&gt;RGB&lt;/code&gt;å€¤ã‚’ã‚«ãƒ¼ãƒãƒ«ã¨å‘¼ã°ã‚Œã‚‹è¡Œåˆ—ã¨ã®å†…ç©ã‚’ã¨ã‚‹ã“ã¨ã§ç”»åƒã®ç‰¹å¾´é‡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ç•³ã¿è¾¼ã¿å±¤ã®æ„å‘³ã¯ä»¥ä¸‹ã®å‹•ç”»ãŒã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/vU-JfZNBdYU&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;ã‚«ãƒ¼ãƒãƒ«ã‚’ä¸Šæ‰‹ããã®ç”»åƒã®ç‰¹å¾´çš„ãªéƒ¨åˆ†ã‚’å–å¾—ã§ãã‚‹ã‚ˆã†ã«å­¦ç¿’ã™ã‚‹ã“ã¨ã§ã€ç”»åƒã®è­˜åˆ¥ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ç•³ã¿è¾¼ã¿å±¤ã¯CNNã®æœ€é‡è¦éƒ¨åˆ†ã ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://th.bing.com/th/id/OIP.F2Ik_XFzmu5jZF-byiAKQQHaCg?w=342&amp;amp;h=118&amp;amp;c=7&amp;amp;o=5&amp;amp;dpr=1.25&amp;amp;pid=1.7&#34; alt=&#34;CNNã®å…¨ä½“åƒ&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›³ã®ã‚ˆã†ã«CNNã¯ç•³ã¿è¾¼ã¿æ„å¤–ã«ã‚‚ã‚‚ã¡ã‚ã‚“å…¥åŠ›å±¤ã‚„å‡ºåŠ›å±¤ãªã©é€šå¸¸ã®&lt;code&gt;Neural Network&lt;/code&gt;ã¨åŒã˜å±¤ã‚‚æŒã£ã¦ã„ã¾ã™ã€‚ãªãŠã€&lt;code&gt;MaxPooling&lt;/code&gt;å±¤ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„äººã¯ä»¥ä¸‹ã®å‹•ç”»ã‚’å‚ç…§ã•ã‚Œã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;iframe width=&#34;560&#34; height=&#34;315&#34; src=&#34;https://www.youtube.com/embed/MLixg9K6oeU&#34; frameborder=&#34;0&#34; allow=&#34;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;æ·±å±¤å­¦ç¿’ã®å­¦ç¿’æ–¹æ³•ã«ã¤ã„ã¦ã¯æœ€æ€¥ä¸‹é™æ³•(å‹¾é…æ³•)ãŒã‚ªãƒ¼ã‚½ãƒ‰ãƒƒã‚¯ã‚¹ãªã‚‚ã®ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ãŒã€&lt;code&gt;Adam&lt;/code&gt;ãªã©è‰²ã€…ãªæ‹¡å¼µã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™ã€‚åŸºæœ¬çš„ã«ã¯ã€&lt;code&gt;Adam&lt;/code&gt;ã¯&lt;code&gt;momentum&lt;/code&gt;ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã—ã‚‡ã†ã‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°&#34;&gt;ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°&lt;/h3&gt;
&lt;p&gt;ã§ã¯ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; keras.utils &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; np_utils
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Using TensorFlow backend.
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; keras.models &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Sequential
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; keras.layers.convolutional &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; MaxPooling2D
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; keras.layers &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Activation, Conv2D, Flatten, Dense,Dropout
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.model_selection &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; train_test_split
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; keras.optimizers &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; SGD, Adadelta, Adagrad, Adam, Adamax, RMSprop, Nadam
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; PIL &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Image
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; numpy &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; np
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; glob
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; time
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; os
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã¾ãšæœ€åˆã«åé›†ã—ã¦ããŸç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’æ•°å€¤ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã—å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã¾ã™ã€‚
ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã€ä¸Šä½ç”»åƒã¨ãã®ä»–ç”»åƒãŒåˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰ç”»åƒã‚’èª­ã¿è¾¼ã‚€éš›ã«ã€ä¸Šä½ç”»åƒã«ã¯1ã€ãã®ä»–ã«ã¯0ã¨ã„ã†ã‚«ãƒ†ã‚´ãƒªå¤‰æ•°ã‚’ä¸ãˆã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;é¦¬ä½“å†™çœŸ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸Šä½&lt;/li&gt;
&lt;li&gt;ãã®ä»–&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®š&lt;/span&gt;
folders &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;listdir(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\Users\aashi\umanalytics\photo\image&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;#ç”»ç·æ•°ã‚’æŒ‡å®š(ä»Šå›ã¯50Ã—50Ã—3)ã€‚&lt;/span&gt;
image_size &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;300&lt;/span&gt;
dense_size &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; len(folders)

X &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; []
Y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; []

&lt;span style=&#34;color:#75715e&#34;&gt;#ãã‚Œãã‚Œã®ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ç”»åƒã‚’èª­ã¿è¾¼ã¿ã€Imageé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦RGBå€¤ãƒ™ã‚¯ãƒˆãƒ«(numpy array)ã¸å¤‰æ›&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i, folder &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; enumerate(folders):
  files &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; glob&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;glob(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:/Users/aashi/umanalytics/photo/image/&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; folder &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/*.jpg&amp;#34;&lt;/span&gt;)
  index &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; i
  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; k, file &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; enumerate(files):
    image &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;open(file)
    image &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;convert(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;L&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;convert(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;RGB&amp;#34;&lt;/span&gt;)
    image &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;resize((image_size, image_size)) &lt;span style=&#34;color:#75715e&#34;&gt;#ç”»ç´ æ•°ã‚’è½ã¨ã—ã¦ã„ã‚‹&lt;/span&gt;
 
    data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;asarray(image)
    X&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;append(data)
    Y&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;append(index)

X &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;array(X)
Y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;array(Y)
X &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; X&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float32&amp;#39;&lt;/span&gt;)
X &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; X &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;255.0&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# 0~1ã¸å¤‰æ›&lt;/span&gt;
X&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shape
Y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np_utils&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_categorical(Y, dense_size)

&lt;span style=&#34;color:#75715e&#34;&gt;#è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¸å¤‰æ›&lt;/span&gt;
X_train, X_test, y_train, y_test &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; train_test_split(X, Y, test_size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.20&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®åˆ†å‰²ãŒã§ãã¾ã—ãŸã€‚ä»Šè€ƒãˆã¦ã„ã‚‹ã®ã¯ã€Œä¸Šä½ã€ã¨ã€Œãã®ä»–ã€ã®2å€¤åˆ†é¡ã¨ãªã£ã¦ã„ã¾ã™ãŒã€ã€Œä¸Šä½ã€ã‚’3ä½ä»¥å†…ã¨å®šç¾©ã—ãŸã®ã§ä¸å‡è¡¡ãªãƒ‡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™(ãã®ä»–ãƒ‡ãƒ¼ã‚¿ãŒä¸Šä½ãƒ‡ãƒ¼ã‚¿ã®5å€ãã‚‰ã„)ã€‚ã“ã†ã„ã£ãŸå ´åˆã€ãã®ã¾ã¾ã®ãƒ‡ãƒ¼ã‚¿ã§å­¦ç¿’ã‚’ã™ã‚‹ã¨ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºãŒå¤šã„æ–¹ã®ãƒ©ãƒ™ãƒ«(ã“ã®å ´åˆã€Œãã®ä»–ã€)ã‚’äºˆæ¸¬ã—ã‚„ã™ããªã‚Šã€ãƒã‚¤ã‚¢ã‚¹ã®ã‚ã‚‹ãƒ¢ãƒ‡ãƒ«ã¨ãªã‚Šã¾ã™ã€‚ã‚ˆã£ã¦ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¯2ã‚¯ãƒ©ã‚¹ãã‚Œãã‚ŒãŒåŒã˜ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã¨ãªã‚‹ã‚ˆã†èª¿æ•´ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;index_zero &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;random&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;choice(np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;array(np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;where(y_train[:,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;))[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,],np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;count_nonzero(y_train[:,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;),replace&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)
index_one &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;array(np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;where(y_train[:,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]
y_resampled &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; y_train[np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;hstack((index_one,index_zero))]
X_resampled &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; X_train[np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;hstack((index_one,index_zero))]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«ã¯ã“ã®&lt;code&gt;y_resampled&lt;/code&gt;ã¨&lt;code&gt;X_resampled&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚æ¬¡ã«ã€CNNã‚’æ§‹ç¯‰ã—ã¦ã„ãã¾ã™ã€‚&lt;code&gt;Keras&lt;/code&gt;ã§ã¯ã€&lt;code&gt;sequential model&lt;/code&gt;ã‚’æŒ‡å®šã—ã€&lt;code&gt;add&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§å±¤ã‚’è¿½åŠ ã—ã¦è¡Œãã“ã¨ã§ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Sequential()
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Conv2D(&lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;, (&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;), padding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;same&amp;#39;&lt;/span&gt;,input_shape&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X_train&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shape[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;:]))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Activation(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Conv2D(&lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;, (&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Activation(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(MaxPooling2D(pool_size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Dropout(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.25&lt;/span&gt;))

model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Conv2D(&lt;span style=&#34;color:#ae81ff&#34;&gt;64&lt;/span&gt;, (&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;), padding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;same&amp;#39;&lt;/span&gt;))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Activation(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Conv2D(&lt;span style=&#34;color:#ae81ff&#34;&gt;64&lt;/span&gt;, (&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Activation(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(MaxPooling2D(pool_size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Dropout(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.25&lt;/span&gt;))

model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Flatten())
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Dense(&lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt;))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Activation(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Dropout(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Dense(dense_size))
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(Activation(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;softmax&amp;#39;&lt;/span&gt;))

model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;summary()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Model: &amp;quot;sequential_1&amp;quot;
## _________________________________________________________________
## Layer (type)                 Output Shape              Param #   
## =================================================================
## conv2d_1 (Conv2D)            (None, 300, 300, 32)      896       
## _________________________________________________________________
## activation_1 (Activation)    (None, 300, 300, 32)      0         
## _________________________________________________________________
## conv2d_2 (Conv2D)            (None, 298, 298, 32)      9248      
## _________________________________________________________________
## activation_2 (Activation)    (None, 298, 298, 32)      0         
## _________________________________________________________________
## max_pooling2d_1 (MaxPooling2 (None, 149, 149, 32)      0         
## _________________________________________________________________
## dropout_1 (Dropout)          (None, 149, 149, 32)      0         
## _________________________________________________________________
## conv2d_3 (Conv2D)            (None, 149, 149, 64)      18496     
## _________________________________________________________________
## activation_3 (Activation)    (None, 149, 149, 64)      0         
## _________________________________________________________________
## conv2d_4 (Conv2D)            (None, 147, 147, 64)      36928     
## _________________________________________________________________
## activation_4 (Activation)    (None, 147, 147, 64)      0         
## _________________________________________________________________
## max_pooling2d_2 (MaxPooling2 (None, 73, 73, 64)        0         
## _________________________________________________________________
## dropout_2 (Dropout)          (None, 73, 73, 64)        0         
## _________________________________________________________________
## flatten_1 (Flatten)          (None, 341056)            0         
## _________________________________________________________________
## dense_1 (Dense)              (None, 512)               174621184 
## _________________________________________________________________
## activation_5 (Activation)    (None, 512)               0         
## _________________________________________________________________
## dropout_3 (Dropout)          (None, 512)               0         
## _________________________________________________________________
## dense_2 (Dense)              (None, 2)                 1026      
## _________________________________________________________________
## activation_6 (Activation)    (None, 2)                 0         
## =================================================================
## Total params: 174,687,778
## Trainable params: 174,687,778
## Non-trainable params: 0
## _________________________________________________________________
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã§ã¯ã€å­¦ç¿’ãƒ‘ãƒ¼ãƒˆã«å…¥ã‚Šã¾ã™ã€‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¯&lt;code&gt;Adadelta&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã‚ˆãã‚ã‹ã£ã¦ãªã„ã‚“ã§ã™ã‘ã©ã­ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;optimizers &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Adadelta&amp;#34;&lt;/span&gt;
results &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {}
epochs &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;50&lt;/span&gt;
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;compile(loss&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;categorical_crossentropy&amp;#39;&lt;/span&gt;, optimizer&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;optimizers, metrics&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;accuracy&amp;#39;&lt;/span&gt;])
results &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fit(X_resampled, y_resampled, validation_split&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.2&lt;/span&gt;, epochs&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;epochs)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿èª¿æ•´ã®ãŸã‚ã®ã‚¢ãƒ³ãƒ€ãƒ¼ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°&#34;&gt;ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿èª¿æ•´ã®ãŸã‚ã®ã‚¢ãƒ³ãƒ€ãƒ¼ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°&lt;/h3&gt;
&lt;p&gt;ã“ã“ã‹ã‚‰ã€Testãƒ‡ãƒ¼ã‚¿ã§2å€¤åˆ†é¡ã‚’è¡Œã†ã®ã§ã™ãŒã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¢ãƒ³ãƒ€ãƒ¼ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ã¦ã„ã‚‹ã®ã§ã€äºˆæ¸¬ç¢ºç‡ã‚’è¨ˆç®—ã™ã‚‹éš›ã«ã‚¢ãƒ³ãƒ€ãƒ¼ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚’è¡Œã£ãŸã‚µãƒ³ãƒ—ãƒ«é¸æŠãƒã‚¤ã‚¢ã‚¹ãŒç”Ÿã˜ã¦ã—ã¾ã„ã¾ã™ã€‚è«–æ–‡ã¯&lt;a href=&#34;https://www3.nd.edu/~dial/publications/dalpozzolo2015calibrating.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã€‚
ã‚ˆã£ã¦ã€è£œæ­£ãŒå¿…è¦ã«ãªã‚‹ã®ã§ã™ãŒã“ã®éƒ¨åˆ†ã®å®šå¼åŒ–ã‚’ã“ã“ã§ã—ã¦ãŠããŸã„ã¨æ€ã„ã¾ã™ã€‚ç¾åœ¨è¡Œã£ã¦ã„ã‚‹2å€¤åˆ†é¡å•é¡Œã‚’èª¬æ˜åƒæ•°$X$ã‹ã‚‰2å€¤ã‚’å–ã‚‹ç›®çš„å¤‰æ•°$Y$ã‚’äºˆæ¸¬ã™ã‚‹å•é¡Œã¨è¡¨ç¾ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ$(X,Y)$ã¯æ­£ä¾‹ãŒè² ä¾‹ã‚ˆã‚Šã‚‚ã‹ãªã‚Šå°‘ãªãã€è² ä¾‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã‚’æ­£ä¾‹ã«åˆã‚ã›ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’$(X_s,Y_s)$ã¨ã—ã¾ã™ã€‚ã“ã“ã§ã€$(X,Y)$ã®ã‚µãƒ³ãƒ—ãƒ«çµ„ãŒ$(X_s,Y_s)$ã«ã‚‚å«ã¾ã‚Œã‚‹å ´åˆã«1ã‚’å–ã‚Šã€å«ã¾ã‚Œãªã„å ´åˆã«0ã‚’ã¨ã‚‹ã‚«ãƒ†ã‚´ãƒªå¤‰æ•°$s$ã‚’å®šç¾©ã—ã¾ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ$(X,Y)$ã‚’ç”¨ã„ã¦æ§‹ç¯‰ã—ãŸãƒ¢ãƒ‡ãƒ«ã«èª¬æ˜å¤‰æ•°$x$ã‚’ä¸ãˆãŸæ™‚ã€æ­£ä¾‹ã¨äºˆæ¸¬ã™ã‚‹æ¡ä»¶ä»˜ãç¢ºç‡ã¯$P(y=1|x)$ã§è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ä¸€æ–¹ã€$(X_s,Y_s)$ã‚’ç”¨ã„ã¦æ§‹ç¯‰ã—ãŸãƒ¢ãƒ‡ãƒ«ã§æ­£ä¾‹ã‚’äºˆæ¸¬ã™ã‚‹æ¡ä»¶ä»˜ãç¢ºç‡ã¯ãƒ™ã‚¤ã‚ºã®å®šç†ã¨ã‚«ãƒ†ã‚´ãƒªå¤‰æ•°$s$ã‚’ç”¨ã„ã¦ã€&lt;/p&gt;
&lt;p&gt;$$
P(y=1|x,s=1) = \frac{P(s=1|y=1)P(y=1|x)}{P(s=1|y=1)P(y=1|x) + P(s=1|y=0)P(y=0|x)}
$$
ã¨æ›¸ã‘ã¾ã™ã€‚$(X_s,Y_s)$ã¯è² ä¾‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã‚’æ­£ä¾‹ã«åˆã‚ã›ã¦ã„ã‚‹ãŸã‚ã€$P(s=1,y=1)=1$ã§ã‚ã‚‹ã®ã§ä¸Šå¼ã¯&lt;/p&gt;
&lt;p&gt;$$
P(y=1|x,s=1) = \frac{P(y=1|x)}{P(y=1|x) + P(s=1|y=0)P(y=0|x)}
= \frac{P(y=1|x)}{P(y=1|x) + P(s=1|y=0)(1-P(y=1|x))}
$$
ã¨æ›¸ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚$P(s=1|y=0)\neq0$ã§ã‚ã‚‹ã“ã¨ã¯$(X_s,Y_s)$ã®å®šç¾©ã‚ˆã‚Šè‡ªæ˜ã§ã™(0ã ã¨æ­£ä¾‹ã—ã‹ãªã„ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿ã«ãªã‚‹)ã€‚ã‚ˆã£ã¦ã€$P(y=0,x)\neq0$ã§ã‚ã‚‹é™ã‚Šã€ã‚¢ãƒ³ãƒ€ãƒ¼ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã®ãƒ¢ãƒ‡ãƒ«ãŒæ­£ä¾‹ã¨ã¯ã˜ãå‡ºã™ç¢ºç‡ã¯å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒå‡ºã™ç¢ºç‡ã«å¯¾ã—ã¦æ­£ã®ãƒã‚¤ã‚¢ã‚¹ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚æ±‚ã‚ãŸã„ã®ã¯ãƒã‚¤ã‚¢ã‚¹ã®ãªã„$P(y=1|x)$ãªã®ã§$P=P(y=1|x),P_s=P(y|x,s=1),\beta=P(s=1,y=0)$ã¨ã™ã‚‹ã¨ã€&lt;/p&gt;
&lt;p&gt;$$
P = \frac{\beta P_s}{\beta P_s-P_s+1}
$$
ã¨ã‹ã‘ã€ã“ã®é–¢ä¿‚å¼ã‚’ç”¨ã„ã¦ãƒã‚¤ã‚¢ã‚¹ã‚’è£œæ­£ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»Šç¢ºèªã—ãŸã“ã¨ã‚’é–¢æ•°ã¨ã—ã¦å®šç¾©ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;calibration&lt;/span&gt;(y_proba, beta):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; y_proba &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; (y_proba &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; y_proba) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; beta)

sampling_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sum(y_train[:,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; sum(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;y_train[:,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
y_proba_calib &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; calibration(model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;predict(X_test), sampling_rate)
y_pred &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np_utils&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_categorical(np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;argmax(y_proba_calib,axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;), dense_size)

&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.metrics &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; confusion_matrix, ConfusionMatrixDisplay, accuracy_score
score &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; accuracy_score(y_test, y_pred)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Test accuracy:&amp;#39;&lt;/span&gt;, score)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Test accuracy: 0.22033898305084745
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¾ã£ãŸãè‰¯ããªã„çµæœã§ã™ã€‚&lt;code&gt;ConfusionMatrix&lt;/code&gt;ã‚’å‡ºã—ã¦ã¿ãŸã¨ã“ã‚ã©ã†ã‚„ã‚‰ã†ã¾ãã„ã£ã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;ConfusionMatrixDisplay(confusion_matrix(np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;argmax(y_test,axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;), np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;argmax(y_pred,axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;plot()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;sklearn.metrics._plot.confusion_matrix.ConfusionMatrixDisplay object at 0x000000005474F108&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post18/index_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸å‡è¡¡ãƒ‡ãƒ¼ã‚¿ã®ãƒã‚¤ã‚¢ã‚¹ä¿®æ­£ã¯ã—ãŸã‚“ã§ã™ãŒã€ãã‚Œã§ã‚‚ãªãŠè² å€¤ã‚’äºˆæ¸¬ã—ã‚„ã™ã„ãƒ¢ãƒ‡ãƒ«ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã§ã¯ä½¿ãˆãªã„ã§ã™ã­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-shapå€¤ã‚’ç”¨ã„ãŸçµæœè§£é‡ˆ&#34;&gt;3. Shapå€¤ã‚’ç”¨ã„ãŸçµæœè§£é‡ˆ&lt;/h2&gt;
&lt;p&gt;ä»Šå­¦ç¿’ã—ãŸãƒ¢ãƒ‡ãƒ«ã®&lt;code&gt;shap&lt;/code&gt;å€¤ã‚’è€ƒãˆã€çµæœã®è§£é‡ˆã‚’ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;code&gt;shap&lt;/code&gt;å€¤ã«ã¤ã„ã¦ã¯æ™‚é–“ãŒã‚ã‚Œã°ã€èª¬æ˜ã‚’è¿½è¨˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ç°¡å˜ã«è¨€ãˆã°ã€CNNãŒç”»åƒã®ã©ã®éƒ¨åˆ†ã«ç‰¹å¾´ã‚’æ‰ãˆã€é¦¬ãŒä¸Šä½ã«å…¥ã‚‹ã‹ã‚’äºˆæƒ³ã—ãŸã‹ã‚’å¯è¦–åŒ–ã§æ‰ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®é¦¬ã®è§£æã‚’ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(X_test[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;])
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post18/index_files/figure-html/unnamed-chunk-13-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; shap
background &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; X_train[np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;random&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;choice(X_train&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shape[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;],&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;,replace&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)]

e &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;GradientExplainer(model,background)

shap_values &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shap_values(X_test[[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]])
shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;image_plot(shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],X_test[[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post18/index_files/figure-html/unnamed-chunk-14-5.png&#34; width=&#34;576&#34; /&gt;&lt;/p&gt;
&lt;p&gt;éå¸¸ã«å¾®å¦™ã§ã™ãŒã€è¶³ã‚„è‡€éƒ¨ãªã©ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹ã‚ˆã†ã«ã¿ãˆã¾ã™ã€‚ã§ã™ãŒã€èƒŒæ™¯ã«åå¿œã—ã¦ã„ã‚‹ã‚ˆã†ã«ã‚‚è¦‹ãˆã‚‹ã®ã§é¦¬ä½“ã®ã¿å–ã‚Šå‡ºã™ãƒˆãƒªãƒŸãƒ³ã‚°ã‚’ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã­ã€‚ã“ã‚Œã¯ç‰©ä½“æ¤œçŸ¥ã®ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚ã¾ãŸã€ä»Šåº¦ã®æ©Ÿä¼šã«è€ƒãˆã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-æœ€å¾Œã«&#34;&gt;4. æœ€å¾Œã«&lt;/h2&gt;
&lt;p&gt;æ­£ç›´ã¾ã£ãŸãä¸Šæ‰‹ãã„ã£ã¦ã„ã¾ã›ã‚“ã€‚ã‚„ã¯ã‚Šé¦¬ä½“ã‹ã‚‰é †ä½äºˆæ¸¬ã‚’ã™ã‚‹ã®ã¯é›£ã—ã„ã®ã§ã—ã‚‡ã†ã‹ã€‚ã»ã‹ã®å¤‰æ•°ã¨æ›ã‘åˆã‚ã›ã‚‹ã¨çµæœãŒå¤‰ã‚ã£ãŸã‚Šã™ã‚‹ã®ã§ã—ã‚‡ã†ã‹ã€‚ä»Šã®ã¾ã¾ã ã¨ã‚ˆã„ç‰¹å¾´é‡ã‚’æŠ½å‡ºã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ãªã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚
Youtubeã‹ã‚‰ãƒ‘ãƒ‰ãƒƒã‚¯å‹•ç”»ã‚’å–å¾—ã—ã¦ã€&lt;code&gt;Encoder-Decoder&lt;/code&gt;ãƒ¢ãƒ‡ãƒ«ã§è§£æã™ã‚‹ã¨ã“ã‚ã¾ã§ã‚„ã‚‰ãªã„ã¨ã†ã¾ãã„ã‹ãªã„ã‚“ã§ã™ã‹ã­ã€‚è‡ªåˆ†ã®å®ŸåŠ›ãŒååˆ†ä¸ŠãŒã‚Œã°æ˜¯éã‚„ã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™(ã„ã¤ã«ãªã‚‹ã“ã¨ã‚„ã‚‰)ã€‚ãã‚Œã¾ã§ã«ã¯ã€PCã®ã‚¹ãƒšãƒƒã‚¯ã‚’ä¸Šã’ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚å®šé¡çµ¦ä»˜é‡‘ã‚’ä½¿ã†ã‹ãªã€‚ã€‚ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Windowsã«NEologdè¾æ›¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€RMeCabã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•</title>
      <link>/post/post17/</link>
      <pubDate>Sun, 19 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/post/post17/</guid>
      <description>&lt;p&gt;çš†ã•ã‚“ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚
æœ€è¿‘åœ¨å®…å‹¤å‹™ã§é‹å‹•ä¸è¶³ã§ã™ãŒã€å¹³æ—¥ä¼‘æ—¥å•ã‚ãšç ”ç©¶æ´»å‹•ã‚’ã—ã¦ã„ã¾ã™ã€‚
å­¦è¡“èªŒæŠ•ç¨¿ã‚’ç›®æŒ‡ã—ãŸBlogè¨˜äº‹ã«ã¯æ›¸ã‘ãªã„å†…å®¹ãªã®ã§ã€æ›´æ–°ã¯ã‚¹ãƒˆãƒƒãƒ—ã—ã¦ã—ã¾ã£ã¦ã„ã¾ã™ãŒã¡ã‚ƒã‚“ã¨æ´»å‹•ã¯ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå›ã¯ãã®ç ”ç©¶ã®ä¸­ã§åˆ©ç”¨ã—ã¦ã„ã‚‹MeCabã«ã¾ã¤ã‚ã‚‹Tipsã®ã”ç´¹ä»‹ã§ã™ã€‚MeCabã¨ã„ã†ã¨å½¢æ…‹ç´ è§£æã‚½ãƒ•ãƒˆã¨ã„ã†ã“ã¨ã¯ã“ã®ãƒ–ãƒ­ã‚°ã‚’èª­ã¾ã‚Œã¦ã„ã‚‹æ–¹ã¯ãŠåˆ†ã‹ã‚Šã‹ã¨æ€ã„ã¾ã™ãŒã€ãã®è¾æ›¸ã«NEologdè¾æ›¸ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã¿ãŸã¨ã„ã†ã®ãŒå†…å®¹ã§ã™ã€‚MeCabã£ã¦ãªã«ï¼Ÿã¨ã„ã†æ–¹ã‚‚ã„ã‚‰ã£ã—ã‚ƒã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã®ã§ã€ã‹ãªã‚Šç°¡å˜ã«ã”ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-mecabrmecabã¨ã¯&#34;&gt;1. Mecab(RMeCab)ã¨ã¯ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;MeCab&lt;/code&gt;ã¯æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ‹ãƒ³ã‚°ã§ä½¿ç”¨ã•ã‚Œã‚‹å½¢æ…‹ç´ è§£æã‚½ãƒ•ãƒˆã§ã™ã€‚è‹±èªãªã©ã®è¨€èªã¨ã¯ç•°ãªã‚Šã€æ—¥æœ¬èªã¯å˜èªæ¯ã«ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç½®ã‹ãªã„ãŸã‚ã€ãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ‹ãƒ³ã‚°ã‚’è¡Œã†éš›ã€ãã®ã¾ã¾ã§ã¯æ–‡ç« ã‚’å˜èªå˜ä½ã«åŒºåˆ‡ã£ã¦é›†è¨ˆã™ã‚‹ã¨ã„ã£ãŸã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ä¾‹ãˆã°ã€ã€Œã“ã‚Œã¯ãƒšãƒ³ã§ã™ã€‚ã€ã¨ã„ã†æ–‡ç« ã¯ãã®ã¾ã¾ã§ã¯ã€Œã“ã‚Œã¯ãƒšãƒ³ã§ã™ã€‚ã€ã¨ã„ã†&lt;em&gt;1ã¤&lt;/em&gt;ã®å˜èªã¨ã—ã¦èªè­˜ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚ã§ã™ãŒã€å˜èªã®é »åº¦åˆ†æã‚’è¡Œã†éš›ãªã©ã¯ã€ã€Œã“ã‚Œ/ã¯/ãƒšãƒ³/ã§ã™/ã€‚ã€ã¨ã„ã†é¢¨ã«æ–‡ç« ã‚’å˜èªãƒ¬ãƒ™ãƒ«ã«ã¾ã§åˆ†å‰²ã—ã€ã€Œãƒšãƒ³ã€ã¨ã„ã†ç‰¹å¾´é‡ã‚’å–å¾—ã—ãŸã„ã‚ã‘ã§ã™ã€‚ãã‚ŒãŒã§ãã‚‹ã®ãŒ&lt;code&gt;RMeCab&lt;/code&gt;ã§ã€ã“ã®å‡¦ç†ã¯å½¢æ…‹ç´ è§£æã¨å‘¼ã°ã‚Œã¾ã™ã€‚&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ãã—ã¦ã€&lt;code&gt;RMeCab&lt;/code&gt;ã¨ã¯ã“ã®&lt;code&gt;MeCab&lt;/code&gt;ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã«ãªã‚Šã¾ã™ã€‚&lt;code&gt;R&lt;/code&gt;ã‹ã‚‰&lt;code&gt;MeCab&lt;/code&gt;ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯&lt;code&gt;RMeCab&lt;/code&gt;ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä½¿ç”¨æ–¹æ³•ã¯ç°¡å˜ã§ã€&lt;code&gt;RMeCabC&lt;/code&gt;é–¢æ•°ã«æ–‡ç« ã‚’æ¸¡ã™ã ã‘ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(magrittr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(RMeCab)

&lt;span style=&#34;color:#a6e22e&#34;&gt;RMeCabC&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã“ã‚Œã¯ãƒšãƒ³ã§ã™ã€‚&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   åè©   åŠ©è©   åè© åŠ©å‹•è©   è¨˜å· 
## &amp;quot;ã“ã‚Œ&amp;quot;   &amp;quot;ã¯&amp;quot; &amp;quot;ãƒšãƒ³&amp;quot; &amp;quot;ã§ã™&amp;quot;   &amp;quot;ã€‚&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;RMeCabC&lt;/code&gt;é–¢æ•°ã¯çµæœã‚’ãƒªã‚¹ãƒˆã§è¿”ã—ã¦ãã‚‹ã®ã§ã€&lt;code&gt;unlist&lt;/code&gt;ã§characterã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å›ºæœ‰åè©ã«å¼±ã„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®mecab&#34;&gt;å›ºæœ‰åè©ã«å¼±ã„ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®MeCab&lt;/h3&gt;
&lt;p&gt;ä¾¿åˆ©ãªã‚ˆã†ã«æ€ãˆã‚‹ã®ã§ã™ãŒã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®&lt;code&gt;MeCab&lt;/code&gt;ã¯å›ºæœ‰åè©ã«å¼±ã„ã¨ã„ã†å¼±ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ã€Œæ¬…å‚46ãŒèµ¤ã„ãã¤ã­ã‚’é£Ÿã¹ã¦ã„ã‚‹ã€‚ã€ã¨ã„ã†æ–‡ç« ã‚’å½¢æ…‹ç´ è§£æã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;RMeCabC&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¬…å‚46ãŒèµ¤ã„ãã¤ã­ã‚’é£Ÿã¹ã¦ã„ã‚‹ã€‚&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##     åè©     åè©     åè©     åŠ©è©   å½¢å®¹è©     åè©     åŠ©è©     å‹•è© 
##     &amp;quot;æ¬…&amp;quot;     &amp;quot;å‚&amp;quot;     &amp;quot;46&amp;quot;     &amp;quot;ãŒ&amp;quot;   &amp;quot;èµ¤ã„&amp;quot; &amp;quot;ãã¤ã­&amp;quot;     &amp;quot;ã‚’&amp;quot;   &amp;quot;é£Ÿã¹&amp;quot; 
##     åŠ©è©     å‹•è©     è¨˜å· 
##     &amp;quot;ã¦&amp;quot;   &amp;quot;ã„ã‚‹&amp;quot;     &amp;quot;ã€‚&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;äºˆæƒ³ã—ã¦ã„ãŸçµæœã¯ã€Œæ¬…å‚46/ãŒ/èµ¤ã„ãã¤ã­/ã‚’/é£Ÿã¹/ã¦/ã„ã‚‹/ã€‚ã€ã§ã—ã‚‡ã†ã€‚ãŸã ã€å›ºæœ‰åè©ã‚’ä¸Šæ‰‹ãå½¢æ…‹ç´ è§£æã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ãªã„ãŸã‚ã€ä¸å¿…è¦ãªã¨ã“ã‚ã§åˆ†å‰²ãŒãªã•ã‚Œã¦ãŠã‚Šã€ã€Œèµ¤ã„/ãã¤ã­/ã‚’/é£Ÿã¹ã€ã¨ã„ã†éƒ¨åˆ†ã«ã¤ã„ã¦ã¯ã€Œèµ¤ã„ï¼ˆå‹•ç‰©ã®ï¼‰ãã¤ã­ã€ã‚’é£Ÿã¹ã¦ã„ã‚‹ã‹ã®ã‚ˆã†ãªè§£æçµæœã«ãªã£ã¦ã„ã¾ã™ã€‚èµ¤ã„ãã¤ã­ã®ã€Œãã¤ã­ã€ã¨å‹•ç‰©ã®ã€Œãã¤ã­ã€ã‚’åŒç­‰ã«æ‰±ã£ã¦ã—ã¾ã†ã®ã§ã€å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€çµŒæ¸ˆã«ãŠã„ã¦ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ—¥çµŒå¹³å‡æ ªä¾¡ãŒåˆ†å‰²ã•ã‚Œã€æ–°èç¤¾ã®ã€Œæ—¥çµŒã€ã¨æ ªä¾¡ã®ã€Œæ—¥çµŒã€ãŒã€å¤§çµ±é ˜ã®ã€Œãƒˆãƒ©ãƒ³ãƒ—ã€ã¨ã‚«ãƒ¼ãƒ‰ã®ã€Œãƒˆãƒ©ãƒ³ãƒ—ã€ãŒåŒºåˆ¥ã§ããªã„ã¨ã„ã£ãŸã“ã¨ãŒæƒ³å®šã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;RMeCabC&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä»Šé€±ã®æ—¥çµŒå¹³å‡æ ªä¾¡ã¯ã€ä¸Šå€¤æŠµæŠ—ç·šã‚’çªç ´ã—ã¦ä¸Šæ˜‡ï¼&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   åè©   åŠ©è©   åè©   åè©   åè©   åŠ©è©   è¨˜å·   åè©   åè©   åè©   åŠ©è© 
## &amp;quot;ä»Šé€±&amp;quot;   &amp;quot;ã®&amp;quot; &amp;quot;æ—¥çµŒ&amp;quot; &amp;quot;å¹³å‡&amp;quot; &amp;quot;æ ªä¾¡&amp;quot;   &amp;quot;ã¯&amp;quot;   &amp;quot;ã€&amp;quot; &amp;quot;ä¸Šå€¤&amp;quot; &amp;quot;æŠµæŠ—&amp;quot;   &amp;quot;ç·š&amp;quot;   &amp;quot;ã‚’&amp;quot; 
##   åè©   å‹•è©   åŠ©è©   åè©   è¨˜å· 
## &amp;quot;çªç ´&amp;quot;   &amp;quot;ã—&amp;quot;   &amp;quot;ã¦&amp;quot; &amp;quot;ä¸Šæ˜‡&amp;quot;   &amp;quot;ï¼&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;RMeCabC&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãƒˆãƒ©ãƒ³ãƒ—æ”¿æ¨©ã«ã‚ˆã‚‹çµŒæ¸ˆæ´»å‹•å†é–‹ã®æŒ‡é‡ç™ºè¡¨ãŒè©•ä¾¡ã•ã‚Œã‚‹&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##       åè©       åè©       åŠ©è©       åè©       åè©       åè©       åŠ©è© 
## &amp;quot;ãƒˆãƒ©ãƒ³ãƒ—&amp;quot;     &amp;quot;æ”¿æ¨©&amp;quot;   &amp;quot;ã«ã‚ˆã‚‹&amp;quot;     &amp;quot;çµŒæ¸ˆ&amp;quot;     &amp;quot;æ´»å‹•&amp;quot;     &amp;quot;å†é–‹&amp;quot;       &amp;quot;ã®&amp;quot; 
##       åè©       åè©       åŠ©è©       åè©       å‹•è©       å‹•è© 
##     &amp;quot;æŒ‡é‡&amp;quot;     &amp;quot;ç™ºè¡¨&amp;quot;       &amp;quot;ãŒ&amp;quot;     &amp;quot;è©•ä¾¡&amp;quot;       &amp;quot;ã•&amp;quot;     &amp;quot;ã‚Œã‚‹&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã“ã‚Œã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§&lt;code&gt;MeCab&lt;/code&gt;ãŒä½¿ç”¨ã—ã¦ã„ã‚‹&lt;em&gt;è¾æ›¸&lt;/em&gt;ã«åŸå› ãŒã‚ã‚Šã¾ã™ã€‚IPAè¾æ›¸(&lt;code&gt;ipadic&lt;/code&gt;)ã¨å‘¼ã°ã‚Œã‚‹ç‰©ã§ã€å¥ˆè‰¯å…ˆç«¯ç§‘å­¦æŠ€è¡“å¤§å­¦é™¢å¤§å­¦ãŒå…¬é–‹ã—ã¦ã„ã‚‹èŒ¶ç­Œã¨å‘¼ã°ã‚Œã‚‹å½¢æ…‹ç´ è§£æã‚½ãƒ•ãƒˆç”¨ã«ä½œã‚‰ã‚Œã¾ã—ãŸã€‚&lt;a href=&#34;https://ja.osdn.net/projects/ipadic/releases/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã‚’è¦‹ã‚‹ã¨è¾æ›¸ã®æ›´æ–°ã¯2007å¹´ã§ã‚¹ãƒˆãƒƒãƒ—ã—ã¦ãŠã‚Šã€æ–°èªã‚„æµè¡ŒèªãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ãŸã‚ã«ä¸Šè¨˜ã®å›ºæœ‰åè©ãŒä¸Šæ‰‹ãå½¢æ…‹ç´ è§£æã§ããªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ–°èªã«å¼·ã„neologdè¾æ›¸&#34;&gt;æ–°èªã«å¼·ã„NEologdè¾æ›¸&lt;/h3&gt;
&lt;p&gt;æœ€è¿‘&lt;code&gt;MeCab&lt;/code&gt;ã§ã‚ˆãä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹è¾æ›¸ã«&lt;code&gt;NEologd&lt;/code&gt;è¾æ›¸ã¨ã„ã†ã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚&lt;code&gt;NEologd&lt;/code&gt;è¾æ›¸ã¨ã¯ã€Webä¸Šã‹ã‚‰å¾—ãŸæ–°èªã«å¯¾å¿œã—ã¦ãŠã‚Šã€é »ç¹ã«æ›´æ–°ã•ã‚Œã‚‹&lt;code&gt;MeCab&lt;/code&gt;ç”¨ã®ã‚·ã‚¹ãƒ†ãƒ è¾æ›¸ã§ã™ã€‚&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;Twitterã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã¯ã€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç‰¹è‰²ã¯èªå½™ã®å¤šã•ã¨æ›´æ–°é »åº¦ã€æ–°èªã®æ¡éŒ²ã®é€Ÿã•ã€èª­ã¿ä»®åã®æ­£ç¢ºã•ã€è¡¨è¨˜æºã‚Œã¸ã®å¯¾å¿œã€‚ãŠã‚‚ãªè§£æå¯¾è±¡ã¯Webä¸Šã®ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨˜äº‹ã‚„æµè¡Œã—ãŸå‡ºæ¥äº‹ã€‚
ãŠã‚‚ãªç”¨é€”ã¯æ–‡æ›¸åˆ†é¡ã€æ–‡æ›¸ãƒ™ã‚¯ãƒˆãƒ«ä½œæˆã€å˜èªåŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ä½œæˆã€èª­ã¿ä»®åä»˜ä¸ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã¨è¨˜è¼‰ã•ã‚Œã¦ãŠã‚Šã€ä¸Šè¿°ã—ãŸIPAè¾æ›¸ã®å¼±ç‚¹ã‚’è£œå®Œã™ã‚‹è¾æ›¸ã¨ãªã£ã¦ã„ã¾ã™ã€‚ä»Šå›ã®è¨˜äº‹ã¯ãã®è¾æ›¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã«ã¤ã„ã¦ã§ã™ãŒã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸè¾æ›¸ã®å¨åŠ›ã‚’å…ˆã«ãŠè¦‹ã›ã—ã¦ãŠãã¾ã™ã€‚å®Ÿè¡Œã™ã‚‹ã«ã¯ã€&lt;code&gt;RMeCab&lt;/code&gt;é–¢æ•°ã«è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«(.dicãƒ•ã‚¡ã‚¤ãƒ«)ã®ãƒ‘ã‚¹ã‚’æ¸¡ã—ã¦ã‚„ã‚Œã°è‰¯ã„ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;dic_directory &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\\hogehoge\\mecab-user-dict-seed.yyyymmdd.dic&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;RMeCabC&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¬…å‚46ãŒèµ¤ã„ãã¤ã­ã‚’é£Ÿã¹ã¦ã„ã‚‹ã€‚&amp;#34;&lt;/span&gt;,dic&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dic_directory) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##         åè©         åŠ©è©         åè©         åŠ©è©         å‹•è©         åŠ©è© 
##     &amp;quot;æ¬…å‚46&amp;quot;         &amp;quot;ãŒ&amp;quot; &amp;quot;èµ¤ã„ãã¤ã­&amp;quot;         &amp;quot;ã‚’&amp;quot;       &amp;quot;é£Ÿã¹&amp;quot;         &amp;quot;ã¦&amp;quot; 
##         å‹•è©         è¨˜å· 
##       &amp;quot;ã„ã‚‹&amp;quot;         &amp;quot;ã€‚&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;RMeCabC&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä»Šé€±ã®æ—¥çµŒå¹³å‡æ ªä¾¡ã¯ã€ä¸Šå€¤æŠµæŠ—ç·šã‚’çªç ´ã—ã¦ä¸Šæ˜‡ï¼&amp;#34;&lt;/span&gt;,dic&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dic_directory) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##           åè©           åŠ©è©           åè©           åŠ©è©           è¨˜å· 
##         &amp;quot;ä»Šé€±&amp;quot;           &amp;quot;ã®&amp;quot; &amp;quot;æ—¥çµŒå¹³å‡æ ªä¾¡&amp;quot;           &amp;quot;ã¯&amp;quot;           &amp;quot;ã€&amp;quot; 
##           åè©           åè©           åè©           åŠ©è©           åè© 
##         &amp;quot;ä¸Šå€¤&amp;quot;         &amp;quot;æŠµæŠ—&amp;quot;           &amp;quot;ç·š&amp;quot;           &amp;quot;ã‚’&amp;quot;         &amp;quot;çªç ´&amp;quot; 
##           å‹•è©           åŠ©è©           åè©           è¨˜å· 
##           &amp;quot;ã—&amp;quot;           &amp;quot;ã¦&amp;quot;         &amp;quot;ä¸Šæ˜‡&amp;quot;           &amp;quot;ï¼&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;RMeCabC&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãƒˆãƒ©ãƒ³ãƒ—æ”¿æ¨©ã«ã‚ˆã‚‹çµŒæ¸ˆæ´»å‹•å†é–‹ã®æŒ‡é‡ç™ºè¡¨ãŒè©•ä¾¡ã•ã‚Œã‚‹&amp;#34;&lt;/span&gt;,dic&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dic_directory) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unlist&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##           åè©           åŠ©è©           åè©           åè©           åŠ©è© 
## &amp;quot;ãƒˆãƒ©ãƒ³ãƒ—æ”¿æ¨©&amp;quot;       &amp;quot;ã«ã‚ˆã‚‹&amp;quot;     &amp;quot;çµŒæ¸ˆæ´»å‹•&amp;quot;         &amp;quot;å†é–‹&amp;quot;           &amp;quot;ã®&amp;quot; 
##           åè©           åè©           åŠ©è©           åè©           å‹•è© 
##         &amp;quot;æŒ‡é‡&amp;quot;         &amp;quot;ç™ºè¡¨&amp;quot;           &amp;quot;ãŒ&amp;quot;         &amp;quot;è©•ä¾¡&amp;quot;           &amp;quot;ã•&amp;quot; 
##           å‹•è© 
##         &amp;quot;ã‚Œã‚‹&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šå€¤æŠµæŠ—ç·šã¯1èªã‚«ã‚¦ãƒ³ãƒˆã—ã¦ã»ã—ã„ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ãã‚Œä»¥å¤–ã¯ä¸Šæ‰‹ãå½¢æ…‹ç´ è§£æã§ãã¦ã„ãã†ã§ã™ã€‚
ã“ã®&lt;code&gt;NEologd&lt;/code&gt;è¾æ›¸ã§ã™ãŒã€&lt;em&gt;Windowsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒæƒ³å®šã•ã‚Œã¦ã„ã¾ã›ã‚“&lt;/em&gt;ã€‚ã¤ã¾ã‚Šã€Windowsãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ããªã„ã®ã§ã™ã€‚Windowsãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å°‘ã€…ã‚„ã‚„ã“ã—ã„æ‰‹é †ã‚’è¸ã¾ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚ä»Šå›ã¯ãã®ã‚„ã‚„ã“ã—ã„æ‰‹é †ã‚’è§£èª¬ã™ã‚‹è¨˜äº‹ã§ã™ã€‚Linuxã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã€ãã‚Œã‚’Windowsç’°å¢ƒã«ã‚³ãƒ”ãƒ¼ã€ãã®å¾Œè¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †&#34;&gt;2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †&lt;/h2&gt;
&lt;h3 id=&#34;a-windows-subsystem-for-linuxwslã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;A. &lt;code&gt;Windows Subsystem for Linux&lt;/code&gt;(WSL)ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Windows Power Shell&lt;/code&gt;ã‚’&lt;em&gt;ç®¡ç†è€…æ¨©é™&lt;/em&gt;ã§é–‹ãã€&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‚’å®Ÿè¡Œã™ã‚‹ã€‚WSLã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;./my_blog/post/post21_files/powershell.PNG&#34; alt=&#34;powerShellã§ã®å®Ÿè¡Œã®æ§˜å­&#34;&gt;{width=100%}&lt;/p&gt;
&lt;h3 id=&#34;b-ubuntu-linuxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;B. Ubuntu Linuxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;
&lt;p&gt;Microsoft Storeã‚ˆã‚Šubuntuã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ubuntu.PNG&#34; alt=&#34;ubuntuã®ç”»é¢&#34;&gt;{width=100%}&lt;/p&gt;
&lt;p&gt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ubuntuã‚’èµ·å‹•ã—ã€åˆæœŸè¨­å®šã‚’å®Œäº†ã•ã›ã‚‹(IDã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰)ã€‚&lt;/p&gt;
&lt;h3 id=&#34;c-ubuntu-linuxã«mecabã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;C. Ubuntu Linuxã«MeCabã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;
&lt;p&gt;ubuntuã®ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã€&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo apt-get update
sudo apt install mecab
sudo apt install libmecab-dev
sudo apt install mecab-ipadic-utf8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‚’å…¥åŠ›ã—ã€&lt;code&gt;MeCab&lt;/code&gt;ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;ubuntumecab.PNG&#34; alt=&#34;ubuntuã§mecabã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;{width=100%}&lt;/p&gt;
&lt;h3 id=&#34;d-ubuntu-for-linuxã«neologdè¾æ›¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;D. Ubuntu for Linuxã«&lt;code&gt;NEologd&lt;/code&gt;è¾æ›¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;
&lt;p&gt;ubuntsuã®ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;sudo apt install make
git clone --depth &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; https://github.com/neologd/mecab-ipadic-neologd.git
cd mecab-ipadic-neologd
sudo bin/install-mecab-ipadic-neologd -n -a
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‚’å®Ÿè¡Œã€‚&lt;code&gt;NEologd&lt;/code&gt;è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ãŒ(&lt;code&gt;/usr/lib/x86_64-linux-gnu/mecab/dic/mecab-ipadic-neologd/&lt;/code&gt;)ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;e-ubuntu-for-linuxã‹ã‚‰windowsã¸è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼&#34;&gt;E. Ubuntu for Linuxã‹ã‚‰Windowsã¸è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼&lt;/h3&gt;
&lt;p&gt;ubuntuã®ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;explorer.exe .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‚’å…¥åŠ›ã€‚ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ãŒç«‹ã¡ä¸ŠãŒã‚‹ã®ã§ã€&lt;code&gt;/usr/lib/x86_64-linux-gnu/mecab/dic/mecab-ipadic-neologd/(ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª)&lt;/code&gt;ã‚’Windowsã®ä»»æ„ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚å®Œäº†ã—ãŸã‚‰Ubuntuã¯é–‰ã˜ã‚‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;explorer.PNG&#34; alt=&#34;ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§ubuntuå†…éƒ¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç¢ºèªã™ã‚‹å›³&#34;&gt;{width=100%}&lt;/p&gt;
&lt;h3 id=&#34;f-windowså†…ã§è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«shift-jisã‚’è¡Œã†&#34;&gt;F. Windowså†…ã§è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«(&lt;code&gt;SHIFT-JIS&lt;/code&gt;)ã‚’è¡Œã†ã€‚&lt;/h3&gt;
&lt;p&gt;ã‚³ãƒ”ãƒ¼ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ä»¥ä¸‹ã®csvã‚’è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«(.dic)ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¾ã™ã€‚(yyyymmddã¯è¾æ›¸ã®æœ€çµ‚æ›´æ–°æ—¥ãªã®ã§å¤‰æ›´ã—ã¦ãã ã•ã„)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;-mecab-ipadic-neologd-buildmecab-ipadic-2.7.0-20070801-neologd-yyyymmdd-mecab-user-dict-seed.yyyymmdd.csv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãã®éš›ã€å…ƒãƒ•ã‚¡ã‚¤ãƒ«ã¯&lt;strong&gt;ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒ&lt;code&gt;UTF-8&lt;/code&gt;ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã€&lt;code&gt;SHIFT-JIS&lt;/code&gt;ã¸å¤‰æ›ã™ã‚‹ã“ã¨ã«æ³¨æ„&lt;/strong&gt;ã§ã™ã€‚ã“ã‚Œã‚’ã—ãªã„ã¨ã€&lt;code&gt;RMeCab&lt;/code&gt;ã‚’å®Ÿè¡Œã—ãŸã¨ãã«çµæœãŒæ–‡å­—åŒ–ã‘ã—ã¾ã™ã€‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã«ã¯MeCabã®mecab-dict-indexã¨ã„ã†ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚è‡ªåˆ†ã¯ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å­˜åœ¨ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;C:
-Program Files (x86)
-MeCab
-bin
-mecab-dict-index.exe&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;mecab_dict_index.PNG&#34; alt=&#34;&#34;&gt;{width=100%}&lt;/p&gt;
&lt;p&gt;ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç«‹ã¡ä¸Šã’ã€&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;C:&lt;span style=&#34;color:#ae81ff&#34;&gt;\P&lt;/span&gt;rogram Files &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;x86&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;\M&lt;/span&gt;eCab&lt;span style=&#34;color:#ae81ff&#34;&gt;\b&lt;/span&gt;in&lt;span style=&#34;color:#ae81ff&#34;&gt;\m&lt;/span&gt;ecab-dict-index.exe -d .../mecab-ipadic-neologd/buildmecab/ipadic-2.7.0-20070801-neologd-yyyymmdd&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜å ´æ‰€&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt; -u NEologd.yyyymmdd.dic -f utf-8 -t shift-jis mecab-ipadic-neologd&lt;span style=&#34;color:#ae81ff&#34;&gt;\b&lt;/span&gt;uildmecab&lt;span style=&#34;color:#ae81ff&#34;&gt;\i&lt;/span&gt;padic-2.7.0-20070801-neologd-yyyymmdd&lt;span style=&#34;color:#ae81ff&#34;&gt;\m&lt;/span&gt;ecab-user-dict-seed.yyyymmdd.csv 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‚’é©å®œå¤‰æ›´ã®ä¸Šã€å…¥åŠ›ã€‚&lt;code&gt;.../mecab-ipadic-neologd/buildmecab/ipadic-2.7.0-20070801-neologd-yyyymmdd&lt;/code&gt;ã«è¾æ›¸ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã€&lt;code&gt;NEologd.yyyymmdd.dic&lt;/code&gt;ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-ã¾ã¨ã‚&#34;&gt;3. ã¾ã¨ã‚&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šã§ã€&lt;code&gt;NEologd&lt;/code&gt;è¾æ›¸ãŒä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚éå¸¸ã«å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ãªã®ã§ä½¿ç”¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ãªãŠã€è¾æ›¸ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚ŒãŸéš›ã¯åŒã˜æ‰‹ç¶šãã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&amp;lt;å¾Œæ—¥è«‡&amp;gt;
Ubuntu for Linuxã‚’ä½¿ç”¨ã—ãªãã¦ã‚‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããã†ãªæ–¹æ³•ã‚ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://qiita.com/zincjp/items/c61c441426b9482b5a48&#34;&gt;https://qiita.com/zincjp/items/c61c441426b9482b5a48&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ãŸã ã€è‡ªåˆ†ã¯å®Ÿè¡Œã—ã¦ã„ãªã„ã®ã§å®Ÿéš›ã«ã§ãã‚‹ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚è¾æ›¸ãŒæ›´æ–°ã•ã‚ŒãŸã‚‰ã€ã‚„ã£ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;MeCabå†…éƒ¨ã®ä»•çµ„ã¿ã«ã¤ã„ã¦ã¯&lt;a href=&#34;https://techlife.cookpad.com/entry/2016/05/11/170000&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã€‚ &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;2020/4/19æ™‚ç‚¹ã®æœ€è¿‘ç‰ˆã¯2020/3/15æ›´æ–°ã®è¾æ›¸ã§ã™ã€‚ &lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
    <item>
      <title>LightGBMã‚’ä½¿ç”¨ã—ã¦ç«¶é¦¬çµæœã‚’äºˆæƒ³ã—ã¦ã¿ã‚‹</title>
      <link>/post/post16/</link>
      <pubDate>Sat, 29 Feb 2020 00:00:00 +0000</pubDate>
      <guid>/post/post16/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ã‹ãªã‚Šä¹…ã—ã¶ã‚Šã§ã¯ã‚ã‚Šã¾ã™ãŒã€Pythonã®å‹‰å¼·ã‚’ã‹ã­ã¦ä»¥å‰yahoo.keibaã§åé›†ã—ãŸç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€ãƒ¬ãƒ¼ã‚¹çµæœã‚’äºˆæƒ³ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ&#34;&gt;1.ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ&lt;/h2&gt;
&lt;p&gt;ã¾ãšã€å‰å›&lt;code&gt;sqlite&lt;/code&gt;ã«ä¿å­˜ã—ãŸãƒ¬ãƒ¼ã‚¹çµæœãƒ‡ãƒ¼ã‚¿ã‚’&lt;code&gt;pandas&lt;/code&gt;ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¸ä¿å­˜ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;conn &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sqlite3&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;connect(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\hogehoge\horse_data.db&amp;#39;&lt;/span&gt;)
sql &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;SELECT * FROM race_result&amp;#39;&lt;/span&gt;
df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_sql(con&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;conn,sql&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sql)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚åˆ—ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚orderãŒç€é †ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;columns
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Index([&#39;order&#39;, &#39;frame_number&#39;, &#39;horse_number&#39;, &#39;trainer&#39;, &#39;passing_rank&#39;,
##        &#39;last_3F&#39;, &#39;time&#39;, &#39;margin&#39;, &#39;horse_name&#39;, &#39;horse_age&#39;, &#39;horse_sex&#39;,
##        &#39;horse_weight&#39;, &#39;horse_weight_change&#39;, &#39;brinker&#39;, &#39;jockey&#39;,
##        &#39;jockey_weight&#39;, &#39;jockey_weight_change&#39;, &#39;odds&#39;, &#39;popularity&#39;,
##        &#39;race_date&#39;, &#39;race_course&#39;, &#39;race_name&#39;, &#39;race_distance&#39;, &#39;type&#39;,
##        &#39;race_turn&#39;, &#39;race_condition&#39;, &#39;race_weather&#39;, &#39;colour&#39;, &#39;owner&#39;,
##        &#39;farm&#39;, &#39;locality&#39;, &#39;horse_birthday&#39;, &#39;father&#39;, &#39;mother&#39;, &#39;prize&#39;,
##        &#39;http&#39;],
##       dtype=&#39;object&#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;orderã®ä¸­èº«ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ã€æ‹¬å¼§ï¼ˆï¼‰ãŒã¤ã„ã¦ã„ã‚‹ç‰©ãŒå¤šãã€ã¾ãŸå–æ¶ˆã‚„ä¸­æ­¢ã€å¤±æ ¼ãªã©ãŒå­˜åœ¨ã™ã‚‹ãŸã‚ã€æ–‡å­—å‹ã«èªè­˜ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã¡ãªã¿ã«æ‹¬å¼§ï¼ˆï¼‰å†…ã®é †ä½ã¯å…¥ç·šé †ä½ã¨ã„ã†ã‚„ã¤ã§ã€ä»–é¦¬ã®èµ°è¡Œã‚’å¦¨å®³ã—ãŸã‚Šã—ã¦é †ä½ãŒé™ç€ã•ã›ã‚‰ã‚ŒãŸã“ã¨ã‚’æ„å‘³ã—ã¾ã™ï¼ˆhttp://www.jra.go.jp/judge/ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;loc[:,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unique()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## array([&#39;1&#39;, &#39;7&#39;, &#39;2&#39;, &#39;8&#39;, &#39;5&#39;, &#39;15&#39;, &#39;6&#39;, &#39;12&#39;, &#39;11&#39;, &#39;14&#39;, &#39;3&#39;, &#39;13&#39;,
##        &#39;4&#39;, &#39;16&#39;, &#39;9&#39;, &#39;10&#39;, &#39;å–æ¶ˆ&#39;, &#39;ä¸­æ­¢&#39;, &#39;é™¤å¤–&#39;, &#39;17&#39;, &#39;18&#39;, &#39;4(3)&#39;, &#39;2(1)&#39;,
##        &#39;3(2)&#39;, &#39;6(4)&#39;, &#39;å¤±æ ¼&#39;, &#39;9(8)&#39;, &#39;16(6)&#39;, &#39;12(12)&#39;, &#39;13(9)&#39;, &#39;6(3)&#39;,
##        &#39;10(7)&#39;, &#39;6(5)&#39;, &#39;9(3)&#39;, &#39;11(8)&#39;, &#39;13(2)&#39;, &#39;12(9)&#39;, &#39;14(7)&#39;,
##        &#39;10(1)&#39;, &#39;16(8)&#39;, &#39;14(6)&#39;, &#39;10(3)&#39;, &#39;12(1)&#39;, &#39;13(6)&#39;, &#39;7(1)&#39;,
##        &#39;12(6)&#39;, &#39;6(2)&#39;, &#39;11(2)&#39;, &#39;15(6)&#39;, &#39;13(10)&#39;, &#39;14(4)&#39;, &#39;7(5)&#39;,
##        &#39;17(4)&#39;, &#39;9(7)&#39;, &#39;16(14)&#39;, &#39;12(11)&#39;, &#39;14(2)&#39;, &#39;8(2)&#39;, &#39;9(5)&#39;,
##        &#39;11(5)&#39;, &#39;12(7)&#39;, &#39;11(1)&#39;, &#39;12(8)&#39;, &#39;7(4)&#39;, &#39;5(4)&#39;, &#39;13(12)&#39;,
##        &#39;14(3)&#39;, &#39;10(2)&#39;, &#39;11(10)&#39;, &#39;18(3)&#39;, &#39;10(4)&#39;, &#39;15(8)&#39;, &#39;8(3)&#39;,
##        &#39;5(1)&#39;, &#39;10(5)&#39;, &#39;7(3)&#39;, &#39;5(2)&#39;, &#39;9(1)&#39;, &#39;13(3)&#39;, &#39;16(11)&#39;,
##        &#39;11(3)&#39;, &#39;18(15)&#39;, &#39;11(6)&#39;, &#39;10(6)&#39;, &#39;14(12)&#39;, &#39;12(5)&#39;, &#39;15(14)&#39;,
##        &#39;17(8)&#39;, &#39;18(6)&#39;, &#39;4(2)&#39;, &#39;18(10)&#39;, &#39;16(7)&#39;, &#39;13(1)&#39;, &#39;16(10)&#39;,
##        &#39;15(7)&#39;, &#39;9(4)&#39;, &#39;15(5)&#39;, &#39;12(3)&#39;, &#39;8(7)&#39;, &#39;15(2)&#39;, &#39;12(10)&#39;,
##        &#39;14(9)&#39;, &#39;3(1)&#39;, &#39;6(1)&#39;, &#39;14(5)&#39;, &#39;15(4)&#39;, &#39;11(4)&#39;, &#39;12(4)&#39;,
##        &#39;16(4)&#39;, &#39;9(2)&#39;, &#39;13(5)&#39;, &#39;12(2)&#39;, &#39;15(1)&#39;, &#39;4(1)&#39;, &#39;14(13)&#39;,
##        &#39;14(1)&#39;, &#39;13(7)&#39;, &#39;5(3)&#39;, &#39;8(6)&#39;, &#39;15(13)&#39;, &#39;7(2)&#39;, &#39;15(11)&#39;,
##        &#39;10(9)&#39;, &#39;11(9)&#39;, &#39;8(4)&#39;, &#39;15(3)&#39;, &#39;13(4)&#39;, &#39;16(12)&#39;, &#39;16(5)&#39;,
##        &#39;18(11)&#39;, &#39;10(8)&#39;, &#39;18(8)&#39;, &#39;14(8)&#39;, &#39;16(9)&#39;, &#39;8(5)&#39;, &#39;8(1)&#39;,
##        &#39;14(11)&#39;, &#39;9(6)&#39;, &#39;16(13)&#39;, &#39;16(15)&#39;, &#39;11(11)&#39;, &#39;15(10)&#39;, &#39;7(6)&#39;],
##       dtype=object)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¾ãšã“ã“ã‚’ä¿®æ­£ã—ã¾ã—ã‚‡ã†ã€‚æ‹¬å¼§ã‚’é™¤å»ã—ã¦intå‹ã«å‹å¤‰æ›´ã—ã€å…¥ç·šé †ä½ã¯æ–°ãŸãªåˆ—&lt;code&gt;arriving order&lt;/code&gt;ã¨ã—ã¦è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;arriving order&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;contains(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\d*\(\d*\)&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)][&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\d+\(&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\)&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;arriving order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unique()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## array([nan,  3.,  1.,  2.,  4.,  8.,  6., 12.,  9.,  7.,  5., 10., 14.,
##        11., 15., 13.])
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\(\d+\)&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)
df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; df: &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;contains(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;(å–æ¶ˆ|ä¸­æ­¢|é™¤å¤–|å¤±æ ¼)&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## C:\Users\aashi\ANACON~1\lib\site-packages\pandas\core\strings.py:1954: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
##   return func(self, *args, **kwargs)
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unique()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## array([ 1.,  7.,  2.,  8.,  5., 15.,  6., 12., 11., 14.,  3., 13.,  4.,
##        16.,  9., 10., 17., 18.])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ãã‚Œã„ãª&lt;code&gt;float&lt;/code&gt;å‹ã«å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã§ã¯ã€æ¬¡ã«ãƒ©ã‚¹ãƒˆ3Fã®ã‚¿ã‚¤ãƒ ã®å‰å‡¦ç†ã«ç§»ã‚Šã¾ã™ã€‚å‰èµ°ã®ãƒ©ã‚¹ãƒˆ3Fã®ã‚¿ã‚¤ãƒ ã‚’äºˆæ¸¬ã«ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; numpy &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; np
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;last_3F&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;last_3F&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;character(0)&amp;#39;&lt;/span&gt;,np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nan,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;last_3F&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;last_3F&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‰èµ°ã®ãƒ¬ãƒ¼ã‚¹ã¨é †ä½ã€è¿½åŠ é †ä½ã‚‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¸å«ã‚ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prerace&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_name&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;preorder&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prepassing&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;passing_rank&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‡ºèµ°æ™‚ç‚¹ã§ç²å¾—ã—ã¦ã„ã‚‹ç´¯ç©è³é‡‘é¡ã‚‚è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;preprize&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prize&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;preprize&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;preprize&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãã®ä»–ã€æ¬ æå€¤ã‚„ãƒ‡ãƒ¼ã‚¿å‹ã®ä¿®æ­£ã€ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿ã®ãƒ©ãƒ™ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_weight&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_weight&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;character(0)&amp;#39;&lt;/span&gt;,np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nan,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_age&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_age&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_weight_change&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_weight_change&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;jockey_weight&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;jockey_weight&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_distance&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_distance&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;m&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;character(0)&amp;#39;&lt;/span&gt;,np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nan,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)
df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;loc[df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;

df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;colour&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;colour&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prepassing&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prepassing&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prerace&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prerace&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;father&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;father&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;mother&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;mother&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)

&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; preprocessing
cat_list &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;trainer&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_sex&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;brinker&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;jockey&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_course&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_name&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;type&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_condition&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_weather&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;colour&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;father&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;mother&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prerace&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prepassing&amp;#39;&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; column &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; cat_list:
    target_column &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[column]
    le &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; preprocessing&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;LabelEncoder()
    le&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fit(target_column)
    label_encoded_column &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; le&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;transform(target_column)
    df[column] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Series(label_encoded_column)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;category&amp;#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
## LabelEncoder()
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas_profiling &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pdq
profile &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pdq&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;ProfileReport(df)
profile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;2-äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ&#34;&gt;2. äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ&lt;/h2&gt;
&lt;p&gt;ã§ã¯&lt;code&gt;LightGBM&lt;/code&gt;ã§äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã£ã¦ã¿ã¾ã™ã€‚&lt;code&gt;optuna&lt;/code&gt;ã®&lt;code&gt;LightGBM&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¦ã€ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¡Œã„ã€å­¦ç¿’ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦è¨ˆç®—ã—ãŸãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®äºˆæ¸¬å€¤ã¨å®Ÿç¸¾å€¤ã®&lt;code&gt;confusion matrix&lt;/code&gt;ãªã‚‰ã³ã«æ­£è§£ç‡ã‚’ç®—å‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; optuna.integration.lightgbm &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; lgb
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.model_selection &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; train_test_split

y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]
x &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;drop([&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;passing_rank&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;time&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;odds&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;popularity&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;owner&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;farm&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;locality&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_birthday&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prize&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_date&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;],axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)

X_train, X_test, y_train, y_test &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; train_test_split(x, y)
X_train, x_val, y_train, y_val &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; train_test_split(X_train, y_train)

lgb_train &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dataset(X_train, y_train)
lgb_eval &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dataset(x_val, y_val)
lgb_test &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dataset(X_test, y_test, reference&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;lgb_train)

lgbm_params &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;objective&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;binary&amp;#39;&lt;/span&gt;,
        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;boost_from_average&amp;#39;&lt;/span&gt;: False
    }

model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;train(lgbm_params, lgb_train, categorical_feature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cat_list, valid_sets &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb_eval,  num_boost_round&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;, early_stopping_rounds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;, verbose_eval&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)

&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;calibration&lt;/span&gt;(y_proba, beta):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; y_proba &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; (y_proba &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; y_proba) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; beta)

sampling_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; y_train&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sum() &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; len(y_train)
y_proba &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;predict(X_test, num_iteration&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;best_iteration)
y_proba_calib &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; calibration(y_proba, sampling_rate)

y_pred &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;vectorize(&lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; x: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.49&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)(y_proba_calib)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯è¦–åŒ–ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.metrics &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; confusion_matrix, ConfusionMatrixDisplay, accuracy_score, precision_score, recall_score, f1_score
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt

&lt;span style=&#34;color:#75715e&#34;&gt;# Confusion Matrixã‚’ç”Ÿæˆ&lt;/span&gt;
ConfusionMatrixDisplay(confusion_matrix(y_test, y_pred))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;plot()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;sklearn.metrics._plot.confusion_matrix.ConfusionMatrixDisplay object at 0x00000000C3E2F7C8&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post16/index_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()

accuracy_score(y_test, y_pred)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.9299209299125913
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;precision_score(y_test, y_pred)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.9401709401709402
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;accuracy_score&lt;/code&gt;ï¼ˆäºˆæ¸¬ç²¾åº¦ï¼‰ãŒ90%ã‚’è¶…ãˆã€&lt;code&gt;precision_Score&lt;/code&gt;ï¼ˆé©åˆç‡ã€é™½=1ç€ã¨äºˆæƒ³ã—ãŸãƒ‡ãƒ¼ã‚¿ã®æ­£è§£ç‡ï¼‰ã‚‚ã„ã„æ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;recall_score(y_test, y_pred)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.009727052997700878
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;f1_score(y_test, y_pred)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.019254893952212852
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€æ–¹ã€&lt;code&gt;recall_score&lt;/code&gt;(å†ç¾æ€§ã€é™½=1ç€ã®ã‚µãƒ³ãƒ—ãƒ«ã®ã†ã¡å®Ÿéš›ã«æ­£è§£ã—ãŸå‰²åˆ)ãŒä½ãå½é™°æ€§ãŒé«˜ã„ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚ãã®çµæœã€&lt;code&gt;F1&lt;/code&gt;å€¤ã‚‚ä½ããªã£ã¦ã„ã¾ã™ã­ã€‚ç«¶é¦¬äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®å ´åˆã€å½é™°æ€§ãŒé«˜ã„ã“ã¨ã¯å½é™½æ€§ãŒé«˜ã„ã“ã¨ã‚ˆã‚Šã¯ã¾ã—ãªã®ã§ã™ãŒã€å›åç‡ã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã¯å½é™°æ€§ã‚’ä¸‹ã’ã‚‹ã“ã¨ã‚’é ‘å¼µã‚‰ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ä»Šå¾Œã®èª²é¡Œã§ã™ã­ã€‚æ¬¡ç¯€ã§ã¯&lt;code&gt;shapley&lt;/code&gt;å€¤ã‚’ä½¿ã£ã¦è¦å› åˆ†è§£ã‚’ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-shapã§ã®çµæœè§£é‡ˆ&#34;&gt;3. shapã§ã®çµæœè§£é‡ˆ&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; shap

shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;initjs()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;IPython.core.display.HTML object&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;explainer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;TreeExplainer(model)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Setting feature_perturbation = &amp;quot;tree_path_dependent&amp;quot; because no background data was given.
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap_values &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; explainer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shap_values(X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## LightGBM binary classifier with TreeExplainer shap values output has changed to a list of ndarray
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¾ãšã€å„ç‰¹å¾´é‡ã®é‡è¦åº¦ã‚’è¦‹ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚&lt;code&gt;summary_plot&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;summary_plot(shap_values, X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post16/index_files/figure-html/unnamed-chunk-19-3.png&#34; width=&#34;768&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ¨ªè»¸ã¯å„ç‰¹å¾´é‡ã®å¹³å‡çš„ãªé‡è¦åº¦ã‚’è¡¨ã—ã¦ã„ã¾ã™(shapå€¤ã®çµ¶å¯¾å€¤)ã€‚preprize(å‰èµ°ã¾ã§ã®è³é‡‘ç²å¾—é‡‘é¡)ã‚„horse_ageã€preorder(å‰èµ°ã®ç€é †)ãªã©ãŒäºˆæ¸¬ã«é‡è¦ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ç‰¹ã«preprizeã®é‡è¦åº¦ã¯1ç€ã®äºˆæ¸¬ã€1ç€ä»¥å¤–ã®äºˆæ¸¬ã©ã¡ã‚‰ã«å¯¾ã—ã¦ã‚‚å¤§ãã„ã§ã™ã€‚horse_ageã‚‚åŒæ§˜ã§ã™ã€‚ãŸã ã€ã“ã‚Œã§ã¯é‡è¦ã¨ã„ã†ã ã‘ã§å®šæ€§çš„ãªè©•ä¾¡ã¯ã§ãã¾ã›ã‚“ã€‚ä¾‹ãˆã°ã€preprizeãŒå¤§ãã„â†’1ä½ã«ãªã‚‹ç¢ºç‡ãŒä¸Šæ˜‡ã¨ã„ã£ãŸé–¢ä¿‚ãŒç¢ºèªã§ãã‚Œã°ã€ãã‚Œã¯é‡è¦ãªæƒ…å ±ã«ãªã‚Šå¾—ã¾ã™ã€‚æ¬¡ã«ãã‚Œã‚’ç¢ºèªã—ã¾ã™ã€‚&lt;code&gt;summary_plot&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;summary_plot(shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;], X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post16/index_files/figure-html/unnamed-chunk-20-5.png&#34; width=&#34;768&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›³ã‚‚å„ç‰¹å¾´é‡ã®é‡è¦åº¦ã‚’è¡¨ã—ã¦ã„ã¾ã™(ä»Šå›ã¯çµ¶å¯¾å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“)ã€‚ä»Šå›ã¯ãã‚Œãã‚Œã®ç‰¹å¾´é‡ã®é‡è¦åº¦ãŒãƒã‚¤ã‚ªãƒªãƒ³ãƒ—ãƒ­ãƒƒãƒˆã«ã‚ˆã£ã¦è¡¨ã•ã‚Œã¦ãŠã‚Šã€ã‹ã¤ç‰¹å¾´é‡ã®å€¤ã®å¤§ãã•ã§è‰²åˆ†ã‘ãŒã•ã‚Œã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€preprizeã ã¨æ¨ªè»¸ãŒ0ä»¥ä¸Šã®éƒ¨åˆ†ã§ã®ã¿èµ¤è‰²ã®åˆ†å¸ƒãŒç™ºç”Ÿã—ã¦ãŠã‚Šã€ã“ã“ã‹ã‚‰preprizeã®ç‰¹å¾´é‡ãŒå¤§ãã„ã€ã¤ã¾ã‚Šå‰èµ°ã¾ã§ã®ç²å¾—è³é‡‘é¡ãŒå¤šã„ã¨å¹³å‡çš„ã«1ç€ã®ç¢ºç‡ãŒä¸ŠãŒã‚‹ã¨ã„ã†å½“ãŸã‚Šå‰ã®è§£é‡ˆã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»–ã«ã‚‚ã€horse_age,preorder,last_3Fã¯ç‰¹å¾´é‡ãŒå°ã•ããªã‚‹ã»ã©1ç€ã«ãªã‚‹ç¢ºç‡ãŒã‚ãŒã‚‹ã“ã¨ã‚‚èª­ã¿å–ã‚Œã¾ã™ã€‚horse_weight, jokey_weightã¯å¤§ãããªã‚‹ã»ã©1ç€ã«ãªã‚‹ç¢ºç‡ãŒä¸ŠãŒã‚‹ã‚ˆã†ã§ã™ã€‚ä¸€æ–¹ã€ãã®ä»–ã¯ç‰¹ã«å®šæ€§çš„ãªé–¢ä¿‚ã‚’èª­ã¿å–ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ã€ç‰¹å¾´é‡ã¨ç¢ºç‡ã®é–¢ä¿‚ã‚’ã‚ˆã‚Šè©³ã—ãç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å…ˆã»ã©ã€preprizeã¯ç‰¹å¾´é‡ãŒå¤§ãããªã‚‹ã»ã©1ç€ã«ãªã‚‹ç¢ºç‡ãŒä¸Šæ˜‡ã™ã‚‹ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ãŸã ã€ãã®ç¢ºç‡ã®ä¸Šæ˜‡ã¯1æ¬¡é–¢æ•°çš„ã«å¢—åŠ ã™ã‚‹ã®ã‹ã€æŒ‡æ•°çš„ã«å¢—å¤§ã™ã‚‹ã®ã‹ã€ãã‚Œã¨ã‚‚$\log x$ã®ã‚ˆã†ã«é€“æ¸›ã—ã¦ã„ãã®ã‹ã€ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚&lt;code&gt;dependence_plot&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¦ãã‚Œã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;dependence_plot(ind&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;preprize&amp;#34;&lt;/span&gt;, shap_values&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;], features&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post16/index_files/figure-html/unnamed-chunk-21-7.png&#34; width=&#34;720&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›³ã¯å­¦ç¿’ã—ãŸ&lt;code&gt;LightGBM&lt;/code&gt;ã‚’preprizeã®é–¢æ•°ã¨ã—ã¦è¦‹ãŸã¨ãã®æ¦‚å½¢ã‚’plotã—ãŸã‚‚ã®ã§ã™ã€‚å…ˆã«ç¢ºèªã—ãŸã¨ãŠã‚Šã€ã‚„ã¯ã‚Šç‰¹å¾´é‡ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã€1ç€ã«ãªã‚‹ç¢ºç‡ãŒä¸Šæ˜‡ã—ã¦ã„ãã¾ã™ã€‚ãŸã ã€ãã®ä¸Šæ˜‡ã¯å¾ã€…ã«é€“æ¸›ã—ã¦ã„ãã€2000ä¸‡å††ã‚’è¶…ãˆã‚‹ã¨ã“ã‚ã§ã»ã¼é ­æ‰“ã¡ã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ä¸Šå›³ã§ã¯horse_ageã§ã®è‰²åˆ†ã‘ã‚’è¡Œã£ã¦ãŠã‚Šã€preprizeã¨ã®é–¢ä¿‚æ€§ã‚‚ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚„ã¯ã‚Šã€ç›´æ„Ÿã¨åŒã˜ãã€preprizeãŒé«˜ã„é¦¬ã®ä¸­ã§ã‚‚horse_ageãŒè‹¥ã„é¦¬ã®1ç€ç¢ºç‡ãŒé«˜ããªã‚‹ã“ã¨ãŒè¦‹ã¦å–ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;preorderã®&lt;code&gt;dependence_plot&lt;/code&gt;ã‚‚ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;dependence_plot(ind&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;preorder&amp;#34;&lt;/span&gt;, shap_values&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;], features&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post16/index_files/figure-html/unnamed-chunk-22-9.png&#34; width=&#34;720&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã‚„ã¯ã‚Šã€å‰èµ°ã®ç€é †ãŒä¸Šä½ã«ãªã‚‹ã»ã©1ç€ç¢ºç‡ãŒé«˜ã¾ã‚‹ã“ã¨ãŒã“ã“ã‹ã‚‰ã‚‚åˆ†ã‹ã‚Šã¾ã™ã€‚ã¾ãŸã€ãã®ç¢ºç‡ã¯6ç€ä»¥ä¸Šã¨ãã‚Œä»¥å¤–ã§æ°´æº–æ„ŸãŒå¤‰ã‚ã‚‹ã“ã¨ã‚‚åˆ†ã‹ã‚Šã¾ã™ã€‚last_3Fã®ã‚¿ã‚¤ãƒ ã¨ã®é–¢ä¿‚æ€§ã‚‚ç¢ºèªã—ã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ã‚ã¾ã‚Šé–¢é€£æ€§ã¯ãªã•ãã†ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-æœ€å¾Œã«&#34;&gt;4. æœ€å¾Œã«&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;LightGBM&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã€ç«¶é¦¬ã®äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚ã•ã™ãŒ&lt;code&gt;LightGBM&lt;/code&gt;ã¨ã„ã£ãŸæ„Ÿã˜ã§ã€äºˆæ¸¬ç²¾åº¦ã¯é«˜ã‹ã£ãŸã§ã™ã€‚ã¾ãŸã€&lt;code&gt;shap&lt;/code&gt;å€¤ã‚’ä½¿ç”¨ã—ãŸé‡è¦ç‰¹å¾´é‡ã®æ¤œå‡ºã‚‚ä¸Šæ‰‹ãã„ãã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€&lt;code&gt;LightGBM&lt;/code&gt;ã®æ°—æŒã¡ã‚’ç†è§£ã—ã€ã‚ˆã‚Šè‰¯ã„ç‰¹å¾´é‡ã®ç™ºè¦‹ã‚’é€²ã‚ã¦ã„ãã“ã¨ã§ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã®ç²¾åº¦ã‚’é«˜ã‚ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>10å¹´ç‰©é•·æœŸé‡‘åˆ©ã‚’ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã¿ã‚‹</title>
      <link>/post/post14/</link>
      <pubDate>Tue, 16 Jul 2019 00:00:00 +0000</pubDate>
      <guid>/post/post14/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ã¨ã‚ã‚‹ç†ç”±ã§10å¹´ç‰©é•·æœŸé‡‘åˆ©ã®ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã—ãŸã€‚ã¨ã„ã†ã‚ã‘ã§ã€USãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦è§£æã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã€ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã—ã¾ã—ã‚‡ã†ã€‚&lt;code&gt;quantmod&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã¦ã€FREDã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’è½ã¨ã—ã¾ã™ã€‚&lt;code&gt;getsymbols(ã‚­ãƒ¼,from=é–‹å§‹æ—¥,src=&amp;quot;FRED&amp;quot;, auto.assign=TRUE)&lt;/code&gt;ã§ç°¡å˜ã«ã§ãã¡ã‚ƒã„ã¾ã™ã€‚ã¡ãªã¿ã«ã‚­ãƒ¼ã¯FREDã®HPã§ç¢ºèªã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ãƒ‡ãƒ¼ã‚¿åé›†&#34;&gt;1. ãƒ‡ãƒ¼ã‚¿åé›†&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(quantmod)

&lt;span style=&#34;color:#75715e&#34;&gt;# data name collected&lt;/span&gt;
symbols.name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;10-Year Treasury Constant Maturity Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Effective Federal Funds Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Consumer Price Index for All Urban Consumers: All Items&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Civilian Unemployment Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3-Month Treasury Bill: Secondary Market Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Industrial Production Index&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;10-Year Breakeven Inflation Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Trade Weighted U.S. Dollar Index: Broad, Goods&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;Smoothed U.S. Recession Probabilities&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Moody&amp;#39;s Seasoned Baa Corporate Bond Yield&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;5-Year, 5-Year Forward Inflation Expectation Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Personal Consumption Expenditures&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# Collect economic data&lt;/span&gt;
symbols &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GS10&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FEDFUNDS&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CPIAUCSL&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UNRATE&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;TB3MS&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;INDPRO&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;T10YIEM&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;TWEXBMTH&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;RECPROUSM156N&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;BAA&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;T5YIFRM&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PCE&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;getSymbols&lt;/span&gt;(symbols, from &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1980-01-01&amp;#39;&lt;/span&gt;, src &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FRED&amp;#34;&lt;/span&gt;, auto.assign &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##  [1] &amp;quot;GS10&amp;quot;          &amp;quot;FEDFUNDS&amp;quot;      &amp;quot;CPIAUCSL&amp;quot;      &amp;quot;UNRATE&amp;quot;       
##  [5] &amp;quot;TB3MS&amp;quot;         &amp;quot;INDPRO&amp;quot;        &amp;quot;T10YIEM&amp;quot;       &amp;quot;TWEXBMTH&amp;quot;     
##  [9] &amp;quot;RECPROUSM156N&amp;quot; &amp;quot;BAA&amp;quot;           &amp;quot;T5YIFRM&amp;quot;       &amp;quot;PCE&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;macro_indicator &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(GS10,FEDFUNDS,CPIAUCSL,UNRATE,TB3MS,INDPRO,T10YIEM,TWEXBMTH,RECPROUSM156N,BAA,T5YIFRM,PCE)
&lt;span style=&#34;color:#a6e22e&#34;&gt;rm&lt;/span&gt;(GS10,FEDFUNDS,CPIAUCSL,UNRATE,TB3MS,INDPRO,T10YIEM,TWEXBMTH,RECPROUSM156N,BAA,T5YIFRM,PCE,USEPUINDXD)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;2-æœˆæ¬¡è§£æãƒ‘ãƒ¼ãƒˆ&#34;&gt;2. æœˆæ¬¡è§£æãƒ‘ãƒ¼ãƒˆ&lt;/h2&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã¯
&lt;a href=&#34;htmlwidget/macro_indicator.html&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;
ã‹ã‚‰å‚ç…§ã§ãã¾ã™ã€‚ã§ã¯ã€æ¨è¨ˆç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚è¢«èª¬æ˜å¤‰æ•°ã¯&lt;code&gt;10-Year Treasury Constant Maturity Rate(GS10)&lt;/code&gt;ã§ã™ã€‚èª¬æ˜å¤‰æ•°ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;èª¬æ˜å¤‰æ•°å&lt;/th&gt;
&lt;th&gt;ã‚­ãƒ¼&lt;/th&gt;
&lt;th&gt;ä»£ç†å¤‰æ•°&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Federal Funds Rate&lt;/td&gt;
&lt;td&gt;FEDFUNDS&lt;/td&gt;
&lt;td&gt;çŸ­æœŸé‡‘åˆ©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Consumer Price Index&lt;/td&gt;
&lt;td&gt;CPIAUCSL&lt;/td&gt;
&lt;td&gt;ç‰©ä¾¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Unemployment Rate&lt;/td&gt;
&lt;td&gt;UNRATE&lt;/td&gt;
&lt;td&gt;é›‡ç”¨é–¢é€£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3-Month Treasury Bill&lt;/td&gt;
&lt;td&gt;TB3MS&lt;/td&gt;
&lt;td&gt;çŸ­æœŸé‡‘åˆ©&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Industrial Production Index&lt;/td&gt;
&lt;td&gt;INDPRO&lt;/td&gt;
&lt;td&gt;æ™¯æ°—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Breakeven Inflation Rate&lt;/td&gt;
&lt;td&gt;T10YIEM&lt;/td&gt;
&lt;td&gt;ç‰©ä¾¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Trade Weighted Dollar Index&lt;/td&gt;
&lt;td&gt;TWEXBMTH&lt;/td&gt;
&lt;td&gt;ç‚ºæ›¿&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Recession Probabilities&lt;/td&gt;
&lt;td&gt;RECPROUSM156N&lt;/td&gt;
&lt;td&gt;æ™¯æ°—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Moody&amp;rsquo;s Seasoned Baa Corporate Bond Yield&lt;/td&gt;
&lt;td&gt;BAA&lt;/td&gt;
&lt;td&gt;ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Inflation Expectation Rate&lt;/td&gt;
&lt;td&gt;T5YIFRM&lt;/td&gt;
&lt;td&gt;ç‰©ä¾¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Personal Consumption Expenditures&lt;/td&gt;
&lt;td&gt;PCE&lt;/td&gt;
&lt;td&gt;æ™¯æ°—&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Economic Policy Uncertainty Index&lt;/td&gt;
&lt;td&gt;USEPUINDXD&lt;/td&gt;
&lt;td&gt;æ”¿æ²»&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã‹ãªã‚Šé©å½“ãªå¤‰æ•°é¸æŠã§ã¯ã‚ã‚‹ã‚“ã§ã™ãŒã€ãƒã‚¯ãƒ­ãƒ¢ãƒ‡ãƒªãƒ³ã‚°çš„ã«é•·æœŸé‡‘åˆ©ã£ã¦ã©ã†ã‚„ã£ã¦ãƒ¢ãƒ‡ãƒ«åŒ–ã™ã‚‹ã‹ã¨ã„ã†ã¨ã¡ã‚ƒã‚“ã¨ã‚„ã£ã¦ãªã„å ´åˆãŒå¤šã„ã§ã™ã€‚DSGEã§ã¯åŠ¹ç‡å¸‚å ´ä»®èª¬ã«å¾“ã£ã¦10å¹´å…ˆã¾ã§ã®çŸ­æœŸé‡‘åˆ©ã®ãƒ‘ã‚¹ã‚’ãƒªãƒ³ã‚¯ã—ãŸã‚‚ã®ã¨é•·æœŸé‡‘åˆ©ãŒç­‰ã—ããªã‚‹ã¨å®šå¼åŒ–ã™ã‚‹ã®ãŒé™¢ç”Ÿæ™‚ä»£ã®ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã§ã—ãŸï¼ˆãƒã‚¯ãƒ­ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚¹ã®ç•Œéšˆã§ã¯ã¡ã‚ƒã‚“ã¨ã‚„ã£ã¦ãã†ï¼‰ã€‚ãã†ã„ã†ã‚ã‘ã§ã€çŸ­æœŸé‡‘åˆ©ã‚’èª¬æ˜å¤‰æ•°ã«åŠ ãˆã¦ã„ã¾ã™ã€‚ãã—ã¦ã€çŸ­æœŸé‡‘åˆ©ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã§ã‚ã‚ã†ç‰©ä¾¡ã«ã‹ã‹ã‚‹æŒ‡æ¨™ã‚‚3ã¤è¿½åŠ ã—ã¾ã—ãŸã€‚åŠ ãˆã¦ã€æ™¯æ°—ã¨ã®ç›¸é–¢ãŒå¼·ã„ã“ã¨ã¯ã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã®ã§æ™¯æ°—ã«é–¢ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚‚è¿½åŠ ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰ã¯ãã‚‚ãã‚‚ãƒã‚¯ãƒ­ãƒ¢ãƒ‡ãƒ«ã§ã¯çŸ­æœŸé‡‘åˆ©ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ†ã‚¤ãƒ©ãƒ¼ãƒ«ãƒ¼ãƒ«ã«å¾“ã†ã¨ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒä¸€èˆ¬çš„ã§ã‚ã‚‹ã“ã¨ãŒèƒŒæ™¯ã«ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
r_t = \rho r_{t-1} + \alpha \pi_{t} + \beta y_{t}
$$
ã“ã“ã§ã€$r_t$ã¯æ”¿ç­–é‡‘åˆ©ï¼ˆçŸ­æœŸé‡‘åˆ©ï¼‰ã€$\pi_t$ã¯ã‚¤ãƒ³ãƒ•ãƒ¬ç‡ã€$y_t$ã¯outputã§ã™ã€‚$\rho, \alpha, \beta$ã¯deep parameterã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ã€ãã‚Œãã‚Œæ…£æ€§ã€ã‚¤ãƒ³ãƒ•ãƒ¬ç‡ã¸ã®é‡‘åˆ©ã®æ„Ÿå¿œåº¦ã€outputã«å¯¾ã™ã‚‹æ„Ÿå¿œåº¦ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚$\rho=0,\beta=0$ã®æ™‚ã€$\alpha&amp;gt;=1$ã§ãªã‘ã‚Œã°åˆç†çš„æœŸå¾…å‡è¡¡è§£ãŒå¾—ã‚‰ã‚Œãªã„ã“ã¨ã¯ã€Œãƒ†ã‚¤ãƒ©ãƒ¼ã®åŸç†ã€ã¨ã—ã¦æœ‰åã§ã™ã€‚
ãã®ä»–ã€Corporate bondã¨ã®è£å®šé–¢ä¿‚ã‚‚å­˜åœ¨ã—ãã†ãª&lt;code&gt;Moody&#39;s Seasoned Baa Corporate Bond Yield&lt;/code&gt;ã‚‚èª¬æ˜å¤‰æ•°ã«è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€æ¬²ã‚’è¨€ãˆã°&lt;code&gt;VIX&lt;/code&gt;æŒ‡æ•°ã¨è²¡æ”¿ã«é–¢ã™ã‚‹æŒ‡æ¨™ã‚’è¿½åŠ ã—ãŸã„ã¨ã“ã‚ã§ã™ã€‚è²¡æ”¿ã«é–¢ã™ã‚‹æŒ‡æ•°ã¯Quateryã‹Annualyãªã®ã§ä»Šå›ã®ã‚ˆã†ãªmonthlyã®æ¨è¨ˆã«ã¯ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ã“ã®éƒ¨åˆ†ã¯æœ€ã‚‚ãƒãƒƒã‚¯ãªã¨ã“ã‚ã§ã™ã€‚ãªã«ã‹è€ƒãˆä»˜ã„ãŸã‚‰å†æ¨è¨ˆã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã§ã¯ã€æ¨è¨ˆã«å…¥ã‚Šã¾ã™ã€‚ä»Šå›ã¯èª¬æ˜å¤‰æ•°ãŒå¤šã„ã®ã§&lt;code&gt;lasso&lt;/code&gt;å›å¸°ã‚’è¡Œã„ã€æœ‰åŠ¹ãªå¤‰æ•°ã‚’çµã‚Šè¾¼ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã¾ãŸã€æ¯”è¼ƒã®ãŸã‚ã«&lt;code&gt;OLS&lt;/code&gt;ã‚‚ã‚„ã‚Šã¾ã™ã€‚èª¬æ˜å¤‰æ•°ã¯è¢«èª¬æ˜å¤‰æ•°ã®1æœŸå‰ã®å€¤ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãŠãã‚‰ãã€1æœŸå‰ã§ã‚‚ãƒ‡ãƒ¼ã‚¿ã®å…¬è¡¨æ™‚æœŸã«ã‚ˆã£ã¦ã¯ç¿Œæœˆã®æ¨è¨ˆã«é–“ã«åˆã‚ãªã„å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã¨ã‚Šã‚ãˆãšã“ã‚Œã§ã‚„ã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# make dataset&lt;/span&gt;
traindata &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;na.omit&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(macro_indicator[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2003-01-01::2015-12-31&amp;#34;&lt;/span&gt;][,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],stats&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lag&lt;/span&gt;(macro_indicator[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2003-01-01::2015-12-31&amp;#34;&lt;/span&gt;][,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;],&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)))
testdata  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;na.omit&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(macro_indicator[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2016-01-01::&amp;#34;&lt;/span&gt;][,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],stats&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lag&lt;/span&gt;(macro_indicator[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2016-01-01::&amp;#34;&lt;/span&gt;][,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;],&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)))

&lt;span style=&#34;color:#75715e&#34;&gt;# fitting OLS&lt;/span&gt;
trial1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lm&lt;/span&gt;(GS10&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;.,data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; traindata)
&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(trial1)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## Call:
## lm(formula = GS10 ~ ., data = traindata)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.7593 -0.2182  0.0041  0.2143  0.7051 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&amp;gt;|t|)    
## (Intercept)   15.0576773  4.3419245   3.468 0.000693 ***
## FEDFUNDS      -0.2075752  0.1413832  -1.468 0.144253    
## CPIAUCSL      -0.0750111  0.0204871  -3.661 0.000352 ***
## UNRATE        -0.2183796  0.0784608  -2.783 0.006109 ** 
## TB3MS          0.3031085  0.1393904   2.175 0.031310 *  
## INDPRO        -0.0705997  0.0263855  -2.676 0.008328 ** 
## T10YIEM        1.1476564  0.1758964   6.525 1.10e-09 ***
## TWEXBMTH      -0.0313911  0.0117338  -2.675 0.008338 ** 
## RECPROUSM156N -0.0103854  0.0021233  -4.891 2.66e-06 ***
## BAA            0.7802368  0.0858538   9.088 7.60e-16 ***
## T5YIFRM       -0.4529529  0.1881510  -2.407 0.017342 *  
## PCE            0.0009815  0.0002477   3.963 0.000116 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.2953 on 143 degrees of freedom
## Multiple R-squared:  0.9218,	Adjusted R-squared:  0.9158 
## F-statistic: 153.2 on 11 and 143 DF,  p-value: &amp;lt; 2.2e-16
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è‡ªç”±åº¦ä¿®æ­£æ¸ˆã¿æ±ºå®šä¿‚æ•°é«˜ã‚ã§ã™ã­ã€‚2015/12/31ã¾ã§ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ã¦ã€ã‚¢ã‚¦ãƒˆã‚µãƒ³ãƒ—ãƒ«ã®ãƒ‡ãƒ¼ã‚¿(2016/01/01~)ã‚’äºˆæ¸¬ã—ã€å¹³å‡äºŒä¹—èª¤å·®ã‚’è¨ˆç®—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;est.OLS.Y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;predict&lt;/span&gt;(trial1,testdata[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;])
Y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(testdata[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
mse.OLS &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;((Y &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; est.OLS.Y)^2) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(Y)
mse.OLS
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 0.2422673
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¬¡ã«&lt;code&gt;lasso&lt;/code&gt;å›å¸°ã§ã™ã€‚Cross Validationã‚’è¡Œã„ã€$\lambda$ã‚’æ±ºã‚ã‚‹&lt;code&gt;glmnet&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®&lt;code&gt;cv.glmnet&lt;/code&gt;é–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# fitting lasso regression&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(glmnet)
trial2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cv.glmnet&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(traindata[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]),&lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(traindata[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]),family&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;gaussian&amp;#34;&lt;/span&gt;,alpha&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;plot&lt;/span&gt;(trial2)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post14/index_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;trial2&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;lambda.min
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 0.000436523
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;coef&lt;/span&gt;(trial2,s&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;trial2&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;lambda.min)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 12 x 1 sparse Matrix of class &amp;quot;dgCMatrix&amp;quot;
##                          s1
## (Intercept)   12.6534378623
## FEDFUNDS      -0.1102828579
## CPIAUCSL      -0.0620847662
## UNRATE        -0.1986570797
## TB3MS          0.2163014268
## INDPRO        -0.0660285269
## T10YIEM        1.1674773831
## TWEXBMTH      -0.0241845518
## RECPROUSM156N -0.0099694305
## BAA            0.7626872357
## T5YIFRM       -0.4561364454
## PCE            0.0008164901
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;Unemployment Rate&lt;/code&gt;ã€&lt;code&gt;3-Month Treasury Bill&lt;/code&gt;ã€&lt;code&gt;Breakeven Inflation Rateã€Moody&#39;s Seasoned Baa Corporate Bond Yield&lt;/code&gt;ã€&lt;code&gt;Inflation Expectation Rate&lt;/code&gt;ã®å›å¸°ä¿‚æ•°ãŒå¤§ãããªã‚‹ã¨ã„ã†çµæœã§ã™ã­ã€‚å¤±æ¥­ç‡ä»¥å¤–ã¯æƒ³å®šå†…ã®çµæœã§ã™ã€‚ãŸã ã€ä»Šå›ã®çµæœã‚’è¦‹ã‚‹é™ã‚Šæ™¯æ°—ã¨ã®ç›¸é–¢ã¯ä½ãã†ã§ã™ï¼ˆé€†å‘ãã«ã—ã‹åŠ¹ã‹ãªã„ï¼Ÿï¼‰ã€‚MSEã‚’è¨ˆç®—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;est.lasso.Y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;predict&lt;/span&gt;(trial2, newx &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(testdata[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]), s &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; trial2&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;lambda.min, type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;response&amp;#39;&lt;/span&gt;)
mse.lasso &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;((Y &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; est.lasso.Y)^2) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(Y)
mse.lasso
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 0.2171154
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;lasso&lt;/code&gt;å›å¸°ã®ã»ã†ãŒè‰¯ã„çµæœã«ãªã‚Šã¾ã—ãŸã€‚&lt;code&gt;lasso&lt;/code&gt;å›å¸°ã§è¨ˆç®—ã—ãŸäºˆæ¸¬å€¤ã¨å®Ÿç¸¾å€¤ã‚’æ™‚ç³»åˆ—ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(tidyverse)

&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gather&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(actual&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Y[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],lasso_prediction&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;est.lasso.Y[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],OLS_prediction&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;est.OLS.Y,date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(Y))),key&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;data,value&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;rate,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;date),&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;date,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;rate, colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;data)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;(size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1.5&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;scale_x_datetime&lt;/span&gt;(breaks &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6 month&amp;#34;&lt;/span&gt;,date_labels &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%Y-%m&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;scale_y_continuous&lt;/span&gt;(breaks&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3.5&lt;/span&gt;),limits &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1.25&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3.5&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post14/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ–¹å‘æ„Ÿã¯ã„ã„æ„Ÿã˜ã§ã™ã€‚ä¸€æ–¹ã§ã€2016å¹´1æœˆã‹ã‚‰ã‚„2018å¹´12æœˆä»¥é™ã®æ€¥æ¿€ãªé‡‘åˆ©ä½ä¸‹ã¯äºˆæ¸¬ã§ãã¦ã„ã¾ã›ã‚“ã€‚ã“ã®éƒ¨åˆ†ã«ã¤ã„ã¦ã¯ä½•ã‹å¤‰æ•°ã‚’è€ƒãˆã‚‹orãƒ­ãƒ¼ãƒªãƒ³ã‚°æ¨è¨ˆã‚’å®Ÿæ–½ã™ã‚‹ã€ã®ã„ãšã‚Œã‹ã‚’ã‚„ã£ã¦ã¿ãªã„ã¨ç²¾åº¦ãŒä¸ŠãŒã‚‰ãªãã†ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-æ—¥æ¬¡è§£æãƒ‘ãƒ¼ãƒˆ&#34;&gt;3. æ—¥æ¬¡è§£æãƒ‘ãƒ¼ãƒˆ&lt;/h2&gt;
&lt;p&gt;æœˆæ¬¡ã§ã®è§£æã«åŠ ãˆã¦æ—¥æ¬¡ã§ã®è§£æã‚‚ã‚„ã‚ŠãŸã„ã¨ãŠã‚‚ã„ã¾ã™ã€‚æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚Œã°ãƒ‡ãƒ¼ã‚¿ã®å…¬è¡¨ã¯å¸‚å ´ãŒé–‰ã¾ã‚Šæ¬¡ç¬¬ã®å ´åˆãŒå¤šã„ã®ã§ã€ã„ã‚ã‚†ã‚‹&lt;code&gt;jagged edge&lt;/code&gt;ã®å•é¡ŒãŒèµ·ã“ã‚Šã«ãã„ã¨æ€ã„ã¾ã™ã€‚ã¾ãšã¯æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿ã®åé›†ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# data name collected&lt;/span&gt;
symbols.name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;10-Year Treasury Constant Maturity Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Effective Federal Funds Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NASDAQ Composite Index&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3-Month Treasury Bill: Secondary Market Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Economic Policy Uncertainty Index for United States&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;10-Year Breakeven Inflation Rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Trade Weighted U.S. Dollar Index: Broad, Goods&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Moody&amp;#39;s Seasoned Baa Corporate Bond Yield&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;5-Year, 5-Year Forward Inflation Expectation Rate&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# Collect economic data&lt;/span&gt;
symbols &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DGS10&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DFF&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NASDAQCOM&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DTB3&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;USEPUINDXD&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;T10YIE&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DTWEXB&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DBAA&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;T5YIFR&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;getSymbols&lt;/span&gt;(symbols, from &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1980-01-01&amp;#39;&lt;/span&gt;, src &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FRED&amp;#34;&lt;/span&gt;, auto.assign &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;DGS10&amp;quot;      &amp;quot;DFF&amp;quot;        &amp;quot;NASDAQCOM&amp;quot;  &amp;quot;DTB3&amp;quot;       &amp;quot;USEPUINDXD&amp;quot;
## [6] &amp;quot;T10YIE&amp;quot;     &amp;quot;DTWEXB&amp;quot;     &amp;quot;DBAA&amp;quot;       &amp;quot;T5YIFR&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;NASDAQCOM.r &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ROC&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;na.omit&lt;/span&gt;(NASDAQCOM))
macro_indicator.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(DGS10,DFF,NASDAQCOM.r,DTB3,USEPUINDXD,T10YIE,DTWEXB,DBAA,T5YIFR)
&lt;span style=&#34;color:#a6e22e&#34;&gt;rm&lt;/span&gt;(DGS10,DFF,NASDAQCOM,NASDAQCOM.r,DTB3,USEPUINDXD,T10YIE,DTWEXB,DBAA,T5YIFR)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚å­¦ç¿’ç”¨ã¨è¨“ç·´ç”¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†ã‘ã¾ã™ã€‚å®Ÿéš›ã®äºˆæ¸¬ãƒ—ãƒ­ã‚»ã‚¹ã‚’è€ƒãˆã€2å–¶æ¥­æ—¥å‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª¬æ˜å¤‰æ•°ã«ç”¨ã„ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# make dataset&lt;/span&gt;
traindata.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;na.omit&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(macro_indicator.d[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1980-01-01::2010-12-31&amp;#34;&lt;/span&gt;][,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],stats&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lag&lt;/span&gt;(macro_indicator.d[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1980-01-01::2010-12-31&amp;#34;&lt;/span&gt;][,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;],&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)))
testdata.d  &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;na.omit&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(macro_indicator.d[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2010-01-01::&amp;#34;&lt;/span&gt;][,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],stats&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lag&lt;/span&gt;(macro_indicator.d[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2010-01-01::&amp;#34;&lt;/span&gt;][,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;],&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)))

&lt;span style=&#34;color:#75715e&#34;&gt;# fitting OLS&lt;/span&gt;
trial1.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lm&lt;/span&gt;(DGS10&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;.,data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; traindata.d)
&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(trial1.d)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## Call:
## lm(formula = DGS10 ~ ., data = traindata.d)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.81961 -0.12380  0.00509  0.14514  0.72712 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&amp;gt;|t|)    
## (Intercept) -3.5168438  0.1664198 -21.132  &amp;lt; 2e-16 ***
## DFF          0.0770736  0.0217208   3.548 0.000403 ***
## NASDAQCOM   -0.4301865  0.4280568  -1.005 0.315121    
## DTB3         0.1137128  0.0238678   4.764 2.14e-06 ***
## USEPUINDXD  -0.0006591  0.0001073  -6.144 1.11e-09 ***
## T10YIE       0.6957403  0.0351666  19.784  &amp;lt; 2e-16 ***
## DTWEXB       0.0276208  0.0010896  25.350  &amp;lt; 2e-16 ***
## DBAA         0.2879946  0.0131335  21.928  &amp;lt; 2e-16 ***
## T5YIFR       0.3433321  0.0376058   9.130  &amp;lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.2167 on 1148 degrees of freedom
## Multiple R-squared:  0.8902,	Adjusted R-squared:  0.8894 
## F-statistic:  1163 on 8 and 1148 DF,  p-value: &amp;lt; 2.2e-16
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¾ç„¶æ±ºå®šä¿‚æ•°ã¯é«˜ã‚ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;est.OLS.Y.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;predict&lt;/span&gt;(trial1.d,testdata.d[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;])
Y.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(testdata.d[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
mse.OLS.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;((Y.d &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; est.OLS.Y.d)^2) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(Y.d)
mse.OLS.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 0.8350614
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¬¡ã«&lt;code&gt;lasso&lt;/code&gt;å›å¸°ã§ã™ã€‚&lt;code&gt;CV&lt;/code&gt;ã§$\lambda$ã‚’æ±ºå®šã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# fitting lasso regression&lt;/span&gt;
trial2.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cv.glmnet&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(traindata.d[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]),&lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(traindata.d[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]),family&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;gaussian&amp;#34;&lt;/span&gt;,alpha&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;plot&lt;/span&gt;(trial2.d)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post14/index_files/figure-html/unnamed-chunk-10-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;trial2.d&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;lambda.min
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 0.001339007
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;coef&lt;/span&gt;(trial2.d,s&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;trial2.d&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;lambda.min)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 9 x 1 sparse Matrix of class &amp;quot;dgCMatrix&amp;quot;
##                        s1
## (Intercept) -3.4297225594
## DFF          0.0707532975
## NASDAQCOM   -0.3512778327
## DTB3         0.1204390843
## USEPUINDXD  -0.0006453775
## T10YIE       0.6894098221
## DTWEXB       0.0272773903
## DBAA         0.2831306290
## T5YIFR       0.3411269206
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;libor&lt;/code&gt;ã®ä¿‚æ•°å€¤ãŒ0ã«ãªã‚Šã¾ã—ãŸã€‚MSEã¯&lt;code&gt;OLS&lt;/code&gt;ã®æ–¹ãŒé«˜ã„çµæœã«ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;est.lasso.Y.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;predict&lt;/span&gt;(trial2.d, newx &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(testdata.d[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]), s &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; trial2.d&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;lambda.min, type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;response&amp;#39;&lt;/span&gt;)
mse.lasso.d &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;((Y.d &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; est.lasso.Y.d)^2) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(Y.d)
mse.lasso.d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 0.8492769
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;äºˆæ¸¬å€¤ã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gather&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(actual&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Y.d[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],lasso_prediction&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;est.lasso.Y.d[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],OLS_prediction&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;est.OLS.Y.d,date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(Y.d))),key&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;data,value&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;rate,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;date),&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;date,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;rate, colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;data)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;(size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1.5&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;scale_x_datetime&lt;/span&gt;(breaks &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2 year&amp;#34;&lt;/span&gt;,date_labels &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%Y-%m&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;scale_y_continuous&lt;/span&gt;(breaks&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3.5&lt;/span&gt;),limits &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1.25&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post14/index_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æœˆæ¬¡ã¨åŒã˜ãã€&lt;code&gt;OLS&lt;/code&gt;ã¨&lt;code&gt;lasso&lt;/code&gt;ã§äºˆæ¸¬å€¤ã«å·®ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã€‚ãªã‹ãªã‹ã„ã„æ„Ÿã˜ã«å¤‰å‹•ã‚’æ‰ãˆã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã™ãŒã€2011å¹´ã®&lt;code&gt;United States federal government credit-rating downgrades&lt;/code&gt;ã«ã‚ˆã‚‹é‡‘åˆ©ä½ä¸‹ã‚„2013å¹´ã®æ™¯æ°—å›å¾©ã«ä¼´ã†é‡‘åˆ©ä¸Šæ˜‡ã¯æ‰ãˆã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã›ã‚“ã€‚æ—¥æ¬¡ã®æ™¯æ°—æŒ‡æ¨™ã¯POSãƒ‡ãƒ¼ã‚¿ãã‚‰ã„ã—ã‹ãªã„ã‚“ã§ã™ãŒã€å¼·ã„ã¦è¨€ã†ãªã‚‰æœ€è¿‘ä½¿ç”¨ã—ãŸå¤œé–“å…‰ã®è¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ãªã‚“ã‹ã¯ä½¿ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚æ™‚é–“ãŒã‚ã‚Œã°ã‚„ã£ã¦ã¿ã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšã€ã„ã£ãŸã‚“ã“ã‚Œã§ã“ã®è¨˜äº‹ã¯çµ‚ã‚ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚ã“ã“ã¾ã§èª­ã¿é€²ã‚ã¦ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Google Earth Engine APIã§è¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æ™¯æ³æ„Ÿã‚’ãƒŠã‚¦ã‚­ãƒ£ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã¿ã‚‹</title>
      <link>/post/post12/</link>
      <pubDate>Tue, 16 Jul 2019 00:00:00 +0000</pubDate>
      <guid>/post/post12/</guid>
      <description>&lt;p&gt;çš†ã•ã‚“ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã‚ã€‚å‰å›ã€GPLVMãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸGDPäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚ãŸã ã€ãƒŠã‚¦ã‚­ãƒ£ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã¨ã„ã†ã‹ã‚‰ã«ã¯ã‚ªãƒ«ã‚¿ãƒŠãƒ†ã‚£ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ãŸè§£æã‚’è¡Œã„ãŸã„ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ã€‚ãµã¨ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://jp.reuters.com/article/gdp-u-tokyo-idJPKBN15M0NH&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç„¦ç‚¹ï¼šãƒŠã‚¦ã‚­ãƒ£ã‚¹ãƒˆã®ï¼§ï¼¤ï¼°æ¨è¨ˆã€ä¸–ç•Œåˆã®è¡›æ˜Ÿç”»åƒåˆ©ç”¨ã€€åˆ©ç”¨æ‹¡å¤§ã‚‚&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã“ã¡ã‚‰ã¯æ±äº¬å¤§å­¦ã®æ¸¡è¾ºåŠªå…ˆç”ŸãŒäººå·¥è¡›æ˜Ÿç”»åƒã‚’ç”¨ã„ã¦GDPäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’é–‹ç™ºã—ãŸã¨ã„ã†ã‚‚ã®ã§ã™ã€‚è¨˜äº‹ã«ã¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç±³å›½ã®æµ·æ´‹å¤§æ°—åºãŒé‹å–¶ã™ã‚‹æ°—è±¡è¡›æ˜Ÿã€Œã‚¹ã‚ªãƒŸï¼®ï¼°ï¼°ã€ãŒæ—¥æœ¬ä¸Šç©ºã‚’é€šéã™ã‚‹æ¯æ—¥åˆå‰ï¼‘æ™‚ï¼“ï¼åˆ†æ™‚ç‚¹ã®ç”»åƒã‚’è³¼å…¥ã—ã€ç¸¦ã€æ¨ªï¼—ï¼’ï¼ãƒ¡ãƒ¼ãƒˆãƒ«å››æ–¹ã®ãƒã‚¹ç›®ã”ã¨ã®æ˜ã‚‹ã•ã‚’è¨ˆæ¸¬ã™ã‚‹ã€‚åŒã˜æ˜ã‚‹ã•ã§ã‚‚ã€è¾²åœ°ã€å•†æ¥­ç”¨åœ°ã€å·¥æ¥­ç”¨åœ°ãªã©åœŸåœ°ã®ç”¨é€”ã«ã‚ˆã£ã¦çµŒæ¸ˆæ´»å‹•ã®å¤§ãã•ãŒç•°ãªã‚‹ãŸã‚ã€å›½åœŸåœ°ç†é™¢ã®åœŸåœ°åˆ©ç”¨èª¿æŸ»ã‚’å‚ç…§ã€‚åœŸåœ°ã®ç”¨é€”ã¨ã€æ˜ã‚‹ã•ãŒç¤ºã™çµŒæ¸ˆæ´»å‹•ã®ç›¸é–¢ã‚’å¼¾ãå‡ºã—ã€ã“ã®çµæœã‚’è€ƒæ…®ã—ãŸä¸Šã§ã€æ˜ã‚‹ã•ã‹ã‚‰çµŒæ¸ˆæ´»å‹•ã®å¤§ãã•ã‚’è©¦ç®—ã™ã‚‹ã€‚
ï¼ˆä¸­ç•¥ï¼‰è¡›æ˜Ÿç”»åƒã®ã‚ˆã†ã«èª°ã‚‚ãŒå…¥æ‰‹å¯èƒ½ãªå…¬è¡¨ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚Œã°ã€æ”¿åºœã€æ°‘é–“ã®åŒºåˆ¥ãªãåˆ†æãŒå¯èƒ½ã§ã‚ã‚‹ãŸã‚ã€æ¸¡è¾ºæ°ã¯ã“ã‚Œã‚’ã€Œçµ±è¨ˆã®æ°‘ä¸»åŒ–ã€ã¨å‘¼ã³ã€ä¸–ç•Œçš„ãªæ½®æµã«ãªã‚‹ã¨äºˆæƒ³ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã¨æ›¸ã‹ã‚Œã¦ãŠã‚Šã€è¡›æ˜Ÿå†™çœŸã‚’ç”¨ã„ãŸåˆ†æã«èˆˆå‘³ã‚’æƒ¹ã‹ã‚Œã¾ã—ãŸã€‚ è¡›æ˜Ÿå†™çœŸã£ã¦èª°ã§ã‚‚åˆ©ç”¨å¯èƒ½ã‹ï¼Ÿã¨ã„ã†ã¨ã“ã‚ã§ã™ãŒã€GoogleãŒ&lt;code&gt;Earth Engine&lt;/code&gt;ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine3.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://earthengine.google.com/&#34;&gt;https://earthengine.google.com/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ï¼ˆæ‹™è¨³ï¼‰Google Earth Engineã¯ã€æ•°ãƒšã‚¿ãƒã‚¤ãƒˆã®è¡›æ˜Ÿç”»åƒç¾¤ã¨åœ°ç†ç©ºé–“ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æƒ‘æ˜Ÿè¦æ¨¡ã®è§£ææ©Ÿèƒ½ã¨çµ„ã¿åˆã‚ã›ã€ç§‘å­¦è€…ã€ç ”ç©¶è€…ã€é–‹ç™ºè€…ãŒå¤‰åŒ–ã‚’æ¤œå‡ºã—ã€å‚¾å‘ã‚’å°„å½±ã—ã€åœ°çƒã®å¤‰å®¹ã‚’å®šé‡åŒ–ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç ”ç©¶ãƒ»æ•™è‚²ãƒ»éå–¶åˆ©ç›®çš„ãªã‚‰ã°ã€ãªã‚“ã¨&lt;strong&gt;ç„¡æ–™&lt;/strong&gt;ã§è¡›æ˜Ÿå†™çœŸãƒ‡ãƒ¼ã‚¿ã‚’è§£æã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å…·ä½“çš„ã«ä½•ãŒã§ãã‚‹ã®ã‹ã¯ä»¥ä¸‹ã®å‹•ç”»ã‚’è¦‹ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;iframe src=&#34;//www.youtube.com/embed/gKGOeTFHnKY&#34; width=&#34;100%&#34; height=&#34;500&#34; seamless frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;ä»Šå›ã¯ãã‚“ãªEath Engineã®python APIã‚’ç”¨ã„ã¦è¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€è§£æã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-earth-engineã‚’ä½¿ã†ãŸã‚ã®äº‹å‰æº–å‚™&#34;&gt;1. Earth Engineã‚’ä½¿ã†ãŸã‚ã®äº‹å‰æº–å‚™&lt;/h2&gt;
&lt;p&gt;Earth Engineã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã€Google Accountã‚’ä½¿ã£ã¦ç”³è«‹ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å…ˆã»ã©ã®ç”»åƒã®å³ä¸Šã®ã€ŒSign Upã€ã‹ã‚‰ã§ãã¾ã™ã€‚ç”³è«‹ã‚’è¡Œã£ã¦ã€Gmailã«ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒ¼ãƒ«ãŒæ¥ã‚‹ã¨ã¨ã‚Šã‚ãˆãšEarth Engineã¯ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine4.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã¨ã‚Šã‚ãˆãšã¨ã„ã†ã®ã¯WEBä¸Šã®&lt;code&gt;Earth Engine&lt;/code&gt; ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã¯ä½¿ç”¨ã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã¨ã„ã†ã®ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã‚Šã€è§£æã‚’ã—ãŸã‚Šã€è§£æçµæœã‚’MAPã«æŠ•å½±ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚&lt;code&gt;Earth Engine&lt;/code&gt;ã®æœ¬ä½“ã¯ã‚€ã—ã‚ã“ã„ã¤ã§ã€APIã¯å‰¯æ¬¡çš„ãªã‚‚ã®ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine5.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;çœŸã‚“ä¸­ã®ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã«ã‚³ãƒ¼ãƒ‰ã‚’æ‰“ã£ã¦ã„ãã¾ã™ãŒã€è¨€èªã¯javascriptã§ã™(APIã¯&lt;code&gt;python&lt;/code&gt;ã¨&lt;code&gt;javascript&lt;/code&gt;ä¸¡æ–¹ã‚ã‚‹ã‚“ã§ã™ã‘ã©ã­)ã€‚è§£æçµæœã‚’MAPã«æŠ•å½±ã—ãŸã‚Šã€referenceï¼ˆå·¦ï¼‰ã‚’å‚ç…§ã—ãŸã‚Šã€Consoleã«åãå‡ºã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã‹ãªã‚Šä¾¿åˆ©ã§ã™ã€‚ãŒã€ãƒ‡ãƒ¼ã‚¿ã‚’è½ã¨ã—ãŸå¾Œã§é«˜åº¦ãªè§£æã‚’è¡Œã„ãŸã„å ´åˆã¯pythonã‚’ä½¿ã£ãŸã»ã†ãŒæ…£ã‚Œã¦ã„ã‚‹ã®ã§ä»Šå›ã¯APIã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
è©±ãŒè„±ç·šã—ã¾ã—ãŸã€‚ã•ã¦ã€&lt;code&gt;Earth Engine&lt;/code&gt;ã®æ‰¿èªã‚’å¾—ãŸã‚‰ã€&lt;code&gt;pip&lt;/code&gt;ã§&lt;code&gt;earthengine-api&lt;/code&gt;ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ã€‚ãã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¸Šã§ã€&lt;code&gt;earthengine authenticate&lt;/code&gt;ã¨æ‰“ã¡ã¾ã™ã€‚ãã†ã™ã‚‹ã¨ã€å‹æ‰‹ã«ãƒ–ãƒ©ã‚¦ã‚¶ãŒç«‹ã¡ä¸ŠãŒã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«&lt;code&gt;python api&lt;/code&gt;ã®authenticationã‚’è¡Œã†ç”»é¢ãŒã§ã¾ã™ã®ã§ã€Œæ¬¡ã¸ã€ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine1.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ã«ã„ãã¾ã™ã®ã§ã€ãã®ã¾ã¾æ‰¿èªã—ã¾ã™ã€‚ã“ã‚Œã§authenticationã®å®Œæˆã§ã™ã€‚&lt;code&gt;python&lt;/code&gt;ã‹ã‚‰APIãŒä½¿ãˆã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine2.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;2-python-apiã‚’ç”¨ã„ãŸè¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã®å–å¾—&#34;&gt;2. Python APIã‚’ç”¨ã„ãŸè¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã®å–å¾—&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Python&lt;/code&gt; APIã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™ãŒã§ãã¾ã—ãŸã€‚ã“ã“ã‹ã‚‰ã¯è¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚ä»¥ä¸‹ã«ã‚ã‚‹ã‚ˆã†ã«&lt;code&gt;Earth Engine&lt;/code&gt;ã«ã¯ãŸãã•ã‚“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒå­˜åœ¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://developers.google.com/earth-engine/datasets/&#34;&gt;https://developers.google.com/earth-engine/datasets/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»Šå›ã¯&lt;code&gt;VIIRS Stray Light Corrected Nighttime Day/Night Band Composites Version 1&lt;/code&gt;ã¨ã„ã†ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ä¸–ç•Œä¸­ã®å¤œé–“å…‰ã®å…‰é‡ã‚’æœˆæ¬¡å˜ä½ã§å¹³å‡ã—ã€æä¾›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ã¯2014-01~ç¾åœ¨ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Earth Engine&lt;/code&gt;ã«ã¯ã„ãã¤ã‹ã®å›ºæœ‰ãªãƒ‡ãƒ¼ã‚¿å‹ãŒå­˜åœ¨ã—ã¾ã™ã€‚è¦šãˆã¦ãŠãã¹ãã‚‚ã®ã¯ä»¥ä¸‹ã®3ã¤ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;image&#34;&gt;Imageâ€¦&lt;/h3&gt;
&lt;p&gt;ã‚ã‚‹ï¼‘æ™‚ç‚¹ã«ãŠã‘ã‚‹&lt;code&gt;raste&lt;/code&gt;rãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚&lt;code&gt;image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã„ãã¤ã‹ã®&lt;code&gt;band&lt;/code&gt;ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®&lt;code&gt;band&lt;/code&gt;ã¯ãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ãŒã€ãŠãŠã‚ˆãã®ãƒ‡ãƒ¼ã‚¿ã¯&lt;code&gt;band&lt;/code&gt;ãã‚Œãã‚ŒãŒRGBå€¤ã‚’è¡¨ã—ã¦ã„ãŸã‚Šã—ã¾ã™ã€‚&lt;code&gt;Earth Engine&lt;/code&gt;ã‚’ä½¿ç”¨ã™ã‚‹ä¸Šã§æœ€ã‚‚åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;imagecollection&#34;&gt;ImageCollectionâ€¦&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ™‚ç³»åˆ—ã«ä¸¦ã¹ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ä»Šå›ã¯æ™‚ç³»åˆ—è§£æã‚’ã™ã‚‹ã®ã§ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;featurecollection&#34;&gt;FeatureCollectionâ€¦&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;GeoJSON Feature&lt;/code&gt;ã§ã™ã€‚åœ°ç†æƒ…å ±ã‚’è¡¨ã™&lt;code&gt;Geometry&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ãã®ãƒ‡ãƒ¼ã‚¿ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆå›½åç­‰ï¼‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»Šå›ã¯æ—¥æœ¬ã®ä½ç½®æƒ…å ±ã‚’å–å¾—ã™ã‚‹éš›ã«ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã§ã¯ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã€æ—¥æœ¬ã®åœ°ç†æƒ…å ±ã®&lt;code&gt;FeatureCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚åœ°ç†æƒ…å ±ã¯&lt;code&gt;Fusion Tables&lt;/code&gt;ã«æ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã®ã§ã€IDã§å¼•ã£å¼µã‚ŠCountryãŒJapanã®ã‚‚ã®ã‚’æŠ½å‡ºã—ã¾ã™ã€‚&lt;code&gt;ee.FeatureCollection()&lt;/code&gt;ã®å¼•æ•°ã«IDã‚’å…¥åŠ›ã™ã‚Œã°ç°¡å˜ã«å–å¾—ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; ee
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; dateutil.parser &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; parse

ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Initialize()

&lt;span style=&#34;color:#75715e&#34;&gt;# get Japan geometory as FeatureCollection from fusion table&lt;/span&gt;
japan &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;FeatureCollection(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ft:1tdSwUL7MVpOauSgRzqVTOwdfy17KDbw-1d9omPw&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;filter(ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Filter&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;eq(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Country&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Japan&amp;#39;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«å¤œé–“å…‰ã®è¡›æ˜Ÿç”»åƒã‚’å–å¾—ã—ã¦ã¿ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚&lt;code&gt;ee.ImageCollection()&lt;/code&gt;ã«ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®IDã‚’æ¸¡ã™ã¨å–å¾—ã§ãã¾ã™ã€‚ãªãŠã€ã“ã“ã§ã¯&lt;code&gt;band&lt;/code&gt;ã‚’æœˆæ¬¡ã®å¹³å‡å…‰é‡ã§ã‚ã‚‹&lt;code&gt;avg_rad&lt;/code&gt;ã«æŠ½å‡ºã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# get night-light data from earth engine from 2014-01-01 to 2019-01-01&lt;/span&gt;
dataset &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;ImageCollection(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NOAA/VIIRS/DNB/MONTHLY_V1/VCMSLCFG&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;filter(ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Filter&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;date(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2014-01-01&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2019-01-01&amp;#39;&lt;/span&gt;))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;select(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;avg_rad&amp;#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å–å¾—ã—ãŸè¡›æ˜Ÿç”»åƒã‚’æ—¥æœ¬å‘¨è¾ºã«åˆ‡ã‚Šå‡ºã—ã€ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ›ã¯&lt;code&gt;image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å¯èƒ½ã§ã™ï¼ˆãã†ã§ãªã„ã¨ç”»åƒãŒãŸãã•ã‚“å‡ºã¦ãã¦ã—ã¾ã„ã¾ã™ã‹ã‚‰ã­ã€‚ã€‚ã€‚ï¼‰ã€‚ä»Šå–å¾—ã—ãŸã®ã¯&lt;code&gt;ImageCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã‹ã‚‰&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸åœ§ç¸®ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆä¸ŠãŒ&lt;code&gt;ImageCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ä¸‹ãŒåœ§ç¸®ã•ã‚ŒãŸ&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://developers.google.com/earth-engine/images/Reduce_ImageCollection.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã¯ã€&lt;code&gt;ImageCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã«ã‚ã‚‹ã®&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¹³å‡å€¤ã‚’ã¨ã£ã¦ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ã®å¹³å‡çš„ãªç”»åƒã‚’å‡ºåŠ›ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;code&gt;ImageCollection.mean()&lt;/code&gt;ã§ã§ãã¾ã™ã€‚ã¾ãŸã€&lt;code&gt;.visualize({min:0.5})&lt;/code&gt;ã§ãƒ”ã‚¯ã‚»ãƒ«å€¤ãŒ0.5ä»¥ä¸Šã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ã‹ã‘ã¦ã„ã¾ã™ã€‚ã“ã†ã—ãªã„ã¨é›²ã¨æ€ã‚ã‚Œã‚‹ã‚‚ã®ã‚„ã‚´ãƒŸï¼Ÿã¿ãŸã„ãªã‚‚ã®ãŒã¤ã„ã¦ã—ã¾ã„ã¾ã™ã€‚æ¬¡ã«ã€ã“ã“ã¾ã§åŠ å·¥ã—ãŸç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹urlã‚’&lt;code&gt;.getDownloadURL&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§å–å¾—ã—ã¦ã„ã¾ã™ã€‚ãã®éš›ã€&lt;code&gt;region&lt;/code&gt;ã§åˆ‡ã‚Šå‡ºã™ç¯„å›²ã‚’ãƒãƒªã‚´ãƒ³å€¤ã§æŒ‡å®šã—ã€&lt;code&gt;scale&lt;/code&gt;ã§ãƒ‡ãƒ¼ã‚¿ã®è§£åƒåº¦ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ï¼ˆ&lt;code&gt;scale&lt;/code&gt;ãŒå°ã•ã™ãã‚‹ã¨å‡¦ç†ãŒé‡ã™ãã‚‹ã‚‰ã—ãã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦å‡¦ç†ã§ãã¾ã›ã‚“ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;dataset&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;mean()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;visualize(min&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getDownloadURL(dict(name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;thumbnail&amp;#39;&lt;/span&gt;,region&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[[[&lt;span style=&#34;color:#ae81ff&#34;&gt;120.3345348936478&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;46.853488838010854&lt;/span&gt;],[&lt;span style=&#34;color:#ae81ff&#34;&gt;119.8071911436478&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;24.598157870729043&lt;/span&gt;],[&lt;span style=&#34;color:#ae81ff&#34;&gt;148.6353161436478&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;24.75788466523463&lt;/span&gt;],[&lt;span style=&#34;color:#ae81ff&#34;&gt;149.3384411436478&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;46.61252884462868&lt;/span&gt;]]],scale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5000&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å–å¾—ã—ãŸç”»åƒãŒä»¥ä¸‹ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine6.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã‚„ã¯ã‚Šã€æ±äº¬ã‚’ä¸­å¿ƒã¨ã—ãŸé–¢æ±åœã€å¤§é˜ªã‚’ä¸­å¿ƒã¨ã—ãŸé–¢è¥¿åœã€æ„›çŸ¥ã€ç¦å²¡ã€åŒ—æµ·é“ï¼ˆæœ­å¹Œå‘¨è¾ºï¼‰ã®å…‰é‡ãŒå¤šãã€çµŒæ¸ˆæ´»å‹•ãŒæ´»ç™ºã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã¾ãŸã€é™¸å†…ã‚ˆã‚Šã‚‚æ²¿å²¸éƒ¨ã§å…‰é‡ãŒå¤šã„åœ°åŸŸãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã‚Œã¯çµŒæ¸ˆæ´»å‹•ã¨ã¯ç›´æ¥é–¢ä¿‚ã—ãªã„ç¾è±¡ã®ã‚ˆã†ãªæ°—ã‚‚ã—ã¾ã™ã€‚ä»Šå›ã¯åˆ†æå¯¾è±¡å¤–ã§ã™ãŒã€åŒ—ç·¯38åº¦ã‚’å¢ƒã«åŒ—å´ãŒçœŸã£æš—ã«ãªã‚‹ã®ãŒå°è±¡çš„ã§ã™ã€‚ã“ã‚Œã¯è¨€ã†ã¾ã§ã‚‚ãªãåŒ—æœé®®ã¨éŸ“å›½ã®å¢ƒç•Œç·šã§ã™ã‹ã‚‰ã€ä¸¡å›½ã®çµŒæ¸ˆæ´»å‹•æ°´æº–ã®å·®ãŒè¦–è¦šçš„ã«ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã€‚ä»Šå›ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯2014å¹´ã‹ã‚‰ã®ã‚‚ã®ã§ã™ãŒã€ä»–ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã¯1990å¹´ä»£ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ï¼ˆãã®ä»£ã‚ã‚Šæœ€è¿‘ã®ãƒ‡ãƒ¼ã‚¿ã¯å–ã‚Œã¾ã›ã‚“ãŒï¼‰ã€‚ãã‚Œã‚‰ã‚’ç”¨ã„ã¦æœé®®åŠå³¶ã‚„ä¸­å›½ã®çµŒæ¸ˆç™ºå±•ã‚’è¦³å¯Ÿã™ã‚‹ã®ã‚‚é¢ç™½ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;p&gt;ã•ã¦ã€ç”»åƒã¯å–å¾—ã§ãã¾ã—ãŸãŒã“ã®ã¾ã¾ã§ã¯è§£æãŒã§ãã¾ã›ã‚“ã€‚ã“ã“ã‹ã‚‰ã¯å¤œé–“å…‰ã‚’ãƒ”ã‚¯ã‚»ãƒ«å€¤ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æ•°å€¤çš„ãªè§£æã‚’è©¦ã¿ã¾ã™ã€‚ãŸã ã€å…ˆã»ã©ã¨ã¯ãƒ‡ãƒ¼ã‚¿å–å¾—ã®æ‰‹ç¶šããŒå°‘ã—å¤‰ã‚ã‚Šã¾ã™ã€‚ã¨ã„ã†ã®ã‚‚ã€ä»Šåº¦ã¯æ—¥æœ¬å„åœ°ã§å„ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã”ã¨ã«ã•ã¾ã–ã¾ãªå€¤ã‚’ã¨ã‚‹å¤œé–“å…‰ã‚’&lt;strong&gt;é›†ç´„&lt;/strong&gt;ã—ã€1ã¤ã®ä»£ç”¨å€¤ã«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‹ã‚‰ã§ã™ã€‚ãƒ”ã‚¯ã‚»ãƒ«ã”ã¨ã®æ•°å€¤ã‚’æ‰‹ã«å…¥ã‚ŒãŸã¨ã“ã‚ã§è§£æã™ã‚‹ã«ã¯æ‰‹ã«ä½™ã£ã¦ã—ã¾ã„ã¾ã™ã‹ã‚‰ã­ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ï¼ˆEarth Engineã‚µã‚¤ãƒˆã‹ã‚‰å¼•ç”¨ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://developers.google.com/earth-engine/images/Reduce_region_diagram.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…ˆã»ã©å–å¾—ã—ãŸå¤œé–“å…‰ã®&lt;code&gt;ImageCollection&lt;/code&gt;ã®ã‚ã‚‹1æ™‚ç‚¹ã®è¡›æ˜Ÿç”»åƒãŒå·¦ã§ã™ã€‚ãã®ä¸­ã«æ—¥æœ¬ã¨ã„ã†&lt;code&gt;Region&lt;/code&gt;ãŒå­˜åœ¨ã—ã€ãã‚Œã‚’&lt;code&gt;ee.Reducer&lt;/code&gt;ã«ã‚ˆã£ã¦å®šé‡çš„ã«é›†ç´„ï¼ˆaggregateï¼‰ã—ã¾ã™ã€‚Earth Engine APIã«ã¯&lt;code&gt;.reduceRegions()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã®ã§ãã‚Œã‚’ç”¨ã„ã‚Œã°ã„ã„ã§ã™ã€‚å¼•æ•°ã¯ã€&lt;code&gt;reducer&lt;/code&gt;=é›†ç´„æ–¹æ³•ï¼ˆã“ã“ã§ã¯åˆè¨ˆå€¤ï¼‰ã€&lt;code&gt;collection&lt;/code&gt;=é›†ç´„ã‚’ã‹ã‘ã‚‹&lt;code&gt;region&lt;/code&gt;ï¼ˆ&lt;code&gt;FeatureCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã€&lt;code&gt;scale&lt;/code&gt;=è§£åƒåº¦ã€ã§ã™ã€‚ä»¥ä¸‹ã§ã¯ã€&lt;code&gt;ImageCollection&lt;/code&gt;ï¼ˆdatasetï¼‰ã®ä¸­ã«ã‚ã‚‹1ç•ªç›®ã®&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«&lt;code&gt;.reduceRegions()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‹ã‘ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# initialize output box&lt;/span&gt;
time0 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dataset&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;first()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;system:time_start&amp;#39;&lt;/span&gt;);
first &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dataset&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;first()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;reduceRegions(reducer&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Reducer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sum(),collection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;japan,scale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;set(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;time_start&amp;#39;&lt;/span&gt;, time0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ã€…ã¯æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãŒæ¬²ã—ã„ã‚ã‘ã§ã™ã‹ã‚‰ã€&lt;code&gt;ImageCollection&lt;/code&gt;å†…ã«ã‚ã‚‹&lt;code&gt;Image&lt;/code&gt;ãã‚Œãã‚Œã«å¯¾ã—ã¦åŒã˜å‡¦ç†ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚Earth Engineã«ã¯&lt;code&gt;iterate&lt;/code&gt;ã¨ã„ã†ä¾¿åˆ©ãªé–¢æ•°ãŒã‚ã‚Šã€å¼•æ•°ã«å‡¦ç†ã—ãŸã„é–¢æ•°ã‚’æ¸¡ã›ã°foræ–‡ã„ã‚‰ãšã§ã“ã®å‡¦ç†ã‚’è¡Œã£ã¦ãã‚Œã¾ã™ã€‚ã“ã“ã§ã¯&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«&lt;code&gt;reduceRegions&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‡¦ç†ã—ãŸ&lt;code&gt;Computed Object&lt;/code&gt;ã‚’ä»¥å‰ã«å‡¦ç†ã—ãŸã‚‚ã®ã¨mergeã™ã‚‹&lt;code&gt;myfunc&lt;/code&gt;ã¨ã„ã†é–¢æ•°ã‚’å®šç¾©ã—ã€ãã‚Œã‚’&lt;code&gt;iterate&lt;/code&gt;ã«æ¸¡ã—ã¦ã„ã¾ã™ã€‚æœ€å¾Œã«ã€å…ˆã»ã©ã¨åŒã˜ãç”Ÿæˆã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’&lt;code&gt;getDownloadURL&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã¦urlã‚’å–å¾—ã—ã¦ã„ã¾ã™ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¯csvï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# define reduceRegions function for iteration&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;myfunc&lt;/span&gt;(image,first):
  added &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;reduceRegions(reducer&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Reducer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sum(),collection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;japan,scale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;set(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;time_start&amp;#39;&lt;/span&gt;, image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;system:time_start&amp;#39;&lt;/span&gt;))
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;FeatureCollection(first)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;merge(added)

&lt;span style=&#34;color:#75715e&#34;&gt;# implement iteration&lt;/span&gt;
nightjp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dataset&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;filter(ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Filter&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;date(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2014-02-01&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2019-01-01&amp;#39;&lt;/span&gt;))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;iterate(myfunc,first)

&lt;span style=&#34;color:#75715e&#34;&gt;# get url to download&lt;/span&gt;
ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;FeatureCollection(nightjp)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getDownloadURL(filetype&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;csv&amp;#39;&lt;/span&gt;,selectors&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;FeatureCollection(nightjp)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;first()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;propertyNames()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getInfo())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;CSVãƒ•ã‚¡ã‚¤ãƒ«ã®urlãŒå–å¾—ã§ãã¾ã—ãŸã€‚ã“ã®æ™‚ç³»åˆ—ã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ä»Šæ—¥ã¯çµ‚ã‚ã‚Šã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt

plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;style&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;use(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ggplot&amp;#39;&lt;/span&gt;)

nightjp_csv&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   system:index          sum Country  Unnamed: 3  Unnamed: 4
## 0     2014/1/1  881512.4572   Japan         NaN         NaN
## 1     2014/2/1  827345.3551   Japan         NaN         NaN
## 2     2014/3/1  729110.4619   Japan         NaN         NaN
## 3     2014/4/1  612665.8866   Japan         NaN         NaN
## 4     2014/5/1  661434.5027   Japan         NaN         NaN
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;plot(pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_datetime(nightjp_csv[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;system:index&amp;#39;&lt;/span&gt;]),nightjp_csv[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;sum&amp;#39;&lt;/span&gt;])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post12/index_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã‹ãªã‚Šå­£ç¯€æ€§ãŒã‚ã‚Šã¾ã™ã­ã€‚å†¬å ´ã¯æ—¥ç…§æ™‚é–“ãŒå°‘ãªã„ã“ã¨ã‚‚ã‚ã£ã¦å…‰é‡ãŒå¢—ãˆã¦ã„ã‚‹ã¿ãŸã„ã§ã™ã€‚ãã‚Œã«ã—ã¦ã‚‚æ€¥æ¿€ãªå¢—ãˆæ–¹ã§ã™ãŒã€‚æ¬¡å›ã¯ã“ã®ãƒ‡ãƒ¼ã‚¿ã¨æ™¯æ³æ„Ÿã®ä»£ç†å¤‰æ•°ã¨ãªã‚‹çµŒæ¸ˆçµ±è¨ˆã‚’å…ƒã«çµ±è¨ˆè§£æã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚ãŠãŸã®ã—ã¿ã«ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>rvestã§yahooç«¶é¦¬ã«ã‚ã‚‹éå»ã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ã¿ãŸï¼ˆ2å›ç›®ï¼‰</title>
      <link>/post/post11/</link>
      <pubDate>Sat, 13 Jul 2019 00:00:00 +0000</pubDate>
      <guid>/post/post11/</guid>
      <description>&lt;p&gt;2å›ç›®ã«ãªã‚Šã¾ã™ãŒã€ã¾ãŸrvestã§éå»ã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’è½ã¨ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚éå»ã®è¨˜äº‹ã‚’è¦‹ã¦ãªã„ã¨ã„ã†äººã¯å…ˆã«ãã¡ã‚‰ã‚’ã”è¦§ã«ãªã‚‰ã‚Œã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå›ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šç›´ãã†ã¨æ€ã£ãŸã®ã¯ã€ç«¶é¦¬ã®åˆ†æã‚’ã—ãŸéš›ã«ã‚ˆã‚Šå¤šãã®é …ç›®ã‚’èª¬æ˜å¤‰æ•°ã«åŠ ãˆã¦ã€åˆ†æã‚’ã—ãŸã„ã¨æ€ã£ãŸã‹ã‚‰ã§ã™ã€‚ãªã®ã§ã€ä»Šå›ã¯å‰å›ã®Rã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¿½è¨˜ã‚’è¡Œã†å½¢ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆã—ã¾ã—ãŸã€‚æ–°ãŸã«è¿½åŠ ã—ãŸãƒ‡ãƒ¼ã‚¿é …ç›®ã¯ä»¥ä¸‹ã®14å€‹ã§ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;èŠã‹ãƒ€ãƒ¼ãƒˆã‹&lt;/li&gt;
&lt;li&gt;å³å›ã‚Šã‹å·¦å›ã‚Šã‹&lt;/li&gt;
&lt;li&gt;ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ï¼ˆè‰¯ã‚„ç¨é‡ãªã©ï¼‰&lt;/li&gt;
&lt;li&gt;å¤©å€™&lt;/li&gt;
&lt;li&gt;é¦¬ã®æ¯›è‰²ï¼ˆæ —æ¯›ã€é¹¿æ¯›ãªã©ï¼‰&lt;/li&gt;
&lt;li&gt;é¦¬ä¸»&lt;/li&gt;
&lt;li&gt;ç”Ÿç”£è€…&lt;/li&gt;
&lt;li&gt;ç”£åœ°&lt;/li&gt;
&lt;li&gt;ç”Ÿå¹´æœˆæ—¥&lt;/li&gt;
&lt;li&gt;çˆ¶é¦¬&lt;/li&gt;
&lt;li&gt;æ¯é¦¬&lt;/li&gt;
&lt;li&gt;ãã®ãƒ¬ãƒ¼ã‚¹ã¾ã§ã®ç²å¾—è³é‡‘ï¼ˆ2003å¹´ã‹ã‚‰å…¥æ‰‹å¯èƒ½ï¼‰&lt;/li&gt;
&lt;li&gt;ã‚¸ãƒ§ãƒƒã‚­ãƒ¼ã®ä½“é‡&lt;/li&gt;
&lt;li&gt;ã‚¸ãƒ§ãƒƒã‚­ãƒ¼ã®ä½“é‡ã®å¢—æ¸›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®Ÿã¯ã¾ã ãƒ‡ãƒ¼ã‚¿åé›†ã¯çµ‚ã‚ã£ã¦ã„ãªãã¦ã€Rã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒãšã£ã¨å®Ÿè¡Œä¸­ã«ãªã£ã¦ã„ã¾ã™ï¼ˆ3æ—¥ãã‚‰ã„å›ã—ã¦ã„ã¾ã™ï¼‰ã€‚ã—ã‹ã—ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ è‡ªä½“ã¯ãã£ã¡ã‚Šå›ã£ã¦ã„ã‚‹ã®ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ç´¹ä»‹ã‚’ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ã‚‚ã—ã‹ã—ãŸã‚‰è¿½è¨˜ã§çµæœã‚’æ›¸ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸­èº«&#34;&gt;1. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸­èº«&lt;/h2&gt;
&lt;p&gt;ã¾ãšã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‘¼ã³å‡ºã—ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# rvestã«ã‚ˆã‚‹ç«¶é¦¬ãƒ‡ãƒ¼ã‚¿ã®webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;rvest&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#if (!require(&amp;#34;pacman&amp;#34;)) install.packages(&amp;#34;pacman&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;beepr&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;RSQLite&amp;#34;)&lt;/span&gt;
pacman&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;p_load&lt;/span&gt;(qdapRegex)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(rvest)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(dplyr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(beepr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(RSQLite)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‹ãªã‚ŠwarnningãŒå‡ºã‚‹ã®ã§ãã‚Œã‚’ç¦æ­¢ã—ã€SQLiteã«æ¥ç¶šã—ã¦ã„ã¾ã™&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# warnningç¦æ­¢&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;options&lt;/span&gt;(warn&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# SQLiteã¸ã®æ¥ç¶š&lt;/span&gt;
con &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbConnect&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SQLite&lt;/span&gt;(), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_data.db&amp;#34;&lt;/span&gt;, synchronous&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;1994å¹´ã‹ã‚‰ã—ã‹ã‚ªãƒƒã‚ºãŒå–ã‚Œãªã„ã®ã§ã€1994å¹´ã‹ã‚‰ç›´è¿‘ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚yahooç«¶é¦¬ã§ã¯æœˆã”ã¨ã«ãƒ¬ãƒ¼ã‚¹ãŒã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’å¤‰æ•°ã¨ã—ã¦ä½¿ç”¨ã—ãªãŒã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã¨ã£ã¦ã„ãã¾ã™ã€‚åŸºæœ¬çš„ã«ã¯ã€&lt;a href=&#34;https://keiba.yahoo.co.jp/schedule/list/2018/?month=7&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è©²å½“å¹´ã€è©²å½“æœˆã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§&lt;/a&gt;ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ãã®ãƒšãƒ¼ã‚¸ä¸Šã®å„æ—¥ã®&lt;a href=&#34;https://keiba.yahoo.co.jp/race/list/18020106/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å€‹ã€…ã®ç«¶é¦¬å ´ã”ã¨ã®ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«&lt;/a&gt;ã¸ã®ãƒªãƒ³ã‚¯ã‚’å–å¾—ã—ã¾ã™ã€‚å€‹ã€…ã®ç«¶é¦¬å ´ã§ãƒ¬ãƒ¼ã‚¹ã¯ã ã„ãŸã„12ã»ã©ã‚ã‚‹ã®ã§ã€ãã®ãƒªãƒ³ã‚¯ã‚’å–å¾—ã—ã€å„ãƒ¬ãƒ¼ã‚¹ã®&lt;a href=&#34;https://keiba.yahoo.co.jp/race/result/1802010601/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ãƒ¬ãƒ¼ã‚¹çµæœãƒšãƒ¼ã‚¸&lt;/a&gt;ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚ãã—ã¦ã€ãƒ¬ãƒ¼ã‚¹çµæœã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã€å„æ—¥ã®å€‹ã€…ã®ç«¶é¦¬å ´ã”ã¨ã®ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ã®å–å¾—æ–¹æ³•ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(year in &lt;span style=&#34;color:#ae81ff&#34;&gt;1994&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt;){
  start.time &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.time&lt;/span&gt;() &lt;span style=&#34;color:#75715e&#34;&gt;# è¨ˆç®—æ™‚é–“ã‚’å›³ã‚‹&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# yahooç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§ãƒšãƒ¼ã‚¸ã®å–å¾—&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;){ &lt;span style=&#34;color:#75715e&#34;&gt;# kã¯æœˆã‚’è¡¨ã™&lt;/span&gt;
    
    &lt;span style=&#34;color:#a6e22e&#34;&gt;tryCatch&lt;/span&gt;(
      {
        keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp/schedule/list/&amp;#34;&lt;/span&gt;, year,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/?month=&amp;#34;&lt;/span&gt;,k)) &lt;span style=&#34;color:#75715e&#34;&gt;# è©²å½“å¹´ã€è©²å½“æœˆã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§ã«ã‚¢ã‚¯ã‚»ã‚¹&lt;/span&gt;
        &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
        race_lists &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
          &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
          &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å…¨urlã‚’å–å¾—&lt;/span&gt;
        
        &lt;span style=&#34;color:#75715e&#34;&gt;# ç«¶é¦¬å ´ã”ã¨ã®å„æ—¥ã®ãƒ¬ãƒ¼ã‚¹ãƒªã‚¹ãƒˆã‚’å–å¾—&lt;/span&gt;
        race_lists &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_lists&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_lists, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race/list/\\d+/&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œresultã€ãŒå«ã¾ã‚Œã‚‹urlã‚’æŠ½å‡º&lt;/span&gt;
      }
      , error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(e){signal &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;}
    )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã“ã§ã¯ã€å–å¾—ã—ãŸãƒªãƒ³ã‚¯ã®urlã«resultã¨ã„ã†æ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‚‚ã®ã ã‘ã‚’æŠ½å‡ºã—ã¦ã„ã¾ã™ã€‚è¦ã¯ãã‚ŒãŒå„ç«¶é¦¬å ´ã®ãƒ¬ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã‹ã‚‰ã¯å–å¾—ã—ãŸç«¶é¦¬å ´ã®ãƒ¬ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒªãƒ³ã‚¯ã‚’ç”¨ã„ã¦ã€ãã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€å…¨12ãƒ¬ãƒ¼ã‚¹ãã‚Œãã‚Œã®ãƒ¬ãƒ¼ã‚¹çµæœãŒæ²è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã®ãƒªãƒ³ã‚¯ã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(j in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race_lists)){ &lt;span style=&#34;color:#75715e&#34;&gt;# jã¯å½“è©²å¹´æœˆã«ã‚ã£ãŸãƒ¬ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¡¨ã™&lt;/span&gt;
      
      &lt;span style=&#34;color:#a6e22e&#34;&gt;tryCatch&lt;/span&gt;(
        {
          race_list &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,race_lists[j]))
          race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_list &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å…¨urlã‚’å–å¾—&lt;/span&gt;
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®urlã‚’å–å¾—&lt;/span&gt;
          race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œresultã€ãŒå«ã¾ã‚Œã‚‹urlã‚’æŠ½å‡º&lt;/span&gt;
        }
        , error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(e){signal &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;}
      )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å„ãƒ¬ãƒ¼ã‚¹çµæœã¸ã®ãƒªãƒ³ã‚¯ãŒå–å¾—ã§ããŸã®ã§ã€ã“ã“ã‹ã‚‰ã¯ã„ã‚ˆã„ã‚ˆãƒ¬ãƒ¼ã‚¹çµæœã®å–å¾—ã¨ãã®æ•´å½¢ãƒ‘ãƒ¼ãƒˆã«å…¥ã‚Šã¾ã™ã€‚ã‹ãªã‚Šé•·ã£ãŸã‚‰ã—ãè¤‡é›‘ãªã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ãƒ¬ãƒ¼ã‚¹çµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ†ãƒ¼ãƒ–ãƒ«å±æ€§ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã¾ãšãã‚Œã‚’å˜ç´”ã«å¼•ã£å¼µã£ã¦ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race_url)){ &lt;span style=&#34;color:#75715e&#34;&gt;# iã¯å½“è©²å¹´æœˆå½“è©²ç«¶é¦¬å ´ã§é–‹å‚¬ã•ã‚ŒãŸãƒ¬ãƒ¼ã‚¹ã‚’è¡¨ã™&lt;/span&gt;
        
        &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç¾åœ¨ã€&amp;#34;&lt;/span&gt;, year, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¹´&amp;#34;&lt;/span&gt;, k, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœˆ&amp;#34;&lt;/span&gt;,j, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚°ãƒ«ãƒ¼ãƒ—ã€&amp;#34;&lt;/span&gt;, i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç•ªç›®ã®ãƒ¬ãƒ¼ã‚¹ã®ä¿å­˜ä¸­ã§ã™&amp;#34;&lt;/span&gt;))
        
        &lt;span style=&#34;color:#a6e22e&#34;&gt;tryCatch&lt;/span&gt;(
          {
            race1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,race_url[i])) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®urlã‚’å–å¾—&lt;/span&gt;
            signal &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
          }
          , error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(e){signal &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;}
        )
        
        &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹ãŒä¸­æ­¢orã“ã‚Œã¾ã§ã®éç¨‹ã§ã‚¨ãƒ©ãƒ¼ã§ãªã‘ã‚Œã°å‡¦ç†ã‚’å®Ÿè¡Œ&lt;/span&gt;
        &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;identical&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
                      &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@class = &amp;#39;resultAtt mgnBL fntSS&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
                      &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;(),&lt;span style=&#34;color:#a6e22e&#34;&gt;character&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; signal &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//table[@id = &amp;#39;raceScore&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_table&lt;/span&gt;()
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,race_result) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒªã‚¹ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›´&lt;/span&gt;
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(race_result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;frame_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_name/age&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time/margin&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;passing_rank/last_3F&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jockey/weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;popularity/odds&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;trainer&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;#ã€€åˆ—åå¤‰æ›´&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;tableã‚’ãŸã å–å¾—ã—ãŸã ã‘ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«\nãŒå…¥ã£ã¦ã„ãŸã‚Šã€ä¸€ã¤ã®ã‚»ãƒ«ã«è¤‡æ•°ã®æƒ…å ±ãŒå…¥ã£ã¦ã„ãŸã‚Šã¨åˆ†æã«ã¯ä½¿ãˆãªã„ãƒ‡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚ãªã®ã§ã€ã“ã‚Œã‚’æˆå‹ã™ã‚‹å¿…è¦ãŒå‡ºã¦ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;# é€šéé †ä½ã¨ä¸Šã‚Š3Fã®ã‚¿ã‚¤ãƒ &lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,passing_rank&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(\\d{2}-\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2})&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,last_3F&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-6&lt;/span&gt;]
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¿ã‚¤ãƒ ã¨ç€å·®&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,time&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d\\.\\d{2}\\.\\d|\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,margin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;./.é¦¬èº«|.é¦¬èº«|.[:space:]./.é¦¬èº«|[ã‚¢-ãƒ³-]+&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;margin[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãƒˆãƒƒãƒ—&amp;#34;&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;margin[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;margin&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;character(0)&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¤§å·®&amp;#34;&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;margin[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-5&lt;/span&gt;]
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬åã€é¦¬é½¢ã€é¦¬ä½“é‡&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã‚¡-ãƒ´ãƒ¼ãƒ»]+&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_age&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‰¡\\d+|ç‰\\d+|ã›ã‚“\\d+&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_sex &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_age, pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‰¡|ç‰|ã›ã‚“&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_age &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_age, pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d&amp;#34;&lt;/span&gt;)
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{3}&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight_change&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\([\\+|\\-]\\d+\\)|\\([\\d+]\\)&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,brinker&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;brinker[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;brinker&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;N&amp;#34;&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¸ãƒ§ãƒƒã‚­ãƒ¼&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,jockey&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã-ã‚“ä¸€-é¾ ]+\\s[ã-ã‚“ä¸€-é¾ ]+|[:upper:].[ã‚¡-ãƒ¶ãƒ¼]+&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,jockey_weight&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{2}&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;jockey_weight_change &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;jockey_weight_change&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â˜†&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;jockey_weight_change&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–³&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;jockey_weight_change&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–³&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚ªãƒƒã‚ºã¨äººæ°—&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,odds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\(.+\\)&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,popularity&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+[^(\\d+.\\d)]&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«ã€ä»Šå–å¾—ã—ãŸtableä»¥å¤–ã®æƒ…å ±ã‚‚å–ã‚Šè¾¼ã‚€ã“ã¨ã«ã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€ãƒ¬ãƒ¼ã‚¹åã‚„å¤©å€™ã€é¦¬å ´çŠ¶æ…‹ã€æ—¥ä»˜ã€ç«¶é¦¬å ´ãªã©ã§ã™ã€‚ã“ã‚Œã‚‰ã®æƒ…å ±ã¯ãƒ¬ãƒ¼ã‚¹çµæœãƒšãƒ¼ã‚¸ã®ä¸Šéƒ¨ã«æ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹æƒ…å ±&lt;/span&gt;
          race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/p[@id = &amp;#39;raceTitDay&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
          race_name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/h1[@class = &amp;#39;fntB&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
          race_distance &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//p[@id = &amp;#39;raceTitMeta&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
        
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+å¹´\\d+æœˆ\\d+æ—¥&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¹´&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date)
          race_course &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_date,pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœ­å¹Œ|å‡½é¤¨|ç¦å³¶|æ–°æ½Ÿ|æ±äº¬|ä¸­å±±|ä¸­äº¬|äº¬éƒ½|é˜ªç¥|å°å€‰&amp;#34;&lt;/span&gt;))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_course &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_course
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_name,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_distance&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_distance,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+m&amp;#34;&lt;/span&gt;)))
          race_type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_distance,pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;èŠ|ãƒ€ãƒ¼ãƒˆ&amp;#34;&lt;/span&gt;))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;type &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_type
          race_turn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_distance,pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å³|å·¦&amp;#34;&lt;/span&gt;))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_turn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_turn
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg ryou&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è‰¯&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg yayaomo&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç¨é‡&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
                            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg omo&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é‡&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg furyou&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è‰¯&amp;#34;&lt;/span&gt;
          } else race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg hare&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_weather &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ™´ã‚Œ&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg ame&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_weather &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ›‡ã‚Š&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg kumori&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_weather &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é›¨&amp;#34;&lt;/span&gt;
          } else race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_weather &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãã®ä»–&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã¯å„é¦¬ã®æƒ…å ±ã§ã™ã€‚ å®Ÿã¯ã•ãã»ã©å–å¾—ã—ãŸtableã®é¦¬åã¯ãƒªãƒ³ã‚¯ã«ãªã£ã¦ãŠã‚Šã€ãã®ãƒªãƒ³ã‚¯ã‚’ãŸã©ã‚‹ã¨&lt;a href=&#34;https://keiba.yahoo.co.jp/directory/horse/2015105508/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å„é¦¬ã®æƒ…å ±&lt;/a&gt;ãŒå–å¾—ã§ãã¾ã™ï¼ˆæ¯›è‰²ã‚„ç”Ÿå¹´æœˆæ—¥ãªã©ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          horse_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) 
          horse_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(horse_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;directory/horse&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬æƒ…å ±ã®ãƒªãƒ³ã‚¯ã ã‘æŠ½å‡ºã™ã‚‹&lt;/span&gt;
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(l in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(horse_url)){
            &lt;span style=&#34;color:#a6e22e&#34;&gt;tryCatch&lt;/span&gt;(
              {
                horse1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,horse_url[l]))
                &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;)
                horse_name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;dirTitName&amp;#39;]/h1[@class = &amp;#39;fntB&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                  &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
                horse &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;dirTitName&amp;#39;]/ul&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                  &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;colour[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¯›è‰²ï¼š.+&amp;#34;&lt;/span&gt;)) 
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;owner[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¦¬ä¸»ï¼š.+&amp;#34;&lt;/span&gt;))
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;farm[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç”Ÿç”£è€…ï¼š.+&amp;#34;&lt;/span&gt;))
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;locality[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç”£åœ°ï¼š.+&amp;#34;&lt;/span&gt;))
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_birthday[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+å¹´\\d+æœˆ\\d+æ—¥&amp;#34;&lt;/span&gt;))
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;father[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//td[@class = &amp;#39;bloodM&amp;#39;][@rowspan = &amp;#39;4&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;mother[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//td[@class = &amp;#39;bloodF&amp;#39;][@rowspan = &amp;#39;4&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
              }
              , error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(e){
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;colour[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt; 
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;owner[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;farm[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;locality[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_birthday[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;father[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;mother[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                }
            )
          }
          
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;colour &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;colour,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¯›è‰²ï¼š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;owner &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;owner,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¦¬ä¸»ï¼š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;farm &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;farm,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç”Ÿç”£è€…ï¼š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;locality &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;locality,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç”£åœ°ï¼š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          &lt;span style=&#34;color:#75715e&#34;&gt;#race_result$horse_birthday &amp;lt;- str_replace_all(race_result$horse_birthday,&amp;#34;å¹´&amp;#34;,&amp;#34;/&amp;#34;)&lt;/span&gt;
          &lt;span style=&#34;color:#75715e&#34;&gt;#race_result$horse_birthday &amp;lt;- str_replace_all(race_result$horse_birthday,&amp;#34;æœˆ&amp;#34;,&amp;#34;/&amp;#34;)&lt;/span&gt;
          &lt;span style=&#34;color:#75715e&#34;&gt;#race_result$horse_birthday &amp;lt;- as.Date(race_result$horse_birthday)&lt;/span&gt;
          
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;arrange&lt;/span&gt;(race_result,horse_number) &lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬ç•ªé †ã«ä¸¦ã¹ã‚‹&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«ãã®ãƒ¬ãƒ¼ã‚¹ã¾ã§ã«ç²å¾—ã—ãŸè³é‡‘é¡ã‚’è½ã¨ã—ã«è¡Œãã¾ã™ã€‚ã“ã‚Œã¯ãƒ¬ãƒ¼ã‚¹çµæœã®ãƒšãƒ¼ã‚¸ã®&lt;a href=&#34;https://keiba.yahoo.co.jp/race/denma/1802010601/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‡ºé¦¬è¡¨&lt;/a&gt;ã¨æ›¸ã‹ã‚ŒãŸãƒªãƒ³ã‚¯ã‚’ãŸã©ã‚‹ã¨ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ã“ã“ã«è³é‡‘ãŒã‚ã‚‹ã®ã§ãã‚Œã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          yosou_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) 
          yosou_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; yosou_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(yosou_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;denma&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(yosou_url)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
          yosou1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,yosou_url)) 
          &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
          yosou &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; yosou1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//td[@class = &amp;#39;txC&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;()
          prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; yosou&lt;span style=&#34;color:#a6e22e&#34;&gt;[grepl&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸‡&amp;#34;&lt;/span&gt;,yosou)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+ä¸‡&amp;#34;&lt;/span&gt;)
          prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,prize)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;()
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; prize
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;prize,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸‡&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;()
          } else race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å–å¾—ã—ãŸå„ãƒ¬ãƒ¼ã‚¹çµæœã‚’æ ¼ç´ã™ã‚‹datasetã¨ã„ã†ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œæˆã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ã¦ã„ãã¾ã™ã€‚1å¹´ã”ã¨ã«ãã‚Œã‚’SQLite
ã¸ä¿å­˜ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;## ãƒ•ã‚¡ã‚¤ãƒ«è²¯ã‚ã‚‹ã®ã‹ã&lt;/span&gt;
          &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; j &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result
          } else {
            dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(dataset,race_result)
          } &lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡2ã®çµ‚ã‚ã‚Š&lt;/span&gt;
        }else
        {
          &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¿å­˜ã§ãã¾ã›ã‚“ã§ã—ãŸ&amp;#34;&lt;/span&gt;) 
        }&lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡1ã®çµ‚ã‚ã‚Š&lt;/span&gt;
      } &lt;span style=&#34;color:#75715e&#34;&gt;# iãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    } &lt;span style=&#34;color:#75715e&#34;&gt;# jãƒ«ãƒ¼ãƒ—çµ‚ã‚ã‚Š&lt;/span&gt;
  } &lt;span style=&#34;color:#75715e&#34;&gt;# kãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;beep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;write.csv&lt;/span&gt;(dataset,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race_result2.csv&amp;#34;&lt;/span&gt;, row.names &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(year &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1994&lt;/span&gt;){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;dbWriteTable&lt;/span&gt;(con, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race_result&amp;#34;&lt;/span&gt;, dataset)
  } else {
    &lt;span style=&#34;color:#a6e22e&#34;&gt;dbWriteTable&lt;/span&gt;(con, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;temp&amp;#34;&lt;/span&gt;, dataset)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;dbSendQuery&lt;/span&gt;(con, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;INSERT INTO race_result select * from temp&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;dbSendQuery&lt;/span&gt;(con, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DROP TABLE temp&amp;#34;&lt;/span&gt;)
  } &lt;span style=&#34;color:#75715e&#34;&gt;# ifã®çµ‚ã‚ã‚Š&lt;/span&gt;
} &lt;span style=&#34;color:#75715e&#34;&gt;# yearãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
end.time &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.time&lt;/span&gt;()
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å‡¦ç†æ™‚é–“ã¯&amp;#34;&lt;/span&gt;,end.time&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;start.time,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã§ã™ã€‚&amp;#34;&lt;/span&gt;))
&lt;span style=&#34;color:#a6e22e&#34;&gt;beep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)

&lt;span style=&#34;color:#a6e22e&#34;&gt;options&lt;/span&gt;(warn &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)

&lt;span style=&#34;color:#a6e22e&#34;&gt;dbDisconnect&lt;/span&gt;(con)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥ä¸Šã§ã™ã€‚å–ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(race_result)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   order frame_number horse_number   trainer passing_rank last_3F   time
## 1    10            1            1   ç”°ä¸­ å‰›        09-09    39.0 1.14.3
## 2    16            1            2 å¤©é–“ æ˜­ä¸€        11-11    40.3 1.15.7
## 3    15            2            3 ç”°ä¸­ æ¸…éš†        14-14    39.4 1.15.1
## 4     9            2            4 ä¸­èˆ˜ è‹±äºŒ        08-08    39.1 1.14.3
## 5    12            3            5 æ ¹æœ¬ åº·åºƒ        11-11    39.0 1.14.4
## 6     4            3            6 æ‰æµ¦ å®æ˜­        04-04    38.4 1.13.2
##      margin         horse_name horse_age horse_sex horse_weight
## 1    ã‚¢ã‚¿ãƒ     ã‚µãƒˆãƒã‚¸ãƒ§ãƒ‹ãƒ¼         3        ç‰¡          512
## 2 3 1/2é¦¬èº«       ãƒ„ã‚®ãƒã‚¤ãƒƒãƒ†         3        ç‰¡          464
## 3     3é¦¬èº«           ã‚®ãƒ¥ã‚¦ãƒ›         3        ç‰¡          444
## 4 2 1/2é¦¬èº« ã‚»ã‚¤ã‚¦ãƒ³ãƒ¡ãƒ©ãƒ“ãƒªã‚¢         3        ç‰          466
## 5      ã‚¯ãƒ“ ã‚µãƒã‚¤ãƒãƒ«ãƒˆãƒªãƒƒã‚¯         3        ç‰          450
## 6    ã‚¢ã‚¿ãƒ       ã‚¹ãƒ†ã‚¤ãƒ›ãƒƒãƒˆ         3        ç‰          474
##   horse_weight_change brinker      jockey jockey_weight jockey_weight_change
## 1                 +30       N   æ¾å²¡ æ­£æµ·            56                    0
## 2                  +8       N è¥¿ç”° é›„ä¸€éƒ            56                    0
## 3                  +8       N   æ‰åŸ èª äºº            56                    0
## 4                 +10       N   æ‘ç”° ä¸€èª             54                    0
## 5                  -2       N é‡ä¸­ æ‚ å¤ªéƒ            51                    0
## 6                  -2       N   å¤§é‡ æ‹“å¼¥            54                    0
##    odds popularity  race_date race_course       race_name race_distance   type
## 1  40.3         9  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 2 340.9        16  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 3 283.1        14  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 4 299.7        15  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 5  26.7         8  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 6   2.4         1  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
##   race_turn race_condition race_weather colour                           owner
## 1        å³             è‰¯         æ™´ã‚Œ   æ —æ¯› æ ªå¼ä¼šç¤¾ ã‚µãƒˆãƒŸãƒ›ãƒ¼ã‚¹ã‚«ãƒ³ãƒ‘ãƒ‹ãƒ¼
## 2        å³             è‰¯         æ™´ã‚Œ é»’é¹¿æ¯›                     è¥¿æ‘ æ–°ä¸€éƒ
## 3        å³             è‰¯         æ™´ã‚Œ   é¹¿æ¯›           æœ‰é™ä¼šç¤¾ ãƒŸãƒ«ãƒ•ã‚¡ãƒ¼ãƒ 
## 4        å³             è‰¯         æ™´ã‚Œ é’é¹¿æ¯›                       è¥¿å±± èŒ‚è¡Œ
## 5        å³             è‰¯         æ™´ã‚Œ é»’é¹¿æ¯›                       ç¦ç”° å…‰åš
## 6        å³             è‰¯         æ™´ã‚Œ   æ —æ¯›                       å°æ— å–„ä¸€
##           farm   locality horse_birthday                 father
## 1   åƒä»£ç”°ç‰§å ´ æ–°ã²ã ã‹ç”º  2016å¹´1æœˆ29æ—¥         ã‚ªãƒ«ãƒ•ã‚§ãƒ¼ãƒ´ãƒ«
## 2    ç¹”ç¬  æ™‚ç”·     é’æ£®çœŒ  2016å¹´4æœˆ17æ—¥ ã‚¹ã‚¯ãƒ¯ãƒ¼ãƒˆãƒ«ã‚¹ã‚¯ãƒ¯ãƒ¼ãƒˆ
## 3    ç¥å£ é“å¼˜ æ–°ã²ã ã‹ç”º  2016å¹´4æœˆ19æ—¥     ã‚¸ãƒ£ãƒ³ã‚°ãƒ«ãƒã‚±ãƒƒãƒˆ
## 4  çŸ³éƒ·å²¡ é›…æ¨¹     æ–°å† ç”º  2016å¹´4æœˆ21æ—¥     ã‚­ãƒ³ã‚·ãƒ£ã‚µãƒã‚­ã‚»ã‚­
## 5     åŸç”°ç‰§å ´     æ—¥é«˜ç”º  2016å¹´4æœˆ30æ—¥       ãƒªãƒ¼ãƒã‚¶ã‚¯ãƒ©ã‚¦ãƒ³
## 6 ç¤¾å°ãƒ•ã‚¡ãƒ¼ãƒ      åƒæ­³å¸‚  2016å¹´3æœˆ13æ—¥     ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ãƒˆã‚¥ãƒ¼ãƒ¬
##               mother prize
## 1 ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ«ã‚¸ãƒ¥ã‚¨ãƒ«     0
## 2   ã‚¨ãƒ—ã‚½ãƒ ã‚¢ã‚¤ãƒªã‚¹     0
## 3     ãƒ‡ãƒ©ã‚¤ãƒˆã‚·ãƒ¼ãƒ³     0
## 4     ãƒ‰ãƒªãƒ¼ãƒ ã‚·ãƒƒãƒ—     0
## 5   ãƒ•ãƒªãƒ¼ãƒ€ãƒ ã‚¬ãƒ¼ãƒ«   180
## 6     ã‚¹ãƒ†ã‚¤ã‚¢ãƒ©ã‚¤ãƒ´   455
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>GPLVMã§ãƒãƒ«ãƒãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸ</title>
      <link>/post/post8/</link>
      <pubDate>Sun, 26 May 2019 00:00:00 +0000</pubDate>
      <guid>/post/post8/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚
ãšã„ã¶ã‚“å‰ã«Gianonne et al (2008)ã®ãƒãƒ«ãƒãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã§å››åŠæœŸGDPã®äºˆæƒ³ã‚’è¡Œã„ã¾ã—ãŸã€‚
çµæœã¨ã—ã¦ã¯ã€ã‚ã‚‹ç¨‹åº¦ã¯äºˆæ¸¬ç²¾åº¦ãŒå‡ºã¦ã„ãŸã‚‚ã®ã®å½¼ã‚‰ã®è«–æ–‡ã»ã©ã¯æº€è¶³ã®ã„ãã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚åŸå› ã¨ã—ã¦ã¯ã‚¯ãƒ­ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒŠãƒ«ãªãƒ‡ãƒ¼ã‚¿ä¸è¶³ãŒå¤§ãã„ã¨æ€ã‚ã‚Œã€ç¾åœ¨åé›†æ–¹æ³•ã«ã¤ã„ã¦ã‚‚EXCELã‚’ç”¨ã„ã¦æ”¹ä¿®ä¸­ã§ã™ã€‚ã—ã‹ã—ä¸€æ–¹ã§ã€ãƒãƒ«ãƒãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã®æ”¹å–„ã‚‚è€ƒãˆãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚å‰å›ã¯æœˆæ¬¡çµŒæ¸ˆçµ±è¨ˆã‚’ä¸»æˆåˆ†åˆ†æï¼ˆå®Ÿéš›ã«ã¯ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ï¼‰ã‚’ç”¨ã„ã¦æ¬¡å…ƒå‰Šæ¸›ã‚’è¡Œã„ã€ä¸»æˆåˆ†å¾—ç‚¹ã‚’èª¬æ˜å¤‰æ•°ã¨ã—ã¦GDPã«å›å¸°ã—ã¾ã—ãŸã€‚ä»Šå›ã¯ã“ã®ä¸»æˆåˆ†åˆ†æã®ãƒ‰ç™ºå±•ç‰ˆã§ã‚ã‚‹&lt;code&gt;Gaussian Process Latent Variable Model&lt;/code&gt;(GPLVM)ã‚’ç”¨ã„ã¦ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’è¨ˆç®—ã—ã€ãã‚Œã‚’GDPã«å›å¸°ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-gplvmã¨ã¯&#34;&gt;1. GPLVMã¨ã¯&lt;/h2&gt;
&lt;p&gt;GPLVMã¨ã¯ã€&lt;code&gt;Gaussian Process&lt;/code&gt; Modelã®ä¸€ç¨®ã§ã™ã€‚ä»¥å‰ã€&lt;code&gt;Gaussian Process Regression&lt;/code&gt;ã®è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;æœ€ã‚‚åŸºæœ¬çš„ãª&lt;code&gt;Gaussian Process&lt;/code&gt; Modelã¯ä¸Šã®è¨˜äº‹ã®ã‚ˆã†ãªãƒ¢ãƒ‡ãƒ«ã§ã€éèª¬æ˜å¤‰æ•°$Y=(y_{1},y_{2},&amp;hellip;,y_{n})$ã¨èª¬æ˜å¤‰æ•°$X=(\textbf{x}_{1},\textbf{x}_{2},&amp;hellip;,\textbf{x}_{n})$ãŒã‚ã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢ä¿‚å¼ã§è¡¨ã•ã‚Œã‚‹éš›ã«ãã®ãƒ¢ãƒ‡ãƒ«ã‚’ç›´æ¥æ¨å®šã™ã‚‹ã“ã¨ãªã—ã«æ–°ãŸãªèª¬æ˜å¤‰æ•°$X$ã®å…¥åŠ›ã«å¯¾ã—ã€éèª¬æ˜å¤‰æ•°$Y$ã®äºˆæ¸¬å€¤ã‚’ã¯ã˜ãå‡ºã™ã¨ã„ã†ã‚‚ã®ã§ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle y_{i}  = \textbf{w}^{T}\phi(\textbf{x}_{i})
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\textbf{x}&lt;em&gt;{i}$ã¯$i$ç•ªç›®ã®èª¬æ˜å¤‰æ•°ãƒ™ã‚¯ãƒˆãƒ«ã€$\phi(ãƒ»)$ã¯éç·šå½¢é–¢æ•°ã€ &lt;code&gt;\(\textbf{w}^{T}\)&lt;/code&gt;ã¯å„å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹é‡ã¿ä¿‚æ•°ï¼ˆå›å¸°ä¿‚æ•°ï¼‰ãƒ™ã‚¯ãƒˆãƒ«ã§ã™ã€‚éç·šå½¢é–¢æ•°ã¨ã—ã¦ã¯ã€$\phi(\textbf{x}&lt;/em&gt;{i}) = (x_{1,i}, x_{1,i}^{2},&amp;hellip;,x_{1,i}x_{2,i},&amp;hellip;)$ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ï¼ˆ$x_{1,i}$ã¯$i$ç•ªç›®ã®å…¥åŠ›ãƒ‡ãƒ¼ã‚¿$\textbf{x}_{i}$ã®ï¼‘ç•ªç›®ã®å¤‰æ•°ï¼‰ã€‚è©³ã—ãã¯éå»è¨˜äº‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå›ã‚„ã‚‹GPLVMã¯èª¬æ˜å¤‰æ•°ãƒ™ã‚¯ãƒˆãƒ«ãŒè¦³æ¸¬ã§ããªã„æ½œåœ¨å¤‰æ•°ï¼ˆLatent Variableï¼‰ã§ã‚ã‚‹ã¨ã“ã‚ãŒç‰¹å¾´ã§ã™ã€‚ä»¥ä¸‹ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒéå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ãŒã€GP-LVMã¯ç¢ºç‡çš„ä¸»æˆåˆ†åˆ†æï¼ˆPPCAï¼‰ã®éç·šå½¢ç‰ˆã¨ã„ã†ä½ç½®ä»˜ã‘ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.slideshare.net/antiplastics/pcagplvm&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è³‡æ–™&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã§ã¯å…·ä½“çš„ãªèª¬æ˜ã«ç§»ã‚Šã¾ã™ã€‚GPLVMã¯ä¸»æˆåˆ†åˆ†æã®ç™ºå±•ç‰ˆã§ã™ã®ã§ã€ä¸»ã«æ¬¡å…ƒå‰Šæ¸›ã®ãŸã‚ã«è¡Œã‚ã‚Œã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒã‚ã£ãŸã¨ã—ã¦ã€ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º$n$ã‚ˆã‚Šã‚‚å¤‰æ•°ã®æ¬¡å…ƒ$p$ãŒå¤§ãã„ã‚ˆã†ãªå ´åˆã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-æœ€ã‚‚primitiveãªgp-lvmhttppapersnipsccpaper2540-gaussian-process-latent-variable-models-for-visualisation-of-high-dimensional-datapdf&#34;&gt;2. &lt;a href=&#34;http://papers.nips.cc/paper/2540-gaussian-process-latent-variable-models-for-visualisation-of-high-dimensional-data.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœ€ã‚‚PrimitiveãªGP-LVM&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å…ˆè¿°ã—ãŸã‚ˆã†ã«GPLVMã¯PPCAã®éç·šå½¢ç‰ˆã§ã™ã€‚ãªã®ã§ã€GPLVMã‚’èª¬æ˜ã™ã‚‹ã‚¹ã‚¿ãƒ¼ãƒˆã¯PPCAã«ãªã‚Šã¾ã™ã€‚è¦³æ¸¬å¯èƒ½ãª$D$æ¬¡å…ƒãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’${\textbf{y}&lt;em&gt;{n}}&lt;/em&gt;{n=1}^{N}$ã¨ã—ã¾ã™ã€‚ãã—ã¦ã€æ½œåœ¨å¤‰æ•°ã‚’$\textbf{x}_{n}$ã¨ãŠãã¾ã™ã€‚ä»Šã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨æ½œåœ¨å¤‰æ•°ã®é–“ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢ä¿‚ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\textbf{y}&lt;em&gt;{n} = \textbf{W}\textbf{x}&lt;/em&gt;{n} + \epsilon_{n}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\textbf{W}$ã¯ã‚¦ã‚§ã‚¤ãƒˆè¡Œåˆ—ã€$\epsilon_{n}$ã¯ã‹ãä¹±é …ã§$N(0,\beta^{-1}\textbf{I})$ã«å¾“ã„ã¾ã™ï¼ˆè¢«èª¬æ˜å¤‰æ•°ãŒå¤šæ¬¡å…ƒã«ãªã‚‹ã“ã¨ã«æ³¨æ„ï¼‰ã€‚ã¾ãŸã€$\textbf{x}_{n}$ã¯$N(0,\textbf{I})$ã«å¾“ã„ã¾ã™ã€‚ã“ã®ã¨ãã€$\textbf{y}_{n}$ã®å°¤åº¦ã‚’$\textbf{x}_{n}$ã‚’å‘¨è¾ºåŒ–ã™ã‚‹ã“ã¨ã§è¡¨ç¾ã™ã‚‹ã¨ã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} \displaystyle p(\textbf{y}_{n}|\textbf{W},\beta) &amp;amp;=&amp;amp; \int p(\textbf{y}_{n}|\textbf{x}_{n},\textbf{W},\beta)N(0,\textbf{I})d\textbf{x}_{n} \\ \displaystyle &amp;amp;=&amp;amp; \int N(\textbf{W}\textbf{x}_{n},\beta^{-1}\textbf{I})N(0,\textbf{I})d\textbf{x}_{n} \\ &amp;amp;=&amp;amp; N(0,\textbf{W}\textbf{W}^{T} + \beta^{-1}\textbf{I}) \\ \displaystyle &amp;amp;=&amp;amp; \frac{1}{(2\pi)^{DN/2}|\textbf{W}\textbf{W}^{T} + \beta^{-1}\textbf{I}|^{N/2}}\exp(\frac{1}{2}\textbf{tr}( (\textbf{W}\textbf{W}^{T} + \beta^{-1}\textbf{I})^{-1}\textbf{YY}^{T})) \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$p(\textbf{y}&lt;em&gt;{n}|\textbf{x}&lt;/em&gt;{n},\textbf{W},\beta)=N(\textbf{W}\textbf{x}_{n},\beta^{-1}\textbf{I})$ã§ã™ã€‚å¹³å‡ã¨åˆ†æ•£ã¯ä»¥ä¸‹ã‹ã‚‰æ±‚ã‚ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} E(\textbf{y}_{n}|\textbf{W},\beta) &amp;amp;=&amp;amp; E(\textbf{W}\textbf{x}_{n} + \epsilon_{n}) \\ &amp;amp;=&amp;amp; E(\textbf{W}\textbf{x}_{n}) + E(\epsilon_{n}) \\ &amp;amp;=&amp;amp; \textbf{W}E(\textbf{x}_{n}) + E(\epsilon_{n}) = 0 \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} E[(\textbf{y}_{n}|\textbf{W},\beta)(\textbf{y}_{n}|\textbf{W},\beta)^{T}] &amp;amp;=&amp;amp; E[ (\textbf{W}\textbf{x}_{n} + \epsilon_{n} - 0)(\textbf{W}\textbf{x}_{n} + \epsilon_{n} - 0)^{T} ] \\ &amp;amp;=&amp;amp; E[ (\textbf{W}\textbf{x}_{n} + \epsilon_{n})(\textbf{W}\textbf{x}_{n} + \epsilon_{n})^{T} ] \\ &amp;amp;=&amp;amp; E[ \textbf{W}\textbf{x}_{n}(\textbf{W}\textbf{x}_{n})^{T} + \textbf{W}\textbf{x}_{n}\epsilon_{n}^{T} + \epsilon_{n}\textbf{W}\textbf{x}_{n}^{T} + \epsilon_{n}\epsilon_{n}^{T} ] \\ &amp;amp;=&amp;amp; E[ \textbf{W}\textbf{x}_{n}(\textbf{W}\textbf{x}_{n})^{T} + \epsilon_{n}\epsilon_{n}^{T} ] \\ &amp;amp;=&amp;amp; E[ \textbf{W}\textbf{x}_{n}\textbf{x}_{n}^{T}\textbf{W}^{T} + \epsilon_{n}\epsilon_{n}^{T} ] \\ &amp;amp;=&amp;amp; E[ \textbf{W}\textbf{x}_{n}\textbf{x}_{n}^{T}\textbf{W}^{T}] + E[\epsilon_{n}\epsilon_{n}^{T} ] \\ &amp;amp;=&amp;amp; \textbf{W}\textbf{W}^{T} + \beta^{-1}\textbf{I} \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;&lt;code&gt;\(\textbf{W}\)&lt;/code&gt;ã‚’æ±‚ã‚ã‚‹ãŸã‚ã«ã¯$\textbf{y}_{n}$ãŒi.i.d.ã¨ä»®å®šã—ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå…¨ä½“ã®å°¤åº¦ã‚’æœ€å¤§åŒ–ã™ã‚Œã°è‰¯ã„ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle p(\textbf{Y}|\textbf{W},\beta) = \prod_{n=1}^{N}p(\textbf{y}_{n}|\textbf{W},\beta)
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\textbf{Y}$ã¯$NÃ—D$ã®è¨ˆç”»è¡Œåˆ—ã§ã™ã€‚ã“ã®ã‚ˆã†ã«ã€PPCAã§ã¯$\textbf{x}&lt;em&gt;{n}$ã‚’å‘¨è¾ºåŒ–ã—ã€$\textbf{W}$ã‚’æœ€é©åŒ–ã—ã¾ã™ã€‚é€†ã«ã€Lawrence(2004)ã§ã¯$\textbf{W}$ã‚’å‘¨è¾ºåŒ–ã—ã€$\textbf{x}&lt;/em&gt;{n}$ã—ã¾ã™ï¼ˆç†ç”±ã¯å¾Œè¿°ï¼‰ã€‚$\textbf{W}$ã‚’å‘¨è¾ºåŒ–ã™ã‚‹ãŸã‚ã«ã€$\textbf{W}$ã«äº‹å‰åˆ†å¸ƒã‚’ä¸ãˆã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle p(\textbf{W}) = \prod_{i=1}^{D}N(\textbf{w}_{i}|0,\alpha^{-1}\textbf{I})
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\textbf{w}_{i}$ã¯ã‚¦ã‚§ã‚¤ãƒˆè¡Œåˆ—$\textbf{W}$ã®$i$ç•ªç›®ã®åˆ—ã§ã™ã€‚ã§ã¯ã€$\textbf{W}$ã‚’å‘¨è¾ºåŒ–ã—ã¦$\textbf{Y}$ã®å°¤åº¦é–¢æ•°ã‚’å°å‡ºã—ã¦ã¿ã¾ã™ã€‚ã‚„ã‚Šæ–¹ã¯ã•ã£ãã¨ã»ã¼åŒã˜ãªã®ã§çœç•¥ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle p(\textbf{Y}|\textbf{X},\beta) = \frac{1}{(2\pi)^{DN/2}|K|^{D/2}}\exp(\frac{1}{2}\textbf{tr}(\textbf{K}^{-1}\textbf{YY}^{T}))
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\textbf{K}=\alpha^2\textbf{X}\textbf{X}^{T} + \beta^{-1}\textbf{I}$ã¯$p(\textbf{Y}|\textbf{X},\beta)$ã®åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã§ã€$\textbf{X}=(\textbf{x}&lt;em&gt;{1},\textbf{x}&lt;/em&gt;{2},&amp;hellip;,\textbf{x}_{N})^{T}$ã¯å…¥åŠ›ãƒ™ã‚¯ãƒˆãƒ«ã§ã™ã€‚å¯¾æ•°å°¤åº¦ã¯&lt;/p&gt;
&lt;p&gt;$$
\displaystyle L = - \frac{DN}{2}\ln{2\pi} - \frac{1}{2}\ln{|\textbf{K}|} - \frac{1}{2}\textbf{tr}(\textbf{K}^{-1}\textbf{YY}^{T})
$$&lt;/p&gt;
&lt;p&gt;å‘¨è¾ºåŒ–ã®ãŠã‹ã’ã§ã‚¦ã‚§ã‚¤ãƒˆ$\textbf{W}$ãŒæ¶ˆãˆãŸã®ã§ã“ã‚Œã‚’$X$ã§å¾®åˆ†ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle\frac{\partial L}{ \partial \textbf{X}} = \alpha^2 \textbf{K}^{-1}\textbf{Y}\textbf{Y}^{T}\textbf{K}^{-1}\textbf{X} - \alpha^2 D\textbf{K}^{-1}\textbf{X}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã‹ã‚‰ã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \frac{1}{D}\textbf{Y}\textbf{Y}^{T}\textbf{K}^{-1}\textbf{X} = \textbf{X}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€ç‰¹ç•°å€¤åˆ†è§£ã‚’ç”¨ã„ã‚‹ã¨&lt;/p&gt;
&lt;p&gt;$$
\textbf{X} = \textbf{ULV}^{T}
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚$\textbf{U} = (\textbf{u}&lt;em&gt;{1},\textbf{u}&lt;/em&gt;{2},&amp;hellip;,\textbf{u}&lt;em&gt;{q})$ã¯$NÃ—q$ç›´äº¤è¡Œåˆ—ã€$\textbf{L} = diag(l&lt;/em&gt;{1},l_{2},&amp;hellip;, l_{q})$ã¯$qÃ—q$ã®ç‰¹ç•°å€¤ã‚’å¯¾è§’æˆåˆ†ã«ä¸¦ã¹ãŸè¡Œåˆ—ã€$\textbf{V}$ã¯$qÃ—q$ç›´äº¤è¡Œåˆ—ã§ã™ã€‚ã“ã‚Œã‚’å…ˆã»ã©ã®å¼ã«ä»£å…¥ã™ã‚‹ã¨ã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} \textbf{K}^{-1}\textbf{X} &amp;amp;=&amp;amp; (\alpha^2\textbf{X}\textbf{X}^{T} + \beta^{-1}\textbf{I})^{-1}\textbf{X} \\ &amp;amp;=&amp;amp; \textbf{X}(\alpha^2\textbf{X}^{T}\textbf{X} + \beta^{-1}\textbf{I})^{-1} \\ &amp;amp;=&amp;amp; \textbf{ULV}^{T}(\alpha^2\textbf{VLU}^{T}\textbf{ULV}^{T} + \beta^{-1}\textbf{I})^{-1} \\ &amp;amp;=&amp;amp; \textbf{ULV}^{T}\textbf{V}(\alpha^2\textbf{LU}^{T}\textbf{UL} + \beta^{-1}\textbf{I}^{-1})\textbf{V}^{T} \\ &amp;amp;=&amp;amp; \textbf{UL}(\alpha^2\textbf{L}^{2} + \beta^{-1}\textbf{I})^{-1}\textbf{V}^{T} \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ãªã®ã§ã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} \displaystyle \frac{1}{D}\textbf{Y}\textbf{Y}^{T}\textbf{UL}(\alpha^2\textbf{L}^{2} + \beta^{-1}\textbf{I})^{-1})\textbf{V}^{T} &amp;amp;=&amp;amp; \textbf{ULV}^{T}\\ \displaystyle \textbf{Y}\textbf{Y}^{T}\textbf{UL} &amp;amp;=&amp;amp; D\textbf{U}(\alpha^2\textbf{L}^{2} + \beta^{-1}\textbf{I})^{-1}\textbf{L} \\ \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚$l_{j}$ãŒ0ã§ãªã‘ã‚Œã°ã€$\textbf{Y}\textbf{Y}^{T}\textbf{u}_{j} = D(\alpha^2 l_{j}^{2} + \beta^{-1})\textbf{u}_{j}$ã¨ãªã‚Šã€$\textbf{U}$ã®ãã‚Œãã‚Œã®åˆ—ã¯$\textbf{Y}\textbf{Y}^{T}$ã®å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«ã§ã‚ã‚Šã€å¯¾å¿œã™ã‚‹å›ºæœ‰å€¤$\lambda_{j}$ã¯$D(\alpha^2 l_{j}^{2} + \beta^{-1})$ã¨ãªã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€æœªçŸ¥ã§ã‚ã£ãŸ$X=ULV$ãŒå®Ÿã¯$\textbf{Y}\textbf{Y}^{T}$ã®å›ºæœ‰å€¤å•é¡Œã‹ã‚‰æ±‚ã‚ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã¨ã„ã†ã‚ã‘ã§ã™ã€‚$l_{j}$ã¯ä¸Šå¼ã‚’åˆ©ç”¨ã—ã¦ã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle l_{j} = (\frac{\lambda_{j}}{D\alpha^2} - \frac{1}{\beta\alpha^2})^{1/2}
$$&lt;/p&gt;
&lt;p&gt;ã¨$\textbf{Y}\textbf{Y}^{T}$ã®å›ºæœ‰å€¤$\lambda_{j}$ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰æ±‚ã‚ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã‚ˆã£ã¦ã€$X=ULV$ã¯&lt;/p&gt;
&lt;p&gt;$$
\textbf{X} = \textbf{U}_{q}\textbf{L}\textbf{V}^{T}
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$\textbf{U}_{q}$ã¯$\textbf{Y}\textbf{Y}^{T}$ã®å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«ã‚’$q$å€‹å–ã‚Šå‡ºã—ãŸã‚‚ã®ã§ã™ã€‚$\beta$ãŒé™ã‚Šãªãå¤§ãã‘ã‚Œã°ï¼ˆ=è¦³æ¸¬èª¤å·®ãŒé™ã‚Šãªãå°ã•ã‘ã‚Œã°ï¼‰é€šå¸¸ã®PCAã¨ä¸€è‡´ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸ŠãŒPPCAã§ã™ã€‚GPLVMã¯PPCAã§ç¢ºç‡ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦æƒ³å®šã—ã¦ã„ãŸä»¥ä¸‹ã®ãƒ¢ãƒ‡ãƒ«ã‚’æ‹¡å¼µã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\textbf{y}&lt;em&gt;{n} = \textbf{W}^{T}\textbf{x}&lt;/em&gt;{n} + \epsilon_{n}
$$&lt;/p&gt;
&lt;p&gt;å…·ä½“çš„ã«ã¯ã€é€šå¸¸ã®ã‚¬ã‚¦ã‚¹éç¨‹ã¨åŒæ§˜ã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \textbf{y}&lt;em&gt;{n}  = \textbf{W}^{T}\phi(\textbf{x}&lt;/em&gt;{n})+ \epsilon_{n}
$$&lt;/p&gt;
&lt;p&gt;ã¨ã„ã†é¢¨ã«åŸºåº•é–¢æ•°$\phi(\textbf{x}&lt;em&gt;{n})$ã‚’ã‹ã¾ã›ã¦æ‹¡å¼µã—ã¾ã™ã€‚$\phi(ãƒ»)$ã¯å¹³å‡$\textbf{0}$ã€åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—$\textbf{K}&lt;/em&gt;{\textbf{x}}$ã®ã‚¬ã‚¦ã‚¹éç¨‹ã¨ä»®å®šã—ã¾ã™ã€‚åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—$\textbf{K}_{\textbf{x}}$ã¯&lt;/p&gt;
&lt;p&gt;$$
\textbf{K}_{\textbf{x}} = \alpha^2\phi(\textbf{x})\phi(\textbf{x})^T
$$&lt;/p&gt;
&lt;p&gt;ã§ã‚ã‚Šã€å…¥åŠ›ãƒ™ã‚¯ãƒˆãƒ«$\textbf{X}$ã‚’$\phi(\textbf{ãƒ»})$ã§éç·šå½¢å¤‰æ›ã—ãŸç‰¹å¾´é‡$\phi(\textbf{x})$ãŒè¿‘ã„ã»ã©ã€å‡ºåŠ›å€¤$\textbf{Y}$ã‚‚è¿‘ããªã‚Šã‚„ã™ã„ã¨ã„ã†æ€§è³ªãŒã‚ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚GPLVMã§ã¯ã“ã®æ€§è³ªã‚’é€†ã«åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€å‡ºåŠ›å€¤$Y_i$ã¨$Y_j$ãŒè¿‘ã„â†’$\phi(\textbf{x}&lt;em&gt;i)$ã¨$\phi(\textbf{x}&lt;em&gt;j)$ãŒè¿‘ã„ï¼ˆå†…ç©ãŒå¤§ãã„ï¼‰â†’$\textbf{K}&lt;/em&gt;{x,ij}$ãŒå¤§ãã„â†’è¦³æ¸¬ä¸å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿$X&lt;/em&gt;{i}$ã¨$X_{j}$ã¯è¿‘ã„å€¤ï¼ˆoråŒã˜ã‚ˆã†ãªãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ã‚’ã¨ã‚‹ã€‚
ã“ã®è­°è«–ã‹ã‚‰ã‚‚ã‚ã‹ã‚‹ã‚ˆã†ã«ã€$\textbf{K}_{\textbf{x}}$ã¯å…¥åŠ›ãƒ™ã‚¯ãƒˆãƒ«$\textbf{X}$ãã‚Œãã‚Œã®è·é›¢ã‚’è¡¨ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã®è¨ˆç®—ã«ã¯å…¥åŠ›ãƒ™ã‚¯ãƒˆãƒ«$\textbf{X}$ã‚’åŸºåº•é–¢æ•°$\phi(\textbf{ãƒ»})$ã§éç·šå½¢å¤‰æ›ã—ãŸå¾Œã€å†…ç©ã‚’æ±‚ã‚ã‚‹ã¨ã„ã£ãŸã“ã¨ã‚’ã™ã‚‹å¿…è¦ã¯ãªãã€ã‚«ãƒ¼ãƒãƒ«é–¢æ•°ã‚’è¨ˆç®—ã™ã‚‹ã®ã¿ã§OKã§ã™ã€‚ä»Šå›ã¯ç‹é“ä¸­ã®ç‹é“RBFã‚«ãƒ¼ãƒãƒ«ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã®ã§ã€ã“ã‚Œã‚’ä¾‹èª¬æ˜ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;RBFã‚«ãƒ¼ãƒãƒ«ï¼ˆã‚¹ã‚«ãƒ©ãƒ¼ã«å¯¾ã™ã‚‹ï¼‰
$$
\theta_{1}\exp(-\frac{1}{\theta_{2}}(x-x^T)^2)
$$&lt;/p&gt;
&lt;p&gt;ã“ã®RBFã‚«ãƒ¼ãƒãƒ«ã¯ä»¥ä¸‹ã®åŸºåº•é–¢æ•°ã¨å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\phi(x)_h = \tau\exp(-\frac{1}{r}(x-h)^2)
$$&lt;/p&gt;
&lt;p&gt;ä¾‹ãˆã°ã€ã“ã®åŸºåº•é–¢æ•°ã§å…¥åŠ›$x$ã‚’å¤‰æ›ã—ãŸã‚‚ã®ã‚’$2H^2+1$å€‹ä¸¦ã¹ãŸé–¢æ•°ã‚’&lt;/p&gt;
&lt;p&gt;$$
\phi(x) = (\phi(x)&lt;em&gt;{-H^2}, &amp;hellip;, \phi(x)&lt;/em&gt;{0},&amp;hellip;,\phi(x)_{H^2})
$$&lt;/p&gt;
&lt;p&gt;å…¥åŠ›$x$ã®ç‰¹å¾´é‡ã ã¨ã™ã‚‹ã¨$x&#39;$ã¨ã®å…±åˆ†æ•£$K_{x}(x,x&#39;)$ã¯å†…ç©ã®å’Œãªã®ã§&lt;/p&gt;
&lt;p&gt;$$
K_{x}(x,x&#39;) = \sum_{h=-H^2}^{H^2}\phi_{h}(x)\phi_{h}(x&#39;)
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$H \to \infty$ã¨ã—ã€ã‚°ãƒªãƒƒãƒ‰ã‚’æ¥µé™ã¾ã§ç´°ã‹ãã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} K_{x}(x,x&#39;) &amp;amp;=&amp;amp; \lim_{H \to \infty}\sum_{h=-H^2}^{H^2}\phi_{h}(x)\phi_{h}(x&#39;) \\ &amp;amp;\to&amp;amp;\int_{-\infty}^{\infty}\tau\exp(-\frac{1}{r}(x-h)^2)\tau\exp(-\frac{1}{r}(x&#39;-h)^2)dh \\ &amp;amp;=&amp;amp; \tau^2 \int_{-\infty}^{\infty}\exp(-\frac{1}{r}\{(x-h)^2+(x&#39;-h)^2\})dh \\ &amp;amp;=&amp;amp; \tau^2 \int_{-\infty}^{\infty}\exp(-\frac{1}{r}\{2(h-\frac{x+x&#39;}{2})^2+\frac{1}{2}(x-x&#39;)^2\})dh \\ \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚$h$ã«é–¢ä¿‚ã®ãªã„éƒ¨åˆ†ã‚’ç©åˆ†ã®å¤–ã«å‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} &amp;amp;=&amp;amp; \tau^2 \int_{-\infty}^{\infty}\exp(-\frac{2}{r}(h-\frac{x+x&#39;}{2})^2)dh\exp(-\frac{1}{2r}(x-x&#39;)^2) \\ \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;æ®‹ã£ãŸç©åˆ†ã‚’è¦‹ã‚‹ã¨ã€æ­£è¦åˆ†å¸ƒã®æ­£è¦åŒ–å®šæ•°ã¨ç­‰ã—ã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} \int_{-\infty}^{\infty}\exp(-\frac{1}{2\sigma}(h-\frac{x+x&#39;}{2})^2)dh &amp;amp;=&amp;amp;  \int_{-\infty}^{\infty}\exp(-\frac{2}{r}(h-\frac{x+x&#39;}{2})^2)dh\\ \sigma &amp;amp;=&amp;amp; \frac{r}{4} \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚‹ã®ã§ã€ã‚¬ã‚¦ã‚¹ç©åˆ†ã®å…¬å¼ã‚’ç”¨ã„ã¦&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} &amp;amp;=&amp;amp; \tau^2 \sqrt{\frac{\pi r}{2}}\exp(-\frac{1}{2r}(x-x&#39;)^2)ã€€\\ &amp;amp;=&amp;amp; \theta_{1}\exp(-\frac{1}{\theta_{2}}(x-xâ€™)^2) \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã€RBFã‚«ãƒ¼ãƒãƒ«ã¨ç­‰ã—ããªã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã‚ˆã£ã¦ã€RBFã‚«ãƒ¼ãƒãƒ«ã§è¨ˆç®—ã—ãŸå…±åˆ†æ•£ã¯ä¸Šè¿°ã—ãŸåŸºåº•é–¢æ•°ã§å…¥åŠ›$x$ã‚’ç„¡é™æ¬¡å…ƒã¸æ‹¡å¼µã—ãŸç‰¹å¾´é‡ãƒ™ã‚¯ãƒˆãƒ«ã®å†…ç©ã‹ã‚‰è¨ˆç®—ã—ãŸå…±åˆ†æ•£ã¨åŒå€¤ã«ãªã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€å…¥åŠ›$x$ã¨$x&#39;$ã®ã‚¹ã‚«ãƒ©ãƒ¼ã®è¨ˆç®—ã®ã¿ã§$K_{x}(x,x&#39;)$ãŒã§ãã¦ã—ã¾ã†ã¨ã„ã†å¤¢ã®ã‚ˆã†ãªè¨ˆç®—åŠ¹ç‡åŒ–ãŒå¯èƒ½ã«ãªã‚‹ã‚ã‘ã§ã™ã€‚ç„¡é™æ¬¡å…ƒç‰¹å¾´é‡ãƒ™ã‚¯ãƒˆãƒ«ã®å›å¸°å•é¡Œãªã‚“ã¦æ™®é€šè¨ˆç®—ã§ãã¾ã›ã‚“ã‹ã‚‰ã­ã€‚ã€‚ã€‚ã‚«ãƒ¼ãƒãƒ«é–¢æ•°ã¯å‰å¤§ã§ã™ã€‚
å‰ã®è¨˜äº‹ã«ã‚‚è¼‰ã›ã¾ã—ãŸãŒã€RBFã‚«ãƒ¼ãƒãƒ«ã§åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’è¨ˆç®—ã—ãŸã‚¬ã‚¦ã‚¹éç¨‹ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‘ã‚¹ã¯ä»¥ä¸‹é€šã‚Šã§ã™ï¼ˆ$\theta_1=1,\theta_2=0.5$ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Define Kernel function&lt;/span&gt;
Kernel_Mat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(X,sigma,beta){
  N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(X)
  K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,N,N)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N) {
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N) {
      &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(i&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;k) kdelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; else kdelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
      K[i,k] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K[k,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigma^2)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; beta^{&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;}&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;kdelta
    }
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(K)
}

N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# max value of X&lt;/span&gt;
M &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# sample size&lt;/span&gt;
X &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N,length&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;M),M,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# create X&lt;/span&gt;
testK &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Kernel_Mat&lt;/span&gt;(X,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1e+18&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# calc kernel matrix&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)

P &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# num of sample path&lt;/span&gt;
Y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,M,P) &lt;span style=&#34;color:#75715e&#34;&gt;# define Y&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;P){
  Y[,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mvrnorm&lt;/span&gt;(n&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,M),testK) &lt;span style=&#34;color:#75715e&#34;&gt;# sample Y&lt;/span&gt;
}

&lt;span style=&#34;color:#75715e&#34;&gt;# Plot&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;matplot&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Y,type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;l&amp;#34;&lt;/span&gt;,lwd &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post8/index_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;éå¸¸ã«æ»‘ã‚‰ã‹ãªé–¢æ•°ã¨ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚RBFã®ã»ã‹ã«ã‚‚ã‚«ãƒ¼ãƒãƒ«é–¢æ•°ã¯å­˜åœ¨ã—ã¾ã™ã€‚ã‚«ãƒ¼ãƒãƒ«é–¢æ•°ã‚’å¤‰ãˆã‚‹ã¨åŸºåº•é–¢æ•°ãŒå¤‰ã‚ã‚Šã¾ã™ã‹ã‚‰ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‘ã‚¹ã¯å¤§ããå¤‰ã‚ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;GPLVMã®æ¨å®šæ–¹æ³•ã«è©±ã‚’é€²ã‚ã¾ã—ã‚‡ã†ã€‚PPCAã®æ™‚ã¨åŒã˜ãã€ä»¥ä¸‹ã®å°¤åº¦é–¢æ•°ã‚’æœ€å¤§åŒ–ã™ã‚‹è¦³æ¸¬ä¸èƒ½ãªå…¥åŠ›$x$ã‚’æ¨å®šå€¤ã¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle L = - \frac{DN}{2}\ln{2\pi} - \frac{1}{2}\ln{|\textbf{K}|} - \frac{1}{2}\textbf{tr}(\textbf{K}^{-1}\textbf{YY}^{T})
$$&lt;/p&gt;
&lt;p&gt;ãŸã ã€PPCAã¨ã¯ç•°ãªã‚Šã€ãã®å€¤ã¯è§£æçš„ã«æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚å°¤åº¦é–¢æ•°ã®å°é–¢æ•°ã¯ä»Šã‚„è¤‡é›‘ãªé–¢æ•°ã§ã‚ã‚Šã€å±•é–‹ã™ã‚‹ã“ã¨ãŒã§ããªã„ã‹ã‚‰ã§ã™ã€‚ã‚ˆã£ã¦ã€å…±å½¹å‹¾é…æ³•ã‚’ç”¨ã„ã¦æ•°å€¤çš„ã«è¨ˆç®—ã™ã‚‹ã®ãŒä¸»æµãªã‚ˆã†ã§ã™ï¼ˆè‡ªåˆ†ã¯æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã§å®Ÿè£…ï¼‰ã€‚è§£æçš„ã€æ•°å€¤çš„ã®ã©ã¡ã‚‰ã«ã›ã‚ˆå°é–¢æ•°ã‚’æ±‚ã‚ã¦ãŠãã“ã¨ã¯å¿…è¦ãªã®ã§ã€å°é–¢æ•°ã‚’æ±‚ã‚ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\frac{\partial L}{\partial \textbf{K}_x} = \frac{1}{2}(\textbf{K}_x^{-1}\textbf{Y}\textbf{Y}^T\textbf{K}_x^{-1}-D\textbf{K}_x^{-1})
$$&lt;/p&gt;
&lt;p&gt;ãªã®ã§ã€ãƒã‚§ãƒ¼ãƒ³ãƒ«ãƒ¼ãƒ«ã‹ã‚‰&lt;/p&gt;
&lt;p&gt;$$
\frac{\partial L}{\partial \textbf{x}} = \frac{\partial L}{\partial \textbf{K}_x}\frac{\partial \textbf{K}_x}{\partial \textbf{x}}
$$&lt;/p&gt;
&lt;p&gt;ãªã®ã§ã€ã‚«ãƒ¼ãƒãƒ«é–¢æ•°ã‚’æ±ºã‚ã€$\textbf{x}$ã«åˆæœŸå€¤ã‚’ä¸ãˆã¦ã‚„ã‚Œã°å‹¾é…æ³•ã«ã‚ˆã£ã¦å°¤åº¦$L$ãŒæœ€å¤§ã¨ãªã‚‹ç‚¹ã‚’æ¢ç´¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»Šå›ä½¿ç”¨ã™ã‚‹RBFã‚«ãƒ¼ãƒãƒ«ã§$\frac{\partial \textbf{K}&lt;em&gt;x}{\partial x&lt;/em&gt;{nj}}$ã‚’è¨ˆç®—ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray*} \frac{\partial \textbf{K}_x(\textbf{x}_n,\textbf{x}_n&#39;)}{x_{nj}}&amp;amp;=&amp;amp;\frac{\partial\theta_{1}\exp(-\frac{|\textbf{x}_n-\textbf{x}_n&#39;|^2}{\theta_{2}})}{\partial x_{nk}} \\ &amp;amp;=&amp;amp; \frac{\partial\theta_{1}\exp(-\frac{(\textbf{x}_n-\textbf{x}_n&#39;)^T(\textbf{x}_n-\textbf{x}_n&#39;)}{\theta_{2}})}{\partial x_{nk}} \\ &amp;amp;=&amp;amp; \frac{\partial\theta_{1}\exp(-\frac{-(\textbf{x}_n^T\textbf{x}_n-2\textbf{x}_n&#39;^T\textbf{x}_n+\textbf{x}_n&#39;^T\textbf{x}_n&#39;)}{\theta_{2}})}{\partial x_{nk}} \\ &amp;amp;=&amp;amp; -2\textbf{K}_x(\textbf{x}_n\textbf{x}_n&#39;)\frac{(x_{nj}-x_{n&#39;j})}{\theta_2} \end{eqnarray*}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;&lt;code&gt;\(j\)&lt;/code&gt;ç•ªç›®ã®æ½œåœ¨å¤‰æ•°ã®$n$ç•ªç›®ã®ã‚µãƒ³ãƒ—ãƒ«ãã‚Œãã‚Œã«å°é–¢æ•°ã‚’è¨ˆç®—ã—ã€ãã‚Œã‚’åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã¨åŒã˜è¡Œåˆ—ã«æ•´ç†ã—ãŸã‚‚ã®ã¨$\frac{\partial L}{\partial \textbf{K}_x}$ã¨ã®è¦ç´ ã”ã¨ã®ç©ã‚’è¶³ã—åˆã‚ã›ãŸã‚‚ã®ãŒå‹¾é…ã¨ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-rã§ã®å®Ÿè£…&#34;&gt;3. Rã§ã®å®Ÿè£…&lt;/h2&gt;
&lt;p&gt;GPLVMã‚’&lt;code&gt;R&lt;/code&gt;ã§å®Ÿè£…ã—ã¾ã™ã€‚ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ä»¥å‰giannoneã®è¨˜äº‹ã§ä½¿ç”¨ã—ãŸã‚‚ã®ã¨åŒã˜ã‚‚ã®ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;ESTIMATE_GPLVM &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(Y,P,sigma){
  &lt;span style=&#34;color:#75715e&#34;&gt;# 1. Set initial value&lt;/span&gt;
  Y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(Y)
  eigenvector &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;eigen&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cov&lt;/span&gt;(Y))&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;vectors
  X &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; Y&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;eigenvector[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;P] &lt;span style=&#34;color:#75715e&#34;&gt;# initial value&lt;/span&gt;
  N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(Y) &lt;span style=&#34;color:#75715e&#34;&gt;# Sample Size&lt;/span&gt;
  D &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(Y) &lt;span style=&#34;color:#75715e&#34;&gt;# Dimention of dataset&lt;/span&gt;
  X0 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;as.vector&lt;/span&gt;(X))
  sigma &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;var&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(Y,&lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(Y)[1]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(Y)[2],&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 2. Define log likelihood function&lt;/span&gt;
  loglik &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(X0,Y,N,P,D,beta,sigma){
    X &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(X0,N,P)
    K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,N,N)
    scale &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sqrt&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;apply&lt;/span&gt;(X, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, max) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;apply&lt;/span&gt;(X, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, min))^2)))
    X &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; X&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;scale
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N) {
      &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N) {
         &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(i&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;k) kdelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; else kdelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
         K[i,k] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K[k,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sigma&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; beta&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;kdelta &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; beta&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)
       }
     }
 
    L &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; D&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;N&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;pi&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; D&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;det&lt;/span&gt;(K)) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(K)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;Y&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(Y))) &lt;span style=&#34;color:#75715e&#34;&gt;#loglikelihood&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(L)
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 3. Define derivatives of log likelihood function&lt;/span&gt;
  dloglik &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(X0,P,D,N,Y,beta,sigma){
    X &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(X0,N,P)
    K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,N,N)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N) {
      &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N) {
        &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(i&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;k) kdelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; else kdelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
        K[i,k] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K[k,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; beta&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;kdelta &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; beta&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)
      }
    }
    invK &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(K)
    dLdK &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; invK&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;Y&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(Y)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;invK &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; D&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;invK
    dLdx &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,N,P)
    
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(j in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;P){
      &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N){
        dKdx &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,N,N)
        &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N){
          dKdx[i,k] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dKdx[k,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,]))&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;((X[i,j]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,j])&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;)
        }
        dLdx[i,j] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(dLdK&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;dKdx)
      }
    }
    
    &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(dLdx)
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 4. Optimization&lt;/span&gt;
  res &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;optim&lt;/span&gt;(X0, loglik, dloglik, Y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Y, N&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;N, P&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;P, D&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;D, beta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;), sigma &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sigma,
               method &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;BFGS&amp;#34;&lt;/span&gt;, control &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(fnscale &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,trace&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;,maxit&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;10000&lt;/span&gt;))
  output &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(res&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;par,N,P)
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(output,res,P)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;output&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;res&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;P&amp;#34;&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}

GPLVM_SELECT &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(Y){
  D &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(Y)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringr)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;D){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
      result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ESTIMATE_GPLVM&lt;/span&gt;(Y,i)
      P &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
      &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;STEP&amp;#34;&lt;/span&gt;, i, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; loglikelihood &amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;res&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;value)))
    }else{
      temp &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ESTIMATE_GPLVM&lt;/span&gt;(Y,i)
      &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;STEP&amp;#34;&lt;/span&gt;, i, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; loglikelihood &amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(temp&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;res&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;value)))
      &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;res&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;value &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; temp&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;res&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;value){
        result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; temp
        P &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; i
      }
    }
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;The optimal number of X is &amp;#34;&lt;/span&gt;, P))
  &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loglikelihood &amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;res&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;value)))
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}

result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ESTIMATE_GPLVM&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(Y),&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## initial  value 1123.451566 
## final  value 1111.732375 
## converged
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(tidyverse)

&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gather&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;as.data.frame&lt;/span&gt;(result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;output),key &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; name,value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; value),
       &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(dataset1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication,&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;),y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;value,colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;name)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;(size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;xlab&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Date&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;ggtitle&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;5 economic factors&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post8/index_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(xts)
X.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;output,order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dataset1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication)
X.q.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;apply.quarterly&lt;/span&gt;(X.xts,mean)
X.3m.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; X.xts&lt;span style=&#34;color:#a6e22e&#34;&gt;[endpoints&lt;/span&gt;(X.xts,on&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;quarters&amp;#34;&lt;/span&gt;),]

&lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;months&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(X.q.xts)&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(X.q.xts)]) &lt;span style=&#34;color:#f92672&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;9æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;12æœˆ&amp;#34;&lt;/span&gt;)){
} else X.q.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; X.q.xts[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(X.q.xts),]
&lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;months&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(X.3m.xts)&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(X.3m.xts)]) &lt;span style=&#34;color:#f92672&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;9æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;12æœˆ&amp;#34;&lt;/span&gt;)){
} else X.3m.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; X.3m.xts[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(X.3m.xts),]

&lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(X.xts) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor2&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor3&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor4&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor5&amp;#34;&lt;/span&gt;) 

GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;months&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
GDP.q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; GDP[GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(X.q.xts)[1] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(X.q.xts)&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(X.q.xts)],]

rg &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lm&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(GDP.q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;GDP)&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;X.q.xts[&lt;span style=&#34;color:#ae81ff&#34;&gt;-54&lt;/span&gt;])
rg2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lm&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(GDP.q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;GDP)&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;X.3m.xts[&lt;span style=&#34;color:#ae81ff&#34;&gt;-54&lt;/span&gt;])

&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(rg)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## Call:
## lm(formula = scale(GDP.q$GDP) ~ X.q.xts[-54])
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.48942 -0.13666  0.03985  0.14338  0.28562 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&amp;gt;|t|)    
## (Intercept)      0.02841    0.02795   1.017   0.3146    
## X.q.xts[-54]X.1 -0.31431    0.01090 -28.841  &amp;lt; 2e-16 ***
## X.q.xts[-54]X.2 -0.19397    0.01247 -15.559  &amp;lt; 2e-16 ***
## X.q.xts[-54]X.3  0.03879    0.01880   2.063   0.0447 *  
## X.q.xts[-54]X.4 -0.31876    0.03288  -9.696 8.60e-13 ***
## X.q.xts[-54]X.5 -0.21523    0.03486  -6.175 1.46e-07 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.2033 on 47 degrees of freedom
## Multiple R-squared:  0.9626,	Adjusted R-squared:  0.9587 
## F-statistic: 242.1 on 5 and 47 DF,  p-value: &amp;lt; 2.2e-16
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(rg2)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## Call:
## lm(formula = scale(GDP.q$GDP) ~ X.3m.xts[-54])
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.71694 -0.16540  0.04863  0.20132  0.79584 
## 
## Coefficients:
##                Estimate Std. Error t value Pr(&amp;gt;|t|)    
## (Intercept)     0.06106    0.04843   1.261   0.2136    
## X.3m.xts[-54]1 -0.30018    0.01593 -18.843  &amp;lt; 2e-16 ***
## X.3m.xts[-54]2 -0.18521    0.01859  -9.962 3.62e-13 ***
## X.3m.xts[-54]3  0.05174    0.02803   1.846   0.0712 .  
## X.3m.xts[-54]4 -0.29361    0.04235  -6.933 1.03e-08 ***
## X.3m.xts[-54]5 -0.10650    0.04187  -2.544   0.0143 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.3039 on 47 degrees of freedom
## Multiple R-squared:  0.9165,	Adjusted R-squared:  0.9076 
## F-statistic: 103.2 on 5 and 47 DF,  p-value: &amp;lt; 2.2e-16
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ±ºå®šä¿‚æ•°ãŒå¤§å¹…ã«æ”¹å–„ã—ã¾ã—ãŸã€‚
3ãƒ¶æœˆã®å¹³å‡ã‚’ã¨ã£ãŸãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã®æ–¹ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã•ãã†ãªã®ã§ã€ã“ã¡ã‚‰ã§å®Ÿéš›ã®GDPã¨äºˆæ¸¬å€¤ã®ãƒ—ãƒ­ãƒƒãƒˆã‚’è¡Œã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gather&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(fit&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;rg&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;fitted.values,actual&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(GDP.q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;GDP),Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;GDP.q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication),key,value,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Date),&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;value,x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Date,colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;key)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;(size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;ggtitle&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fit v.s. actual GDP&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post8/index_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã„ã‹ãŒã§ã—ã‚‡ã†ã‹ã€‚å€‹äººçš„ã«ã¯ã‹ãªã‚Šãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã§ãã¦ã„ã‚‹å°è±¡ãŒã‚ã‚Šã¾ã™ï¼ˆã‚‚ã¯ã‚„çµŒæ¸ˆç†è«–ãªã©ä¸è¦ãªã®ã§ã—ã‚‡ã†ã‹ï¼‰ã€‚ãŸã ã€æœ€ã‚‚æ–°ã—ã„å€¤ã‚’é™¤ã„ã¦ã¯æœªæ¥ã®å€¤ãŒæƒ…å ±é‡ã¨ã—ã¦åŠ å‘³ã•ã‚ŒãŸä¸Šã§æ¨è¨ˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã‹ã‚‰ã€ãƒ•ã‚§ã‚¢ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ­£ã—ãäºˆæ¸¬èƒ½åŠ›ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã«ã¯å››åŠæœŸã”ã¨ã«é€æ¬¡çš„ã«å›å¸°ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã¨ã„ã†ã‚ã‘ã§ã€ã‚¢ã‚¦ãƒˆã‚µãƒ³ãƒ—ãƒ«ã®äºˆæ¸¬åŠ›ãŒã©ã‚Œã»ã©ã‚ã‚‹ã®ã‹ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã¾ãšã€2005å¹´4æœˆã‹ã‚‰2007å¹´3æœˆã¾ã§ã®æœˆæ¬¡çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã§ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’è¨ˆç®—ã—ã€ãƒ‡ãƒ¼ã‚¿é »åº¦ã‚’å››åŠæœŸã«é›†ç´„ã—ã¾ã™ã€‚ãã—ã¦ã€2007å¹´1Qã®ãƒ‡ãƒ¼ã‚¿ã‚’é™¤ã„ã¦ã€GDPã«å›å¸°ã—ã¾ã™ã€‚å›å¸°ã—ãŸãƒ¢ãƒ‡ãƒ«ã®ä¿‚æ•°ã‚’ç”¨ã„ã¦ã€2007å¹´1Qã®ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã§åŒæ™‚ç‚¹ã®GDPã®äºˆæ¸¬å€¤ã‚’è¨ˆç®—ã—ã€ãã‚Œã‚’å®Ÿç¸¾å€¤ã¨æ¯”è¼ƒã—ã¾ã™ã€‚æ¬¡ã¯2005å¹´4æœˆã‹ã‚‰2007å¹´6æœˆã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ï½¥ï½¥ï½¥ã¨ã„ã†æ„Ÿã˜ã§ã‚¢ã‚¦ãƒˆã‚µãƒ³ãƒ—ãƒ«ã®äºˆæ¸¬ã‚’è¡Œã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(lubridate)
test_df &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;()
&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#a6e22e&#34;&gt;as.list&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2015-04-01&amp;#34;&lt;/span&gt;),&lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2019-03-01&amp;#34;&lt;/span&gt;),by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;quarter&amp;#34;&lt;/span&gt;))){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;day&lt;/span&gt;(i) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;days_in_month&lt;/span&gt;(i)
  traindata &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dataset1[dataset1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt;i,]
  X_train &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ESTIMATE_GPLVM&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(traindata[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-2&lt;/span&gt;]),&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
  X_train.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(X_train&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;output,order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; traindata&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication)
  X_train.q.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;apply.quarterly&lt;/span&gt;(X_train.xts,mean)
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;months&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(X_train.q.xts)&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(X_train.q.xts)]) &lt;span style=&#34;color:#f92672&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;6æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;9æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;12æœˆ&amp;#34;&lt;/span&gt;)){
  } else X_train.q.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; X_train.q.xts[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(X_train.q.xts),]
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(X_train.q.xts) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor2&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor3&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor4&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor5&amp;#34;&lt;/span&gt;) 

  GDP_train.q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(GDP[GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(X_train.q.xts)[1] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(X_train.q.xts)&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(X_train.q.xts)],&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;])

  rg_train &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lm&lt;/span&gt;(GDP_train.q[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(GDP_train.q)]&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;.,data&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X_train.q.xts[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(X_train.q.xts)])
  &lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(rg_train)
  test_df &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(test_df,&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;predict&lt;/span&gt;(rg_train,X_train.q.xts&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(X_train.q.xts)],interval &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;prediction&amp;#34;&lt;/span&gt;,level&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.90&lt;/span&gt;),GDP&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;GDP_train.q&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(GDP_train.q)]))
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¨ˆç®—ã§ãã¾ã—ãŸã€‚ã‚°ãƒ©ãƒ•ã«ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å…ˆã»ã©ã®ã‚°ãƒ©ãƒ•ã‚ˆã‚Šã¯ç²¾åº¦ãŒæ‚ªããªã‚Šã¾ã—ãŸã€‚ç‰¹ã«ãƒªãƒ¼ãƒãƒ³ã®å¾Œã¯äºˆæ¸¬å€¤ã®ä¿¡é ¼åŒºé–“ï¼ˆ90%ï¼‰ãŒå¤§ããæ‹¡å¤§ã—ã¦ãŠã‚Šã€ä¸ç¢ºå®Ÿæ€§ãŒå¢—å¤§ã—ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‹ã‚Šã¾ã™ã€‚2010å¹´ä»¥é™ã«é–¢ã—ã¦ã¯å®Ÿç¸¾å€¤ã¯ä¿¡é ¼åŒºé–“ã«ã»ã©å…¥ã£ã¦ãŠã‚Šã€äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦ã®æ€§èƒ½ã¯ã¾ã‚ã¾ã‚ãªã®ã‹ãªã¨æ€ã„ã¾ã™ã€‚ãŸã ã€ãƒªãƒ¼ãƒãƒ³ã®ã‚ˆã†ãªé‡‘èå±æ©Ÿã‚‚ã‚ºãƒãƒƒã¨å½“ã¦ã‚‹ã¨ã“ã‚ã«ãƒ­ãƒãƒ³ãŒã‚ã‚‹ã¨æ€ã†ã®ã§å…ƒãƒ‡ãƒ¼ã‚¿ã®æ”¹å–„ã‚’å›³ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚ã“ã®è¨˜äº‹ã¯ã„ã£ãŸã‚“ã“ã“ã§çµ‚äº†ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gather&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(test_df,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(test_df))),,,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(lwr,upr,Date)),&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;value,x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Date,colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;key)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_ribbon&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(ymax&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;upr,ymin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;lwr,fill&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;band&amp;#34;&lt;/span&gt;),alpha&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.1&lt;/span&gt;,linetype&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blank&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;(size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;ggtitle&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;out-sample test&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post8/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Asset Allocation Modelã‚’Rã§çµ„ã‚“ã§ã¿ãŸã€‚</title>
      <link>/post/post2/</link>
      <pubDate>Sun, 17 Feb 2019 00:00:00 +0000</pubDate>
      <guid>/post/post2/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚å‹¤ã‚å…ˆã§ã€ã‚¢ã‚»ãƒƒãƒˆã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«é–¢ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã«å‚åŠ ã—ãŸã®ã§ã€ã“ã®åˆ†é‡ã¯å®Œå…¨ãªã‚‹å°‚é–€å¤–ã§ã™ãŒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã¯ã€æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª(minimum variance portfolio)ã‚’åŸºæœ¬ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã¨ã—ãŸã†ãˆã§ã€ãã®åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ï¼ˆäºˆæ¸¬å€¤ï¼‰ã‚’ã©ã®ã‚ˆã†ã«æ¨è¨ˆã™ã‚‹ã®ã‹ã¨ã„ã†ç‚¹ã«ã¤ã„ã¦å…ˆè¡Œç ”ç©¶ã‚’å‚è€ƒã«ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚ºã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚å…ˆè¡Œç ”ç©¶ã¯ä»¥ä¸‹ã®è«–æ–‡ã§ã™ï¼ˆã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚µãƒ¼ãƒã®ã‚¸ãƒ£ãƒ¼ãƒŠãƒ«ã§ã—ãŸï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2947643&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Asset Allocation with Correlation: A Composite Trade-Off&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;1-æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª&#34;&gt;1. æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª&lt;/h2&gt;
&lt;p&gt;æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®è©³ã—ã„èª¬æ˜ã¯ã“ã“ã§ã¯å‰²æ„›ã—ã¾ã™ãŒã€è¦ã¯å„è³‡ç”£ï¼ˆå†…æ ªã€å¤–æ ªã€å†…å‚µã€å¤–å‚µã€ã‚ªãƒ«ã‚¿ãƒŠï¼‰ã®ãƒªã‚¿ãƒ¼ãƒ³ã®å¹³å‡ã¨åˆ†æ•£ã‚’è¨ˆç®—ã—ã€ãã‚Œã‚‰ã‚’ç¸¦è»¸å¹³å‡å€¤ã€æ¨ªè»¸åˆ†æ•£ã®äºŒæ¬¡å¹³é¢ã«ãƒ—ãƒ­ãƒƒãƒˆã—ãŸã†ãˆã§ã€æŠ•è³‡å¯èƒ½ç¯„å›²ã‚’è¨ˆç®—ã—ã€ãã®é›†åˆã®ä¸­ã§æœ€ã‚‚åˆ†æ•£ãŒå°ã•ããªã‚‹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®äº‹ã‚‰ã—ã„ã§ã™ï¼ˆä¸‹å›³å‚ç…§ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://upload.wikimedia.org/wikipedia/commons/thumb/2/2d/Minimum_variance_flontier_of_MPT.svg/1280px-Minimum_variance_flontier_of_MPT.svg.png&#34; alt=&#34;minimum variance portfolio&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…ˆè¡Œç ”ç©¶ã®Carroll et. al. (2017)ã§ã¯ã€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;this paper focusses on minimum-variance portfolios requiring only estimates of asset covariance, hence bypassing the well-known problem of estimation error in forecasting expected asset returns.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã¨è¨˜è¼‰ã•ã‚Œã¦ãŠã‚Šã€ç¾çŠ¶ã§ã‚‚æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ã®æ¨è¨ˆã¯é›£ã—ãã€ãã‚Œã‚’å¿…è¦ã¨ã—ãªã„æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã¯æœ‰ç›Šã§å®Ÿè·µçš„ãªæ‰‹æ³•ã§ã‚ã‚‹ã¨ã„ãˆã¾ã™ã€‚æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®ç›®çš„é–¢æ•°ã¯ã€ãã®åã®é€šã‚Šã€Œåˆ†æ•£ã‚’æœ€å°åŒ–ã™ã‚‹ã“ã¨ã€ã§ã™ã€‚ä»Šã€å„è³‡ç”£ã®ãƒªã‚¿ãƒ¼ãƒ³ã‚’é›†ã‚ãŸãƒ™ã‚¯ãƒˆãƒ«ã‚’[tex:r]ã€å„è³‡ç”£ã®ä¿æœ‰ã‚¦ã‚§ã‚¤ãƒˆã‚’$\theta$ã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªãƒªã‚¿ãƒ¼ãƒ³ã‚’$R_{p}$ã§è¡¨ã™ã“ã¨ã«ã™ã‚‹ã¨ã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªå…¨ä½“ã®åˆ†æ•£$var(R_{p})$ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
var(R_{p}) = var(r^{T}\theta) = E( (r^{T}\theta)(r^{T}\theta)^{T}) = \theta^{T}\Sigma\theta
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§$Sigma$ã¯$r$ã®åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã§ã™ã€‚ã‚ˆã£ã¦ã€æœ€å°åŒ–å•é¡Œã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\min_{\theta}(\theta^{T}\Sigma\theta) \&lt;br&gt;
s.t 1^{T}\theta = 1
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã¯ã€ãƒ•ãƒ«ã‚¤ãƒ³ãƒ™ã‚¹ãƒˆãƒ¡ãƒ³ãƒˆã‚’åˆ¶ç´„æ¡ä»¶ã«åŠ ãˆã¦ã„ã¾ã™ã€‚ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥æœªå®šä¹—æ•°æ³•ã‚’ç”¨ã„ã¦ã“ã®å•é¡Œã‚’è§£ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°$L$ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
L = \theta^{T}\Sigma\theta + \lambda(1^{T}\theta - 1)
$$&lt;/p&gt;
&lt;p&gt;1éšã®æ¡ä»¶ã¯ã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle\frac{\partial L}{\partial \theta} = 2\Sigma\theta + 1\lambda = 0 \&lt;br&gt;
\displaystyle \frac{\partial L}{\partial \lambda} = 1^{T} \theta = 1
$$&lt;/p&gt;
&lt;p&gt;1æœ¬ç›®ã®å¼ã‚’$\theta$ã«ã¤ã„ã¦è§£ãã¨ã€&lt;/p&gt;
&lt;p&gt;$$
\theta = \Sigma^{-1}1\lambda^{*}
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$\lambda^{&lt;em&gt;}=-1/2\lambda$ã§ã™ã€‚ã“ã‚Œã‚’2æœ¬ç›®ã®å¼ã«ä»£å…¥ã—ã€$\lambda^{&lt;/em&gt;}$ã«ã¤ã„ã¦è§£ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
1^{T}\Sigma1\lambda^{&lt;em&gt;} = 1 \&lt;br&gt;
\displaystyle \lambda^{&lt;/em&gt;} = \frac{1}{1^{T}\Sigma^{-1}1}
$$&lt;/p&gt;
&lt;p&gt;&lt;code&gt;\(\theta = \Sigma^{-1}1\lambda^{*}\)&lt;/code&gt;ã ã£ãŸã®ã§ã€$\lambda^{*}$ã‚’æ¶ˆå»ã™ã‚‹ã¨ã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \theta_{gmv} = \frac{\Sigma^{-1}1}{1^{T}\Sigma^{-1}1}
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã€æœ€é©ãªã‚¦ã‚§ã‚¤ãƒˆã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã¨ã‚Šã‚ãˆãšã€ã“ã‚Œã‚’Rã§å®Ÿè£…ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;gmv &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(r_dat,r_cov){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)
  i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(r_dat),&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
  r_weight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(r_cov)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;i)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(i)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(r_cov)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;i)
  wr_dat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r_dat&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(r_weight)
  portfolio &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;apply&lt;/span&gt;(wr_dat,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,sum)
  pr_dat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(wr_dat,portfolio)
  sd &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sd&lt;/span&gt;(portfolio)
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(r_weight,pr_dat,sd)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;return&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;portfolio risk&amp;#34;&lt;/span&gt;) 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}

nlgmv &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(r_dat,r_cov){
  qp.out &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;solve.QP&lt;/span&gt;(Dmat&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;r_cov,dvec&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(r_dat)),Amat&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(r_dat)),&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(r_dat))),
           bvec&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(r_dat))),meq&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
  r_weight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; qp.out&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;solution
  wr_dat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r_dat&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;r_weight
  portfolio &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;apply&lt;/span&gt;(wr_dat,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,sum)
  pr_dat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(wr_dat,portfolio)
  sd &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sd&lt;/span&gt;(portfolio)
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(r_weight,pr_dat,sd)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;return&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;portfolio risk&amp;#34;&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…¥åŠ›ã¯å„è³‡ç”£ã®ãƒªã‚¿ãƒ¼ãƒ³ã¨åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã«ãªã£ã¦ã„ã¾ã™ã€‚å‡ºåŠ›ã¯ã‚¦ã‚§ã‚¤ãƒˆã€ãƒªã‚¿ãƒ¼ãƒ³ã€ãƒªã‚¹ã‚¯ã§ã™ã€‚&lt;code&gt;nlgmv&lt;/code&gt;ã¯æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®ç©ºå£²ã‚Šåˆ¶ç´„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ã€‚è§£æçš„ãªè§£ã¯å¾—ã‚‰ã‚Œãªã„ã®ã§ã€æ•°å€¤çš„ã«è²·ã„ã‚’æ±‚ã‚ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’ã©ã®ã‚ˆã†ã«æ±‚ã‚ã‚‹ã‹&#34;&gt;2. åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’ã©ã®ã‚ˆã†ã«æ±‚ã‚ã‚‹ã‹&lt;/h2&gt;
&lt;p&gt;æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®è¨ˆç®—å¼ã¯æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚æ¬¡ã¯ã€ãã®å…¥åŠ›ã§ã‚ã‚‹åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’ã©ã†ã‚„ã£ã¦æ±‚ã‚ã‚‹ã®ã‹ã«ã¤ã„ã¦åˆ†æã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ä¸€ç•ªåŸå§‹çš„ãªæ–¹æ³•ã¯ãã®æ™‚ç‚¹ä»¥å‰ã«åˆ©ç”¨å¯èƒ½ãªãƒªã‚¿ãƒ¼ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’æ¨™æœ¬ã¨ã—ã¦åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’æ±‚ã‚ã€ãã®å€¤ã‚’å›ºå®šã—ã¦æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚’æ±‚ã‚ã‚‹ã¨ã„ã†ãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‹ã¨æ€ã„ã¾ã™ï¼ˆã¤ã¾ã‚Šã‚¦ã‚§ã‚¤ãƒˆã‚‚å›ºå®šï¼‰ã€‚ãŸã ã€ã“ã‚Œã¯ã‚ãã¾ã§éå»ã®å¹³å‡å€¤ã‚’å°†æ¥ã®äºˆæƒ³å€¤ã«ä½¿ç”¨ã™ã‚‹ãŸã‚ã€ã„ã‚ã„ã‚å•é¡ŒãŒå‡ºã¦ãã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚å°‚é–€å¤–ã®ç§ãŒæ€ã„ã¤ãã‚‚ã®ã¨ã—ã¦ã¯ã€å‰æ—¥ã‚ã‚‹è³‡ç”£Aã®ãƒªã‚¿ãƒ¼ãƒ³ãŒå¤§ããä¸‹è½ã—ãŸã¨ã„ã†å ´é¢ã§æ˜æ—¥ã‚‚ã“ã®è³‡ç”£ã®åˆ†æ•£ã¯å¤§ãããªã‚‹ã“ã¨ãŒäºˆæƒ³ã•ã‚Œã‚‹ã«ã‚‚é–¢ã‚ã‚‰ãšã€å¹³å‡å€¤ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚æ˜¨æ—¥ã®åŠ¹æœãŒè–„ã‚ã‚‰ã‚Œã¦ã—ã¾ã†ã“ã¨ã§ã—ã‚‡ã†ã‹ã€‚ãã‚Œã«ã€ã‚¦ã‚§ã‚¤ãƒˆã‚’æœ€åˆã‹ã‚‰å¤‰æ›´ã—ãªã„ã¨ã„ã†ã®ã‚‚æ™‚é–“ãŒãŸã¤ã«ã¤ã‚Œã€æœ€é©ç‚¹ã‹ã‚‰é›¢ã‚Œã¦ã„ãæ°—ãŒã—ã¾ã™ã€‚ãŸã ã€ã§ã¯ã©ã†æ¨è¨ˆã™ã‚‹ã®ã‹ã¤ã„ã¦ã¯ã“ã®åˆ†é‡ã§ã‚‚è©¦è¡ŒéŒ¯èª¤ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚Carroll et. al. (2017)ã§ã‚‚ã€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The estimation of covariance matrices for portfolios with a large number of assets still remains a fundamental challenge in portfolio optimization.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã¨è¿°ã¹ã‚‰ã‚Œã¦ã„ã¾ã—ãŸã€‚ã“ã®è«–æ–‡ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦æ¨è¨ˆãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚ã„ãšã‚Œã‚‚ã€åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’æ™‚å¤‰ã¨ã—ã¦ã„ã‚‹ã¨ã“ã‚ã«ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;a-constant-conditional-correlation-ccc-model&#34;&gt;A. Constant conditional correlation (CCC) model&lt;/h3&gt;
&lt;p&gt;å…ƒè«–æ–‡ã¯&lt;a href=&#34;https://www.jstor.org/stable/2109358?read-now=1&amp;amp;seq=3#page_scan_tab_contents&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ã¾ãšã€åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã¨ç›¸é–¢è¡Œåˆ—ã®é–¢ä¿‚æ€§ã‹ã‚‰ã€$\Sigma_{t} = D_{t}R_{t}D_{t}$ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$R_{t}$ã¯ç›¸é–¢è¡Œåˆ—ã€$D_{t}$ã¯$diag(\sigma_{1,t},&amp;hellip;,\sigma_{N,t})$ã§å„è³‡ç”£$tt$æœŸã®æ¨™æº–åå·®$\sigma_{i,t}$ã‚’å¯¾è§’æˆåˆ†ã«ä¸¦ã¹ãŸè¡Œåˆ—ã§ã™ã€‚ã“ã“ã‹ã‚‰ã€$D_{t}$ã¨$R_{t}$ã‚’åˆ†ã‘ã¦æ¨è¨ˆã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã€$D_{t}$ã§ã™ãŒã€ã“ã¡ã‚‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå¤šå¤‰é‡GARCHãƒ¢ãƒ‡ãƒ«(1,1)ã§æ¨è¨ˆã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
r_{t} = \mu + u_{t} \&lt;br&gt;
u_{t} = \sigma_{t}\epsilon \&lt;br&gt;
\sigma_{t}^{2} = \alpha_{0} + \alpha_{1}u_{t-1}^{2} + \alpha_{2}\sigma_{t-1}^{2} \&lt;br&gt;
\epsilon_{t} = NID(0,1) \&lt;br&gt;
E(u_{t}|u_{t-1}) = 0
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\mu$ã¯ãƒªã‚¿ãƒ¼ãƒ³ã®æ¨™æœ¬å¹³å‡ã§ã™ã€‚$\alpha_{i}$ã¯æ¨å®šã™ã¹ããƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚$D_{t}$ã‚’GARCHã§æ¨è¨ˆã—ã¦ã„ã‚‹ã®ã§ã€ãƒªã‚¿ãƒ¼ãƒ³ã®åˆ†å¸ƒãŒæ­£è¦åˆ†å¸ƒã‚ˆã‚Šè£¾é‡ã®åšã„åˆ†å¸ƒã«å¾“ã„ã€ã¾ãŸãƒªã‚¿ãƒ¼ãƒ³ã®å¤‰åŒ–ã¯ä¸€å®šã§ã¯ãªãå‰æ—¥ã®åˆ†æ•£ã«ä¾å­˜ã™ã‚‹é–¢ä¿‚ã‚’ãƒ¢ãƒ‡ãƒ«åŒ–ã—ã¦ã„ã‚‹ã¨ã„ãˆã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ã¨ã‚Šã‚ãˆãšã“ã‚Œã§$D_{t}$ã®æ¨è¨ˆã¯ã§ããŸã¨ã„ã†ã“ã¨ã«ã—ã¾ã™ã€‚æ¬¡ã«$R_{t}$ã®æ¨è¨ˆã§ã™ãŒã€ã“ã®ãƒ¢ãƒ‡ãƒ«ã§ã¯ãƒªã‚¿ãƒ¼ãƒ³ã‚’æ¨™æœ¬ã¨ã—ã¦æ±‚ã‚ã‚‹ãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å–ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€$R_{t}$ã¯å®šæ•°ã§ã™ã€‚ã‚ˆã£ã¦ã€ãƒªã‚¿ãƒ¼ãƒ³å¤‰å‹•ã®å¤§ãã•ã¯æ™‚é–“ã«ã‚ˆã£ã¦å¤‰åŒ–ã™ã‚‹ãŒã€å„è³‡ç”£ã®ç›¸å¯¾çš„ãªé–¢ä¿‚æ€§ã¯ä¸å¤‰ã§ã‚ã‚‹ã¨ã„ã†ä»®å®šã‚’ç½®ã„ã¦ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;b-dynamic-conditional-correlation-dcc-model&#34;&gt;B. Dynamic Conditional Correlation (DCC) model&lt;/h3&gt;
&lt;p&gt;å…ƒè«–æ–‡ã¯&lt;a href=&#34;http://www.cass.city.ac.uk/__data/assets/pdf_file/0003/78960/Week7Engle_2002.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã¡ã‚‰ã®ãƒ¢ãƒ‡ãƒ«ã§ã¯ã€$D_{t}$ã‚’æ±‚ã‚ã‚‹ã¨ã“ã‚ã¾ã§ã¯â‘ ã¨åŒã˜ã§ã™ãŒã€[$R_{t}$ã®æ±‚ã‚æ–¹ãŒç•°ãªã£ã¦ãŠã‚Šã€ARMA(1,1)ã‚’ç”¨ã„ã¦æ¨è¨ˆã—ã¾ã™ã€‚ç›¸é–¢è¡Œåˆ—ã¯ã‚„ã¯ã‚Šå®šæ•°ã§ã¯ãªã„ã¨ã„ã†ã“ã¨ã§ã€$tex:t$æœŸã¾ã§ã«åˆ©ç”¨å¯èƒ½ãªãƒªã‚¿ãƒ¼ãƒ³ã‚’ç”¨ã„ã¦æ¨è¨ˆã‚’ã‹ã‘ã‚ˆã†ã¨ã„ã†ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ¢ãƒ‡ãƒ«ã®ç›¸é–¢è¡Œåˆ—$R_{t}$ã¯ã€&lt;/p&gt;
&lt;p&gt;$$
R_{t} = diag(Q_{t})^{-1/2}Q_{t}diag(Q_{t})^{-1/2}
$$&lt;/p&gt;
&lt;p&gt;ã§ã™ã€‚ã“ã“ã§ã€$Q_{t}$ã¯$t$æœŸã§ã®æ¡ä»¶ä»˜åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã§ä»¥ä¸‹ã®ã‚ˆã†ã«å®šå¼åŒ–ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
Q_{t} = \bar{Q}(1-a-b) + adiag(Q_{t-1})^{1/2}\epsilon_{i,t-1}\epsilon_{i,t-1}diag(Q_{t-1})^{1/2} + bQ_{t-1}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\bar{Q}$ã¯ãƒ’ã‚¹ãƒˆãƒªã‚«ãƒ«ãªæ–¹æ³•ã§è¨ˆç®—ã—ãŸåˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã§ã‚ã‚Šã€$a,b$ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™ã€‚ã“ã®æ–¹æ³•ã§ã¯ã€å…ˆã»ã©ã¨ã¯ç•°ãªã‚Šã€ãƒªã‚¿ãƒ¼ãƒ³å¤‰å‹•ã®å¤§ãã•ãŒæ™‚é–“ã«ã‚ˆã£ã¦å¤‰åŒ–ã™ã‚‹ã ã‘ã§ãªãã€å„è³‡ç”£ã®ç›¸å¯¾çš„ãªé–¢ä¿‚æ€§ã‚‚é€šæ™‚çš„ã«å¤‰åŒ–ã—ã¦ã„ãã¨ã„ã†ä»®å®šã‚’ç½®ã„ã¦ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚é‡‘èå±æ©Ÿæ™‚ã«ã¯å…¨è³‡ç”£ã®ãƒªã‚¿ãƒ¼ãƒ³ãŒä¸‹è½ã—ã€å„è³‡ç”£ã®ç›¸é–¢ãŒæ­£ã«ãªã‚‹äº‹è±¡ã‚‚è¦³æ¸¬ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€ã“ã®å®šå¼åŒ–ã¯é­…åŠ›çš„ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ãŒã§ãã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;c-dynamic-equicorrelation-deco-model&#34;&gt;C. Dynamic Equicorrelation (DECO) model&lt;/h3&gt;
&lt;p&gt;å…ƒè«–æ–‡ã¯&lt;a href=&#34;https://faculty.chicagobooth.edu/bryan.kelly/research/pdf/deco.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®è«–æ–‡ã¯ã¾ã ãã£ã¡ã‚Šèª­ã‚ã¦ã„ãªã„ã®ã§ã™ãŒã€ç›¸é–¢è¡Œåˆ—$R_{t}$ã®å®šç¾©ã‹ã‚‰&lt;/p&gt;
&lt;p&gt;$$
R_{t} = (1-\rho_{t})I_{N} + \rho_{t}1
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã“ã§ã€$\rho_{t}$ã¯ã‚¹ã‚«ãƒ©ãƒ¼ã§equicorrelationã®ç¨‹åº¦ã‚’è¡¨ã™ä¿‚æ•°ã§ã™ã€‚equicorrelationã¨ã¯å¹³å‡çš„ãªãƒšã‚¢ãƒ¯ã‚¤ã‚ºç›¸é–¢ã®äº‹ã§ã‚ã‚‹ã¨ç†è§£ã—ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã¯æ¬ æå€¤ãŒãªã‘ã‚Œã°æ™®é€šã®ç›¸é–¢ã¨å¤‰ã‚ã‚Šãªã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨ã€‚ãŸã ã€è³‡ç”£ãŒå¢—ãˆã‚Œã°ãã®ã‚ˆã†ãªå•é¡Œã«ã‚‚å¯¾å‡¦ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ãã®ç‚¹ã§ã¯ã‚ˆã„æ¨å®šé‡ã®ã‚ˆã†ã§ã™ã€‚$\rho_{t}$ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \rho_{t} = \frac{1}{N(N-1)}(\iota^{T}R_{t}^{DCC}\iota - N) = \frac{2}{N(N-1)}\sum_{i&amp;gt;j}\frac{q_{ij,t}}{\sqrt{q_{ii,t} q_{jj,t}}}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\iota$ã¯NÃ—1ãƒ™ã‚¯ãƒˆãƒ«ã§è¦ç´ ã¯å…¨ã¦1ã§ã™ã€‚ã¾ãŸã€$q_{ij,t}$ã¯$Q_{t}$ã®i,jè¦ç´ ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã•ã¦ã€åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã®ãƒ¢ãƒ‡ãƒ«åŒ–ãŒã§ããŸã¨ã“ã‚ã§ã€ã“ã“ã¾ã§ã‚’&lt;code&gt;R&lt;/code&gt;ã§å®Ÿè£…ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;carroll &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(r_dat,FLG){
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(rmgarch)
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(FLG &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;benchmark&amp;#34;&lt;/span&gt;){
    H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cov&lt;/span&gt;(r_dat)
  }else{
    &lt;span style=&#34;color:#75715e&#34;&gt;#1. define variables&lt;/span&gt;
    N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(r_dat) &lt;span style=&#34;color:#75715e&#34;&gt;# the number of assets&lt;/span&gt;
    
    &lt;span style=&#34;color:#75715e&#34;&gt;#2. estimate covariance matrix&lt;/span&gt;
    basic_garch &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ugarchspec&lt;/span&gt;(mean.model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(armaOrder &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;),include.mean&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), variance.model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(garchOrder &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;), model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;sGARCH&amp;#39;&lt;/span&gt;), distribution.model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;norm&amp;#39;&lt;/span&gt;)
    multi_garch &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;multispec&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;replicate&lt;/span&gt;(N, basic_garch))
    dcc_set &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dccspec&lt;/span&gt;(uspec &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; multi_garch, dccOrder &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;), distribution &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mvnorm&amp;#34;&lt;/span&gt;,model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCC&amp;#34;&lt;/span&gt;)
    fit_dcc_garch &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dccfit&lt;/span&gt;(dcc_set, data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; r_dat, fit.control &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(eval.se &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;))
    forecast_dcc_garch &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dccforecast&lt;/span&gt;(fit_dcc_garch)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(FLG &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CCC&amp;#34;&lt;/span&gt;){
      &lt;span style=&#34;color:#75715e&#34;&gt;#Constant conditional correlation (CCC) model&lt;/span&gt;
      D &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sigma&lt;/span&gt;(forecast_dcc_garch)
      R_ccc &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cor&lt;/span&gt;(r_dat)
      H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(D[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;R_ccc&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(D[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
      &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(H) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(r_dat)
      &lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(H) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(r_dat)
    }
    else{
      &lt;span style=&#34;color:#75715e&#34;&gt;#Dynamic Conditional Correlation (DCC) model&lt;/span&gt;
      H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rcov&lt;/span&gt;(forecast_dcc_garch)[[1]][,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
      &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(FLG &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DECO&amp;#34;&lt;/span&gt;){
        &lt;span style=&#34;color:#75715e&#34;&gt;#Dynamic Equicorrelation (DECO) model&lt;/span&gt;
        one &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N,N)
        iota &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N)
        Q_dcc &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rcor&lt;/span&gt;(forecast_dcc_garch,type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Q&amp;#34;&lt;/span&gt;)[[1]][,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
        rho &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.vector&lt;/span&gt;((N&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(N&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;))&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(iota)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;Q_dcc&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;iota&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;N))
        D &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sigma&lt;/span&gt;(forecast_dcc_garch)
        R_deco &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;rho)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N,N) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; rho&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;one
        H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(D[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;R_deco&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(D[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
        &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(H) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(r_dat)
        &lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(H) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(r_dat)
      }
    }
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(H)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ¬æ¥ã§ã‚ã‚Œã°ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ã¹ãã§ã¯ãªã„ã®ã§ã™ãŒã€ä»Šæ—¥ã¯ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚ºãªã®ã§æ¨è¨ˆçµæœã ã‘ã‚’è¿½ã„æ±‚ã‚ãŸã„ã¨æ€ã„ã¾ã™ã€‚GARCHã«ã¤ã„ã¦ã¯å†æ¥é€±ãã‚‰ã„ã«è¨˜äº‹ã‚’æ›¸ãäºˆå®šã§ã™ã€‚
ã“ã‚Œã§æº–å‚™ãŒã§ãã¾ã—ãŸã€‚ã“ã®é–¢æ•°ã«ãƒªã‚¿ãƒ¼ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚Œã¦ã€åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’è¨ˆç®—ã—ã€ãã‚Œã‚’ç”¨ã„ã¦æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚’è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã®åé›†&#34;&gt;3. ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã®åé›†&lt;/h2&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;(Introduction to Asset Allocation)[https://www.r-bloggers.com/introduction-to-asset-allocation/]&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ã—ãŸã®ã¯ã€ä»¥ä¸‹ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«é€£å‹•ã™ã‚‹ETF(iShares)ã®åŸºæº–ä¾¡é¡ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;S&amp;amp;P500&lt;/li&gt;
&lt;li&gt;NASDAQ100&lt;/li&gt;
&lt;li&gt;MSCI Emerging Markets&lt;/li&gt;
&lt;li&gt;Russell 2000&lt;/li&gt;
&lt;li&gt;MSCI EAFE&lt;/li&gt;
&lt;li&gt;US 20 Year Treasury(the Barclays Capital 20+ Year Treasury Index)&lt;/li&gt;
&lt;li&gt;U.S. Real Estate(the Dow Jones US Real Estate Index)&lt;/li&gt;
&lt;li&gt;gold bullion market&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã¾ãšã€ãƒ‡ãƒ¼ã‚¿é›†ã‚ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(quantmod)

&lt;span style=&#34;color:#75715e&#34;&gt;#**************************&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# â˜…8 ASSETS SIMULATION&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# SPY - S&amp;amp;P 500 &lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# QQQ - Nasdaq 100&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# EEM - Emerging Markets&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# IWM - Russell 2000&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# EFA - EAFE&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# TLT - 20 Year Treasury&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# IYR - U.S. Real Estate&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# GLD - Gold&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#**************************&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# load historical prices from Yahoo Finance&lt;/span&gt;
symbol.names &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;S&amp;amp;P 500&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Nasdaq 100&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Emerging Markets&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Russell 2000&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;EAFE&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;20 Year Treasury&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;U.S. Real Estate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Gold&amp;#34;&lt;/span&gt;)
symbols &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SPY&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;QQQ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;EEM&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;IWM&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;EFA&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;TLT&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;IYR&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GLD&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;getSymbols&lt;/span&gt;(symbols, from &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1980-01-01&amp;#39;&lt;/span&gt;, auto.assign &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;#gn dates for all symbols &amp;amp; convert to monthly&lt;/span&gt;
hist.prices &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(SPY,QQQ,EEM,IWM,EFA,TLT,IYR,GLD)
month.ends &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;endpoints&lt;/span&gt;(hist.prices, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;day&amp;#39;&lt;/span&gt;)
hist.prices &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Cl&lt;/span&gt;(hist.prices)[month.ends, ]
&lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(hist.prices) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; symbols

&lt;span style=&#34;color:#75715e&#34;&gt;# remove any missing data&lt;/span&gt;
hist.prices &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;na.omit&lt;/span&gt;(hist.prices[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;1995::&amp;#39;&lt;/span&gt;])

&lt;span style=&#34;color:#75715e&#34;&gt;# compute simple returns&lt;/span&gt;
hist.returns &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;na.omit&lt;/span&gt;( &lt;span style=&#34;color:#a6e22e&#34;&gt;ROC&lt;/span&gt;(hist.prices, type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;discrete&amp;#39;&lt;/span&gt;) )

&lt;span style=&#34;color:#75715e&#34;&gt;# compute historical returns, risk, and correlation&lt;/span&gt;
ia &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;()
ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;expected.return &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;apply&lt;/span&gt;(hist.returns, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, mean, na.rm &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; T)
ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;risk &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;apply&lt;/span&gt;(hist.returns, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, sd, na.rm &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; T)
ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;correlation &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cor&lt;/span&gt;(hist.returns, use &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;complete.obs&amp;#39;&lt;/span&gt;, method &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;pearson&amp;#39;&lt;/span&gt;)

ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;symbols &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; symbols
ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;symbol.names &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; symbol.names
ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;n &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(symbols)
ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;hist.returns &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; hist.returns

&lt;span style=&#34;color:#75715e&#34;&gt;# convert to annual, year = 12 months&lt;/span&gt;
annual.factor &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;
ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;expected.return &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; annual.factor &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;expected.return
ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;risk &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sqrt&lt;/span&gt;(annual.factor) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; ia&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;risk

&lt;span style=&#34;color:#a6e22e&#34;&gt;rm&lt;/span&gt;(SPY,QQQ,EEM,IWM,EFA,TLT,IYR,GLD)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒªã‚¿ãƒ¼ãƒ³ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;PerformanceAnalytics&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;charts.PerformanceSummary&lt;/span&gt;(hist.returns, main &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚µãƒãƒªãƒ¼&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post2/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ã€ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡Œã„ã¾ã™ã€‚ä¸€æ°—ã«ã‚³ãƒ¼ãƒ‰ã‚’å…¬é–‹ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# BACK TEST&lt;/span&gt;
backtest &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(r_dat,FLG,start_date,span,learning_term,port){
  &lt;span style=&#34;color:#75715e&#34;&gt;#-----------------------------------------&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# BACKTEST&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# r_dat - return data(xts object) &lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# FLG - flag(CCC,DCC,DECO)&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# start_date - start date for backtest&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# span - rebalance frequency&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# learning_term - learning term (days)&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# port - method of portfolio optimization&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#-----------------------------------------&lt;/span&gt;
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringi)

  initial_dat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r_dat&lt;span style=&#34;color:#a6e22e&#34;&gt;[stri_c&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(start_date)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;learning_term,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;::&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(start_date))]
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(initial_dat)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(r_dat)) {
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(initial_dat)){
      H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;carroll&lt;/span&gt;(initial_dat[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(initial_dat)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;),],FLG)
      &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(port &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nlgmv&amp;#34;&lt;/span&gt;){
        result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;nlgmv&lt;/span&gt;(initial_dat,H)
      }else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(port &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;){
        result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;risk_parity&lt;/span&gt;(initial_dat,H)
      }
      weight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)
      &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(weight) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(initial_dat)
      p_return &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; initial_dat&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(initial_dat),]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight
    } else {
      &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(i &lt;span style=&#34;color:#f92672&#34;&gt;%in%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;endpoints&lt;/span&gt;(r_dat,span)){
        H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;carroll&lt;/span&gt;(test_dat[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(test_dat)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;),],FLG)
        &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(port &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nlgmv&amp;#34;&lt;/span&gt;){
          result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;nlgmv&lt;/span&gt;(test_dat,H)
        }else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(port &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;){
          result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;risk_parity&lt;/span&gt;(test_dat,H)
        }
        
      }
      weight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(weight,&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight))
      p_return &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(p_return,test_dat&lt;span style=&#34;color:#a6e22e&#34;&gt;[NROW&lt;/span&gt;(test_dat),]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)
    }
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(i &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(r_dat)){
      term &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;stri_c&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(r_dat[i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;,])&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;learning_term,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;::&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(r_dat[i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;,])) 
      test_dat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r_dat[term]
    }
  }
  p_return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;apply&lt;/span&gt;(p_return,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,sum),order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(p_return))
  weight.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(weight,order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(p_return))

  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(p_return,weight.xts)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;return&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;weight&amp;#34;&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}

CCC &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;backtest&lt;/span&gt;(hist.returns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CCC&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2007-01-04&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;months&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;)
DCC &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;backtest&lt;/span&gt;(hist.returns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCC&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2007-01-04&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;months&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;)
DECO &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;backtest&lt;/span&gt;(hist.returns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DECO&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2007-01-04&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;months&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;)
benchmark &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;backtest&lt;/span&gt;(hist.returns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;benchmark&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2007-01-04&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;months&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;)

result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(CCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio,DCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio,DECO&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio,benchmark&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio)
&lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CCC&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCC&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DECO&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;benchmark&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¨ˆç®—çµæœã‚’ã‚°ãƒ©ãƒ•ã«ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;PerformanceAnalytics&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;charts.PerformanceSummary&lt;/span&gt;(result,main &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;BACKTEST&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post2/index_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ç©ºå£²ã‚Šåˆ¶ç´„ã‚’èª²ã—ãŸã®ã§ã€ä¸Šã§å®šç¾©ã—ãŸæœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã¯ä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ã€‚ã©ã†ã‚„ã‚‰ã“ã‚Œã ã‘ã§è§£æçš„ã«è§£ãã®ã¯é›£ã—ã„ã‚‰ã—ãã€æ•°å€¤çš„ã«è§£ãã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚ãƒªãƒãƒ©ãƒ³ã‚¹æœŸé–“ã‚’é€±æ¬¡ã«ã—ãŸã®ã§ã€è‡ªå‰ã®PCã§ã¯è¨ˆç®—ã«æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸãŒã€çµæœãŒè¨ˆç®—ã§ãã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;ãƒªãƒ¼ãƒãƒ³ä»¥é™ã¯ã©ã†ã‚„ã‚‰ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã‚ã‚‹ç­‰ã‚¦ã‚§ã‚¤ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚ˆã‚Šã‚’ã‚¢ã‚¦ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒ ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ç‰¹ã«ã€DECOã¯ã„ã„æ„Ÿã˜ã§ã™ã€‚ãã‚‚ãã‚‚DECOã¨DCCã¯ã»ã¼å¤‰ã‚ã‚‰ãªã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã§ã‚ã‚‹ã¨æ€ã£ã¦ã„ãŸã®ã§ã™ãŒã€ã©ã†ã‚„ã‚‰è‡ªåˆ†ã®ç†è§£ãŒè¶³ã‚‰ãªã„ã‚‰ã—ãã€è«–æ–‡ã®èª­ã¿è¿”ã™å¿…è¦ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚Equicorrelationã®æ„å‘³ã‚’ã‚‚ã†ä¸€åº¦è€ƒãˆã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ãã‚Œãã‚Œã®çµ„å…¥æ¯”ç‡ã®æ¨ç§»ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# plot allocation weighting&lt;/span&gt;
d_allocation &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(ggweight,title){
  &lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;tidyverse&amp;#34;)&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(tidyverse)
  ggweight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gather&lt;/span&gt;(ggweight,key&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ASSET,value&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;weight,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;Date,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;method)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(ggweight, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Date, y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;weight,fill&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ASSET)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_area&lt;/span&gt;(colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;black&amp;#34;&lt;/span&gt;,size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;.1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;scale_y_continuous&lt;/span&gt;(limits &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;labs&lt;/span&gt;(title&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;title) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;facet_grid&lt;/span&gt;(method&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;.)
}

gmv_weight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(CCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CCC&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(CCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)),&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(DCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCC&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(DCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)),&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(DECO&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DECO&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(DECO&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)))

&lt;span style=&#34;color:#75715e&#34;&gt;# plot allocation weighting&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;d_allocation&lt;/span&gt;(gmv_weight,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GMV Asset Allocation&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post2/index_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ãƒªãƒ¼ãƒãƒ³ã®éš›ã«TLTã€ã¤ã¾ã‚Šç±³å›½å‚µã¸ã®æ¯”ç‡ã‚’å¢—ã‚„ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚CCCã¨DCCã¯ãã‚Œä»¥å¤–ã®éƒ¨åˆ†ã§ã‚‚ç±³å›½å‚µã¸ã®æ¯”ç‡ãŒé«˜ãã€ã‚ˆãæŒ™ã’ã‚‰ã‚Œã‚‹æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®å•é¡Œç‚¹ãŒã“ã“ã§ã‚‚ç™ºç”Ÿã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ä¸€æ–¹ã€DECOãŒã‚„ã¯ã‚Šå€‹æ€§çš„ãªçµ„å…¥æ¯”ç‡ã®æ¨ç§»ã‚’ã—ã¦ãŠã‚Šã€ã“ã“ã‚‰ã‚’è€ƒãˆã¦ã‚‚ã‚‚ã†ä¸€åº¦è«–æ–‡ã‚’èª­ã¿è¿”ã—ã¦ã¿ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;è¿½è¨˜ï¼ˆ2019/3/3ï¼‰
ã“ã‚Œã¾ã§ã¯ã€æœ€å°åˆ†æ•£ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã§åˆ†æã‚’ã—ã¦ã„ã¾ã—ãŸãŒã€ãƒªã‚¹ã‚¯ãƒ‘ãƒªãƒ†ã‚£ã®çµæœã‚‚è¦‹ãŸã„ãªã¨è¨€ã†ã“ã¨ã§ã€ãã®ã‚³ãƒ¼ãƒ‰ã‚‚æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;risk_parity &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(r_dat,r_cov){
  fn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(weight, r_cov) {
    N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(r_cov)
    risks &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;  weight &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; (r_cov &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; weight)
    g &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(risks, times &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; N) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(risks, each &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; N)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(g^2))
  }
  dfn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(weight,r_cov){
    out &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; weight
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(weight)) {
      up &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; weight
      up[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; up[i]&lt;span style=&#34;color:#ae81ff&#34;&gt;+.0001&lt;/span&gt;
      dn[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dn[i]&lt;span style=&#34;color:#ae81ff&#34;&gt;-.0001&lt;/span&gt;
      out[i] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;fn&lt;/span&gt;(up,r_cov) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fn&lt;/span&gt;(dn,r_cov))&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;.0002&lt;/span&gt;
    }
    &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(out)
  }
  std &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sqrt&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(r_cov)) 
  x0 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;std&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;std)
  res &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; nloptr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nloptr&lt;/span&gt;(x0&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;x0,
                 eval_f&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;fn,
                 eval_grad_f&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dfn,
                 eval_g_eq&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(weight,r_cov) { &lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(weight) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; },
                 eval_jac_g_eq&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(weight,r_cov) { &lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(std)) },
                 lb&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(std)),ub&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(std)),
                 opts &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;algorithm&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NLOPT_LD_SLSQP&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;print_level&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;xtol_rel&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1.0e-8&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;maxeval&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;),
                 r_cov &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; r_cov)
  r_weight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; res&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;solution
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(r_weight) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(r_cov)
  wr_dat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r_dat&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;r_weight
  portfolio &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;apply&lt;/span&gt;(wr_dat,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,sum)
  pr_dat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(wr_dat,portfolio)
  sd &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sd&lt;/span&gt;(portfolio)
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(r_weight,pr_dat,sd)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;return&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;portfolio risk&amp;#34;&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
  }

CCC &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;backtest&lt;/span&gt;(hist.returns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CCC&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2007-01-04&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;months&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;)
DCC &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;backtest&lt;/span&gt;(hist.returns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCC&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2007-01-04&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;months&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;)
DECO &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;backtest&lt;/span&gt;(hist.returns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DECO&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2007-01-04&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;months&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;)
benchmark &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;backtest&lt;/span&gt;(hist.returns,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;benchmark&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2007-01-04&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;months&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;365&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;risk parity&amp;#34;&lt;/span&gt;)

result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;merge&lt;/span&gt;(CCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio,DCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio,DECO&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio,benchmark&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;return&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;portfolio)
&lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CCC&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCC&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DECO&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;benchmark&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;çµæœã¯ã“ã‚“ãªæ„Ÿã˜ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;PerformanceAnalytics&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;charts.PerformanceSummary&lt;/span&gt;(result, main &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;BACKTEST COMPARISON&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(plotly)

&lt;span style=&#34;color:#75715e&#34;&gt;# plot allocation weighting&lt;/span&gt;
riskparity_weight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(CCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CCC&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(CCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)),&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(DCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCC&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(DCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)),&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(DECO&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DECO&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(DECO&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)),&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(benchmark&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;benchmark&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(benchmark&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;PerformanceAnalytics&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;charts.PerformanceSummary&lt;/span&gt;(result, main &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;BACKTEST COMPARISON&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post2/index_files/figure-html/unnamed-chunk-15-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;riskparity_weight &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(CCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CCC&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(CCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)),&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(DCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCC&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(DCC&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)),&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(DECO&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DECO&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(DECO&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)),&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(benchmark&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight,method&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;benchmark&amp;#34;&lt;/span&gt;,Date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;(benchmark&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;weight)))

&lt;span style=&#34;color:#75715e&#34;&gt;# plot allocation weighting&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;d_allocation&lt;/span&gt;(riskparity_weight, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Risk Parity Asset Allocation&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post2/index_files/figure-html/unnamed-chunk-15-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã©ã®æ‰‹æ³•ã‚‚benchmarkã‚’ã‚¢ã‚¦ãƒˆãƒ‘ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ ã§ãã¦ã„ã‚‹ã¨ã„ã†å¥½ã¾ã—ã„çµæœã«ãªã‚Šã¾ã—ãŸã€‚
ã‚„ã¯ã‚Šã€åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã®æ¨è¨ˆãŒã†ã¾ãã„ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã¾ãŸã€DECOã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒã‚ˆã„ã®ã¯ã€ç›¸é–¢è¡Œåˆ—ã«å„è³‡ç”£ãƒšã‚¢ã®ç›¸é–¢ä¿‚æ•°ã®å¹³å‡å€¤ã‚’ç”¨ã„ã¦ã„ã‚‹ãŸã‚ã€ä»–ã®æ‰‹æ³•ã‚ˆã‚Šã‚‚ãƒªã‚¹ã‚¯è³‡ç”£ã®çµ„ã¿å…¥ã‚ŒãŒå¤šããªã£ãŸã‹ã‚‰ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚ã‚¦ã‚§ã‚¤ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã¨ã‚Šã‚ãˆãšã€ä»Šæ—¥ã¯ã“ã“ã¾ã§ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã®å®Ÿè£…</title>
      <link>/post/post3/</link>
      <pubDate>Sun, 10 Feb 2019 00:00:00 +0000</pubDate>
      <guid>/post/post3/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ã‹ãªã‚Šä¹…ã—ã¶ã‚Šã®æŠ•ç¨¿ã¨ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚æ±ºã—ã¦ç ”ç©¶ã‚’ã•ã¼ã£ã¦ã„ãŸã®ã§ã¯ãªãã€&lt;code&gt;BVAR&lt;/code&gt;ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«æ‰‹ã“ãšã£ã¦ã„ã¾ã—ãŸã€‚ã‚ã¨å°‘ã—ã§å®Œæˆã—ã¾ã™ã€‚ã•ã¦ã€ä»Šå›ã¯&lt;code&gt;BVAR&lt;/code&gt;ã‚„ã“ã®å‰ã®Giannnone et a (2008)ã®ã‚ˆã†ãªåˆ†æã§ã‚‚å¤§æ´»èºã®ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚’å®Ÿè£…ã—ã¦ã—ã¾ã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚½ãƒ•ãƒˆã«é ¼ã‚‰ãšã€åŸºæœ¬çš„ã«è‡ªåˆ†ã§ä¸€ã‹ã‚‰å®Ÿè£…ã‚’è¡Œã„ã€ç ”ç©¶ã™ã‚‹ã“ã¨ã‚’ãƒãƒªã‚·ãƒ¼ã¨ã—ã¦ã„ã¾ã™ã®ã§ã€ã“ã‚Œã‹ã‚‰é »ç¹ã«ä½¿ç”¨ã™ã‚‹ã§ã‚ã‚ã†ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚’é–¢æ•°ã¨ã—ã¦å®Ÿè£…ã—ã¦ã—ã¾ã†ã“ã¨ã¯éå¸¸ã«æœ‰ç›Šã§ã‚ã‚‹ã¨è€ƒãˆã¾ã™ã€‚ä»Šå›ã¯Rã§å®Ÿè£…ã‚’ã—ã¾ã—ãŸã®ã§ã€ãã®ã”å ±å‘Šã‚’ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¨ã¯&#34;&gt;1. ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¨ã¯ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ã¾ãšã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã«é–¢ã™ã‚‹ç°¡å˜ãªèª¬æ˜ã‚’è¡Œã„ã¾ã™ã€‚éå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ã„è¨˜äº‹ãŒã‚ã‚‹ã®ã§ã€&lt;a href=&#34;https://qiita.com/MoriKen/items/0c80ef75749977767b43&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã‚’èª­ã‚“ã§ã„ãŸã ã„ãŸã»ã†ãŒã‚ˆã‚Šåˆ†ã‹ã‚Šã‚„ã™ã„ã‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¨ã¯ã€çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã‚’è§£ãã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ä¸€ç¨®ã§ã™ã€‚çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã¨ã¯ã€æ‰‹å…ƒã®è¦³æ¸¬å¯èƒ½ãªå¤‰æ•°ã‹ã‚‰è¦³æ¸¬ã§ããªã„å¤‰æ•°ã‚’æ¨å®šã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã‚’ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
Y_{t} = Z_{t}\alpha_{t} + d_{t} + S_{t}\epsilon_{t} \&lt;br&gt;
\alpha_{t} = T_{t}\alpha_{t-1} + c_{t} + R_{t}\eta_{t}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$Y_{t}$ã¯$gÃ—1$ãƒ™ã‚¯ãƒˆãƒ«ã®è¦³æ¸¬å¯èƒ½ãªå¤‰æ•°(è¦³æ¸¬å¤‰æ•°)ã€$Z_{t}$ã¯$gÃ—k$ä¿‚æ•°è¡Œåˆ—ã€$\alpha_{t}$ã¯$kÃ—1$ãƒ™ã‚¯ãƒˆãƒ«ã®è¦³æ¸¬ä¸å¯èƒ½ãªå¤‰æ•°(çŠ¶æ…‹å¤‰æ•°)ã€$T_{t}$ã¯$kÃ—k$ä¿‚æ•°è¡Œåˆ—ã§ã™ã€‚ã¾ãŸã€$\epsilon_{t}$ã¯è¦³æ¸¬å¤‰æ•°ã®èª¤å·®é …ã€$\eta_{t}$ã¯çŠ¶æ…‹å¤‰æ•°ã®èª¤å·®é …ã§ã™ã€‚ã“ã‚Œã‚‰ã®èª¤å·®é …ã¯ãã‚Œãã‚Œ$N(0,H_{t})$, &lt;code&gt;\(N(0,Q_{t})\)&lt;/code&gt;ã«å¾“ã„ã¾ã™ï¼ˆ$H_{t},Q_{t}$ã¯åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ï¼‰ã€‚$d_{t}$, &lt;code&gt;\(c_{t}\)&lt;/code&gt;ã¯å®šæ•°é …ã§ã™ã€‚1æœ¬ç›®ã®å¼ã¯è¦³æ¸¬æ–¹ç¨‹å¼ã€2æœ¬ç›®ã®å¼ã¯é·ç§»æ–¹ç¨‹å¼ã¨å‘¼ã°ã‚Œã¾ã™ã€‚
çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ä¾‹ã¨ã—ã¦ã€ã—ã°ã—ã°æ± ã®é­šã®æ•°ã‚’æ¨å®šã™ã‚‹å•é¡ŒãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ä»Šã€æ± ã®ä¸­ã®é­šã®å…¨æ•°ãŒçŸ¥ã‚ŠãŸã„ã¨ã—ã¦ã€ãã®æ¨å®šã‚’è€ƒãˆã¾ã™ã€‚è¦³æ¸¬æ™‚ç‚¹æ¯ã«æ± ã®ä¸­ã®é­šã‚’ã™ã¹ã¦æ•ã¾ãˆã¦ãã®æ•°ã‚’èª¿ã¹ã‚‹ã®ã¯ç¾å®Ÿçš„ã«å›°é›£ãªã®ã§ã€ä¸€å®šæœŸé–“é‡£ã‚Šã‚’ã—ã¦é‡£ã‚ŒãŸé­šã‚’ã‚µãƒ³ãƒ—ãƒ«ã«å…¨æ•°ã‚’æ¨å®šã™ã‚‹ã“ã¨ã‚’è€ƒãˆã¾ã™ã€‚ã“ã“ã§ã€é‡£ã‚ŒãŸé­šã¯è¦³æ¸¬å¤‰æ•°ã€æ± ã«ã„ã‚‹é­šã®å…¨æ•°ã¯çŠ¶æ…‹å¤‰æ•°ã¨è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä»Šã€çµŒé¨“çš„ã«é‡£ã‚ŒãŸé­šã®æ•°ã¨å…¨æ•°ã®é–“ã«ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢ä¿‚ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
Y_{t} = 0.01\alpha_{t} + 5 + \epsilon_{t}
$$
ã“ã‚ŒãŒè¦³æ¸¬æ–¹ç¨‹å¼ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€é­šã®å…¨æ•°ã¯éå»ã®å€¤ã‹ã‚‰ãã‚Œã»ã©æ€¥é€Ÿã«ã¯å¤‰åŒ–ã—ãªã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ã«å¾“ã†ã¨ä»®å®šã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\alpha_{t} = \alpha_{t-1}  + 500 + \eta_{t}
$$
ã“ã‚ŒãŒé·ç§»æ–¹ç¨‹å¼ã«ãªã‚Šã¾ã™ã€‚ã‚ã¨ã¯ã€ã“ã‚Œã‚’ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ç”¨ã„ã¦è¨ˆç®—ã™ã‚Œã°ã€è¦³æ¸¬ã§ããªã„é­šã®å…¨æ•°ã‚’æ¨å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã“ã®ã‚ˆã†ã«çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã¯éå¸¸ã«ä¾¿åˆ©ãªãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚Šã€ã¾ãŸå¿œç”¨ç¯„å›²ã‚‚åºƒã„ã§ã™ã€‚ä¾‹ãˆã°ã€è²©å£²é¡ã‹ã‚‰æ½œåœ¨é¡§å®¢æ•°ã‚’æ¨å®šã—ãŸã‚Šã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚„ãƒˆãƒ¼ãƒ“ãƒ³ã®Qç­‰çµŒæ¸ˆãƒ¢ãƒ‡ãƒ«ä¸Šã®æ¦‚å¿µã¨ã—ã¦å­˜åœ¨ã™ã‚‹å¤‰æ•°ã‚’æ¨å®šã™ã‚‹ã€&lt;code&gt;BVAR&lt;/code&gt;ã®ã‚ˆã†ã«&lt;code&gt;VAR&lt;/code&gt;ã‚„å›å¸°å¼ã®æ™‚å¤‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¨å®šãªã©ã«ã‚‚ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å°å‡º&#34;&gt;2. ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å°å‡º&lt;/h2&gt;
&lt;p&gt;ã•ã¦ã€éå¸¸ã«ä¾¿åˆ©ãªçŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã®èª¬æ˜ã¯ã“ã‚Œãã‚‰ã„ã«ã—ã¦ã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã®èª¬æ˜ã«ç§»ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¯çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã‚’è§£ãã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ä¸€ç¨®ã§ã‚ã‚‹ã¨å…ˆè¿°ã—ã¾ã—ãŸã€‚ã¤ã¾ã‚Šã€ä»–ã«ã‚‚çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã‚’è§£ãã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å­˜åœ¨ã—ã¾ã™ã€‚ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ä¸€èˆ¬ã«èª¤å·®é …ã®æ­£è¦æ€§ã®ä»®å®šã‚’å¿…è¦ã¨ã—ãªã„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚Šã€è¦³æ¸¬æ–¹ç¨‹å¼ã¨é·ç§»æ–¹ç¨‹å¼ã®ç·šå½¢æ€§ã®ä»®å®šã•ãˆã‚ã‚Œã°ã€ç·šå½¢æœ€å°åˆ†æ•£æ¨å®šé‡ã¨ãªã‚Šã¾ã™ã€‚ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å°å‡ºã«ã¯ã„ãã¤ã‹ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯ã“ã®ç·šå½¢æœ€å°åˆ†æ•£æ¨å®šé‡ã¨ã—ã¦ã®å°å‡ºã‚’è¡Œã„ã¾ã™ã€‚ã¾ãšã€ä»¥ä¸‹ã®ï¼“ã¤ã®ä»®å®šã‚’ç½®ãã¾ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆæœŸå€¤$\alpha_{0}$ã¯æ­£è¦åˆ†å¸ƒ$N(a_{0},\Sigma_{0})$ã«å¾“ã†ç¢ºç‡ãƒ™ã‚¯ãƒˆãƒ«ã§ã‚ã‚‹($a_{t}$ã¯$\alpha_{t}$ã®æ¨å®šå€¤)ã€‚&lt;/li&gt;
&lt;li&gt;èª¤å·®é …$\epsilon_{t}$,$\eta_{s}$ã¯å…¨ã¦ã®$t$,$s$ã§äº’ã„ã«ç‹¬ç«‹ã§ã€åˆæœŸå€¤ãƒ™ã‚¯ãƒˆãƒ«$\alpha_{0}$ã¨ç„¡ç›¸é–¢ã§ã‚ã‚‹ï¼ˆ$E(\epsilon_{t}\eta_{s})=0$, &lt;code&gt;\(E(\epsilon_{t}\alpha_{0})=0\)&lt;/code&gt;, &lt;code&gt;\(E(\eta_{t}\alpha_{0})=0\)&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;2ã‚ˆã‚Šã€$E(\epsilon_{t}\alpha_{t}&#39;)=0$ã€$E(\eta_{t}\alpha_{t-1}&#39;)=0$ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ã¾ãšã€$t-1$æœŸã®æƒ…å ±é›†åˆ$\Omega_{t-1}$ãŒæ—¢çŸ¥ã®çŠ¶æ…‹ã§ã®$\alpha_{t}$ã¨$Y_{t}$ã®æœŸå¾…å€¤ï¼ˆäºˆæ¸¬å€¤ï¼‰ã‚’æ±‚ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¸Šè¿°ã—ãŸçŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã¨èª¤å·®é …ã®æœŸå¾…å€¤ãŒã©ã¡ã‚‰ã‚‚ã‚¼ãƒ­ã§ã‚ã‚‹äº‹å®Ÿã‚’ç”¨ã„ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
E(\alpha_{t}|\Omega_{t-1}) = a_{t|t-1} = T_{t}a_{t-1|t-1} + c_{t}
E(Y_{t}|\Omega_{t-1}) = Y_{t|t-1} = Z_{t}a_{t|t-1} + d_{t}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€æ¬¡ã«ã€ã“ã‚Œã‚‰ã®åˆ†æ•£ã‚’æ±‚ã‚ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} E( (\alpha_{t}-a_{t|t-1})(\alpha_{t}-a_{t|t-1})&#39;|\Omega_{t-1}) &amp;amp;=&amp;amp; E( (T_{t}\alpha_{t-1} + c_{t} + R_{t}\eta_{t}-a_{t|t-1})(T_{t}\alpha_{t-1} + c_{t} + R_{t}\eta_{t}-a_{t|t-1})&#39;|\Omega_{t-1}) \\  &amp;amp;=&amp;amp; E(T_{t}\alpha_{t-1}\alpha_{t-1}&#39;T_{t}&#39; + R_{t}\eta_{t}\eta_{t}&#39;R_{t}&#39;|\Omega_{t-1}) \\ &amp;amp;=&amp;amp; E(T_{t}\alpha_{t-1}\alpha_{t-1}&#39;T_{t}&#39;|\Omega_{t-1}) + E(R_{t}\eta_{t}\eta_{t}&#39;R_{t}&#39;|\Omega_{t-1}) \\ &amp;amp;=&amp;amp; T_{t}E(\alpha_{t-1}\alpha_{t-1}&#39;|\Omega_{t-1})T_{t}&#39; + R_{t}E(\eta_{t}\eta_{t}&#39;|\Omega_{t-1})R_{t}&#39; \\ &amp;amp;=&amp;amp; T_{t}\Sigma_{t-1|t-1}T_{t}&#39; + R_{t}Q_{t}R_{t}&#39; \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1} \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} E( (Y_{t}-Y_{t|t-1})(Y_{t}-Y_{t|t-1})&#39;|\Omega_{t-1}) &amp;amp;=&amp;amp; E( (Z_{t}\alpha_{t} + d_{t} + S_{t}\epsilon_{t}-Y_{t|t-1})(Z_{t}\alpha_{t} + d_{t} + S_{t}\epsilon_{t}-Y_{t|t-1})&#39;|\Omega_{t-1}) \\ &amp;amp;=&amp;amp; E(Z_{t}\alpha_{t}\alpha_{t}&#39;Z_{t}&#39; + S_{t}\epsilon_{t}\epsilon_{t}&#39;S_{t}&#39;|\Omega_{t-1}) \\ &amp;amp;=&amp;amp; E(Z_{t}\alpha_{t}\alpha_{t}&#39;Z_{t}&#39;|\Omega_{t-1}) + E(S_{t}\epsilon_{t}\epsilon_{t}&#39;S_{t}&#39;|\Omega_{t-1}) \\ &amp;amp;=&amp;amp; Z_{t}E(\alpha_{t}\alpha_{t}&#39;|\Omega_{t-1})Z_{t}&#39; + S_{t}E(\epsilon_{t}\epsilon_{t}&#39;|\Omega_{t-1})S_{t}&#39; \\ &amp;amp;=&amp;amp; Z_{t}\Sigma_{t|t-1}Z_{t}&#39; + S_{t}H_{t}S_{t}&#39; \\ &amp;amp;=&amp;amp; F_{t|t-1} \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$t$æœŸã®æƒ…å ±é›†åˆ$\Omega_{t}$ãŒå¾—ã‚‰ã‚ŒãŸã¨ã—ã¾ã™ï¼ˆã¤ã¾ã‚Šã€è¦³æ¸¬å€¤$Y_{t}$ã‚’å…¥æ‰‹ï¼‰ã€‚ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã§ã¯ã€$t$æœŸã®æƒ…å ±ã§ã‚ã‚‹è¦³æ¸¬å€¤$Y_{t}$ã‚’ç”¨ã„ã¦$a_{t|t-1}$ã‚’ä»¥ä¸‹ã®æ–¹ç¨‹å¼ã§æ›´æ–°ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
E(\alpha_{t}|\Omega_{t}) = a_{t|t} = a_{t|t-1} + k_{t}(Y_{t} - Y_{t|t-1})
$$
ã¤ã¾ã‚Šã€è¦³æ¸¬å€¤ã¨$Y_{t}$ã®æœŸå¾…å€¤ï¼ˆäºˆæ¸¬å€¤ï¼‰ã®å·®ã‚’ã‚ã‚‹ã‚¦ã‚§ã‚¤ãƒˆ$k_{t}$ï¼ˆ$kÃ—g$è¡Œåˆ—ï¼‰ã§ã‹ã‘ãŸã‚‚ã®ã§è£œæ­£ã‚’ã‹ã‘ã‚‹ã‚ã‘ã§ã™ã€‚ã‚ˆã£ã¦ã€è¦³æ¸¬å€¤ã¨äºˆæ¸¬å€¤ãŒå®Œå…¨ã«ä¸€è‡´ã—ã¦ã„ãŸå ´åˆã¯è£œæ­£ã¯è¡Œã‚ã‚Œãªã„ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§é‡è¦ãªã®ã¯ã€ã‚¦ã‚¨ã‚¤ãƒˆ$k_{t}$ã‚’ã©ã®ã‚ˆã†ã«æ±ºã‚ã‚‹ã®ã‹ã§ã™ã€‚$k_{t}$ã¯æ›´æ–°å¾Œã®çŠ¶æ…‹å¤‰æ•°ã®åˆ†æ•£$E( (\alpha_{t} - a_{t|t})(\alpha_{t} - a_{t|t})&#39;)= \Sigma_{t|t}$ã‚’æœ€å°åŒ–ã™ã‚‹ã‚ˆã†æ±ºå®šã—ã¾ã™ã€‚ã“ã‚ŒãŒã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ãŒç·šå½¢æœ€å°åˆ†æ•£æ¨å®šé‡ã§ã‚ã‚‹æ ¹æ‹ ã§ã™ã€‚æœ€å°åŒ–ã«ã‚ãŸã£ã¦ã¯ä»¥ä¸‹ã®ãƒ™ã‚¯ãƒˆãƒ«å¾®åˆ†ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã®ã§ã€ãŠã•ã‚‰ã„ã‚’ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚ä»Šå›ä½¿ç”¨ã™ã‚‹ã®ã¯ä»¥ä¸‹ã®äº‹å®Ÿã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \frac{\partial a&amp;rsquo;b}{\partial b} = \frac{\partial b&amp;rsquo;a}{\partial b} = a \&lt;br&gt;
\displaystyle \frac{\partial b&amp;rsquo;Ab}{\partial b} = 2Ab
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$a,b$ã¯ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆãã‚Œãã‚Œ$nÃ—1$ãƒ™ã‚¯ãƒˆãƒ«ã€$1Ã—n$ãƒ™ã‚¯ãƒˆãƒ«ï¼‰ã€$A$ã¯$nÃ—n$ã®å¯¾ç§°è¡Œåˆ—ã§ã™ã€‚ã¾ãšã€ï¼‘ã¤ç›®ã‹ã‚‰è¨¼æ˜ã—ã¦ã„ãã¾ã™ã€‚$\displaystyle y = a&amp;rsquo;b = b&amp;rsquo;a = \sum_{i=1}^{n}a_{i}b_{i}$ã¨ã—ã¾ã™ã€‚
ã“ã®ã¨ãã€$\frac{\partial y}{\partial b_{i}}=a_{i}$ãªã®ã§ã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \frac{\partial a&amp;rsquo;b}{\partial b} = \frac{\partial b&amp;rsquo;a}{\partial b} = a
$$&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ï¼’ã¤ç›®ã§ã™ã€‚$y = b&amp;rsquo;Ab = \sum_{i=1}^{n}\sum_{j=1}^{n}a_{ij}b_{i}b_{j}$ã¨ã—ã¾ã™ã€‚ã“ã®ã¨ãã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \frac{\partial y}{\partial b_{i}} = \sum_{j=1}^{n}a_{ij}b_{j} + \sum_{j=1}^{n}a_{ji}b_{j} = 2\sum_{j=1}^{n}a_{ij}b_{j} = 2a_{i}&amp;lsquo;b
$$
ã‚ˆã£ã¦ã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \frac{\partial y}{\partial b} =
\left(
\begin{array}{cccc}
\frac{\partial y}{\partial b_{1}} \&lt;br&gt;
\vdots \&lt;br&gt;
\frac{\partial y}{\partial b_{n}} \&lt;br&gt;
\end{array}
\right) = 2
\left(
\begin{array}{cccc}
\sum_{j=1}^{n}a_{1j}b_{j} \&lt;br&gt;
\vdots \&lt;br&gt;
\sum_{j=1}^{n}a_{nj}b_{j} \&lt;br&gt;
\end{array}
\right) = 2
\left(
\begin{array}{cccc}
a_{1}&amp;lsquo;b \&lt;br&gt;
\vdots \&lt;br&gt;
a_{n}&amp;lsquo;b \&lt;br&gt;
\end{array}
\right)
= 2Ab
$$
ã•ã¦ã€æº–å‚™ãŒã§ããŸã®ã§ã€æ›´æ–°å¾Œã®çŠ¶æ…‹å¤‰æ•°ã®åˆ†æ•£$E( (\alpha_{t} - a_{t|t})(\alpha_{t} - a_{t|t})&#39;)$ã‚’æ±‚ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} E( (\alpha_{t} - a_{t|t})(\alpha_{t} - a_{t|t})&#39;) &amp;amp;=&amp;amp; \Sigma_{t|t} \\ &amp;amp;=&amp;amp; E\{ (\alpha_{t} - a_{t|t-1} + k_{t}(Y_{t} - Y_{t|t-1}))(\alpha_{t} - a_{t|t-1} + k_{t}(Y_{t} - Y_{t|t-1}))&#39;\} \\ &amp;amp;=&amp;amp; E\{ ( (\alpha_{t} - a_{t|t-1}) - k_{t}(Z_{t}\alpha_{t} + d_{t} + S_{t}\epsilon_{t} - Z_{t}a_{t|t-1} - d_{t}) )( (\alpha_{t} - a_{t|t-1}) - k_{t}(Z_{t}\alpha_{t} + d_{t} + S_{t}\epsilon_{t} - Z_{t}a_{t|t-1} - d_{t}) )\} \\ &amp;amp;=&amp;amp; E\{ ( (\alpha_{t} - a_{t|t-1}) - k_{t}(Z_{t}\alpha_{t} + S_{t}\epsilon_{t} - Z_{t}a_{t|t-1}) )( (\alpha_{t} - a_{t|t-1}) - k_{t}(Z_{t}\alpha_{t} + S_{t}\epsilon_{t} - Z_{t}a_{t|t-1}) )&#39;\} \\ &amp;amp;=&amp;amp; E\{ ( (I - k_{t}Z_{t})\alpha_{t} - k_{t}S_{t}\epsilon_{t} - (I - k_{t}Z_{t})a_{t|t-1})( (I - k_{t}Z_{t})\alpha_{t} - k_{t}S_{t}\epsilon_{t} - (I - k_{t}Z_{t})a_{t|t-1})&#39; \} \\ &amp;amp;=&amp;amp; E\{( (I - k_{t}Z_{t})(\alpha_{t}-a_{t|t-1}) - k_{t}S_{t}\epsilon_{t})( (I - k_{t}Z_{t})(\alpha_{t}-a_{t|t-1}) - k_{t}S_{t}\epsilon_{t})&#39;\} \\ &amp;amp;=&amp;amp; (I - k_{t}Z_{t})\Sigma_{t|t-1}(I - k_{t}Z_{t})&#39; + k_{t}S_{t}H_{t}S_{t}&#39;k_{t}&#39; \\ &amp;amp;=&amp;amp; (\Sigma_{t|t-1} - k_{t}Z_{t}\Sigma_{t|t-1})(I - k_{t}Z_{t})&#39; + k_{t}S_{t}H_{t}S_{t}&#39;k_{t}&#39; \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1} - \Sigma_{t|t-1}(k_{t}Z_{t})&#39; - k_{t}Z_{t}\Sigma_{t|t-1} + k_{t}Z_{t}\Sigma_{t|t-1}Z_{t}&#39;k_{t}&#39; + k_{t}S_{t}H_{t}S_{t}&#39;k_{t}&#39; \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1} - \Sigma_{t|t-1}Z_{t}&#39;k_{t}&#39; - k_{t}Z_{t}\Sigma_{t|t-1} + k_{t}(Z_{t}\Sigma_{t|t-1}Z_{t}&#39; + S_{t}H_{t}S_{t}&#39;)k_{t}&#39; \\ \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ï¼‘å›ç›®ã®å¼å¤‰å½¢ã§ã€$a_{t|t}$ã«ä¸Šè¿°ã—ãŸæ›´æ–°å¼ã‚’ä»£å…¥ã—ã€ï¼’å›ç›®ã®å¼å¤‰å½¢ã§è¦³æ¸¬æ–¹ç¨‹å¼ã¨ä¸Šã§è¨ˆç®—ã—ãŸ$E(Y_{t}|\Omega_{t-1})$ã‚’ä»£å…¥ã—ã¦ã„ã¾ã™ã€‚ã•ã¦ã€æ›´æ–°å¾Œã®çŠ¶æ…‹å¤‰æ•°ã®åˆ†æ•£$\Sigma_{t|t}$ã‚’$k_{t}$ã®é–¢æ•°ã¨ã—ã¦æ›¸ãè¡¨ã™ã“ã¨ãŒã§ããŸã®ã§ã€ã“ã‚Œã‚’$k_{t}$ã§å¾®åˆ†ã—ã€0ã¨ç½®ãã€$\Sigma_{t|t}$ã‚’æœ€å°åŒ–ã™ã‚‹$k_{t}$ã‚’æ±‚ã‚ã¾ã™ã€‚å…ˆè¿°ã—ãŸå…¬å¼ã§ã€$a=\Sigma_{t|t-1}Z_{t}&#39;$ã€$b=k_{t}&#39;$ã€$A=(Z_{t}\Sigma_{t|t-1}Z_{t}&amp;rsquo; + S_{t}H_{t}S_{t}&#39;)$ã¨ã™ã‚‹ã¨ï¼ˆ$A$ã¯åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã®å’Œãªã®ã§å¯¾ç§°è¡Œåˆ—ï¼‰ã€&lt;/p&gt;
&lt;p&gt;$$
\frac{\partial \Sigma_{t|t}}{\partial k_{t}&#39;} = -2(Z_{t}\Sigma_{t|t-1})&amp;rsquo; + 2(Z_{t}\Sigma_{t|t-1}Z_{t}&amp;rsquo; + S_{t}H_{t}S_{t}&#39;)k_{t} = 0
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã‹ã‚‰ã€$k_{t}$ã‚’è§£ããªãŠã™ã¨ã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} k_{t} &amp;amp;=&amp;amp; \Sigma_{t|t-1}Z_{t}&#39;(Z_{t}\Sigma_{t|t-1}Z_{t}&#39; + S_{t}H_{t}S_{t}&#39;)^{-1} \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1}Z_{t}&#39;F_{t|t-1}^{-1} \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;çªç„¶ã€$F_{t|t-1}$ãŒå‡ºã¦ãã¾ã—ãŸã€‚ã“ã‚Œã¯è¦³æ¸¬å¤‰æ•°ã®äºˆæ¸¬å€¤ã®åˆ†æ•£$E((Y_{t}-Y_{t|t-1})(Y_{t}-Y_{t|t-1})&#39;|\Omega_{t-1})$ã§ã—ãŸã€‚ä¸€æ–¹ã€$\Sigma_{t|t-1}Z_{t}$ã¯çŠ¶æ…‹å¤‰æ•°ã®äºˆæ¸¬å€¤ã®åˆ†æ•£ã‚’è¦³æ¸¬å¤‰æ•°ã®ã‚¹ã‚±ãƒ¼ãƒ«ã«èª¿æ•´ã—ãŸã‚‚ã®ã§ã™ï¼ˆè¦³æ¸¬ç©ºé–“ã«å†™åƒã—ãŸã‚‚ã®ï¼‰ã€‚ã¤ã¾ã‚Šã€ã‚«ãƒ«ãƒãƒ³ã‚²ã‚¤ãƒ³$k_{t}$ã¯çŠ¶æ…‹å¤‰æ•°ã¨è¦³æ¸¬å¤‰æ•°ã®äºˆæ¸¬å€¤ã®åˆ†æ•£æ¯”ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã™ã€‚è¦³æ¸¬å¤‰æ•°ã«ã¯ãƒã‚¤ã‚ºãŒã‚ã‚Šã€è¦³æ¸¬æ–¹ç¨‹å¼ã¯ã„ã¤ã‚‚èª¤å·®ï¼ã§æº€ãŸã•ã‚Œã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãŸã€çŠ¶æ…‹æ–¹ç¨‹å¼ã«ã‚‚èª¤å·®é …ãŒå­˜åœ¨ã—ã¾ã™ã€‚çŠ¶æ…‹ã®é·ç§»ã‚‚100%ãƒ¢ãƒ‡ãƒ«é€šã‚Šã«ã¯ã„ã‹ãªã„ã¨ã„ã†ã“ã¨ã§ã™ã€‚$t$æœŸã®è¦³æ¸¬å¤‰æ•°$Y_{t}$ãŒå¾—ã‚‰ã‚ŒãŸã¨ã—ã¦ã€ãã‚Œã‚’ã©ã‚Œã»ã©ä¿¡é ¼ã—ã¦çŠ¶æ…‹å¤‰æ•°ã‚’æ›´æ–°ã™ã‚‹ã‹ã¯è¦³æ¸¬å¤‰æ•°ã®ãƒã‚¤ã‚ºãŒçŠ¶æ…‹å¤‰æ•°ã®ãƒã‚¤ã‚ºã«æ¯”ã¹ã¦ã©ã‚Œã»ã©å°ã•ã„ã‹ã«ã‚ˆã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€ç›¸å¯¾çš„ã«è¦³æ¸¬æ–¹ç¨‹å¼ãŒé·ç§»æ–¹ç¨‹å¼ã‚ˆã‚Šã‚‚ä¿¡é ¼ã§ãã‚‹å ´åˆã«ã¯çŠ¶æ…‹å¤‰æ•°ã‚’å¤§ããæ›´æ–°ã™ã‚‹ã®ã§ã™ã€‚ã“ã®ã‚ˆã†ã«ã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã§ã¯ã€è¦³æ¸¬æ–¹ç¨‹å¼ã¨é·ç§»æ–¹ç¨‹å¼ã®ç›¸å¯¾çš„ãªä¿¡é ¼åº¦ã«ã‚ˆã£ã¦ã€æ›´æ–°ã®åº¦åˆã„ã‚’æ¯æœŸèª¿æ•´ã—ã¦ã„ã¾ã™ã€‚ãã®åº¦åˆã„ãŒåˆ†æ•£æ¯”ã§ã‚ã‚Šã€ã‚«ãƒ«ãƒãƒ³ã‚²ã‚¤ãƒ³ã ã¨ã„ã†ã‚ã‘ã§ã™ã€‚ã¡ãªã¿ã«æ¬ æå€¤ãŒç™ºç”Ÿã—ãŸå ´åˆã«ã¯ã€è¦³æ¸¬å¤‰æ•°ã®åˆ†æ•£ã‚’ç„¡é™å¤§ã«ã—ã€çŠ¶æ…‹å¤‰æ•°ã®æ›´æ–°ã‚’å…¨ãè¡Œã‚ãªã„ã¨ã„ã†å¯¾å‡¦ã‚’è¡Œã„ã¾ã™ã€‚è¦³æ¸¬å¤‰æ•°ã«ä¿¡é ¼ãŒãªã„ã®ã§å½“ãŸã‚Šå‰ã®å‡¦ç½®ã§ã™ã€‚ã“ã®å ´åˆã¯é·ç§»æ–¹ç¨‹å¼ã‚’100%ä¿¡é ¼ã—ã¾ã™ã€‚ã“ã‚ŒãŒã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã®ã‚³ã‚¢ã®è€ƒãˆæ–¹ã«ãªã‚Šã¾ã™ã€‚
æ›´æ–°å¾Œã®åˆ†æ•£ã‚’è¨ˆç®—ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} \Sigma_{t|t} &amp;amp;=&amp;amp; \Sigma_{t|t-1} - \Sigma_{t|t-1}Z_{t}&#39;k_{t}&#39; - k_{t}Z_{t}\Sigma_{t|t-1} + k_{t}F_{t|t-1}k_{t}&#39; \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1} - \Sigma_{t|t-1}Z_{t}&#39;k_{t}&#39; - k_{t}Z_{t}\Sigma_{t|t-1} + (\Sigma_{t|t-1}Z_{t}&#39;F_{t|t-1}^{-1})F_{t|t-1}k_{t}&#39; \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1} - \Sigma_{t|t-1}Z_{t}&#39;k_{t}&#39; - k_{t}Z_{t}\Sigma_{t|t-1} + \Sigma_{t|t-1}Z_{t}&#39;k_{t}&#39; \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1} - k_{t}Z_{t}\Sigma_{t|t-1} \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1} - k_{t}F_{t|t-1}F_{t|t-1}^{-1}Z_{t}\Sigma_{t|t-1} \\ &amp;amp;=&amp;amp; \Sigma_{t|t-1} - k_{t}F_{t|t-1}k_{t}&#39; \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã§ã¯ã€æœ€çµ‚çš„ã«å°å‡ºã•ã‚ŒãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã¾ã¨ã‚ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} a_{t|t-1} &amp;amp;=&amp;amp; T_{t}a_{t-1|t-1} + c_{t} \\ \Sigma_{t|t-1} &amp;amp;=&amp;amp; T_{t}\Sigma_{t-1|t-1}T_{t}&#39; + R_{t}Q_{t}R_{t}&#39; \\ Y_{t|t-1} &amp;amp;=&amp;amp; Z_{t}a_{t|t-1} + d_{t} \\ F_{t|t-1} &amp;amp;=&amp;amp;  Z_{t}\Sigma_{t|t-1}Z_{t}&#39; + S_{t}H_{t}S_{t}&#39; \\ k_{t} &amp;amp;=&amp;amp; \Sigma_{t|t-1}Z_{t}&#39;F_{t|t-1}^{-1} \\ a_{t|t} &amp;amp;=&amp;amp; a_{t|t-1} + k_{t}(Y_{t} - Y_{t|t-1}) \\ \Sigma_{t|t} &amp;amp;=&amp;amp;  \Sigma_{t|t-1} - k_{t}F_{t|t-1}k_{t}&#39; \end{eqnarray}&lt;/code&gt;
$$
åˆæœŸå€¤$a_{0},\Sigma_{0}$ãŒæ‰€ä¸ã®å…ƒã§ã€ã¾ãšçŠ¶æ…‹å¤‰æ•°ã®äºˆæ¸¬å€¤$a_{1|0},\Sigma_{1|0}$ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ãã®çµæœã‚’ç”¨ã„ã¦ã€æ¬¡ã¯è¦³æ¸¬å¤‰æ•°ã®äºˆæ¸¬å€¤$Y_{t|t-1},F_{t|t-1}$ã‚’è¨ˆç®—ã—ã€ã‚«ãƒ«ãƒãƒ³ã‚²ã‚¤ãƒ³$k_{t}$ã‚’å¾—ã¾ã™ã€‚$t$æœŸã®è¦³æ¸¬å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã‚’å…¥æ‰‹ã—ãŸã‚‰ã€æ›´æ–°æ–¹ç¨‹å¼ã‚’ç”¨ã„ã¦$a_{t|t},\Sigma_{t|t}$ã‚’æ›´æ–°ã—ã¾ã™ã€‚ã“ã‚Œã‚’ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ç¹°ã‚Šè¿”ã—ã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã¡ãªã¿ã«ã€é·ç§»æ–¹ç¨‹å¼ã®èª¤å·®é …$\eta_{t}$ã¨å®šæ•°é …$c_{t}$ãŒãªãã€é·ç§»æ–¹ç¨‹å¼ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå˜ä½è¡Œåˆ—ã®ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¯é€æ¬¡æœ€å°è‡ªä¹—æ³•ã¨ä¸€è‡´ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€æ–°ã—ã„ã‚µãƒ³ãƒ—ãƒ«ã‚’å…¥æ‰‹ã™ã‚‹ãŸã³ã«&lt;code&gt;OLS&lt;/code&gt;ã‚’ã‚„ã‚Šç›´ã™æ¨è¨ˆæ–¹æ³•ã¨ã„ã†ã“ã¨ã§ã™ï¼ˆä»Šå›ã¯ãã®è¨¼æ˜ã¯å‹˜å¼ã—ã¦ãã ã•ã„ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-rã§å®Ÿè£…ã™ã‚‹&#34;&gt;3. &lt;code&gt;R&lt;/code&gt;ã§å®Ÿè£…ã™ã‚‹ã€‚&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹ãŒ&lt;code&gt;R&lt;/code&gt;ã§ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;kalmanfiter &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(y,I,t,z,c&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,R&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,Q&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,d&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,S&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,h&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,a_int&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,sig_int&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;){
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# Implemention of Kalman filter&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   y - observed variable&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   I - the number of unobserved variable&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   t - parameter of endogenous variable in state equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   z - parameter of endogenous variable in observable equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   c - constant in state equaion&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   R - parameter of exogenous variable in state equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   Q - var-cov matrix of exogenous variable in state equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   d - constant in observable equaion&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   S - parameter of exogenous variable in observable equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   h - var-cov matrix of exogenous variable in observable equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   a_int - initial value of endogenous variable&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   sig_int - initial value of variance of endogenous variable&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 1.Define Variable&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(y)&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;matrix&amp;#34;&lt;/span&gt;){
    y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(y)
  }
  N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(y) &lt;span style=&#34;color:#75715e&#34;&gt;# sample size&lt;/span&gt;
  L &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(y) &lt;span style=&#34;color:#75715e&#34;&gt;# the number of observable variable &lt;/span&gt;
  a_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# prediction of unobserved variable&lt;/span&gt;
  a_fil &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;# filtered of unobserved variable&lt;/span&gt;
  sig_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,I,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# prediction of var-cov mat. of unobserved variable&lt;/span&gt;
  sig_fil &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,I,N&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;# filtered of var-cov mat. of unobserved variable&lt;/span&gt;
  y_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(L,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# prediction of observed variable&lt;/span&gt;
  F_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(L,L,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# prediction of var-cov mat. of observable variable &lt;/span&gt;
  F_inv &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(L,L,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# inverse of F_pre&lt;/span&gt;
  k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,L,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# kalman gain&lt;/span&gt;
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(a_int))&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;){
    a_int &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(sig_int))&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;){
    sig_int &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(R))&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;){
    R &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(Q))&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;){
    Q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(S))&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;){
    S &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; L,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; L)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(h))&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;){
    H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(L,L,N))
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N){
      &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(H[,,i]) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    }
  }else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(h)&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;array&amp;#34;&lt;/span&gt;){
    H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(h,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(h),&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(h),N))
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# fill infinite if observed data is NA&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N){
    miss &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(y[i,])
    &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(H[,,i])[miss] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1e+32&lt;/span&gt;
  }
  y&lt;span style=&#34;color:#a6e22e&#34;&gt;[is.na&lt;/span&gt;(y)] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 2.Set Initial Value&lt;/span&gt;
  a_fil[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a_int
  sig_fil[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_int
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 3.Implement Kalman filter&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(z)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;array&amp;#34;&lt;/span&gt;){
      Z &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; z[,,i]
    }else{
      Z &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; z
    }
    a_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; t&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;a_fil[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; c
    sig_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; t&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;sig_fil[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(t) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; R&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;Q&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(R)
    y_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; Z&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;a_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; d
    F_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; Z&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;sig_pre[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(Z) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; S&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;H[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(S)
    k[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_pre[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(Z)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(F_pre[,,i])
    a_fil[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; k[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(y[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;y_pre[,,i])
    sig_fil[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; k[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;F_pre[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(k[,,i])
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 4.Aggregate results&lt;/span&gt;
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(a_pre,a_fil,sig_pre,sig_fil,y_pre,k,t,z)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state prediction&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state filtered&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state var prediction&amp;#34;&lt;/span&gt;, 
                     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state var filtered&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;observable prediction&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;kalman gain&amp;#34;&lt;/span&gt;,
                     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;parameter of state eq&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;parameter of observable eq&amp;#34;&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¡ˆå¤–ç°¡å˜ã«æ›¸ã‘ã‚‹ã‚‚ã‚“ã§ã™ã­ã€‚ã“ã‚Œã‚’ä½¿ã£ã¦ã€Giannone et al (2008)ã‚’ã‚„ã‚Šç›´ã—ã¦ã¿ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯å‰å›è¨˜äº‹ã¨å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ã€åˆ†æç”¨ã®&lt;code&gt;R&lt;/code&gt;ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#------------------------&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# Giannone et. al. 2008 &lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#------------------------&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(xts)

&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’è¨ˆç®—&lt;/span&gt;
f &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
z &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(dataset1)
&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z)){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;eval&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(text &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;paste&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;S_i &amp;lt;- z[i,]%*%t(z[i,])&amp;#34;&lt;/span&gt;,sep &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(i&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
    S &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; S_i
  }else{
    S &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; S &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; S_i
  }
}
S &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z))&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;S
gamma &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;eigen&lt;/span&gt;(S)
D &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(gamma&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;values[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;f])
V &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; gamma&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;vectors[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;f]
F_t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z),f)
&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z)){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;eval&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(text &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;paste&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;F_t[&amp;#34;&lt;/span&gt;,i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,]&amp;lt;- z[&amp;#34;&lt;/span&gt;,i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,]%*%V&amp;#34;&lt;/span&gt;,sep &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))
}
lambda_hat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; V
psi &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(S&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;V&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;D&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V)))
R &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cov&lt;/span&gt;(z&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;z&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;V&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V))))

a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,f,f)
b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,f,f)
&lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(t in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z)){
  a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; F_t[t,]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(F_t[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,])
  b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; b &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; F_t[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(F_t[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,])
}
b_inv &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(b)
A_hat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;b_inv

e &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(f)
&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(t in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(F_t)){
  e &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; e &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; F_t[t,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;F_t[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;A_hat
}
H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(e)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;e
Q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,f,f)
Q[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;f,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;f] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; H

p &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;kronecker&lt;/span&gt;(A_hat,A_hat)))&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kronecker&lt;/span&gt;(A_hat,A_hat))

result1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;kalmanfiter&lt;/span&gt;(z,f,A_hat,lambda_hat,c&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,R&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,Q&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Q,d&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,S&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,h&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;R,a_int&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;F_t[1,],sig_int&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(p,f,f))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(ggplot2)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(tidyverse)

&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gather&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(factor1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;result1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state filtered`[1,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(result1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state filtered`)[3]],factor2&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;result1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state filtered`[2,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(result1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state filtered`)[3]],factor3&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;result1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state filtered`[3,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(result1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state filtered`)[3]],time&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(dataset1))),key &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; factor,value &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; value,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;time),&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;time,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;value,colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;factor)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post3/index_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;giannoneã®è¨˜äº‹ã‚’æ›¸ã„ãŸéš›ã¯ã€å…ƒè«–æ–‡ã®&lt;code&gt;MATLAB&lt;/code&gt;ã‚³ãƒ¼ãƒ‰ã‚’å‚è€ƒã«Rã§æ›¸ã„ãŸã®ã§ã™ãŒã€é€šå¸¸ã®ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¨ã¯è¦³æ¸¬å¤‰æ•°ã®åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã®é€†æ•°ã®è¨ˆç®—æ–¹æ³•ãŒé•ã†ã‚‰ã—ãã‚°ãƒ©ãƒ•ã®å½¢ãŒç•°ãªã£ã¦ã„ã¾ã™ã€‚ã¾ã‚ã§ã‚‚ã€æ¦‚å½¢ã¯ã»ã¨ã‚“ã©åŒã˜ã§ã™ãŒï¼ˆãªã®ã§ã€ã¡ã‚ƒã‚“ã¨å‹•ã„ã¦ã„ã‚‹ã¯ãšï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-ã‚«ãƒ«ãƒãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°&#34;&gt;4. ã‚«ãƒ«ãƒãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°&lt;/h2&gt;
&lt;p&gt;ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã®å®Ÿè£…ã¯ä»¥ä¸Šã§çµ‚äº†ãªã®ã§ã™ãŒã€èª¤å·®é …ã®æ­£è¦æ€§ã‚’ä»®å®šã™ã‚Œã°$T$æœŸã¾ã§ã®æƒ…å ±é›†åˆ$\Omega_{T}$ã‚’ç”¨ã„ã¦ã€$a_{i|i}, \Sigma_{i|i}(i = 1:T)$ã‚’$a_{i|T}, \Sigma_{i|T}(i = 1:T)$ã¸æ›´æ–°ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã‚’ã‚«ãƒ«ãƒãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã¨å‘¼ã³ã¾ã™ã€‚ã“ã‚Œã‚’å°å‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãã®æº–å‚™ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãª$\alpha_{t|t}$ã¨$\alpha_{t+1|t}$ã®æ··åˆåˆ†å¸ƒã‚’è¨ˆç®—ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} (\alpha_{t|t},\alpha_{t+1|t}) &amp;amp;=&amp;amp; N( \left( \begin{array}{cccc} E(\alpha_{t|t}) \\ E(\alpha_{t+1|t}) \end{array} \right), \left( \begin{array}{cccc} Var(\alpha_{t|t}), Cov(\alpha_{t|t},\alpha_{t+1|t}) \\ Cov(\alpha_{t+1|t},\alpha_{t|t}), Var(\alpha_{t+1|t}) \end{array} \right) ) \\ &amp;amp;=&amp;amp; N( \left( \begin{array}{cccc} a_{t|t} \\ a_{t+1|t} \end{array} \right), \left( \begin{array}{cccc} \Sigma_{t|t}, \Sigma_{t|t}T_{t}&#39; \\ T_{t}\Sigma_{t|t}, \Sigma_{t+1|t}  \end{array} \right) ) \end{eqnarray}&lt;/code&gt;
$$
ã“ã“ã§ã€$Cov(\alpha_{t|t},\alpha_{t+1|t})$ã¯&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} Cov(\alpha_{t+1|t},\alpha_{t|t}) &amp;amp;=&amp;amp; Cov(T_{t}\alpha_{t-1} + c_{t} + R_{t}\eta_{t}, \alpha_{t|t}) \\ &amp;amp;=&amp;amp; T_{t}Cov(\alpha_{t|t},\alpha_{t|t}) + Cov(c_{t},\alpha_{t|t}) + Cov(R_{t}\eta_{t},\alpha_{t|t}) \\ &amp;amp;=&amp;amp; T_{t}Var(\alpha_{t|t}) = T_{t}\Sigma_{t|t} \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€æ¡ä»¶ä»˜ãå¤šå¤‰é‡æ­£è¦åˆ†å¸ƒã¯ä»¥ä¸‹ã®ã‚ˆã†ãªåˆ†å¸ƒã‚’ã—ã¦ã„ã‚‹ã“ã¨ã‚’æ€ã„å‡ºã—ã¾ã—ã‚‡ã†ï¼ˆ
&lt;a href=&#34;https://mathwords.net/gaussjoken&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‚è€ƒ&lt;/a&gt;
ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;$$
(X_{1},X_{2}) = N(
\left(
\begin{array}{cccc}
\mu_{1} \&lt;br&gt;
\mu_{2}
\end{array}
\right),
\left(
\begin{array}{cccc}
\Sigma_{11}, \Sigma_{12} \&lt;br&gt;
\Sigma_{21}, \Sigma_{22}
\end{array}
\right)
) \&lt;br&gt;
$$
$$
(X_{1}|X_{2}=x_{2}) = N(\mu_{1} + \Sigma_{12}\Sigma_{22}^{-1}(x_{2}-\mu_{2}),\Sigma_{11}-\Sigma_{12}\Sigma_{22}^{-1}\Sigma_{21})
$$&lt;/p&gt;
&lt;p&gt;ã“ã‚Œã‚’ç”¨ã„ã¦ã€$(\alpha_{t|t}|\alpha_{t+1|t}=a_{t+1})$ã‚’è¨ˆç®—ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} (\alpha_{t|t}|\alpha_{t+1|t}=a_{t+1}) &amp;amp;=&amp;amp; N(a_{t|t} + \Sigma_{t|t}T_{t}&#39;\Sigma_{t+1|t}^{-1}(a_{t+1}-a_{t+1|t}), \Sigma_{t|t}-\Sigma_{t|t}T_{t}&#39;\Sigma_{t+1|t}^{-1}T_{t}\Sigma_{t|t}) \\ &amp;amp;=&amp;amp;N(a_{t|t} + L_{t}(a_{t+1}-a_{t+1|t}), \Sigma_{t|t}-L_{t}\Sigma_{t+1|t}L_{t}&#39;) \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ãŸã ã—ã€$a_{t+1}$ã®å€¤ã¯è¦³æ¸¬ä¸å¯èƒ½ãªã®ã§ã€ä¸Šå¼ã‚’ç”¨ã„ã¦çŠ¶æ…‹å¤‰æ•°ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ä»Šã€ã‚ã‹ã‚‹ã®ã¯$T$æœŸã«ãŠã‘ã‚‹$a_{t+1|T}$ã®åˆ†å¸ƒã®ã¿ã§ã™ã€‚ã¨ã„ã†ã“ã¨ã§ã€$a_{t+1}$ã‚’$a_{t+1|T}$ã§ä»£ç”¨ã—ã€$\alpha_{t|T}$ã®åˆ†å¸ƒã‚’æ±‚ã‚ã¦ã¿ã¾ã™ã€‚ã§ã¯ã€è¨ˆç®—ã—ã¦ã„ãã¾ã™ã€‚$\alpha_{t|T} = N(E(\alpha_{t|T}),Var(\alpha_{t|T}))$ã§ã™ãŒã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} E(\alpha_{t|T}) &amp;amp;=&amp;amp; E_{\alpha_{t+1|T}}(E(\alpha_{t|t}|\alpha_{t+1|t}=\alpha_{t+1|T})) \\ Var(\alpha_{t|T}) &amp;amp;=&amp;amp; E_{\alpha_{t+1|T}}(Var(\alpha_{t|t}|\alpha_{t+1|t} = \alpha_{t+1|T})) + Var_{\alpha_{t+1|T}}(E(\alpha_{t|t}|\alpha_{t+1|t}=\alpha_{t+1|T})) \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã¨ã„ã†ã‚ˆã†ã«ã€$\alpha_{t+1|T}$ã‚‚ç¢ºç‡å¤‰æ•°ã¨ãªã‚‹ã®ã§ã€ç¹°ã‚Šè¿”ã—æœŸå¾…å€¤ã®æ³•å‰‡ã¨ç¹°ã‚Šè¿”ã—åˆ†æ•£ã®æ³•å‰‡ã‚’ä½¿ç”¨ã—ã¾ã™ï¼ˆ&lt;a href=&#34;https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-041-probabilistic-systems-analysis-and-applied-probability-fall-2010/video-lectures/lecture-12-iterated-expectations-sum-of-a-random-number-of-random-variables/MIT6_041F10_L12.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã‚’å‚ç…§ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;*ç¹°ã‚Šè¿”ã—æœŸå¾…å€¤ã®æ³•å‰‡
&lt;code&gt;\(E(x) = E_{Z}(E(X|Y=Z))\)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;*ç¹°ã‚Šè¿”ã—åˆ†æ•£ã®æ³•å‰‡
&lt;code&gt;\(Var(X) = E_{Z}(Var(X|Y=Z))+Var_{Z}(E(X|Y=Z))\)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã‚ˆã£ã¦ã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} E(\alpha_{t|T}) &amp;amp;=&amp;amp; E_{\alpha_{t+1|T}}(E(\alpha_{t|t}|\alpha_{t+1|t}=\alpha_{t+1|T})) \\ &amp;amp;=&amp;amp; a_{t|t} + L_{t}(a_{t+1|T}-a_{t+1|t}) \\ Var(\alpha_{t|T}) &amp;amp;=&amp;amp; E_{\alpha_{t+1|T}}(Var(\alpha_{t|t}|\alpha_{t+1|t}=\alpha_{t+1|T})) + Var_{\alpha_{t+1|T}}(E(\alpha_{t|t}|\alpha_{t+1|t}=\alpha_{t+1|T})) \\ &amp;amp;=&amp;amp; \Sigma_{t|t} - L_{t}\Sigma_{t+1|t}L_{t}&#39; + E( (a_{t|t} + L_{t}(\alpha_{t+1|T}-a_{t+1|t}) - a_{t|t} - L_{t}(a_{t+1|T}-a_{t+1|t}))(a_{t|t} + L_{t}(\alpha_{t+1|T}-a_{t+1|t}) - a_{t|t} - L_{t}(a_{t+1|T}-a_{t+1|t}))&#39;) \\ &amp;amp;=&amp;amp; \Sigma_{t|t} - L_{t}\Sigma_{t+1|t}L_{t}&#39; + E( (L_{t}(\alpha_{t+1|T}-a_{t+1|t}) - L_{t}(a_{t+1|T}-a_{t+1|t}))(L_{t}(\alpha_{t+1|T}-a_{t+1|t}) - L_{t}(a_{t+1|T}-a_{t+1|t}))&#39;) \\ &amp;amp;=&amp;amp; \Sigma_{t|t} - L_{t}\Sigma_{t+1|t}L_{t}&#39; + E( (L_{t}\alpha_{t+1|T} - L_{t}a_{t+1|T})(L_{t}\alpha_{t+1|T} - L_{t}(a_{t+1|T})&#39;) \\ &amp;amp;=&amp;amp; \Sigma_{t|t} - L_{t}\Sigma_{t+1|t}L_{t}&#39; + E( L_{t}(\alpha_{t+1|T} - a_{t+1|T})(\alpha_{t+1|T} - a_{t+1|T})&#39;L_{t}&#39;) \\ &amp;amp;=&amp;amp; \Sigma_{t|t} - L_{t}\Sigma_{t+1|t}L_{t}&#39; + L_{t}E( (\alpha_{t+1|T} - a_{t+1|T})(\alpha_{t+1|T} - a_{t+1|T})&#39;)L_{t}&#39; \\ &amp;amp;=&amp;amp; \Sigma_{t|t} - L_{t}\Sigma_{t+1|t}L_{t}&#39; + L_{t}\Sigma_{t+1|T}L_{t}&#39; \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚ã‚«ãƒ«ãƒãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} L_{t} &amp;amp;=&amp;amp; \Sigma_{t|t}T_{t}\Sigma_{t+1|t}^{-1} \\ a_{t|T} &amp;amp;=&amp;amp; a_{t|t} + L_{t}(a_{t+1|T} - a_{t+1|t}) \\ \Sigma_{t|T} &amp;amp;=&amp;amp; \Sigma_{t+1|t} + L_{t}(\Sigma_{t+1|T}-\Sigma_{t+1|t})L_{t}&#39; \end{eqnarray}&lt;/code&gt;
$$
ã‚«ãƒ«ãƒãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã®ç‰¹å¾´çš„ãªç‚¹ã¯å¾Œã‚å‘ãã«è¨ˆç®—ã‚’ã—ã¦ã„ãç‚¹ã§ã™ã€‚ã¤ã¾ã‚Šã€$T$æœŸã‹ã‚‰1æœŸã«å‘ã‘ã¦è¨ˆç®—ã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚$L_{t}$ã«é–¢ã—ã¦ã¯ãã‚‚ãã‚‚ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚’å›ã—ãŸæ™‚ç‚¹ã§è¨ˆç®—å¯èƒ½ã§ã™ãŒã€$\alpha_{t|T}$ã¯$T$æœŸã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ãŒæ‰‹å…ƒã«ãªã„ã¨è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚ä»Šã€$T$æœŸã¾ã§è¦³æ¸¬å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãŒå…¥æ‰‹ã§ããŸã¨ã—ã¾ã—ã‚‡ã†ã€‚ã™ã‚‹ã¨ã€ï¼’ç•ªç›®ã®æ–¹ç¨‹å¼ã‚’ç”¨ã„ã¦ã€$a_{T-1|T}$ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ã¡ãªã¿ã«$a_{T|T}$ã¯ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚’å›ã—ãŸæ™‚ç‚¹ã§ã™ã§ã«æ‰‹ã«å…¥ã£ã¦ã„ã‚‹ã®ã§ã€è¨ˆç®—ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚åŒæ™‚ã«ã€ï¼“ç•ªç›®ã®å¼ã‚’ç”¨ã„ã¦$\Sigma_{T-1|T}$ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ãã—ã¦ã€$a_{T-1|T},\Sigma_{T-1|T}$ã¨$L_{T-1}$ã‚’ç”¨ã„ã¦$a_{T-2|T},\Sigma_{T-2|T}$ã‚’è¨ˆç®—ã€ã¨ã„ã†ã‚ˆã†ã«1æœŸã«å‘ã‘ã¦å¾Œã‚å‘ãã«è¨ˆç®—ã‚’ã—ã¦ã„ãã®ã§ã™ã€‚ã•ãã»ã©ã€é·ç§»æ–¹ç¨‹å¼ã®èª¤å·®é …$\eta_{t}$ã¨å®šæ•°é …$c_{t}$ãŒãªãã€é·ç§»æ–¹ç¨‹å¼ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå˜ä½è¡Œåˆ—ã®ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¯é€æ¬¡æœ€å°è‡ªä¹—æ³•ã¨ä¸€è‡´ã™ã‚‹ã¨æ›¸ãã¾ã—ãŸãŒã€ã‚«ãƒ«ãƒãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã®å ´åˆã¯$T$æœŸã¾ã§ã®ã‚µãƒ³ãƒ—ãƒ«ã§&lt;code&gt;OLS&lt;/code&gt;ã‚’è¡Œã£ãŸçµæœã¨ä¸€è‡´ã—ã¾ã™ã€‚
&lt;code&gt;R&lt;/code&gt;ã§å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;kalmansmoothing &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(filter){
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# Implemention of Kalman smoothing&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   t - parameter of endogenous variable in state equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   z - parameter of endogenous variable in observable equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   a_pre - prediction of state&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   a_fil - filtered value of state&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   sig_pre - prediction of var of state&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   sig_fil - filtered value of state&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 1.Define variable&lt;/span&gt;
  a_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; filter&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state prediction`
  a_fil &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; filter&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state filtered`
  sig_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; filter&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state var prediction`
  sig_fil &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; filter&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state var filtered`
  t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; filter&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`parameter of state eq`
  C &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(sig_pre))
  a_sm &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(a_pre))
  sig_sm &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(sig_pre))
  N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(C)[3]
  a_sm[,,N] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a_fil[,,N]
  sig_sm[,,N] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_fil[,,N]
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in N&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;){
    C[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_fil[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(t)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(sig_pre[,,i])
    a_sm[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a_fil[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; C[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(a_sm[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;a_pre[,,i])
    sig_sm[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_fil[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; C[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(sig_sm[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sig_pre[,,i])&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(C[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;])
  }
  
  
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(a_sm,sig_sm,C)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state smoothed&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state var smoothed&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;c&amp;#34;&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…ˆã»ã©ã®ã‚³ãƒ¼ãƒ‰ã®ç¶šãã§&lt;code&gt;R&lt;/code&gt;ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;result2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;kalmansmoothing&lt;/span&gt;(result1)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‹ãªã‚Šã‚·ãƒ³ãƒ—ãƒ«ã§ã™ã­ã€‚ã¡ãªã¿ã«ã‚°ãƒ©ãƒ•ã«ã—ã¾ã—ãŸãŒã€ï¼‘å€‹ç›®ã¨ã»ã¼å¤‰ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã¨ã‚Šã‚ãˆãšã€ä»Šæ—¥ã¯ã“ã“ã¾ã§ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Slides</title>
      <link>/slides/example/</link>
      <pubDate>Tue, 05 Feb 2019 00:00:00 +0000</pubDate>
      <guid>/slides/example/</guid>
      <description>&lt;h1 id=&#34;create-slides-in-markdown-with-academic&#34;&gt;Create slides in Markdown with Academic&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://sourcethemes.com/academic/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Academic&lt;/a&gt; | &lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Documentation&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;features&#34;&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Efficiently write slides in Markdown&lt;/li&gt;
&lt;li&gt;3-in-1: Create, Present, and Publish your slides&lt;/li&gt;
&lt;li&gt;Supports speaker notes&lt;/li&gt;
&lt;li&gt;Mobile friendly slides&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;controls&#34;&gt;Controls&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Next: &lt;code&gt;Right Arrow&lt;/code&gt; or &lt;code&gt;Space&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Previous: &lt;code&gt;Left Arrow&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Start: &lt;code&gt;Home&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Finish: &lt;code&gt;End&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Overview: &lt;code&gt;Esc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Speaker notes: &lt;code&gt;S&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fullscreen: &lt;code&gt;F&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Zoom: &lt;code&gt;Alt + Click&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/hakimel/reveal.js#pdf-export&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;PDF Export&lt;/a&gt;: &lt;code&gt;E&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;code-highlighting&#34;&gt;Code Highlighting&lt;/h2&gt;
&lt;p&gt;Inline code: &lt;code&gt;variable&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Code block:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;porridge &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blueberry&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; porridge &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blueberry&amp;#34;&lt;/span&gt;:
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Eating...&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;math&#34;&gt;Math&lt;/h2&gt;
&lt;p&gt;In-line math: $x + y = z$&lt;/p&gt;
&lt;p&gt;Block math:&lt;/p&gt;
&lt;p&gt;$$
f\left( x \right) = ;\frac{{2\left( {x + 4} \right)\left( {x - 4} \right)}}{{\left( {x + 4} \right)\left( {x + 1} \right)}}
$$&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;fragments&#34;&gt;Fragments&lt;/h2&gt;
&lt;p&gt;Make content appear incrementally&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{{% fragment %}} One {{% /fragment %}}
{{% fragment %}} **Two** {{% /fragment %}}
{{% fragment %}} Three {{% /fragment %}}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Press &lt;code&gt;Space&lt;/code&gt; to play!&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;fragment &#34; &gt;
One 
&lt;/span&gt;
&lt;span class=&#34;fragment &#34; &gt;
&lt;strong&gt;Two&lt;/strong&gt; 
&lt;/span&gt;
&lt;span class=&#34;fragment &#34; &gt;
Three 
&lt;/span&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A fragment can accept two optional parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;class&lt;/code&gt;: use a custom style (requires definition in custom CSS)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;weight&lt;/code&gt;: sets the order in which a fragment appears&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;speaker-notes&#34;&gt;Speaker Notes&lt;/h2&gt;
&lt;p&gt;Add speaker notes to your presentation&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-markdown&#34; data-lang=&#34;markdown&#34;&gt;{{% speaker_note %}}
&lt;span style=&#34;color:#66d9ef&#34;&gt;-&lt;/span&gt; Only the speaker can read these notes
&lt;span style=&#34;color:#66d9ef&#34;&gt;-&lt;/span&gt; Press &lt;span style=&#34;color:#e6db74&#34;&gt;`S`&lt;/span&gt; key to view
{{% /speaker_note %}}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Press the &lt;code&gt;S&lt;/code&gt; key to view the speaker notes!&lt;/p&gt;
&lt;aside class=&#34;notes&#34;&gt;
  &lt;ul&gt;
&lt;li&gt;Only the speaker can read these notes&lt;/li&gt;
&lt;li&gt;Press &lt;code&gt;S&lt;/code&gt; key to view&lt;/li&gt;
&lt;/ul&gt;

&lt;/aside&gt;
&lt;hr&gt;
&lt;h2 id=&#34;themes&#34;&gt;Themes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;black: Black background, white text, blue links (default)&lt;/li&gt;
&lt;li&gt;white: White background, black text, blue links&lt;/li&gt;
&lt;li&gt;league: Gray background, white text, blue links&lt;/li&gt;
&lt;li&gt;beige: Beige background, dark text, brown links&lt;/li&gt;
&lt;li&gt;sky: Blue background, thin dark text, blue links&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;night: Black background, thick white text, orange links&lt;/li&gt;
&lt;li&gt;serif: Cappuccino background, gray text, brown links&lt;/li&gt;
&lt;li&gt;simple: White background, black text, blue links&lt;/li&gt;
&lt;li&gt;solarized: Cream-colored background, dark green text, blue links&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;

&lt;section data-noprocess data-shortcode-slide
  
      
      data-background-image=&#34;/media/boards.jpg&#34;
  &gt;

&lt;h2 id=&#34;custom-slide&#34;&gt;Custom Slide&lt;/h2&gt;
&lt;p&gt;Customize the slide style and background&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-markdown&#34; data-lang=&#34;markdown&#34;&gt;{{&amp;lt; &lt;span style=&#34;color:#f92672&#34;&gt;slide&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;background-image&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/media/boards.jpg&amp;#34;&lt;/span&gt; &amp;gt;}}
{{&amp;lt; &lt;span style=&#34;color:#f92672&#34;&gt;slide&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;background-color&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;#0000FF&amp;#34;&lt;/span&gt; &amp;gt;}}
{{&amp;lt; &lt;span style=&#34;color:#f92672&#34;&gt;slide&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;my-style&amp;#34;&lt;/span&gt; &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h2 id=&#34;custom-css-example&#34;&gt;Custom CSS Example&lt;/h2&gt;
&lt;p&gt;Let&amp;rsquo;s make headers navy colored.&lt;/p&gt;
&lt;p&gt;Create &lt;code&gt;assets/css/reveal_custom.css&lt;/code&gt; with:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-css&#34; data-lang=&#34;css&#34;&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;reveal&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;section&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;h1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt;
.&lt;span style=&#34;color:#a6e22e&#34;&gt;reveal&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;section&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;h2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;,&lt;/span&gt;
.&lt;span style=&#34;color:#a6e22e&#34;&gt;reveal&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;section&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;h3&lt;/span&gt; {
  &lt;span style=&#34;color:#66d9ef&#34;&gt;color&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;navy&lt;/span&gt;;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h1 id=&#34;questions&#34;&gt;Questions?&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;https://spectrum.chat/academic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ask&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Documentation&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ã‚¬ã‚¦ã‚¹å›å¸°ã®å®Ÿè£…ã‚’ã‚„ã£ã¦ã¿ãŸ</title>
      <link>/post/post1/</link>
      <pubDate>Sun, 02 Dec 2018 00:00:00 +0000</pubDate>
      <guid>/post/post1/</guid>
      <description>&lt;p&gt;ã€€ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚æ˜¨æ—¥ã€&lt;code&gt;Bayesian Vector Autoregression&lt;/code&gt;ã®è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸã€‚&lt;br&gt;
ã€€ãã®ä¸­ã§ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã®è©±ãŒå‡ºã¦ãã¦ã€ãªã«ã‹åŠ¹ç‡çš„ã«ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¡Œã†æ–¹æ³•ã¯ãªã„ã‹ã¨æ¢ã—ã¦ã„ãŸéš›ã«&lt;code&gt;Bayesian Optimization&lt;/code&gt;ã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚æ—¥æ¬¡GDPã§ã‚‚æ©Ÿæ¢°å­¦ç¿’ã®æ‰‹æ³•ã‚’åˆ©ç”¨ã—ã‚ˆã†ã¨æ€ã£ã¦ã„ã‚‹ã®ã§ã€&lt;code&gt;Bayesian Optimization&lt;/code&gt;ã¯ã‹ãªã‚Šä½¿ãˆã‚‹æ‰‹æ³•ã§ã¯ãªã„ã‹ã¨æ€ã„ã€æ˜¨æ—¥å¾¹å¤œã§ç†è§£ã—ã¾ã—ãŸã€‚&lt;br&gt;
ã€€ãã®å†…å®¹ã‚’ã“ã“ã§å®Ÿè£…ã—ã‚ˆã†ã¨ã¯æ€ã†ã®ã§ã™ãŒã€&lt;code&gt;Bayesian Optimization&lt;/code&gt;ã§ã¯ã‚¬ã‚¦ã‚¹å›å¸°ï¼ˆ&lt;code&gt;Gaussian Pocess Regression&lt;/code&gt;,ä»¥ä¸‹&lt;code&gt;GPR&lt;/code&gt;ï¼‰ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€ã¾ãšãã®å®Ÿè£…ã‚’è¡ŒãŠã†ã¨æŒã£ãŸã®ãŒã“ã®ã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ã„ãŸå‹•æ©Ÿã§ã™ã€‚&lt;code&gt;Bayesian Optimization&lt;/code&gt;ã®å®Ÿè£…ã¯ã“ã®ã‚¨ãƒ³ãƒˆãƒªã®å¾Œã«ã§ã‚‚æ›¸ã“ã†ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-gprã¨ã¯&#34;&gt;1. &lt;code&gt;GPR&lt;/code&gt;ã¨ã¯&lt;/h2&gt;
&lt;p&gt;ã€€&lt;code&gt;GRP&lt;/code&gt;ã¨ã¯ç°¡å˜ã«è¨€ã£ã¦ã—ã¾ãˆã°ã€Œ&lt;strong&gt;ãƒ™ã‚¤ã‚ºæ¨å®šã‚’ç”¨ã„ãŸéç·šå½¢å›å¸°æ‰‹æ³•ã®ï¼‘ç¨®&lt;/strong&gt;ã€ã§ã™ã€‚ãƒ¢ãƒ‡ãƒ«è‡ªä½“ã¯ç·šå½¢ã§ã™ãŒã€&lt;strong&gt;ã‚«ãƒ¼ãƒãƒ«ãƒˆãƒªãƒƒã‚¯ã‚’ç”¨ã„ã¦å…¥åŠ›å¤‰æ•°ã‚’ç„¡é™å€‹éç·šå½¢å¤‰æ›ã—ãŸã‚‚ã®&lt;/strong&gt;ã‚’èª¬æ˜å¤‰æ•°ã¨ã—ã¦æ¨å®šã§ãã‚‹ã¨ã“ã‚ãŒç‰¹å¾´ã§ã™ï¼ˆã‚«ãƒ¼ãƒãƒ«ã«ãªã«ã‚’é¸æŠã™ã‚‹ã‹ã«ã‚ˆã‚Šã¾ã™ï¼‰ã€‚&lt;br&gt;
ã€€&lt;code&gt;GPR&lt;/code&gt;ãŒæƒ³å®šã—ã¦ã„ã‚‹ã®ã¯ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã¨æ•™å¸«ãƒ‡ãƒ¼ã‚¿ãŒãã‚Œãã‚ŒNå€‹å¾—ã‚‰ã‚Œã¦ãŠã‚Šã€ã¾ãŸå…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã«é–¢ã—ã¦ã¯$N+1$å€‹ç›®ã®ãƒ‡ãƒ¼ã‚¿ã‚‚å¾—ã‚‰ã‚Œã¦ã„ã‚‹çŠ¶æ³ã§ã™ã€‚ã“ã®çŠ¶æ³ã‹ã‚‰ã€$N+1$å€‹ç›®ã®æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã‚’äºˆæ¸¬ã—ã¾ã™ã€‚&lt;br&gt;
ã€€æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã«ã¯ãƒã‚¤ã‚ºãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªç¢ºç‡ãƒ¢ãƒ‡ãƒ«ã«å¾“ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
t_{i} = y_{i} + \epsilon_{i}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$t_{i}$ã¯$i$ç•ªç›®ã®è¦³æ¸¬å¯èƒ½ãªæ•™å¸«ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¹ã‚«ãƒ©ãƒ¼ï¼‰ã€$y_{i}$ã¯è¦³æ¸¬ã§ããªã„å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¹ã‚«ãƒ©ãƒ¼ï¼‰ã€$\epsilon_{i}$ã¯æ¸¬å®šèª¤å·®ã§æ­£è¦åˆ†å¸ƒ$N(0,\beta^{-1})$ã«å¾“ã„ã¾ã™ã€‚$y_{i}$ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªç¢ºç‡ãƒ¢ãƒ‡ãƒ«ã«å¾“ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle y_{i}  = \textbf{w}^{T}\phi(x_{i})
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$x_{i}$ã¯iç•ªç›®ã®å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ãƒ™ã‚¯ãƒˆãƒ«ã€$\phi(ãƒ»)$ã¯éç·šå½¢é–¢æ•°ã€ $\textbf{w}^{T}$ã¯å„å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹é‡ã¿ä¿‚æ•°ï¼ˆå›å¸°ä¿‚æ•°ï¼‰ãƒ™ã‚¯ãƒˆãƒ«ã§ã™ã€‚éç·šå½¢é–¢æ•°ã¨ã—ã¦ã¯ã€$\phi(x_{i}) = (x_{1,i}, x_{1,i}^{2},&amp;hellip;,x_{1,i}x_{2,i},&amp;hellip;)$ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ï¼ˆ$x_{1,i}$ã¯$i$ç•ªç›®ã®å…¥åŠ›ãƒ‡ãƒ¼ã‚¿$x_{i}$ã®ï¼‘ç•ªç›®ã®å¤‰æ•°ï¼‰ã€‚æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã®ç¢ºç‡ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ã€$i$ç•ªç›®ã®å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿$y_{i}$ãŒå¾—ã‚‰ã‚ŒãŸã†ãˆã§$t_{i}$ãŒå¾—ã‚‰ã‚Œã‚‹æ¡ä»¶ä»˜ç¢ºç‡ã¯ã€&lt;/p&gt;
&lt;p&gt;$$
p(t_{i}|y_{i}) = N(t_{i}|y_{i},\beta^{-1})
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚$\displaystyle \textbf{t} = (t_{1},&amp;hellip;,t_{n})^{T}$ã€$\displaystyle \textbf{y} = (y_{1},&amp;hellip;,y_{n})^{T}$ã¨ã™ã‚‹ã¨ã€ä¸Šå¼ã‚’æ‹¡å¼µã™ã‚‹ã“ã¨ã§&lt;/p&gt;
&lt;p&gt;$$
\displaystyle p(\textbf{t}|\textbf{y}) = N(\textbf{t}|\textbf{y},\beta^{-1}\textbf{I}_{N})
$$&lt;/p&gt;
&lt;p&gt;ã¨æ›¸ã‘ã¾ã™ã€‚ã¾ãŸã€äº‹å‰åˆ†å¸ƒã¨ã—ã¦$\textbf{w}$ã®æœŸå¾…å€¤ã¯0ã€åˆ†æ•£ã¯å…¨ã¦$\alpha$ã¨ä»®å®šã—ã¾ã™ã€‚$\displaystyle \textbf{y}$ã¯ã‚¬ã‚¦ã‚¹éç¨‹ã«å¾“ã†ã¨ä»®å®šã—ã¾ã™ã€‚ã‚¬ã‚¦ã‚¹éç¨‹ã¨ã¯ã€$\displaystyle \textbf{y}$ã®åŒæ™‚åˆ†å¸ƒãŒå¤šå¤‰é‡ã‚¬ã‚¦ã‚¹åˆ†å¸ƒã«å¾“ã†ã‚‚ã®ã®ã“ã¨ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã§æ›¸ãã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;\normalsize&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Define Kernel function&lt;/span&gt;
Kernel_Mat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(X,sigma,beta){
  N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(X)
  K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,N,N)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N) {
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N) {
      &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(i&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;k) kdelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; else kdelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
      K[i,k] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K[k,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(X[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;X[k,])&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigma^2)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; beta^{&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;}&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;kdelta
    }
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(K)
}

N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# max value of X&lt;/span&gt;
M &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# sample size&lt;/span&gt;
X &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N,length&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;M),M,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# create X&lt;/span&gt;
testK &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Kernel_Mat&lt;/span&gt;(X,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1e+18&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# calc kernel matrix&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)

P &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;6&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# num of sample path&lt;/span&gt;
Y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,M,P) &lt;span style=&#34;color:#75715e&#34;&gt;# define Y&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;P){
  Y[,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mvrnorm&lt;/span&gt;(n&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,M),testK) &lt;span style=&#34;color:#75715e&#34;&gt;# sample Y&lt;/span&gt;
}

&lt;span style=&#34;color:#75715e&#34;&gt;# Plot&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;matplot&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;Y,type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;l&amp;#34;&lt;/span&gt;,lwd &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;\normalsize&lt;img src=&#34;index_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã€€Kernel_Matã«ã¤ã„ã¦ã¯å¾Œè¿°ã—ã¾ã™ãŒã€$\displaystyle \textbf{y}$ã®å„è¦ç´ $\displaystyle y_{i}  = \textbf{w}^{T}\phi(x_{i})$ã®é–“ã®å…±åˆ†æ•£è¡Œåˆ—$K$ã‚’å…¥åŠ›$x$ã‹ã‚‰ã‚«ãƒ¼ãƒãƒ«æ³•ã‚’ç”¨ã„ã¦è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚ãã—ã¦ã€ã“ã®$K$ã¨å¹³å‡0ã‹ã‚‰ã€å¤šå¤‰é‡æ­£è¦ä¹±æ•°ã‚’6ç³»åˆ—ç”Ÿæˆã—ã€ãã‚Œã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã“ã‚Œã‚‰ã®ç³»åˆ—ã¯å…±åˆ†æ•£è¡Œåˆ—ã‹ã‚‰è¨ˆç®—ã•ã‚Œã‚‹ã®ã§ã€&lt;strong&gt;å„è¦ç´ ã®å…±åˆ†æ•£ãŒæ­£ã«å¤§ãããªã‚Œã°ãªã‚‹ã»ã©åŒã˜å€¤ã‚’ã¨ã‚Šã‚„ã™ããªã‚‹&lt;/strong&gt;ã‚ˆã†ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ã‚°ãƒ©ãƒ•ã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«éå¸¸ã«ãªã‚ã‚‰ã‹ãªã‚°ãƒ©ãƒ•ãŒç”Ÿæˆã•ã‚Œã¦ãŠã‚Šã€ã‹ã¤éå¸¸ã«æŸ”è»Ÿãªé–¢æ•°ã‚’è¡¨ç¾ã§ãã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã§ã¯è¨ˆç®—ã‚³ã‚¹ãƒˆã®é–¢ä¿‚ä¸Šã€å…¥åŠ›ã‚’0ã‹ã‚‰10ã«é™å®šã—ã¦1000å€‹ã®å…¥åŠ›ç‚¹ã‚’ã‚µãƒ³ãƒ—ãƒ«ã—ã€ä½œå›³ã‚’è¡Œã£ã¦ã„ã¾ã™ãŒã€åŸç†çš„ã«ã¯$x$ã¯å®Ÿæ•°ç©ºé–“ã§å®šç¾©ã•ã‚Œã‚‹ã‚‚ã®ã§ã‚ã‚‹ã®ã§ã€$p(\textbf{y})$ã¯ç„¡é™æ¬¡å…ƒã®å¤šå¤‰é‡æ­£è¦åˆ†å¸ƒã«å¾“ã„ã¾ã™ã€‚
ä»¥ä¸Šã®ã‚ˆã†ã«ã€$\displaystyle \textbf{y}$ã¯ã‚¬ã‚¦ã‚¹éç¨‹ã«å¾“ã†ã¨ä»®å®šã™ã‚‹ã®ã§åŒæ™‚ç¢ºç‡$p(\textbf{y})$ã¯å¹³å‡0ã€åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ãŒ$K$ã®å¤šå¤‰é‡æ­£è¦åˆ†å¸ƒ$N(\textbf{y}|0,K)$ã«å¾“ã„ã¾ã™ã€‚ã“ã“ã§ã€$K$ã®å„è¦ç´ $K_{i,j}$ã¯ã€&lt;/p&gt;
&lt;p&gt;$$
\begin{eqnarray}
K_{i,j} &amp;amp;=&amp;amp; cov[y_{i},y_{j}] = cov[\textbf{w}\phi(x_{i}),\textbf{w}\phi(x_{j})] \&lt;br&gt;
&amp;amp;=&amp;amp;\phi(x_{i})\phi(x_{j})cov[\textbf{w},\textbf{w}]=\phi(x_{i})\phi(x_{j})\alpha
\end{eqnarray}
$$&lt;/p&gt;
&lt;p&gt;ã§ã™ã€‚ã“ã“ã§ã€$\phi(x_{i})\phi(x_{j})\alpha$ã¯$\phi(x_{i})$ã®**æ¬¡å…ƒãŒå¤§ãããªã‚Œã°ãªã‚‹ã»ã©è¨ˆç®—é‡ãŒå¤šã**ãªã‚Šã¾ã™ï¼ˆã¤ã¾ã‚Šã€éç·šå½¢å¤‰æ›ã‚’ã‹ã‘ã‚Œã°ã‹ã‘ã‚‹ã»ã©è¨ˆç®—ãŒçµ‚ã‚ã‚‰ãªã„ï¼‰ã€‚ã—ã‹ã—ã€ã‚«ãƒ¼ãƒãƒ«é–¢æ•°$k(x,x&#39;)$ã‚’ç”¨ã„ã‚‹ã¨ã€è¨ˆç®—é‡ã¯é«˜ã€…å…¥åŠ›ãƒ‡ãƒ¼ã‚¿$x_{i},x_{j}$ã®ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã®æ¬¡å…ƒã«ãªã‚‹ã®ã§ã€è¨ˆç®—ãŒã—ã‚„ã™ããªã‚Šã¾ã™ã€‚ã‚«ãƒ¼ãƒãƒ«é–¢æ•°ã‚’ç”¨ã„ã¦$K_{i,j} = k(x_{i},x_{j})$ã¨ãªã‚Šã¾ã™ã€‚ã‚«ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦ã¯ã„ãã¤ã‹ç¨®é¡ãŒã‚ã‚Šã¾ã™ãŒã€ä»¥ä¸‹ã®ã‚¬ã‚¦ã‚¹ã‚«ãƒ¼ãƒãƒ«ãŒã‚ˆãä½¿ç”¨ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
k(x,x&#39;) = a \exp(-b(x-x&#39;)^{2})
$$&lt;/p&gt;
&lt;p&gt;$\displaystyle \textbf{y}$ã®åŒæ™‚ç¢ºç‡ãŒå®šç¾©ã§ããŸã®ã§ã€$\displaystyle \textbf{t}$ã®åŒæ™‚ç¢ºç‡ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\begin{eqnarray}
\displaystyle p(\textbf{t}) &amp;amp;=&amp;amp; \int p(\textbf{t}|\textbf{y})p(\textbf{y}) d\textbf{y} \&lt;br&gt;
\displaystyle &amp;amp;=&amp;amp; \int N(\textbf{t}|\textbf{y},\beta^{-1}\textbf{I}&lt;em&gt;{N})N(\textbf{y}|0,K)d\textbf{y} \&lt;br&gt;
&amp;amp;=&amp;amp; N(\textbf{y}|0,\textbf{C}&lt;/em&gt;{N})
\end{eqnarray}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\textbf{C}&lt;em&gt;{N} = K + \beta^{-1}\textbf{I}&lt;/em&gt;{N}$ã§ã™ã€‚ãªãŠã€æœ€å¾Œã®å¼å±•é–‹ã¯æ­£è¦åˆ†å¸ƒã®å†ç”Ÿæ€§ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ï¼ˆè¨¼æ˜ã¯æ­£è¦åˆ†å¸ƒã®ç©ç‡æ¯é–¢æ•°ã‹ã‚‰å®¹æ˜“ã«å°ã‘ã¾ã™ï¼‰ã€‚è¦ã¯ã€ä¸¡è€…ã¯ç‹¬ç«‹ãªã®ã§å…±åˆ†æ•£ã¯2ã¤ã®åˆ†å¸ƒã®å…±åˆ†æ•£ã®å’Œã¨ãªã‚‹ã¨è¨€ã£ã¦ã„ã‚‹ã ã‘ã§ã™ã€‚å€‹äººçš„ã«ã¯ã€$p(\textbf{y})$ãŒå…ˆã»ã©èª¬æ˜ã—ãŸã‚¬ã‚¦ã‚¹éç¨‹ã®äº‹å‰åˆ†å¸ƒã§ã‚ã‚Šã€$p(\textbf{t}|\textbf{y})$ãŒå°¤åº¦é–¢æ•°ã§ã€$p(\textbf{t})$ã¯äº‹å¾Œåˆ†å¸ƒã‚’ã¨ã„ã†ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚äº‹å‰åˆ†å¸ƒ$p(\textbf{y})$ã¯åˆ¶ç´„ã®ç·©ã„åˆ†å¸ƒã§ãªã‚ã‚‰ã‹ã§ã‚ã‚‹ã“ã¨ã®ã¿ãŒå”¯ä¸€ã®åˆ¶ç´„ã§ã™ã€‚
$N$å€‹ã®è¦³æ¸¬å¯èƒ½ãªæ•™å¸«ãƒ‡ãƒ¼ã‚¿$\textbf{t}$ã¨$t_{N+1}$ã®åŒæ™‚ç¢ºç‡ã¯ã€&lt;/p&gt;
&lt;p&gt;$$
p(\textbf{t},t_{N+1}) = N(\textbf{t},t_{N+1}|0,\textbf{C}_{N+1})
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\textbf{C}_{N+1}$ã¯ã€&lt;/p&gt;
&lt;p&gt;$$
\textbf{C}&lt;em&gt;{N+1} = \left(
\begin{array}{cccc}
\textbf{C}&lt;/em&gt;{N} &amp;amp; \textbf{k} \&lt;br&gt;
\textbf{k}^{T} &amp;amp; c \&lt;br&gt;
\end{array}
\right)
$$&lt;/p&gt;
&lt;p&gt;ã§ã™ã€‚ã“ã“ã§ã€$\textbf{k} = (k(x_{1},x_{N+1}),&amp;hellip;,k(x_{N},x_{N+1}))$ã€$c = k(x_{N+1},x_{N+1})$ã§ã™ã€‚$\textbf{t}$ã¨$t_{N+1}$ã®åŒæ™‚åˆ†å¸ƒã‹ã‚‰æ¡ä»¶ä»˜åˆ†å¸ƒ$p(t_{N+1}|\textbf{t})$ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
p(t_{N+1}|\textbf{t}) = N(t_{N+1}|\textbf{k}^{T}\textbf{C}_{N+1}^{-1}\textbf{t},c-\textbf{k}^{T}\textbf{C}_{N+1}^{-1}\textbf{k})
$$&lt;/p&gt;
&lt;p&gt;æ¡ä»¶ä»˜åˆ†å¸ƒã®è¨ˆç®—ã«ãŠã„ã¦ã¯ã€&lt;a href=&#34;https://qiita.com/kilometer/items/34249479dc2ac3af5706:title&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¡ä»¶ä»˜å¤šå¤‰é‡æ­£è¦åˆ†å¸ƒã®æ€§è³ª&lt;/a&gt;ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ä¸Šå¼ã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«ã€æ¡ä»¶ä»˜åˆ†å¸ƒ$p(t_{N+1}|\textbf{t})$ã¯$N+1$å€‹ã®å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã€$N$å€‹ã®æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã€ã‚«ãƒ¼ãƒãƒ«é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$a,b$ãŒæ—¢çŸ¥ã§ã‚ã‚Œã°è¨ˆç®—å¯èƒ½ã¨ãªã£ã¦ã„ã¾ã™ã®ã§ã€ä»»æ„ã®ç‚¹ã‚’å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¸ãˆã¦ã‚„ã‚Œã°ã€å…ƒã®Data Generating Processã‚’è¿‘ä¼¼ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚&lt;code&gt;GPR&lt;/code&gt;ã®è‰¯ã„ã¨ã“ã‚ã¯ä¸Šã§å®šç¾©ã—ãŸç¢ºç‡ãƒ¢ãƒ‡ãƒ«$\displaystyle y_{i}  = \textbf{w}^{T}\phi(x_{i})$ã‚’ç›´æ¥æ¨å®šã—ãªãã¦ã‚‚äºˆæ¸¬å€¤ãŒå¾—ã‚‰ã‚Œã‚‹ã¨ã“ã‚ã§ã™ã€‚ç¢ºç‡ãƒ¢ãƒ‡ãƒ«ã«ã¯$\phi(x_{i})$ãŒã‚ã‚Šã€éç·šå½¢å¤‰æ›ã«ã‚ˆã‚Šå…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’é«˜æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«ã¸å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚ã‚ˆã£ã¦ã€æ¬¡å…ƒãŒé«˜ããªã‚Œã°ãªã‚‹ã»ã©$\phi(x_{i})\phi(x_{j})\alpha$ã®è¨ˆç®—é‡ã¯å¤§ãããªã£ã¦ã„ãã¾ã™ãŒã€&lt;code&gt;GPR&lt;/code&gt;ã§ã¯ã‚«ãƒ¼ãƒãƒ«ãƒˆãƒªãƒƒã‚¯ã‚’ç”¨ã„ã¦ã„ã‚‹ã®ã§é«˜ã€…å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ãƒ™ã‚¯ãƒˆãƒ«ã®ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã®æ¬¡å…ƒã®è¨ˆç®—é‡ã§äº‹è¶³ã‚Šã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-gprã®å®Ÿè£…&#34;&gt;2. &lt;code&gt;GPR&lt;/code&gt;ã®å®Ÿè£…&lt;/h2&gt;
&lt;p&gt;ã€€ã¨ã‚Šã‚ãˆãšã“ã“ã¾ã§ã‚’&lt;code&gt;R&lt;/code&gt;ã§å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚PRMLã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§å®Ÿè£…ã—ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã£ãŸã®ã§ã€ãã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ã„ã˜ã£ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;\normalsize&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(ggplot2)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(grid)

&lt;span style=&#34;color:#75715e&#34;&gt;# 1.Gaussian Process Regression&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# PRML&amp;#39;s synthetic data set&lt;/span&gt;
curve_fitting &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(
  x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.000000&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.111111&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.222222&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.333333&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.444444&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.555556&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.666667&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.777778&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.888889&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1.000000&lt;/span&gt;),
  t&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.349486&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.830839&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1.007332&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.971507&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.133066&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.166823&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;-0.848307&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;-0.445686&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;-0.563567&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.261502&lt;/span&gt;))

f &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(beta, sigma, xmin, xmax, input, train) {
  kernel &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x1, x2) &lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigma^2)); &lt;span style=&#34;color:#75715e&#34;&gt;# define Kernel function&lt;/span&gt;
  K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, kernel); &lt;span style=&#34;color:#75715e&#34;&gt;# calc gram matrix&lt;/span&gt;
  C_N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(input))&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;beta
  m &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x) (&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(x, input, kernel) &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N) &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; train) &lt;span style=&#34;color:#75715e&#34;&gt;# coditiona mean &lt;/span&gt;
  m_sig &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x)(&lt;span style=&#34;color:#a6e22e&#34;&gt;kernel&lt;/span&gt;(x,x) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(x, input, kernel) &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N) &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(x, input, kernel)))) &lt;span style=&#34;color:#75715e&#34;&gt;#conditional variance&lt;/span&gt;
  x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(xmin,xmax,length&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)
  output &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;x,m&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;(x),sig1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;(x)&lt;span style=&#34;color:#ae81ff&#34;&gt;+1.96&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sqrt&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m_sig&lt;/span&gt;(x)),sig2&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;(x)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1.96&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sqrt&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m_sig&lt;/span&gt;(x)),
                              tx&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;input,ty&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;train),
                   &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;x1,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;m)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_ribbon&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(ymin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sig1,ymax&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sig2),alpha&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.2&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_point&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;tx,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ty))
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(output)
}

&lt;span style=&#34;color:#a6e22e&#34;&gt;grid.newpage&lt;/span&gt;() &lt;span style=&#34;color:#75715e&#34;&gt;# make a palet&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;pushViewport&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;grid.layout&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;))) &lt;span style=&#34;color:#75715e&#34;&gt;# divide the palet into 2 by 2&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.10&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;))
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.30&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.030&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)) 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;\normalsize&lt;img src=&#34;index_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;$\beta^{-1}$ã¯æ¸¬å®šèª¤å·®ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚**$\beta$ãŒå¤§ãã„ï¼ˆã¤ã¾ã‚Šã€æ¸¬å®šèª¤å·®ãŒå°ã•ã„ï¼‰ã¨ã™ã§ã«å¾—ã‚‰ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã®èª¤å·®ãŒå°‘ãªããªã‚‹ã‚ˆã†ã«äºˆæ¸¬å€¤ã‚’ã¯ã˜ãå‡ºã™ã®ã§ã€over fitting ã—ã‚„ã™ããªã‚Šã¾ã™ã€‚**ä¸Šå›³ã®å·¦ä¸ŠãŒãã†ãªã£ã¦ã„ã¾ã™ã€‚å·¦ä¸Šã¯$\beta=400$ã§ã€ç¾æ™‚ç‚¹ã§å¾—ã‚‰ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã«éåº¦ã«fitã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚é€†ã«$\beta$ãŒå°ã•ã„ã¨æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã¨ã®èª¤å·®ã‚’ç„¡è¦–ã™ã‚‹ã‚ˆã†ã«äºˆæ¸¬å€¤ã‚’ã¯ã˜ãå‡ºã—ã¾ã™ãŒã€æ±åŒ–æ€§èƒ½ã¯å‘ä¸Šã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚å³ä¸Šã®å›³ãŒãã‚Œã§ã™ã€‚$\beta=4$ã§ã€å¾—ã‚‰ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ç‚¹ã‚’å¹³å‡ã¯ã»ã¨ã‚“ã©é€šã£ã¦ã„ã¾ã›ã‚“ã€‚$b$ã¯ç¾æ™‚ç‚¹ã§å¾—ã‚‰ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒå‘¨ã‚Šã«åŠã¼ã™å½±éŸ¿ã®åºƒã•ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚$b$ãŒå°ã•ã„ã¨ã€éš£æ¥ã™ã‚‹ç‚¹ãŒäº’ã„ã«å¼·ãå½±éŸ¿ã‚’åŠã¼ã—åˆã†ãŸã‚ã€ç²¾åº¦ã¯ä¸‹ãŒã‚‹ãŒæ±åŒ–æ€§èƒ½ã¯ä¸ŠãŒã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚é€†ã«ã€$b$ãŒå¤§ãã„ã¨ã€å€‹ã€…ã®ç‚¹ã«ã®ã¿ãƒ•ã‚£ãƒƒãƒˆã™ã‚‹ä¸è‡ªç„¶ãªçµæœã«ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯å³ä¸‹ã®å›³ã«ãªã‚Šã¾ã™ï¼ˆ$b=\frac{1}{0.03},\beta=25$ï¼‰ã€‚å¾¡è¦§ã®é€šã‚Šã€$\beta$ãŒå¤§ãã„ã®ã§overfittingæ°—å‘³ã§ã‚ã‚Šã€ãªãŠã‹ã¤$b$ã‚‚å¤§ãã„ã®ã§å€‹ã€…ã®ç‚¹ã®ã¿ã«fitã—ã€ç„¡èŒ¶è‹¦èŒ¶ãªã‚°ãƒ©ãƒ•ã«ãªã£ã¦ã„ã¾ã™ã€‚å·¦ä¸‹ã®ã‚°ãƒ©ãƒ•ãŒæœ€ã‚‚ã‚ˆã•ãã†ã§ã™ã€‚$b=\frac{1}{0.3},\beta=2$ã¨ãªã£ã¦ã„ã¾ã™ã€‚è©¦ã—ã«ã€ã“ã®ã‚°ãƒ©ãƒ•ã®xåŒºé–“ã‚’[0,2]ã¸ä¼¸ã°ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚°ãƒ©ãƒ•ãŒã‹ã‘ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;\normalsize&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;grid.newpage&lt;/span&gt;() &lt;span style=&#34;color:#75715e&#34;&gt;# make a palet&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;pushViewport&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;grid.layout&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;))) &lt;span style=&#34;color:#75715e&#34;&gt;# divide the palet into 2 by 2&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)) 
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.10&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)) 
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.30&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;25&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0.030&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)) 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;\normalsize&lt;img src=&#34;index_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã“ã‚Œã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«ã€å·¦ä¸‹ä»¥å¤–ã®ã‚°ãƒ©ãƒ•ã¯ã™ãã«95%ä¿¡é ¼åŒºé–“ã®ãƒãƒ³ãƒ‰ãŒåºƒãŒã‚Šã€ãƒ‡ãƒ¼ã‚¿ç‚¹ãŒãªã„ã¨ã“ã‚ã§ã¯ã¾ã£ãŸãä½¿ã„ç‰©ã«ãªã‚‰ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ä¸€æ–¹ã€å·¦ä¸‹ã®ã‚°ãƒ©ãƒ•ã¯1.3~1.4ãã‚‰ã„ã¾ã§ã¯ãã“ãã“ã®ãƒãƒ³ãƒ‰ãŒã‹ã‘ã¦ãŠã‚Šã€æˆ‘ã€…ãŒç›´æ„Ÿçš„ã«ç†è§£ã™ã‚‹é–¢æ•°ã¨ã‚‚æ•´åˆçš„ãªç‚¹ã‚’å¹³å‡å€¤ãŒé€šã£ã¦ã„ã‚‹ã‚ˆã†ã«æ€ãˆã¾ã™ã€‚ã¾ãŸã€è¦³æ¸¬å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ç‚¹ã‹ã‚‰é›¢ã‚Œã™ãã‚‹ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ä½•ã‚’ä¸ãˆã‚ˆã†ã¨å¹³å‡ï¼ã€åˆ†æ•£ï¼‘ã®æ­£è¦åˆ†å¸ƒã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‹ã‚‹ãŒã‚ã‹ã‚Šã¾ã™ã€‚
ã•ã¦ã€ã“ã®ã‚ˆã†ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ã«å¿œã˜ã¦ã€ã‚¢ã‚¦ãƒˆã‚µãƒ³ãƒ—ãƒ«ã®äºˆæ¸¬ç²¾åº¦ãŒç•°ãªã‚‹ã“ã¨ã‚’ç¤ºã—ãŸã‚ã‘ã§ã™ãŒã€ã“ã“ã§å•é¡Œã¨ãªã‚‹ã®ã¯ã“ã‚Œã‚‰ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã©ã®ã‚ˆã†ã«ã—ã¦æ¨è¨ˆã™ã‚‹ã‹ã§ã™ã€‚ã“ã‚Œã¯å¯¾æ•°å°¤åº¦é–¢æ•°$\ln p(\textbf{t}|a,b)$ã‚’æœ€å¤§ã«ã™ã‚‹ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‹¾é…æ³•ã«ã‚ˆã‚Šæ±‚ã‚ã¾ã™(($\beta$ã¯å°‘ã—ã‚¿ã‚¤ãƒ—ãŒç•°ãªã‚‹ã‚ˆã†ã§ã€ç™ºå±•çš„ãªè­°è«–ã§ã¯ä»–ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°æ–¹æ³•ã‚’ã¨ã‚‹æ¨¡æ§˜ã€‚ã¾ã ã€ãã®ãƒ¬ãƒ™ãƒ«ã«ã¯ã„ã‘ã¦ã„ãªã„ã®ã§ã“ã“ã§ã¯ã‚«ãƒªãƒ–ãƒ¬ãƒ¼ãƒˆã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚))ã€‚$p(\textbf{t}) = N(\textbf{y}|0,\textbf{C}_{N})$ãªã®ã§ã€å¯¾æ•°å°¤åº¦é–¢æ•°ã¯&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \ln p(\textbf{t}|a,b,\beta) = -\frac{1}{2}\ln|\textbf{C}&lt;em&gt;{N}| - \frac{N}{2}\ln(2\pi) - \frac{1}{2}\textbf{t}^{T}\textbf{C}&lt;/em&gt;{N}^{-1}\textbf{k}
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚ã‚ã¨ã¯ã€ã“ã‚Œã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å¾®åˆ†ã—ã€å¾—ã‚‰ã‚ŒãŸé€£ç«‹æ–¹ç¨‹å¼ã‚’è§£ãã“ã¨ã§æœ€å°¤æ¨å®šé‡ãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚ã§ã¯ã¾ãšå°é–¢æ•°ã‚’å°å‡ºã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \frac{\partial}{\partial \theta_{i}} \ln p(\textbf{t}|\theta) = -\frac{1}{2}Tr(\textbf{C}_{N}^{-1}\frac{\partial \textbf{C}_{N}}{\partial \theta_{i}}) + \frac{1}{2}\textbf{t}^{T}\textbf{C}_{N}^{-1}
\frac{\partial\textbf{C}_{N}}{\partial\theta_{i}}\textbf{C}_{N}^{-1}\textbf{t}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\theta$ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã€$\theta_{i}$ã¯$i$ç•ªç›®ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã“ã®å°é–¢æ•°ãŒç†è§£ã§ããªã„æ–¹ã¯&lt;a href=&#34;http://users.isr.ist.utl.pt/~wurmd/Livros/school/Bishop%20-%20Pattern%20Recognition%20And%20Machine%20Learning%20-%20Springer%20%202006.pdf:title=PRML&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã®è£œè«–ã«ã‚ã‚‹(C.21)å¼ã¨(C.22)å¼ã‚’ã”è¦§ã«ãªã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã¯ã‚¬ã‚¦ã‚¹ã‚«ãƒ¼ãƒãƒ«ã‚’ç”¨ã„ã¦ã„ã‚‹ãŸã‚ã€&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \frac{\partial k(x,x&#39;)}{\partial a} = \exp(-b(x-x&#39;)^{2}) \&lt;br&gt;
\displaystyle \frac{\partial k(x,x&#39;)}{\partial b} = -a(x-x&#39;)^{2}\exp(-b(x-x&#39;)^{2})
$$&lt;/p&gt;
&lt;p&gt;ã‚’ä¸Šå¼ã«ä»£å…¥ã™ã‚Œã°è‰¯ã„ã ã‘ã§ã™ã€‚ãŸã ã€ä»Šå›ã¯å‹¾é…æ³•ã«ã‚ˆã‚Šæœ€é©ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ±‚ã‚ã¾ã™ã€‚ä»¥ä¸‹ã€å®Ÿè£…ã®ã‚³ãƒ¼ãƒ‰ã§ã™ï¼ˆã‹ãªã‚Šè¿·èµ°ã—ã¦ã„ã¾ã™ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;\normalsize&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;g &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(xmin, xmax, input, train){
  &lt;span style=&#34;color:#75715e&#34;&gt;# initial value&lt;/span&gt;
  beta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;
  b &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  a &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  learning_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.1&lt;/span&gt;
  itermax &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(input) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;numeric&amp;#34;&lt;/span&gt;){
    N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(input)
  } else
  {
    N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(input)
  }
  kernel &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x1, x2) a&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-0.5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;b&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2); &lt;span style=&#34;color:#75715e&#34;&gt;# define kernel&lt;/span&gt;
  derivative_a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x1,x2) &lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-0.5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;b&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2)
  derivative_b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x1,x2) &lt;span style=&#34;color:#ae81ff&#34;&gt;-0.5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;a&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-0.5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;b&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2)
  dloglik_a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(C_N,y,x1,x2) {
    &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, derivative_a)))&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(y)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, derivative_a)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;y 
  }
  dloglik_b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(C_N,y,x1,x2) {
    &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, derivative_b)))&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(y)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, derivative_b)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;y 
  }
  &lt;span style=&#34;color:#75715e&#34;&gt;# loglikelihood function&lt;/span&gt;
  likelihood &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(b,a,x,y){
    kernel &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x1, x2) a&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-0.5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;b&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2)
    K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(x, x, kernel)
    C_N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(N)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;beta
    itermax &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;
    l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;det&lt;/span&gt;(C_N)) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; N&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;pi&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(y)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;y
    &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(l)
  }
  K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, kernel) 
  C_N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(N)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;beta
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;itermax){
    kernel &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x1, x2) a&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;b&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2)
    derivative_b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x1,x2) &lt;span style=&#34;color:#ae81ff&#34;&gt;-0.5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;a&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-0.5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;b&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;x2)^2)
    dloglik_b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(C_N,y,x1,x2) {
      &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sum&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, derivative_b)))&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(y)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, derivative_b)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;y 
    }
    K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, kernel) &lt;span style=&#34;color:#75715e&#34;&gt;# calc gram matrix&lt;/span&gt;
    C_N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(N)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;beta
    l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;abs&lt;/span&gt;(l&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;likelihood&lt;/span&gt;(b,a,input,train))&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.0001&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;i&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;){
      break
    }else{
      a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(a &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; learning_rate&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dloglik_a&lt;/span&gt;(C_N,train,input,input))
      b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(b &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; learning_rate&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dloglik_b&lt;/span&gt;(C_N,train,input,input))
    }
    l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;likelihood&lt;/span&gt;(b,a,input,train)
  }
  K &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(input, input, kernel)
  C_N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; K &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(input))&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;beta
  m &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x) (&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(x, input, kernel) &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N) &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; train)  
  m_sig &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x)(&lt;span style=&#34;color:#a6e22e&#34;&gt;kernel&lt;/span&gt;(x,x) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(x, input, kernel) &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(C_N) &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;outer&lt;/span&gt;(x, input, kernel))))
  x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(xmin,xmax,length&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)
  output &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(x1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;x,m&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;(x),sig1&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;(x)&lt;span style=&#34;color:#ae81ff&#34;&gt;+1.96&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sqrt&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m_sig&lt;/span&gt;(x)),sig2&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;(x)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1.96&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sqrt&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m_sig&lt;/span&gt;(x)),
                              tx&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;input,ty&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;train),
                   &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;x1,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;m)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
    &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_line&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_ribbon&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(ymin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sig1,ymax&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sig2),alpha&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.2&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_point&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;tx,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ty))
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(output)
}

&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;g&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x,curve_fitting&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;t), vp&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;viewport&lt;/span&gt;(layout.pos.row&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, layout.pos.col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;\normalsize&lt;img src=&#34;index_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ãŸã—ã‹ã«ã€è‰¯ã•ãã†ãªæ„Ÿã˜ãŒã—ã¾ã™ï¼ˆç¬‘ï¼‰
ã¨ã‚Šã‚ãˆãšã€ä»Šæ—¥ã¯ã“ã“ã¾ã§ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>BVARã«ã¤ã„ã¦</title>
      <link>/post/post5/</link>
      <pubDate>Sat, 01 Dec 2018 00:00:00 +0000</pubDate>
      <guid>/post/post5/</guid>
      <description>&lt;p&gt;ã€€ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚æ—¥æ¬¡GDPæ¨è¨ˆã‚’ä¼‘æ—¥ã«é€²ã‚ã¦ã„ã‚‹ã®ã§ã™ãŒã€ä»Šæ—¥ã¯å°‘ã—å‹‰å¼·ç·¨ã§&lt;code&gt;BVAR&lt;/code&gt;ã«ã¤ã„ã¦ã®è¨˜äº‹ã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚ã“ã®&lt;code&gt;BVAR&lt;/code&gt;ã¯FRBã‚¢ãƒˆãƒ©ãƒ³ã‚¿é€£éŠ€ã®&lt;code&gt;GDPNow&lt;/code&gt;ã§ã‚‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€æ—¥æ¬¡GDPæ¨è¨ˆã¨ã®è¦ªå’Œæ€§ã‚‚é«˜ã„ã¨æ€ã‚ã‚Œã¾ã™ã€‚ãã‚‚ãã‚‚ã€æ™‚ç³»åˆ—ã§ã‚¢ã‚¦ãƒˆã‚µãƒ³ãƒ—ãƒ«ã®äºˆæ¸¬ç²¾åº¦ã‚’ä¸Šã’ãŸã„ã¨ã„ã†ã“ã¨ã«ãªã‚‹ã¨çœŸã£å…ˆã«æ€ã„ã¤ãã®ãŒ&lt;code&gt;BVAR&lt;/code&gt;ã§ã™ã€‚Doan, Litterman and Sims(1984)ã§ææ¡ˆã•ã‚ŒãŸã“ã®ãƒ¢ãƒ‡ãƒ«ã¯äºˆæ¸¬ç²¾åº¦ãŒè‰¯ã„ã®ã§ã€éå¸¸ã«æœ‰åŠ¹ãªæ‰‹æ®µã«ãªã‚‹ã¨æ€ã‚ã‚Œã¾ã™ã€‚&lt;code&gt;BVAR&lt;/code&gt;ã¯&lt;code&gt;Bayesian Vector Autoregression&lt;/code&gt;ã®ç•¥ã§ã€ãƒ™ã‚¯ãƒˆãƒ«è‡ªå·±å›å¸°ãƒ¢ãƒ‡ãƒ«ï¼ˆ&lt;code&gt;VAR&lt;/code&gt;ï¼‰ã®æ´¾ç”Ÿç‰ˆã§ã™ã€‚&lt;code&gt;VAR&lt;/code&gt;ã¨ãƒãƒƒãƒˆã§èª¿ã¹ã‚‹ã¨ã¾ãš&lt;code&gt;Value at Risk&lt;/code&gt;ï¼ˆ&lt;code&gt;VaR&lt;/code&gt;ï¼‰ãŒå‡ºã¦ãã‚‹ã¨æ€ã„ã¾ã™ãŒã€ãã‚Œã¨ã¯é•ã„ã¾ã™ã€‚ã‚ˆãè¦‹ã‚‹ã¨aãŒå°æ–‡å­—ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã‹ã¨æ€ã„ã¾ã™ã€‚
ã€€ã•ã¦ã€&lt;code&gt;BVAR&lt;/code&gt;ã®èª¬æ˜ã‚’ã“ã‚Œã‹ã‚‰è¡ŒãŠã†ã¨ã™ã‚‹ã®ã§ã™ãŒã€ãã®å‰ã«ã¾ãšåŸºæœ¬çš„ãª&lt;code&gt;VAR&lt;/code&gt;ã®èª¬æ˜ã‹ã‚‰ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ãŸã ã—ã€æ­´å²çš„ãªèƒŒæ™¯ï¼ˆå¤§å‹ãƒã‚¯ãƒ­è¨ˆé‡ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ã®çµŒç·¯ãªã©ï¼‰ã«ã¯è§¦ã‚Œã¾ã›ã‚“ã€‚ã‚ãã¾ã§ã€&lt;code&gt;BVAR&lt;/code&gt;ã‚’èª¬æ˜ã™ã‚‹ã†ãˆã§å¿…è¦ãªçŸ¥è­˜ã«ã¤ã„ã¦è§¦ã‚ŒãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-unrestricted-varã«ã¤ã„ã¦&#34;&gt;1. Unrestricted VARã«ã¤ã„ã¦&lt;/h2&gt;
&lt;p&gt;ã€€ã¾ãšã€æ³¨æ„ç‚¹ã‚’ä¸€ç‚¹ã€‚ã“ã®æŠ•ç¨¿ã§ã¯ã€ã‚‚ã£ã¨ã‚‚åŸºæœ¬çš„ãª&lt;code&gt;VAR&lt;/code&gt;ã®ã“ã¨ã‚’Unrestricted VARï¼ˆUVARï¼‰ã¨å‘¼ã¶ã“ã¨ã«ã—ã¾ã™ã€‚UVARã¯Sims(1980)ã®è«–æ–‡ãŒæœ‰åã§ã™ã€‚&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;ã“ã®ãƒ¢ãƒ‡ãƒ«ã«ã¯ã€ç†è«–çš„ãªåŸºç¤ã¥ã‘ã¯åŸå‰‡ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚ãã¾ã§å®Ÿè¨¼çš„ãªãƒ¢ãƒ‡ãƒ«ã§ã™ã€‚UVARã¯ä¸€èˆ¬ç³»ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã‚’ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
Y_{t} = A_{0} + A_{1}Y_{t-1} + &amp;hellip; + A_{K}Y_{t-K} + U_{t}, ~~ U_{t} ï½ N(0,\Omega)
$$
$$
Y_{t} = \left(
\begin{array}{cccc}
y_{1,t} \&lt;br&gt;
y_{2,t} \&lt;br&gt;
\vdots  \&lt;br&gt;
y_{J,t} \&lt;br&gt;
\end{array}
\right),
A_{0} = \left(
\begin{array}{cccc}
a_{10} \&lt;br&gt;
a_{20} \&lt;br&gt;
\vdots  \&lt;br&gt;
a_{J0} \&lt;br&gt;
\end{array}
\right),
A_{k} = \left(
\begin{array}{cccc}
a_{11,k} &amp;amp; a_{12,k} &amp;amp; \ldots &amp;amp; a_{1J,k} \&lt;br&gt;
a_{21,k} &amp;amp; a_{22,k} &amp;amp; \ldots &amp;amp; a_{2J,k} \&lt;br&gt;
\vdots &amp;amp; \vdots &amp;amp; \ddots &amp;amp; \vdots \&lt;br&gt;
a_{J1,k} &amp;amp; a_{J2,k} &amp;amp; \ldots &amp;amp; a_{JJ,k}
\end{array}
\right),
U_{t} = \left(
\begin{array}{cccc}
u_{1,t} \&lt;br&gt;
u_{2,t} \&lt;br&gt;
\vdots  \&lt;br&gt;
u_{J,t} \&lt;br&gt;
\end{array}
\right)
$$
ã“ã“ã§ã€$t$ã¯æ™‚ç‚¹ã€$J$ã¯å¤‰æ•°ã®æ•°ã€$K$ã¯ãƒ©ã‚°æ•°ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ä¸Šå¼ã‚’è¦‹ã‚‹ã¨ã€UVARã¯è‡ªå·±å›å¸°ï¼‹ä»–å¤‰æ•°ã®ãƒ©ã‚°ã§tæœŸã®å¤‰æ•°$y_{j,t}$ã‚’èª¬æ˜ã—ã‚ˆã†ã¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ã¨è¨€ãˆã¾ã™ã€‚ã—ã°ã—ã°ã€çµŒæ¸ˆã®å®Ÿè¨¼åˆ†æã§ä½¿ç”¨ã•ã‚Œã€ã‚¤ãƒ³ã‚µãƒ³ãƒ—ãƒ«ã®å½“ã¦ã¯ã¾ã‚ŠãŒè‰¯ã„ã“ã¨ã‚‚çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ï¼ˆGDPã€æ¶ˆè²»ã€æŠ•è³‡ã€é‡‘åˆ©ã€ãƒãƒãƒ¼ã‚µãƒ—ãƒ©ã‚¤ã®ï¼•å¤‰æ•°&lt;code&gt;VAR&lt;/code&gt;ã§é‡‘èæ”¿ç­–ã®æ³¢åŠçµŒè·¯ã‚’åˆ†æã—ãŸã‚Šï½¥ï½¥ï½¥ï¼‰ã€‚æ¨å®šã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€‹æ•°ã¯ã€å›å¸°å¼1æœ¬ã ã‘ã§JK+1å€‹ï¼ˆå®šæ•°é …è¾¼ã¿ï¼‰ã®ä¿‚æ•°ã‚’å«ã‚€ã®ã§ã€Jæœ¬ã«ãªã‚Œã°J(JK+1)å€‹ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€$\Omega$ãŒJ(J+1)/2å€‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã£ã¦ã„ã‚‹ã®ã§ã€åˆè¨ˆJ(JK+1)+J(J+1)/2å€‹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¨å®šã™ã‚‹ã“ã¨ã«ãªã‚Šã€ã‹ãªã‚Šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ãŒå¤šã„å°è±¡ã§ã™ï¼ˆã“ã‚Œã¯å¾Œã€…é‡è¦ã«ãªã£ã¦ãã¾ã™ï¼‰ã€‚å…·ä½“çš„ãªæ¨è¨ˆæ–¹æ³•ã§ã™ãŒã€UVARã¯åŒæ™‚æ–¹ç¨‹å¼ä½“ç³»ã§ã¯ãªã„ã®ã§ãã“ã¾ã§é¢å€’ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚UVARè‡ªä½“ã¯&lt;code&gt;Seemingly Unrestricted Regression Equation&lt;/code&gt;ï¼ˆSURï¼‰ã®ä¸€ç¨®ã§ãã‚Œãã‚Œã®æ–¹ç¨‹å¼ã¯èª¤å·®é …ã®ç›¸é–¢ã‚’é€šã˜ã¦é–¢ä¿‚ã—ã¦ã¯ã„ã¾ã™ãŒï¼ˆ$\Omega$ã®éƒ¨åˆ†ï¼‰ã€å…¨ã¦ã®å›å¸°å¼ãŒåŒã˜èª¬æ˜å¤‰æ•°ã‚’æŒã¤ãŸã‚ã€å„æ–¹ç¨‹å¼ã‚’æœ€å°äºŒä¹—æ³•ï¼ˆ&lt;code&gt;OLS&lt;/code&gt;ï¼‰ã«ã‚ˆã£ã¦æ¨å®šã™ã‚‹ã ã‘ã§è‰¯ã„ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
ã€€ã“ã®äº‹å®Ÿã‚’èª¬æ˜ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ˆ&lt;code&gt;BVAR&lt;/code&gt;ãŒæ°—ã«ãªã‚‹æ–¹ã¯èª­ã¿é£›ã°ã—ã¦ã‚‚ã‚‰ã£ã¦æ§‹ã„ã¾ã›ã‚“ï¼‰ã€‚èª¬æ˜ã®ãŸã‚ã«ä»Šã€UVARã‚’SURã®ä¸€èˆ¬ç³»ã«æ›¸ãç›´ã—ã¾ã™ã€‚ä¸Šå¼ã¯tæœŸã®&lt;code&gt;VAR&lt;/code&gt;(K)ã‚·ã‚¹ãƒ†ãƒ ã§ã™ãŒã€UVARã‚’æ¨å®šã™ã‚‹éš›ã¯ã“ã‚Œã‚‰Jæœ¬ã®æ–¹ç¨‹å¼ãŒã‚µãƒ³ãƒ—ãƒ«æ•°Tã‚»ãƒƒãƒˆåˆ†å­˜åœ¨ã™ã‚‹ã®ã§ã€å®Ÿéš›ã®ã‚·ã‚¹ãƒ†ãƒ ä½“ç³»ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\left(
\begin{array}{cccc}
Y_{1} \&lt;br&gt;
Y_{2} \&lt;br&gt;
\vdots  \&lt;br&gt;
Y_{J} \&lt;br&gt;
\end{array}
\right) = 
\left(
\begin{array}{cccc}
X_{1} &amp;amp; 0 &amp;amp; \ldots &amp;amp; 0 \&lt;br&gt;
0 &amp;amp; X_{2} &amp;amp; \ldots &amp;amp; 0 \&lt;br&gt;
\vdots &amp;amp; \vdots &amp;amp; \ddots &amp;amp; \vdots \&lt;br&gt;
0 &amp;amp; 0 &amp;amp; \ldots &amp;amp; X_{J}
\end{array}
\right) 
\left(
\begin{array}{cccc}
A_{1} \&lt;br&gt;
A_{2} \&lt;br&gt;
\vdots  \&lt;br&gt;
A_{J} \&lt;br&gt;
\end{array}
\right) +
\left(
\begin{array}{cccc}
U_{1} \&lt;br&gt;
U_{2} \&lt;br&gt;
\vdots  \&lt;br&gt;
U_{J} \&lt;br&gt;
\end{array}
\right) = \overline{X}A + U (1å¼)
$$
ã“ã“ã§ã€&lt;/p&gt;
&lt;p&gt;$$
Y_{j} = \left(
\begin{array}{cccc}
y_{t,j} \&lt;br&gt;
y_{t+1,j} \&lt;br&gt;
\vdots  \&lt;br&gt;
y_{T,j} \&lt;br&gt;
\end{array}
\right) ,
X_{j} = X = \left(
\begin{array}{cccc}
1 &amp;amp; y_{t-1,1} &amp;amp; \ldots &amp;amp; y_{t-K,1} &amp;amp; \ldots &amp;amp; y_{t-K,J} \&lt;br&gt;
1 &amp;amp; y_{t,1} &amp;amp; \ldots &amp;amp; y_{t-K+1,1} &amp;amp; \ldots &amp;amp; y_{t-K+1,J} \&lt;br&gt;
\vdots &amp;amp; \vdots &amp;amp; \ldots &amp;amp; \ldots &amp;amp; \ddots &amp;amp; \vdots \&lt;br&gt;
1 &amp;amp; y_{T-1,1} &amp;amp; \ldots &amp;amp; y_{T-K,1} &amp;amp; \ldots &amp;amp; y_{T-K,J} \&lt;br&gt;
\end{array}
\right),
A_{j} = \left(
\begin{array}{cccc}
a_{00,j} \&lt;br&gt;
a_{11,j} \&lt;br&gt;
\vdots  \&lt;br&gt;
a_{JK,j} \&lt;br&gt;
\end{array}
\right)
$$
ã§ã™ã€‚ä¸Šå¼ã¨ã¯é•ã„ã€å¤‰æ•°é †ã§ä¸¦ã¹ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼ˆã¤ã¾ã‚Šã€å„æ–¹ç¨‹å¼ã‚’ä¸¦ã¹ã‚‹å„ªå…ˆé †ä½ã¯ï¼‘ç•ªç›®ã«jã€ï¼’ç•ªç›®ã«tã¨ãªã£ã¦ã„ã‚‹ï¼‰ã€‚ã¾ãŸã€$X_{j}$ãŒå…¨ã¦ã®å¤‰æ•°$j$ã«ã¤ã„ã¦ç­‰ã—ã„ã“ã¨ã«æ³¨ç›®ã—ã¦ãã ã•ã„ï¼ˆjã«ä¾å­˜ã—ã¦ã„ã¾ã›ã‚“ã€&lt;code&gt;VAR&lt;/code&gt;ãªã®ã§å½“ãŸã‚Šå‰ã§ã™ãŒï¼‰ã€‚ã“ã‚ŒãŒå¾Œã€…éå¸¸ã«é‡è¦ã«ãªã£ã¦ãã¾ã™ã€‚$U$ã®åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã¯&lt;/p&gt;
&lt;p&gt;$$
E[UU&#39;|X_{1}, X_{2},..,X_{J}] = \Omega = 
\left(
\begin{array}{cccc}
\sigma_{11}I &amp;amp; \sigma_{12}I &amp;amp; \ldots &amp;amp; \sigma_{1J}I \&lt;br&gt;
\sigma_{21}I &amp;amp; \sigma_{22}I &amp;amp; \ldots &amp;amp; \sigma_{2J}I \&lt;br&gt;
\vdots &amp;amp; \vdots &amp;amp; \ddots &amp;amp; \vdots \&lt;br&gt;
\sigma_{J1}I &amp;amp; \sigma_{J2}I &amp;amp; \ldots &amp;amp; \sigma_{JJ}I \&lt;br&gt;
\end{array}
\right)
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã£ã¦ãŠã‚Šã€ãã‚Œãã‚Œã®å¤‰æ•°ã¯èª¤å·®é …ã®ç›¸é–¢ã‚’é€šã˜ã¦é–¢ä¿‚ã—ã¦ã„ã¾ã™ï¼ˆãŸã ã—ã€åŒã˜å¤‰æ•°å†…ã®ç•°ãªã‚‹æ™‚ç‚¹é–“ã®ç›¸é–¢ã¯ãªã„ã¨ä»®å®šã—ã¾ã™ï¼‰ã€‚ã“ã®ã‚ˆã†ãªå ´åˆã€ä¸€èˆ¬åŒ–æœ€å°äºŒä¹—æ³•ï¼ˆ&lt;code&gt;GLS&lt;/code&gt;ï¼‰ã‚’ç”¨ã„ã¦æ¨è¨ˆã‚’è¡Œã†ã“ã¨ã«ãªã‚Šã¾ã™ãŒã€ã“ã‚Œã‚‰æ–¹ç¨‹å¼ä½“ç³»ã«ãŠã„ã¦èª¬æ˜å¤‰æ•°ãŒåŒã˜ã§ã‚ã‚‹ãªã‚‰ã°ã€&lt;code&gt;GLS&lt;/code&gt;æ¨å®šé‡ã¨&lt;code&gt;OLS&lt;/code&gt;æ¨å®šé‡ã¯åŒå€¤ã«ãªã‚Šã¾ã™ã€‚ãã‚Œã‚’ç¢ºã‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¸Šè¿°ã—ãŸæ–¹ç¨‹å¼ä½“ç³»(1)ã®&lt;code&gt;GLS&lt;/code&gt;æ¨å®šé‡ã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ï¼ˆ&lt;a href=&#34;http://user.keio.ac.jp/~nagakura/zemi/GLS.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‚è€ƒ&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;$$
A_{GLS} = (\overline{X}&#39;\Omega^{-1}\overline{X})^{-1}\overline{X}&#39;\Omega^{-1}Y = (\overline{X}&#39;(\Sigma^{-1}\otimes I)\overline{X})^{-1}\overline{X}&#39;(\Sigma^{-1}\otimes I)Y
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\Sigma$ã¯èª¤å·®é …ã®åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã®ã†ã¡ã€ã‚¹ã‚«ãƒ©ãƒ¼ã§ã‚ã‚‹åˆ†æ•£ã€å…±åˆ†æ•£ã‚’å–ã‚Šå‡ºã—ãŸè¡Œåˆ—ã§ã™ã€‚å…ˆã»ã©ç¢ºèªã—ãŸã‚ˆã†ã«ã€$X_{1}=X_{2}=&amp;hellip;=X_{J}=X$ãªã®ã§$\overline{X}=I \otimes X$ã§ã‚ã‚Šã€ãã®è»¢ç½®ã‚‚$\overline{X}&#39;=I \otimes X$ã¨ãªã‚Šã¾ã™ã€‚ã‚ˆã£ã¦ã€&lt;a href=&#34;https://mathwords.net/kuronekaseki&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã®&lt;/a&gt;ã®æ€§è³ªã‚’ç”¨ã„ã‚‹ã¨ã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} A_{GLS} &amp;amp;=&amp;amp; [(I \otimes X&#39;)(\Sigma^{-1}\otimes I)(I \otimes X)]^{-1}(I \otimes X&#39;)(\Sigma^{-1}\otimes I)Y \\ &amp;amp;=&amp;amp; [(\Sigma^{-1}\otimes X&#39;)(I \otimes X)]^{-1}(\Sigma^{-1}\otimes X&#39;)y \\ &amp;amp;=&amp;amp; (\Sigma^{-1}\otimes(X&#39;X))^{-1}(\Sigma^{-1}\otimes X&#39;)y \\ &amp;amp;=&amp;amp; (I \otimes (X&#39;X)^{-1}X&#39;)y \\ &amp;amp;=&amp;amp; (\overline{X}&#39;\overline{X})^{-1}\overline{X}&#39;Y \\ &amp;amp;=&amp;amp;  \left( \begin{array}{cccc} (X&#39;X)^{-1}X&#39; &amp;amp; 0 &amp;amp; \ldots &amp;amp; 0 \\ 0 &amp;amp; (X&#39;X)^{-1}X&#39; &amp;amp; \ldots &amp;amp; 0 \\ \vdots &amp;amp; \vdots &amp;amp; \ddots &amp;amp; \vdots \\ 0 &amp;amp; 0 &amp;amp; \ldots &amp;amp; (X&#39;X)^{-1}X&#39; \end{array} \right)  \left( \begin{array}{cccc} Y_{1} \\ Y_{2} \\ \vdots  \\ Y_{J} \\ \end{array} \right)\\  &amp;amp;=&amp;amp; \left( \begin{array}{cccc} (X&#39;X)^{-1}X&#39;Y_{1} \\ (X&#39;X)^{-1}X&#39;Y_{2} \\ \vdots  \\ (X&#39;X)^{-1}X&#39;Y_{J} \\ \end{array} \right) \\ &amp;amp;=&amp;amp; \left( \begin{array}{cccc} A_{1,OLS} \\ A_{2,OLS} \\ \vdots  \\ A_{J,OLS} \\ \end{array} \right) \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã€å„çµŒæ¸ˆå¤‰æ•°ã®æ–¹ç¨‹å¼ã‚’åˆ¥å€‹ã«&lt;code&gt;OLS&lt;/code&gt;æ¨è¨ˆã—ã¦ã„ã‘ã°ã‚ˆã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚
ã€€&lt;code&gt;OLS&lt;/code&gt;æ¨å®šã«éš›ã—ã€&lt;code&gt;VAR&lt;/code&gt;ã®æ¬¡æ•°Kã®é¸æŠã‚’é¸æŠã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€æ¬¡æ•°Kã¯&lt;code&gt;AIC&lt;/code&gt;ï¼ˆ&lt;code&gt;BIC&lt;/code&gt;ï¼‰ã‚’è©•ä¾¡è»¸ã«æ¢ç´¢çš„ã«æ±ºå®šã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€ã„ã‚ã„ã‚ãªå€¤ã‚’Kã«è¨­å®šã—ã€&lt;code&gt;OLS&lt;/code&gt;æ¨è¨ˆã‚’è¡Œã„ã€è¨ˆç®—ã•ã‚ŒãŸ&lt;code&gt;VAR&lt;/code&gt;(K)ã®&lt;code&gt;AIC&lt;/code&gt;(&lt;code&gt;BIC&lt;/code&gt;)ã®ã†ã¡ã§æœ€ã‚‚å€¤ãŒå¤§ãã„ãƒ¢ãƒ‡ãƒ«ã®æ¬¡æ•°ã‚’çœŸã®ãƒ¢ãƒ‡ãƒ«ã®æ¬¡æ•°Kã¨ã—ã¦æ¡ç”¨ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚&lt;code&gt;R&lt;/code&gt;ã«ã‚‚&lt;code&gt;VARselect()&lt;/code&gt;ã¨ã„ã†é–¢æ•°ãŒã‚ã‚Šã€å¼•æ•°ã«ãƒ©ã‚°ã®æ¢ç´¢æœ€å¤§æ•°ã¨ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ã“ã¨ã§æœ€é©ãªæ¬¡æ•°ã‚’è¨ˆç®—ã—ã¦ãã‚Œã¾ã™ï¼ˆä¾¿åˆ©ï¼‰ã€‚
ã€€ã“ã®ã‚ˆã†ã«UVARã¯&lt;code&gt;OLS&lt;/code&gt;æ¨è¨ˆã§å„å¤‰æ•°é–“ã®ç›¸äº’ä¾å­˜é–¢ä¿‚ã‚’ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ¨è¨ˆã§ãã‚‹æ‰‹è»½ãªæ‰‹æ³•ã§ã™ã€‚ç§ãŒçŸ¥ã£ã¦ã„ã‚‹åˆ†é‡ã§ã™ã¨è²¡æ”¿æ”¿ç­–ä¹—æ•°ã®æ¨è¨ˆã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚GDPã€æ¶ˆè²»ã€æŠ•è³‡ã€æ”¿åºœæ”¯å‡ºã®ï¼”å¤‰æ•°ã§&lt;code&gt;VAR&lt;/code&gt;ã‚’æ¨å®šã—ã€æ¨å®šã—ãŸ&lt;code&gt;VAR&lt;/code&gt;ã§ã‚¤ãƒ³ãƒ‘ãƒ«ã‚¹å¿œç­”ã‚’è¦‹ã‚‹ã“ã¨ã§ï¼‘å˜ä½ã®è²¡æ”¿æ”¯å‡ºã®å¢—åŠ ãŒGDPç­‰ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’å®šé‡çš„ã«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹ã“ã¨ãŒã§ããŸã‚Šã—ã¾ã™ï¼ˆæŒ‡å°æ•™å®˜ãŒè«–æ–‡ã‚’æ›¸ã„ã¦ã¾ã—ãŸï¼‰ã€‚ãã‚‚ãã‚‚ç§ã®å°‚é–€ã®&lt;code&gt;DSGE&lt;/code&gt;ã‚‚èª˜å°ç³»ã«æ›¸ãç›´ã›ã°&lt;code&gt;VAR&lt;/code&gt;å½¢å¼ã«ãªã‚Šã€ã‚¤ãƒ³ãƒ‘ãƒ«ã‚¹å¿œç­”ãªã©ã¯åŸºæœ¬çš„ã«ä¸€ç·’ã§ã™ã€‚ã¾ãŸã€çµŒæ¸ˆå¤‰æ•°ã¯æ…£æ€§ãŒå¼·ã„ã®ã§ï¼ˆç‰¹ã«æˆ‘ãŒå›½ã®å ´åˆï¼‰ã€ã‚¤ãƒ³ã‚µãƒ³ãƒ—ãƒ«ã®ãƒ¢ãƒ‡ãƒ«ã®å½“ã¦ã¯ã¾ã‚Šã‚‚ã„ã„ã§ã™ã€‚ãŸã ã—ã€ã‚ãã¾ã§ã‚¤ãƒ³ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚&lt;b&gt;ã‚¢ã‚¦ãƒˆã‚µãƒ³ãƒ—ãƒ«ã®å½“ã¦ã¯ã¾ã‚Šã¯ãã‚Œã»ã©è‰¯ã„å°è±¡ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/b&gt;ãªãœãªã‚‰ã€æ¨å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå¤šã™ãã‚‹ã‹ã‚‰ã§ã™ã€‚UVARã®äºˆæ¸¬ã«é–¢ã™ã‚‹å•é¡Œç‚¹ã¯&lt;code&gt;over-parametrization&lt;/code&gt;ã§ã™ã€‚ä¾‹ãˆã°ã€å…ˆã»ã©ã®ï¼”å¤‰æ•°UVARã§ãƒ©ã‚°ãŒï¼–æœŸã ã£ãŸã¨ã™ã‚‹ã¨ã€æ¨å®šã™ã¹ããƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ï¼“ï¼‘å€‹ã«ãªã‚Šã¾ã™ã€‚ã‚ˆã£ã¦ã€ãƒ‡ãƒ¼ã‚¿æ•°ã«ã‚‚ã‚ˆã‚Šã¾ã™ãŒã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ãŒãƒ‡ãƒ¼ã‚¿æ•°ã«è¿‘ã¥ãã¨ã‚¤ãƒ³ã‚µãƒ³ãƒ—ãƒ«ã®è£œé–“ã«è¿‘ã¥ãã€éå­¦ç¿’ã‚’å¼•ãèµ·ã“ã™å±é™ºæ€§ãŒã‚ã‚Šã¾ã™ã€‚æ—¥æ¬¡GDPæ¨è¨ˆã¯å¤§é‡ã®å¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã®ã§ã“ã®å•é¡Œã¯éå¸¸ã«è‡´å‘½çš„ã«ãªã‚Šã¾ã™ã€‚&lt;code&gt;BVAR&lt;/code&gt;ã¯ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã“ã¨ã«ä¸»çœ¼ã‚’ç½®ã„ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-bvarã«ã¤ã„ã¦&#34;&gt;2. BVARã«ã¤ã„ã¦&lt;/h2&gt;
&lt;p&gt;ã€€UVARã®å•é¡Œç‚¹ã¯&lt;code&gt;over-parametrization&lt;/code&gt;ã§ã‚ã‚‹ã¨è¿°ã¹ã¾ã—ãŸã€‚&lt;code&gt;BVAR&lt;/code&gt;ã¯ã“ã®å•é¡Œã‚’é˜²ããŸã‚ã«ä¸å¿…è¦ãªèª¬æ˜å¤‰æ•°ï¼ˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰ã‚’ããè½ã¨ãã†ã¨ã—ã¾ã™ã€‚ãŸã ã€ä¸è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¨å®šã™ã‚‹å‰ã«ï¼ã¨ä»®ç½®ãï¼ˆã‚«ãƒªãƒ–ãƒ¬ãƒ¼ãƒˆï¼‰ã™ã‚‹ã®ã§ã¯ãªãã€ï¼‘éšã®è‡ªå·±ã«é–¢ã‚ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ï¼‘å‘¨ã‚Šã€ãã®ä»–å¤‰æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ï¼å‘¨ã‚Šã«æ­£è¦åˆ†å¸ƒã™ã‚‹ã¨ã„ã†å½¢ã®åˆ¶ç´„ã‚’ä¸ãˆã¾ã™ã€‚ã“ã®ãƒ¢ãƒ‡ãƒ«ã®æœ€å¤§ã®ä»®å®šã¯ã€Œå„çµŒæ¸ˆå¤‰æ•°ã¯å¤šã‹ã‚Œå°‘ãªã‹ã‚Œãƒ‰ãƒªãƒ•ãƒˆä»˜ãï¼‘éšã®ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ã«å¾“ã†ã€ã¨ã„ã†ã‚‚ã®ã§ã‚ã‚Šã€ä¸Šè¿°ã—ãŸã‚ˆã†ãªäº‹å‰åˆ†å¸ƒã‚’å…ˆé¨“çš„ã«ä¸ãˆãŸä¸Šã§æ¨å®šã‚’è¡Œã†ã®ã§ã™ã€‚ç •ã‘ãŸè¨€ã„æ–¹ã‚’ã™ã‚‹ã¨ã€&lt;code&gt;BVAR&lt;/code&gt;ã®è€ƒãˆæ–¹ã¯ã€ŒçµŒæ¸ˆå¤‰æ•°ã®æŒ™å‹•ã¯åŸºæœ¬ã¯ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ã ã‘ã©ä»–å¤‰æ•°ã®ãƒ©ã‚°ã«äºˆæ¸¬åŠ›å‘ä¸Šã«è³‡ã™ã‚‹ã‚‚ã®ãŒã‚ã‚Œã°ãã‚Œã‚‚å–ã‚Šå…¥ã‚Œã‚‹ã‚ˆã€ã¨ã„ã†ã‚‚ã®ãªã‚“ã§ã™ã€‚ã•ã¦ã€å‰ç½®ããŒé•·ããªã‚Šã¾ã—ãŸãŒã€å…·ä½“çš„ãªèª¬æ˜ã«ç§»ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…·ä½“çš„ãªæ¨å®šæ–¹æ³•ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿&#34;&gt;å…·ä½“çš„ãªæ¨å®šæ–¹æ³•ï¼ˆã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ï¼‰&lt;/h3&gt;
&lt;p&gt;ã€€ä¸Šè¿°ã—ãŸäº‹å‰åˆ†å¸ƒã«åŠ ãˆã¦ã€&lt;code&gt;BVAR&lt;/code&gt;ãŒUVARã¨ç•°ãªã‚‹ç‚¹ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒ&lt;code&gt;time-varying&lt;/code&gt;ã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ãªã‚“ã¨ãªãã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒãšã£ã¨å›ºå®šã‚ˆã‚Šã‚‚ã‚µãƒ³ãƒ—ãƒ«ãŒå¢—ãˆã‚‹ãŸã³ã«ãã®å€¤ãŒæ›´æ–°ã•ã‚Œã‚‹ã»ã†ãŒäºˆæ¸¬ç²¾åº¦ãŒä¸ŠãŒã‚Šãã†ã§ã™ã‚ˆã­ï¼ˆç¬‘ï¼‰ã€‚æ¨å®šæ‰‹æ³•ã¨ã—ã¦ã¯UVARã®æ™‚ã®ã‚ˆã†ã«&lt;code&gt;OLS&lt;/code&gt;ã‚’ãã‚Œãã‚Œã«ã‹ã‘ã‚‹ã“ã¨ã¯ã›ãšã€&lt;a href=&#34;https://qiita.com/MoriKen/items/0c80ef75749977767b43&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿&lt;/a&gt; ã¨å‘¼ã°ã‚Œã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ç”¨ã„ã¦æ¨å®šã‚’è¡Œã„ã¾ã™ã€‚&lt;code&gt;BVAR&lt;/code&gt;ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã¨ã—ã¦å®šç¾©ã•ã‚Œã¾ã™ï¼ˆå„ãƒ™ã‚¯ãƒˆãƒ«ã€è¡Œåˆ—ã®æ¬¡å…ƒã¯UVARæ™‚ã¨åŒã˜ã§ã™ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;$$
Y_{t} = X_{t}B_{t} + u_{t} \&lt;br&gt;
B_{t} = \Phi B_{t-1} + \epsilon_{t} \&lt;br&gt;
B_{t} = \left(
\begin{array}{cccc}
\beta_{00,t} \&lt;br&gt;
\beta_{11,t} \&lt;br&gt;
\vdots  \&lt;br&gt;
\beta_{JK,t} \&lt;br&gt;
\end{array}
\right), 
\Phi = \left(
\begin{array}{cccc}
\phi_{00} &amp;amp; 0 &amp;amp; \ldots &amp;amp; 0 \&lt;br&gt;
0 &amp;amp; \phi_{11} &amp;amp; \ldots &amp;amp; 0 \&lt;br&gt;
\vdots &amp;amp; \vdots &amp;amp; \ddots &amp;amp; \vdots \&lt;br&gt;
0 &amp;amp; 0 &amp;amp; \ldots &amp;amp; \phi_{JK}
\end{array}
\right),
u_{t} = \left(
\begin{array}{cccc}
u_{1,t} \&lt;br&gt;
u_{2,t} \&lt;br&gt;
\vdots  \&lt;br&gt;
u_{J,t} \&lt;br&gt;
\end{array}
\right),
\epsilon_{t} = \left(
\begin{array}{cccc}
\epsilon_{00,t} \&lt;br&gt;
\epsilon_{11,t} \&lt;br&gt;
\vdots  \&lt;br&gt;
\epsilon_{JK,t} \&lt;br&gt;
\end{array}
\right)
$$
çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã¯è¦³æ¸¬å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ï¼ˆex.çµŒæ¸ˆçµ±è¨ˆï¼‰ã‚’ç”¨ã„ã¦ã€è¦³æ¸¬ä¸å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ï¼ˆex.ãƒªã‚¹ã‚¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚„é™ç•Œæ¶ˆè²»æ€§å‘ç­‰ï¼‰ã‚’æ¨å®šã—ã¾ã™ã€‚è¦³æ¸¬å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã¨ä¸å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã‚’é–¢é€£ä»˜ã‘ã‚‹æ–¹ç¨‹å¼ã‚’è¦³æ¸¬æ–¹ç¨‹å¼ã€è¦³æ¸¬ä¸å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã®æŒ™å‹•ã‚’ãƒ¢ãƒ‡ãƒ«åŒ–ã—ãŸæ–¹ç¨‹å¼ã‚’é·ç§»æ–¹ç¨‹å¼ã¨å‘¼ã³ã¾ã™ã€‚ã“ã“ã§ã¯ã€1æœ¬ç›®ãŒè¦³æ¸¬æ–¹ç¨‹å¼ã€2æœ¬ç›®ãŒé·ç§»æ–¹ç¨‹å¼ã¨ãªã‚Šã¾ã™ã€‚å¾¡è¦§ã®é€šã‚Šã€è¦³æ¸¬æ–¹ç¨‹å¼ã¯é€šå¸¸ã®&lt;code&gt;VAR&lt;/code&gt;ã®å½¢ã‚’ã—ã¦ã„ã‚‹ä¸€æ–¹ã€é·ç§»æ–¹ç¨‹å¼ã¯&lt;code&gt;AR(1)&lt;/code&gt;ã¨ãªã£ã¦ãŠã‚Šã€ã“ã‚Œã«ã‚ˆã£ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$B_{t}$ã¯éå»ã®å€¤ã‚’å¼•ããšã‚ŠãªãŒã‚‰$\epsilon_{t}$ã«ã‚ˆã£ã¦ç¢ºç‡çš„ã«å¤‰å‹•ã—ã¾ã™ã€‚$\Phi$ã¯è‡ªå·±å›å¸°ä¿‚æ•°ã§ã™ã€‚èª¤å·®é …$u_{t}$ã¨$\epsilon_{t}$ã¯å¹³å‡ï¼ã®æ­£è¦åˆ†å¸ƒã«å¾“ã„ã€ãã®åˆ†æ•£ã¯&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} Var(u_{t}) &amp;amp;=&amp;amp; \sigma_{u}^{2} \\ Var(\epsilon_{t}) &amp;amp;=&amp;amp; \sigma_{\epsilon}^{2}R \end{eqnarray}&lt;/code&gt;
$$
ã§ä¸ãˆã‚‰ã‚Œã¾ã™ã€‚ã“ã“ã§ã€$\Phi,R,\sigma_{u}^{2},\sigma_{\epsilon}^{2}$ã¯æ—¢çŸ¥ã§ã‚ã‚‹ã¨ã—ã¾ã™ã€‚ä»Šã€t-1æœŸã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ãŒå…¥æ‰‹å¯èƒ½ã§ã‚ã‚‹ã¨ã™ã‚‹ã¨ã€ãã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§æ¨å®šã—ãŸ$B_{t-1|t-1}$ã¨ãã®åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—$P_{t-1|t-1}$ã‚’ç”¨ã„ã¦ã€tæœŸã®äºˆæƒ³å€¤ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¨ˆç®—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} B_{t|t-1} &amp;amp;=&amp;amp; \Phi B_{t-1|t-1} \\ P_{t|t-1} &amp;amp;=&amp;amp; \Phi P_{t|t-1} \Phi&#39; + \sigma_{\epsilon}^{2}R \end{eqnarray}&lt;/code&gt;
$$
è¦³æ¸¬å¯èƒ½ãªå¤‰æ•°ã®äºˆæ¸¬å€¤ã¯ã“ã®å€¤ã‚’ç”¨ã„ã¦è¨ˆç®—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\hat{Y_{t}} = X_{t} B_{t|t-1}
$$
æ¬¡ã«tæœŸã®è¦³æ¸¬å€¤ãŒå¾—ã‚‰ã‚Œã‚‹ã¨æ¬¡ã®æ›´æ–°æ–¹ç¨‹å¼ã‚’ç”¨ã„ã¦$B_{t|t}, P_{t|t}$ã‚’è¨ˆç®—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} B_{t|t} &amp;amp;=&amp;amp; B_{t|t-1} + P_{t|t-1}X_{t}&#39;(X_{t}P_{t|t-1}X_{t}&#39; + \sigma_{u}^{2})^{-1}(Y_{t}-X_{t}B_{t|t-1}) \\ P_{t|t} &amp;amp;=&amp;amp; P_{t|t-1} + P_{t|t-1}X_{t}&#39;(X_{t}P_{t|t-1}X_{t}&#39; + \sigma_{u}^{2})^{-1}X_{t}P_{t|t-1} \end{eqnarray}&lt;/code&gt;
$$
&lt;code&gt;\(\sigma_{\epsilon}^{2}R = 0\)&lt;/code&gt;ã‹ã¤$\Phi = I$ã®å ´åˆã¯&lt;code&gt;é€æ¬¡æœ€å°äºŒä¹—æ³•&lt;/code&gt;ã«ä¸€è‡´ã—ã¾ã™ã€‚è¦ã¯å…¥æ‰‹ã§ãã‚‹ã‚µãƒ³ãƒ—ãƒ«å¢—ãˆã‚‹ãŸã³ã«&lt;code&gt;OLS&lt;/code&gt;ã‚’ã‚„ã‚Šç›´ã—ã¦ã„ãã“ã¨ã¨åŒå€¤ã ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã“ã†ã—ã¦æ¨è¨ˆã‚’è¡Œã†ã®ãŒ&lt;code&gt;BVAR&lt;/code&gt;ãªã®ã§ã™ãŒã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¯æ¼¸åŒ–å¼ãªã®ã§åˆæœŸå€¤$B_{0|0}, P_{0|0}$ã‚’æ±ºã‚ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;code&gt;BVAR&lt;/code&gt;ã®ï¼’ã¤ç›®ã®ç‰¹å¾´ã¯åˆæœŸå€¤ã®è¨ˆç®—ã«æ··åˆæ¨å®šæ³•ã‚’ç”¨ã„ã¦ã„ã‚‹ã¨ã“ã‚ã§ã‚ã‚Šã€ã“ã“ã«å‰è¿°ã—ãŸäº‹å‰åˆ†å¸ƒãŒé–¢ä¿‚ã—ã¦ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã®åˆæœŸå€¤ã‚’ã©ã®ã‚ˆã†ã«ãã‚ã‚‹ã‹&#34;&gt;ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã®åˆæœŸå€¤ã‚’ã©ã®ã‚ˆã†ã«ãã‚ã‚‹ã‹&lt;/h3&gt;
&lt;p&gt;åˆæœŸå€¤$B_{0|0}, P_{0|0}$ã‚’ã©ã†ã‚„ã£ã¦è¨ˆç®—ã™ã‚‹ã®ã‹ã‚’è€ƒãˆãŸéš›ã«ã™ãæ€ã„ã¤ãæ–¹æ³•ã¨ã—ã¦ã¯ã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã®ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹tã®å‰ã«ã€åˆæœŸå€¤æ¨è¨ˆæœŸé–“ã‚’ã‚ã‚‹ç¨‹åº¦ç”¨æ„ã—ã€$Y = XB + \epsilon$ã§$B_{0|0}, P_{0|0}$ã‚’æ¨å®šã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€è¦³æ¸¬æ–¹ç¨‹å¼ã‚’&lt;code&gt;GLS&lt;/code&gt;æ¨è¨ˆã—ã€ãã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åˆæœŸå€¤ã¨ã™ã‚‹æ–¹æ³•ã§ã™ã€‚ãã®éš›ã®&lt;code&gt;GLS&lt;/code&gt;æ¨å®šé‡ã¯&lt;/p&gt;
&lt;p&gt;$$
\hat{B} = (X&amp;rsquo;V^{-1}X)^{-1}X&amp;rsquo;V^{-1}Y
$$&lt;/p&gt;
&lt;p&gt;ã§ã™ã€‚ã“ã‚Œã§ã‚‚ã„ã„ã‚“ã§ã™ãŒã€ã“ã‚Œã§ã¯ãŸã æ™‚å¤‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¨è¨ˆã—ã¦ã„ã‚‹ã ã‘ã§å…ˆã»ã©è¿°ã¹ãŸ&lt;code&gt;over-parametrization&lt;/code&gt;ã®å•é¡Œã«ã¯ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ãã¦ã„ã¾ã›ã‚“ã€‚ãã“ã§ã€ã“ã“ã§ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$B$ã«å¯¾ã—ã¦ãªã«ã‹å…ˆé¨“çš„ãªæƒ…å ±ãŒå¾—ã‚‰ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã—ã‚‡ã†ã€‚ã¤ã¾ã‚Šã€å…ˆè¿°ã—ãŸã€ŒçµŒæ¸ˆå¤‰æ•°ã®æŒ™å‹•ã¯åŸºæœ¬ã¯ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ã ã‘ã©ä»–å¤‰æ•°ã®ãƒ©ã‚°ã«äºˆæ¸¬åŠ›å‘ä¸Šã«è³‡ã™ã‚‹ã‚‚ã®ãŒã‚ã‚Œã°ãã‚Œã‚‚å–ã‚Šå…¥ã‚Œã‚‹ã‚ˆã€ã¨ã„ã†äºˆæƒ³ã§ã™ã€‚ã“ã‚Œã‚’å®šå¼åŒ–ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã¤ã¾ã‚Šã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$B$ã«å¯¾ã—ã¦ä»¥ä¸‹ã®åˆ¶ç´„å¼ã‚’èª²ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
r = RB + \nu
$$
ã“ã“ã§ã€$E(\nu) = 0,Var(\nu) = V_{0}$ã§ã™ã€‚ã¾ãŸã€$r$ã¯$RB$ã®äºˆæƒ³å€¤ã§ã‚ã‚Šã€$V_{0}$ã¯ãã®äºˆæƒ³å€¤ã®å‘¨ã‚Šã§ã®ã°ã‚‰ã¤ãã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚å–ã£ä»˜ãã«ãã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€$r$ã¯ï¼‘éšè‡ªå·±å›å¸°ä¿‚æ•°ã«é–¢ã‚ã‚‹éƒ¨åˆ†ã¯1ã€ãã‚Œä»¥å¤–ã¯0ã¨ãªã‚‹ãƒ™ã‚¯ãƒˆãƒ«ã§ã€$R$ã¯å˜ä½è¡Œåˆ—$I$ã ã¨æ€ã£ã¦ã‚‚ã‚‰ãˆã°ã„ã„ã§ã™ã€‚ã¤ã¾ã‚Šã€&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} \left( \begin{array}{cccc} 0 \\ 1 \\ 0 \\ \vdots  \\ 1 \\ \vdots  \\ 0 \\ \end{array} \right) &amp;amp;=&amp;amp;  \left( \begin{array}{cccc} ã€€  \beta_{0,1}^{1} \\ \beta_{1,1}^{1} \\ \beta_{2,1}^{1} \\ \vdots  \\ \beta_{j,1}^{j} \\ \vdots  \\ \beta_{J,K}^{J} \\ \end{array} \right) + \left( \begin{array}{cccc} \nu_{0,1}^{1} \\ \nu_{1,1}^{1} \\ \nu_{2,1}^{1}  \\ \vdots  \\ \nu_{j,1}^{j}  \\ \vdots  \\ \nu_{J,K}^{J} \\ \end{array} \right) \end{eqnarray}&lt;/code&gt;
$$
ã¿ãŸã„ãªæ„Ÿã˜ã§ã™ã€‚ã“ã“ã§$\beta_{j,k}^{i}$ã¯iç•ªç›®ã®æ–¹ç¨‹å¼ã®jç•ªç›®ã®å¤‰æ•°ã®kæ¬¡ãƒ©ã‚°ã«ã‹ã‹ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚æ··åˆæ¨å®šã§ã¯ã€æ­£è¦åˆ†å¸ƒã«å¾“ã†è¦³æ¸¬å€¤ã¨ã“ã®äº‹å‰åˆ†å¸ƒãŒç‹¬ç«‹ã§ã‚ã‚‹ã¨ã„ã†ä»®å®šã®ä¸‹ã§è¦³æ¸¬æ–¹ç¨‹å¼$Y = XB + \epsilon$ã¨$ r = RB + \nu$ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«çµ„ã¿åˆã‚ã›ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\left(
\begin{array}{cccc}
Y \&lt;br&gt;
r 
\end{array}
\right) = \left(
\begin{array}{cccc}
X \&lt;br&gt;
R 
\end{array}
\right)B + 
\left(
\begin{array}{cccc}
\epsilon \&lt;br&gt;
\nu 
\end{array}
\right)
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€&lt;/p&gt;
&lt;p&gt;$$
E\left(
\begin{array}{cccc}
\epsilon \&lt;br&gt;
\nu 
\end{array}
\right) = 0 \&lt;br&gt;
Var\left(
\begin{array}{cccc}
\epsilon \&lt;br&gt;
\nu 
\end{array}
\right) = \left(
\begin{array}{cccc}
\sigma^{2}V &amp;amp; 0 \&lt;br&gt;
0 &amp;amp; V_{0} \&lt;br&gt;
\end{array}
\right)
$$&lt;/p&gt;
&lt;p&gt;ãã—ã¦ã€ã“ã®ã‚·ã‚¹ãƒ†ãƒ ä½“ç³»ã‚’&lt;code&gt;GLS&lt;/code&gt;ã§æ¨è¨ˆã™ã‚‹ã®ã§ã™ã€‚ã“ã†ã™ã‚‹ã“ã¨ã§ã€äº‹å‰åˆ†å¸ƒã‚’è€ƒæ…®ã—ãŸåˆæœŸå€¤ã®æ¨å®šã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;code&gt;GLS&lt;/code&gt;æ¨å®šé‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;\(\displaystyle \hat{B}_{M} = (\frac{1}{\sigma^{2}}X&#39;V^{-1}X + R&#39;V_{0}^{-1}R)^{-1}(\frac{1}{\sigma^{2}}X&#39;V^{-1}y + R&#39;V_{0}^{-1}r)\)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ã”è¦§ã«ãªã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«ã€&lt;code&gt;GLS&lt;/code&gt;æ¨å®šé‡ã¯ä¸Šè¨˜2æœ¬ã®é€£ç«‹æ–¹ç¨‹å¼(å®Ÿéš›ã«ã¯è¡Œåˆ—ãªã®ã§ä½•æœ¬ã‚‚ã‚ã‚Šã¾ã™ãŒ)ãã‚Œãã‚Œã®GLSæ¨å®šé‡ã‚’æŒ‰åˆ†ã—ãŸã‚ˆã†ãªæ¨å®šé‡ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$\sigma^{2}$ã¯æ—¢çŸ¥ã§ã¯ãªã„ã®ã§ã€ã„ã£ãŸã‚“&lt;code&gt;OLS&lt;/code&gt;ã§æ¨è¨ˆã—ãã®æ¨å®šé‡ã‚’ç”¨ã„ã¾ã™ã€‚å•é¡Œã¯$V_{0}$ã®ç½®ãæ–¹ã§ã™ã€‚$V_{0}$ã®å„è¦ç´ ã‚’å°ã•ãã¨ã‚Œã°ã€äº‹å‰åˆ†å¸ƒã«æ•´åˆçš„ãªæ¨å®šé‡ãŒå¾—ã‚‰ã‚Œã¾ã™ï¼ˆã¤ã¾ã‚Šã€ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ï¼‰ã€‚é€†ã«ã€å¤§ããã¨ã‚Œã°é€šå¸¸ã®&lt;code&gt;GLS&lt;/code&gt;æ¨å®šé‡ã«è¿‘ã¥ã„ã¦ã„ãã¾ã™ã€‚Doan, Litternam and Sims (1984)ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ†æ•£ã‚’ç½®ã„ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
&lt;code&gt;\begin{eqnarray} \displaystyle Var(\beta_{j,k}^{j}) &amp;amp;=&amp;amp; \frac{\pi_{5}ãƒ»\pi_{1}}{kãƒ»exp(\pi_{4}w_{i}^{i})} \\ \displaystyle Var(\beta_{j,k}^{i}) &amp;amp;=&amp;amp; \frac{\pi_{5}ãƒ»\pi_{2}ãƒ»\sigma_{i}^{2}}{kãƒ»exp(\pi_{4}w_{j}^{i})ãƒ»\sigma_{j}^{2}} \\ Var(c^{i}) &amp;amp;=&amp;amp; \pi_{5}ãƒ»\pi_{3}ãƒ»\sigma_{i}^{2} \end{eqnarray}&lt;/code&gt;
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\beta_{j,k}^{j}$ã¯$i$ç•ªç›®ã®æ–¹ç¨‹å¼ã®è‡ªå·±å›å¸°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€$\beta_{j,k}^{i}$ã¯$i$ç•ªç›®æ–¹ç¨‹å¼ã®ä»–å¤‰æ•°ãƒ©ã‚°é …ã«ã‹ã‹ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€$c^{i}$ã¯å®šæ•°é …ã§ã™ã€‚ãã—ã¦ã€$\pi_{1},\pi_{2},\pi_{3},\pi_{4},\pi_{5}$ã¯ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã§ã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã«ã‹ã‘ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åˆæœŸå€¤ã®äº‹å‰åˆ†å¸ƒã®åˆ†å¸ƒã®åºƒãŒã‚Šã‚’æ±ºå®šã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯åˆæœŸå€¤ã®æ¨å®šã‚’è¡Œã†å‰ã«å€¤ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å„ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å…·ä½“çš„ãªç‰¹å¾´ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚$\pi_{1}$ã¯$\beta_{j,k}^{j}$ã®åˆ†æ•£ã«ã®ã¿å‡ºç¾ã™ã‚‹ã“ã¨ã‹ã‚‰è‡ªå·±å›å¸°ä¿‚æ•°ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€$\pi_{1}$ãŒå¤§ãããªã‚Œã°ãªã‚‹ã»ã©è‡ªå·±å›å¸°ä¿‚æ•°ã¯äº‹å‰åˆ†å¸ƒã‹ã‚‰å¤§ããé›¢ã‚ŒãŸè¾ºã‚Šã‚’å–ã‚Šã†ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚$\pi_{2}$ã¯$\beta_{j,k}^{i}$ã®åˆ†æ•£ã«ã®ã¿å‡ºç¾ã™ã‚‹ã“ã¨ã‹ã‚‰ä»–å¤‰æ•°ã®ãƒ©ã‚°é …ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚å€¤ãŒå¤§ãããªã‚Œã°ãªã‚‹ã»ã©ä¿‚æ•°ã¯äº‹å‰åˆ†å¸ƒã‹ã‚‰å¤§ããé›¢ã‚ŒãŸè¾ºã‚Šã‚’å–ã‚Šã†ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚$\pi_{3}$ã¯å®šæ•°é …ã®äº‹å‰åˆ†å¸ƒã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã“ã¡ã‚‰ã‚‚è€ƒãˆæ–¹ã¯åŒã˜ã§ã™ã€‚$\pi_{4}$ã¯ãƒ©ã‚°é …ã®åˆ†æ•£(ã¤ã¾ã‚Šå®šæ•°é …ä»¥å¤–)ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã€å€¤ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã€åˆæœŸå€¤ã¯äº‹å‰åˆ†å¸ƒã«è¿‘ã¥ã„ã¦ã„ãã¾ã™ã€‚æœ€å¾Œã«$\pi_{5}$ã§ã™ãŒã€ã“ã¡ã‚‰ã¯å…¨ä½“ã«ã‹ã‹ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã€å€¤ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã€åˆæœŸå€¤ã¯äº‹å‰åˆ†å¸ƒã‹ã‚‰é ã–ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ä¸Šå¼ã«ã¯ã€ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»¥å¤–ã«ã‚‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚„å¤‰æ•°ãŒå­˜åœ¨ã—ã¾ã™ã€‚$\sigma_{i}, \sigma_{j}$ã¯$y_{j,t}, y_{i,t}$ã‚’ãã‚Œãã‚Œ&lt;code&gt;AR(m)&lt;/code&gt;ã§ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚’ã‹ã‘ãŸæ™‚ã®æ®‹å·®ã®æ¨™æº–åå·®ã®æ¨å®šå€¤ã§ã™ã€‚å¤‰æ•°é–“ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã®é•ã„ã‚’è€ƒæ…®ã™ã‚‹ãŸã‚ã«ã€$\sigma_{i}$ã‚’$\sigma_{j}$ã§å‰²ã£ãŸã‚‚ã®ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚æœ¬æ¥ãªã‚‰ã°ã€&lt;code&gt;VAR&lt;/code&gt;ã®æ®‹å·®ã®æ¨™æº–åå·®ã‚’ä½¿ç”¨ã™ã¹ããªã®ã§ã™ãŒã€æ¨å®šã™ã‚‹å‰ã«ã‚ã‹ã‚‹ã‚ã‘ã‚‚ãªã„ã®ã§ã€ãã‚Œãã‚Œ&lt;code&gt;AR(m)&lt;/code&gt;ã§æ¨å®šã‚’ã‹ã‘ã€ãã®æ¨™æº–åå·®ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™((ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ãŒå…ˆé¨“æƒ…å ±ãªã®ã§æ•´åˆæ€§ã¯å–ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªæ°—ãŒã—ã¾ã™))ã€‚$w_{j}^{i}$ã¯å®Œå…¨ã«æ£æ„çš„ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã€DLSã§ã¯relative weightsã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚iç•ªç›®ã®æ–¹ç¨‹å¼ã®jç•ªç›®ã®å¤‰æ•°ã®ãƒ©ã‚°é …ã«ã‹ã‹ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒï¼ã§ã‚ã‚‹ã‹ã©ã†ã‹ã«ã¤ã„ã¦ã€åˆ†æè€…ã®å…ˆé¨“æƒ…å ±ã‚’åæ˜ ã™ã‚‹ãŸã‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™ã€‚åˆ†æ•£ã®å¼ã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«ã€relative weightãŒå¤§ãããªã‚Œã°åˆ†æ•£ã¯å°ã•ããªã‚Šã€æ¨å®šå€¤ã¯äº‹å‰åˆ†å¸ƒã«è¿‘ã¥ã„ã¦ã„ãã¾ã™ã€‚DLSã§ã¯ã€ã»ã¨ã‚“ã©ã®å¤‰æ•°ã¯$w_{i}^{i}=0,w_{j}^{i}=1$ã§ã‚ˆã„ã¨ä¸»å¼µã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€è‡ªå·±ãƒ©ã‚°ã«ã‹ã‹ã‚‹äº‹å‰åˆ†å¸ƒã®åˆ†æ•£ã«é–¢ã—ã¦ã¯ç¢ºä¿¡ã‚’ã‚‚ã£ã¦ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ã§ã‚ã‚‹ã¨ã„ãˆã‚‹ä¸€æ–¹ã€ä»–å¤‰æ•°ãƒ©ã‚°ã«ã¤ã„ã¦ã¯äºˆæ¸¬åŠ›å‘ä¸Šã«å½¹ç«‹ã¤ã‚‚ã®ã®ã‚ã‚‹ã“ã¨ã‚’è€ƒãˆã€å€¤ã‚’ï¼‘ã¨ç½®ã„ã¦ã„ã‚‹ã®ã§ã™ã€‚ä¸€æ–¹ã€ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã‚„æ ªä¾¡ã¯ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯è‰²ãŒå¼·ã„ã¨ã„ã†ã“ã¨ã‹ã‚‰å¤§ãã„å€¤ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚æœ€å¾Œã«ã€$Var(\beta_{j,k}^{j})$ã¨$Var(\beta_{j,k}^{i})$ã«ã¯åˆ†æ¯ã«kãŒã¤ã„ã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€ãƒ©ã‚°æ¬¡æ•°kãŒå¤§ãããªã‚Œã°ãªã‚‹ã»ã©ã€ãã®ä¿‚æ•°ã¯ï¼ã«è¿‘ã¥ã„ã¦ã„ãã“ã¨ã‚’å…ˆé¨“çš„æƒ…å ±ã¨ã—ã¦ä»®å®šã—ã¦ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™((ã“ã®ãŠã‹ã’ã§&lt;code&gt;VAR&lt;/code&gt;ã®æ¬¡æ•°ã‚’ã“ã¡ã‚‰ã§æŒ‡å®šã™ã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã™ã€‚é©å½“ã«å¤§ãã„æ¬¡æ•°ã‚’æŒ‡å®šã—ã¦ãŠã‘ã°ã€å¿…è¦ã®ãªã„æ¬¡æ•°ã®å¤§ãã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«é–¢ã—ã¦ã¯äº‹å‰ã¨å€¤ãŒï¼ã«ãªã‚‹ã®ã§ã€‚))ã€‚
ã€€
ã€€ã“ã‚Œã‚‰ãŒã„ã‚ã‚†ã‚‹&lt;code&gt;Minnesota Prior&lt;/code&gt;ã®æ­£ä½“ã§ã™((å®Ÿã¯ã“ã‚Œã«åŠ ãˆã¦è‡ªå·±å›å¸°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç·å’ŒãŒï¼‘ã€ä»–å¤‰æ•°ã®ãƒ©ã‚°é …ã«ã‹ã‹ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ç·å’ŒãŒï¼ã¨ãªã‚‹åˆ¶ç´„ã‚’èª²ã™ã®ã§ã™ãŒã€è©±ãŒè¤‡é›‘ã«ãªã‚Šã™ãã‚‹ã®ã§ä»Šå›ã¯å‰²æ„›ã—ã¾ã—ãŸ))ã€‚åˆæœŸå€¤ãŒäº‹å‰åˆ†å¸ƒã«è¿‘ã¥ã‘ã°&lt;code&gt;BVAR&lt;/code&gt;ã¯ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ã«è¿‘ã¥ãã¾ã™ã—ã€é›¢ã‚Œã‚‹ã¨UVARã«è¿‘ã¥ãã¾ã™ã€‚ç¾å®Ÿã¯ãã®é–“ã¨ãªã‚‹ã®ã§ã™ãŒã€ãªã«ã‚’è©•ä¾¡å°ºåº¦ã¨ã—ã¦ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ã‚’æ±ºã‚ã‚‹ã‹ã¨ã„ã†ã¨ã€ãã‚Œã¯å½“ã¦ã¯ã¾ã‚Šã®è‰¯ã•ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ±ºå®šæ–¹æ³•ã¨ãã®è©•ä¾¡å°ºåº¦&#34;&gt;ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ±ºå®šæ–¹æ³•ã¨ãã®è©•ä¾¡å°ºåº¦&lt;/h3&gt;
&lt;p&gt;å½“ã¦ã¯ã¾ã‚Šã®è‰¯ã•ã¨è¨€ã£ã¦ã‚‚ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™ãŒã€DLSã¯ãã®æ™‚ç‚¹ã§è¦³æ¸¬å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã‹ã‚‰äºˆæ¸¬ã§ãã‚‹kæœŸå…ˆã®äºˆæ¸¬å€¤ã®å½“ã¦ã¯ã¾ã‚Šã®è‰¯ã•ã‚’åŸºæº–ã¨ã—ã¦ã„ã¾ã™ã€‚DLSã§ã¯ä»¥ä¸‹ã®äºˆæ¸¬èª¤å·®ãƒ™ã‚¯ãƒˆãƒ«$\hat{\epsilon}_{t+k|t}$ã®ã‚¯ãƒ­ã‚¹ç©å’Œã‚’æœ€å°åŒ–ã™ã‚‹ã“ã¨ã‚’ç›®çš„é–¢æ•°ã¨ã—ã¦ã€ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\hat{\epsilon}&lt;em&gt;{t+k|t} = \hat{Y}&lt;/em&gt;{t+k|t}-Y_{t+k}
$$
ã“ã“ã§ã€$\hat{Y}_{t+k|t}$ã¯ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã«ã‚ˆã‚‹kæœŸå…ˆã®äºˆæ¸¬å€¤ã§ã™ï¼ˆkã‚’ã„ãã¤å…ˆã«ã™ã‚Œã°è‰¯ã„ã‹ã¯ä¸æ˜ï¼‰ã€‚ã“ã®ã‚¯ãƒ­ã‚¹ç©ã¯$\hat{\epsilon}_{t+k|t}\hat{\epsilon}&#39;_{t+k|t}$ã§ã‚ã‚Šã€ã“ã‚Œã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’ã‹ã‘ã‚‹t=1æœŸã‹ã‚‰ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ã§ã‚ã‚‹t=TæœŸã¾ã§è¨ˆç®—ã—ã¦ã„ãã®ã§ã€æœ€çµ‚çš„ã«ã¯Tå€‹ã®äºˆæ¸¬èª¤å·®ãƒ™ã‚¯ãƒˆãƒ«ã‚’å¾—ã‚‹ã“ã¨ã«ãªã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã‚Œã‚‰ã®ç·å’Œã‚’æœ€å°åŒ–ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \sum_{t=1}^{T-k}\hat{\epsilon}_{t+k|t}\hat{\epsilon}&#39;_{t+k|t}
$$
ã‚ˆã‚Šå³å¯†ã«ã¯ã“ã®ã‚¯ãƒ­ã‚¹ç©å’Œã®å¯¾æ•°å€¤ã‚’æœ€å°åŒ–ã™ã‚‹ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ã‚’ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒã‚„ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ¼ãƒã§æ¢ç´¢ã—ã¦ã„ãã“ã¨ã«ãªã‚Šã¾ã™((ã“ã“ã¯æ©Ÿæ¢°å­¦ç¿’ç­‰ã§ç”¨ã„ã‚‰ã‚Œã¦ã„ã‚‹ãƒ™ã‚¤ã‚ºæœ€é©åŒ–ã‚’åˆ©ç”¨ã™ã‚‹ã¨ã‚ˆã‚Šé«˜é€Ÿã«åæŸã•ã›ã‚‹ã“ã¨ãŒå¯èƒ½ã‹ã‚‚ã§ã™ã€‚))ã€‚
ã¨ã¾ã‚ã€&lt;code&gt;BVAR&lt;/code&gt;ã®æ¨å®šæ–¹æ³•ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚ä»–ã®&lt;code&gt;VAR&lt;/code&gt;ã¨é•ã„ã€æ£æ„çš„ã§ã‚ã‚Šã€ã¾ãŸæ¨å®šæ–¹æ³•ãŒæ©Ÿæ¢°å­¦ç¿’ã«è¿‘ã„ç‚¹ãŒç‰¹å¾´ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ãã‚‚ãã‚‚ã€&lt;code&gt;BVAR&lt;/code&gt;ã¯äºˆæ¸¬ã«ç‰¹åŒ–ã—ãŸ&lt;code&gt;VAR&lt;/code&gt;ã§ã™ã‹ã‚‰ã€ä»–ã®&lt;code&gt;VAR&lt;/code&gt;ã¨ã¯åˆ¥ç‰©ã¨è€ƒãˆã‚‹æ–¹ãŒè‰¯ã„ã‹ã‚‚ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆè¿½è¨˜ã€€2019/4/29ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;3-rã§ã®å®Ÿè£…&#34;&gt;3. Rã§ã®å®Ÿè£…&lt;/h2&gt;
&lt;p&gt;ã“ã“ã¾ã§ã‚’&lt;code&gt;R&lt;/code&gt;ã§å®Ÿè£…ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã¾ãšã¯ã€&lt;code&gt;vars&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«æº–å‚™ã•ã‚Œã¦ã„ã‚‹Canadaãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã€é€šå¸¸ã®&lt;code&gt;VAR&lt;/code&gt;ã®æ¨å®šã‚’ã‚„ã£ã¦ã¿ã¾ã™ã€‚ã“ã‚Œã¯ã‚«ãƒŠãƒ€ã®1980ï½2000å¹´ã®åŠ´åƒç”Ÿç”£æ€§ã€é›‡ç”¨ã€å¤±æ¥­ç‡ã€å®Ÿè³ªè³ƒé‡‘ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(vars)

&lt;span style=&#34;color:#a6e22e&#34;&gt;data&lt;/span&gt;(Canada)
Canada.var &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;VAR&lt;/span&gt;(Canada,p&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;VARselect&lt;/span&gt;(Canada,lag.max &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;selection[1])
&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(Canada.var)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## VAR Estimation Results:
## ========================= 
## Endogenous variables: e, prod, rw, U 
## Deterministic variables: const 
## Sample size: 81 
## Log Likelihood: -150.609 
## Roots of the characteristic polynomial:
## 1.004 0.9283 0.9283 0.7437 0.7437 0.6043 0.6043 0.5355 0.5355 0.2258 0.2258 0.1607
## Call:
## VAR(y = Canada, p = VARselect(Canada, lag.max = 4)$selection[1])
## 
## 
## Estimation results for equation e: 
## ================================== 
## e = e.l1 + prod.l1 + rw.l1 + U.l1 + e.l2 + prod.l2 + rw.l2 + U.l2 + e.l3 + prod.l3 + rw.l3 + U.l3 + const 
## 
##           Estimate Std. Error t value Pr(&amp;gt;|t|)    
## e.l1       1.75274    0.15082  11.622  &amp;lt; 2e-16 ***
## prod.l1    0.16962    0.06228   2.723 0.008204 ** 
## rw.l1     -0.08260    0.05277  -1.565 0.122180    
## U.l1       0.09952    0.19747   0.504 0.615915    
## e.l2      -1.18385    0.23517  -5.034 3.75e-06 ***
## prod.l2   -0.10574    0.09425  -1.122 0.265858    
## rw.l2     -0.02439    0.06957  -0.351 0.727032    
## U.l2      -0.05077    0.24534  -0.207 0.836667    
## e.l3       0.58725    0.16431   3.574 0.000652 ***
## prod.l3    0.01054    0.06384   0.165 0.869371    
## rw.l3      0.03824    0.05365   0.713 0.478450    
## U.l3       0.34139    0.20530   1.663 0.100938    
## const   -150.68737   61.00889  -2.470 0.016029 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## 
## Residual standard error: 0.3399 on 68 degrees of freedom
## Multiple R-Squared: 0.9988,	Adjusted R-squared: 0.9985 
## F-statistic:  4554 on 12 and 68 DF,  p-value: &amp;lt; 2.2e-16 
## 
## 
## Estimation results for equation prod: 
## ===================================== 
## prod = e.l1 + prod.l1 + rw.l1 + U.l1 + e.l2 + prod.l2 + rw.l2 + U.l2 + e.l3 + prod.l3 + rw.l3 + U.l3 + const 
## 
##           Estimate Std. Error t value Pr(&amp;gt;|t|)    
## e.l1      -0.14880    0.28913  -0.515   0.6085    
## prod.l1    1.14799    0.11940   9.615 2.65e-14 ***
## rw.l1      0.02359    0.10117   0.233   0.8163    
## U.l1      -0.65814    0.37857  -1.739   0.0866 .  
## e.l2      -0.18165    0.45083  -0.403   0.6883    
## prod.l2   -0.19627    0.18069  -1.086   0.2812    
## rw.l2     -0.20337    0.13337  -1.525   0.1319    
## U.l2       0.82237    0.47034   1.748   0.0849 .  
## e.l3       0.57495    0.31499   1.825   0.0723 .  
## prod.l3    0.04415    0.12239   0.361   0.7194    
## rw.l3      0.09337    0.10285   0.908   0.3672    
## U.l3       0.40078    0.39357   1.018   0.3121    
## const   -195.86985  116.95813  -1.675   0.0986 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## 
## Residual standard error: 0.6515 on 68 degrees of freedom
## Multiple R-Squared:  0.98,	Adjusted R-squared: 0.9765 
## F-statistic: 277.5 on 12 and 68 DF,  p-value: &amp;lt; 2.2e-16 
## 
## 
## Estimation results for equation rw: 
## =================================== 
## rw = e.l1 + prod.l1 + rw.l1 + U.l1 + e.l2 + prod.l2 + rw.l2 + U.l2 + e.l3 + prod.l3 + rw.l3 + U.l3 + const 
## 
##           Estimate Std. Error t value Pr(&amp;gt;|t|)    
## e.l1    -4.716e-01  3.373e-01  -1.398    0.167    
## prod.l1 -6.500e-02  1.393e-01  -0.467    0.642    
## rw.l1    9.091e-01  1.180e-01   7.702 7.63e-11 ***
## U.l1    -7.941e-04  4.417e-01  -0.002    0.999    
## e.l2     6.667e-01  5.260e-01   1.268    0.209    
## prod.l2 -2.164e-01  2.108e-01  -1.027    0.308    
## rw.l2   -1.457e-01  1.556e-01  -0.936    0.353    
## U.l2    -3.014e-01  5.487e-01  -0.549    0.585    
## e.l3    -1.289e-01  3.675e-01  -0.351    0.727    
## prod.l3  2.140e-01  1.428e-01   1.498    0.139    
## rw.l3    1.902e-01  1.200e-01   1.585    0.118    
## U.l3     1.506e-01  4.592e-01   0.328    0.744    
## const   -1.167e+01  1.365e+02  -0.086    0.932    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## 
## Residual standard error: 0.7601 on 68 degrees of freedom
## Multiple R-Squared: 0.9989,	Adjusted R-squared: 0.9987 
## F-statistic:  5239 on 12 and 68 DF,  p-value: &amp;lt; 2.2e-16 
## 
## 
## Estimation results for equation U: 
## ================================== 
## U = e.l1 + prod.l1 + rw.l1 + U.l1 + e.l2 + prod.l2 + rw.l2 + U.l2 + e.l3 + prod.l3 + rw.l3 + U.l3 + const 
## 
##          Estimate Std. Error t value Pr(&amp;gt;|t|)    
## e.l1     -0.61773    0.12508  -4.939 5.39e-06 ***
## prod.l1  -0.09778    0.05165  -1.893 0.062614 .  
## rw.l1     0.01455    0.04377   0.332 0.740601    
## U.l1      0.65976    0.16378   4.028 0.000144 ***
## e.l2      0.51811    0.19504   2.656 0.009830 ** 
## prod.l2   0.08799    0.07817   1.126 0.264279    
## rw.l2     0.06993    0.05770   1.212 0.229700    
## U.l2     -0.08099    0.20348  -0.398 0.691865    
## e.l3     -0.03006    0.13627  -0.221 0.826069    
## prod.l3  -0.01092    0.05295  -0.206 0.837180    
## rw.l3    -0.03909    0.04450  -0.879 0.382733    
## U.l3      0.06684    0.17027   0.393 0.695858    
## const   114.36732   50.59802   2.260 0.027008 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## 
## Residual standard error: 0.2819 on 68 degrees of freedom
## Multiple R-Squared: 0.9736,	Adjusted R-squared: 0.969 
## F-statistic: 209.2 on 12 and 68 DF,  p-value: &amp;lt; 2.2e-16 
## 
## 
## 
## Covariance matrix of residuals:
##             e     prod       rw        U
## e     0.11550 -0.03161 -0.03681 -0.07034
## prod -0.03161  0.42449  0.05589  0.01494
## rw   -0.03681  0.05589  0.57780  0.03660
## U    -0.07034  0.01494  0.03660  0.07945
## 
## Correlation matrix of residuals:
##            e     prod      rw        U
## e     1.0000 -0.14276 -0.1425 -0.73426
## prod -0.1428  1.00000  0.1129  0.08136
## rw   -0.1425  0.11286  1.0000  0.17084
## U    -0.7343  0.08136  0.1708  1.00000
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;plot&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;predict&lt;/span&gt;(Canada.var,n.ahead&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;,ci&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.95&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post5/index_files/figure-html/r-1.png&#34; width=&#34;480&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚‹ã®ã§ç°¡å˜ã«å®Ÿè¡Œã§ãã¾ã—ãŸã€‚ä¸Šã§è¦‹ãŸã‚ˆã†ã«ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯åˆ¥ã€…ã®&lt;code&gt;OLS&lt;/code&gt;ã‚’4æœ¬æ¨å®šã—ã¦ã„ã‚‹ã ã‘ã§ã™ã€‚
æ¬¡ã«&lt;code&gt;BVAR&lt;/code&gt;ã§ã™ã€‚ã¾ãšã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¨äº‹å‰åˆ†å¸ƒã‚’å®šç¾©ã—ã¾ã™ã€‚ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¯ä»¥å‰è¨˜äº‹ã§ã”ç´¹ä»‹ã—ãŸã‚‚ã®ã¨åŒã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(seasonal)

kalmanfiter &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(y,I,t,z,c&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,R&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,Q&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,d&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,S&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,h&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,a_int&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,sig_int&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;){
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# Implemention of Kalman filter&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   y - observed variable&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   I - the number of unobserved variable&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   t - parameter of endogenous variable in state equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   z - parameter of endogenous variable in observable equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   c - constant in state equaion&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   R - parameter of exogenous variable in state equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   Q - var-cov matrix of exogenous variable in state equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   d - constant in observable equaion&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   S - parameter of exogenous variable in observable equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   h - var-cov matrix of exogenous variable in observable equation&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   a_int - initial value of endogenous variable&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   sig_int - initial value of variance of endogenous variable&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)
    
  &lt;span style=&#34;color:#75715e&#34;&gt;# 1.Define Variable&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(y)&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;matrix&amp;#34;&lt;/span&gt;){
    y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(y)
  }
  N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(y) &lt;span style=&#34;color:#75715e&#34;&gt;# sample size&lt;/span&gt;
  L &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(y) &lt;span style=&#34;color:#75715e&#34;&gt;# the number of observable variable &lt;/span&gt;
  a_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# prediction of unobserved variable&lt;/span&gt;
  a_fil &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;# filtered of unobserved variable&lt;/span&gt;
  sig_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,I,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# prediction of var-cov mat. of unobserved variable&lt;/span&gt;
  sig_fil &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,I,N&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;# filtered of var-cov mat. of unobserved variable&lt;/span&gt;
  y_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(L,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# prediction of observed variable&lt;/span&gt;
  F_pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(L,L,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# auxiliary variable &lt;/span&gt;
  k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(I,L,N)) &lt;span style=&#34;color:#75715e&#34;&gt;# kalman gain&lt;/span&gt;
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(a_int))){
    a_int &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(sig_int))){
    sig_int &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(R))){
    R &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(Q))){
    Q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; I)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(S))){
    S &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; L,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; L)
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;any&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(h))){
    H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(L,L,N))
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N){
      &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(H[,,i]) &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    }
  }else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(h)&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;array&amp;#34;&lt;/span&gt;){
    H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(h,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(h),&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(h),N))
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# fill infinite if observed data is NA&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N){
    miss &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(y[i,])
    &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(H[,,i])[miss] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1e+32&lt;/span&gt;
  }
  y&lt;span style=&#34;color:#a6e22e&#34;&gt;[is.na&lt;/span&gt;(y)] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 2.Set Initial Value&lt;/span&gt;
  a_fil[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a_int
  sig_fil[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_int
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 3.Implement Kalman filter&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;N){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(z)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;array&amp;#34;&lt;/span&gt;){
      Z &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; z[,,i]
    }else{
      Z &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; z
    }
    a_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; t&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;a_fil[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; c
    sig_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; t&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;sig_fil[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(t) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; R&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;Q&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(R)
    y_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; Z&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;a_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; d
    F_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; Z&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;sig_pre[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(Z) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; S&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;H[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(S)
    k[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_pre[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(Z)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(F_pre[,,i])
    a_fil[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; k[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(y[i,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;y_pre[,,i])
    sig_fil[,,i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig_pre[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; k[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;F_pre[,,i]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(k[,,i])
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 4.Aggregate results&lt;/span&gt;
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(a_pre,a_fil,sig_pre,sig_fil,y_pre,k,t,z)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state prediction&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state filtered&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state var prediction&amp;#34;&lt;/span&gt;, 
                     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;state var filtered&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;observable prediction&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;kalman gain&amp;#34;&lt;/span&gt;,
                     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;parameter of state eq&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;parameter of observable eq&amp;#34;&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;äº‹å‰åˆ†å¸ƒã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚ã¾ãšã€å¼•æ•°ã‚’è¨ˆç®—ã—ã‚„ã™ã„å½¢ã«å¤‰æ›ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;# set pi&lt;/span&gt;
  &lt;span style=&#34;color:#66d9ef&#34;&gt;pi&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;abs&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rnorm&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;# hyperparameter&lt;/span&gt;
  x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; Canada &lt;span style=&#34;color:#75715e&#34;&gt;# dataset&lt;/span&gt;
  order &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# order&lt;/span&gt;
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)
    
  &lt;span style=&#34;color:#75715e&#34;&gt;# 1. Process row data&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;eval&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(text &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;paste0&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pi&amp;#34;&lt;/span&gt;,i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;=pi[[&amp;#34;&lt;/span&gt;,i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;]]&amp;#34;&lt;/span&gt;)))
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;matrix&amp;#34;&lt;/span&gt;){
    x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(x)
  }
  dependent &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(x&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(order&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x),&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)){
    dependent &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(dependent,&lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(x&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(order&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x),i]))
  }
  explanatory &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;embed&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,x),order)[,&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;((order&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(order&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;order))]
  explanatory &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x),ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))&lt;span style=&#34;color:#f92672&#34;&gt;%x%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(explanatory)
  npara &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(explanatory) &lt;span style=&#34;color:#75715e&#34;&gt;# the number of parameters/ ncol(x)*(ncol(x)*order + 1(const))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;dependentã¯éèª¬æ˜å¤‰æ•°ã€explanatoryã¯èª¬æ˜å¤‰æ•°ã§ã™ã€‚ã¡ã‚‡ã†ã©1å¼ã‚’å†ç¾ã—ãŸå½¢ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\left(
\begin{array}{cccc}
Y_{1} \&lt;br&gt;
Y_{2} \&lt;br&gt;
\vdots  \&lt;br&gt;
Y_{J} \&lt;br&gt;
\end{array}
\right) = 
\left(
\begin{array}{cccc}
X_{1} &amp;amp; 0 &amp;amp; \ldots &amp;amp; 0 \&lt;br&gt;
0 &amp;amp; X_{2} &amp;amp; \ldots &amp;amp; 0 \&lt;br&gt;
\vdots &amp;amp; \vdots &amp;amp; \ddots &amp;amp; \vdots \&lt;br&gt;
0 &amp;amp; 0 &amp;amp; \ldots &amp;amp; X_{J}
\end{array}
\right) 
\left(
\begin{array}{cccc}
A_{1} \&lt;br&gt;
A_{2} \&lt;br&gt;
\vdots  \&lt;br&gt;
A_{J} \&lt;br&gt;
\end{array}
\right) +
\left(
\begin{array}{cccc}
U_{1} \&lt;br&gt;
U_{2} \&lt;br&gt;
\vdots  \&lt;br&gt;
U_{J} \&lt;br&gt;
\end{array}
\right)
$$&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 2. Make Prior matrixes&lt;/span&gt;
  r &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(npara)) &lt;span style=&#34;color:#75715e&#34;&gt;# a part of dependent variable in mixed estimation&lt;/span&gt;
  iter1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))
  n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(iter1)){
    iter1[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n
    n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; order&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in iter1){
    r[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  }
  R &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara) &lt;span style=&#34;color:#75715e&#34;&gt;# a part of explanatory variables in mixed estimation&lt;/span&gt;
  V &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(explanatory),ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(explanatory)) &lt;span style=&#34;color:#75715e&#34;&gt;# coefficient matrix of var-cov matrix in mixed estimation&lt;/span&gt;
  
  V0 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara) &lt;span style=&#34;color:#75715e&#34;&gt;# Prior for var matrix&lt;/span&gt;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# PRIOR FOR VAR OF CONSTANT&lt;/span&gt;
  sigi &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)) &lt;span style=&#34;color:#75715e&#34;&gt;# var of AR(m)&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)){
    AR &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ar&lt;/span&gt;(x[,i],order.max &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; order)
    sigi[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; AR&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;var.pred
  }
  sigma_AR &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(sigi,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x),ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))
  iter2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,npara,(&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;order&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;))
  n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in iter2){
    V0[i,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; pi5&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;pi3&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigi[n]
    n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# PRIOR FOR VAR OF AUTOREGRESSIVE PARAMETER&lt;/span&gt;
  wi &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# prior weight on s.d. of autoregressive parameter&lt;/span&gt;
  k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# decay parameter&lt;/span&gt;
  iter3 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;order))
  n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;iter3[1] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(iter3)){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;((i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;%%&lt;/span&gt;order &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# const&lt;/span&gt;
      iter3[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n 
    }else{
      n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)
      iter3[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n
    }
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in iter3) {
    k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; k &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    V0[i,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; pi5&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;pi1&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(k&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(pi4&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;wi))
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; order){
      k &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    }
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# PRIOR FOR VAR OF DISTRIBUTED LAG PARAMETER&lt;/span&gt;
  wj &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# prior weight on s.d. of distributed lag parameter&lt;/span&gt;
  k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# decay parameter&lt;/span&gt;
  count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
  n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  ndis &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; npara &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(iter3) &lt;span style=&#34;color:#75715e&#34;&gt;# the number of distibuted lag in each equation&lt;/span&gt;
  
  l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x),length&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;npara)
  temp &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(iter3))
  j &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;temp[1] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(temp)){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;((i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;%%&lt;/span&gt;order &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      j &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# const&lt;/span&gt;
      temp[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j 
    }else{
      j &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)
      temp[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j
    }
  }
  l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; l[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(temp)]; l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; l[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(ndis)]
  
  iter4 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;npara; iter4 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; iter4[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(iter2,iter3)]
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in iter4){
    count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; count &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    V0[i,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; pi5&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;pi2&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigi[n]&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(k&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(pi4&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;wj)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigi[l[count]])
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(count&lt;span style=&#34;color:#f92672&#34;&gt;%%&lt;/span&gt;(order&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; k &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    }
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(count&lt;span style=&#34;color:#f92672&#34;&gt;%%&lt;/span&gt;(ndis&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      n &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
      k &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    }
  }

  &lt;span style=&#34;color:#75715e&#34;&gt;# 3. Estimate OLS&lt;/span&gt;
  beta &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;explanatory))&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;dependent
  sig &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(explanatory))&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;
                      &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(dependent&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;explanatory&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;beta)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;
                      (dependent&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;explanatory&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;beta))
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 4. Implement Mixed Estimation for initial values&lt;/span&gt;
  beta_M &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;((&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;sig)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;explanatory &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(R)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V0)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;R)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;
    ((sig)&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;dependent &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(R)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V0)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;r)
  sig_M &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;((sig)&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;explanatory &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(R)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V0)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;R)
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# for kalman filter&lt;/span&gt;
  observable &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(x&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(order&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x),]) &lt;span style=&#34;color:#75715e&#34;&gt;# dependent variable&lt;/span&gt;
  coefficient &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x),ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara,(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;order))) &lt;span style=&#34;color:#75715e&#34;&gt;# explanatory variable&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;order)){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)){
      coefficient[k,(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;(k&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;npara&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(k&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;npara&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)),i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; explanatory[i,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(npara&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))]
    }
  }
  
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(observable, coefficient, beta_M, sig_M, sigma_AR, V0, order, npara)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;observable&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;coefficient&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;beta_M&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sig_M&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sigma_AR&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;V0&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;npara&amp;#34;&lt;/span&gt;)
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;MPrior &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x,order,&lt;span style=&#34;color:#66d9ef&#34;&gt;pi&lt;/span&gt;){
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# Make Minnesota Prior&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   x - dataset&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   order - max lag of autoregression&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   pi - a set of hyper-parameter of prior matrix&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;

  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)
    
  &lt;span style=&#34;color:#75715e&#34;&gt;# 1. Process row data&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;eval&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(text &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;paste0&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pi&amp;#34;&lt;/span&gt;,i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;=pi[[&amp;#34;&lt;/span&gt;,i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;]]&amp;#34;&lt;/span&gt;)))
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;class&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;matrix&amp;#34;&lt;/span&gt;){
    x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(x)
  }
  dependent &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(x[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;order),&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)){
    dependent &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(dependent,&lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(x&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(order&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x),i]))
  }
  explanatory &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;embed&lt;/span&gt;(x,order)[&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,])
  explanatory &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x),ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))&lt;span style=&#34;color:#f92672&#34;&gt;%x%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(explanatory)
  npara &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(explanatory) &lt;span style=&#34;color:#75715e&#34;&gt;# the number of parameters/ ncol(x)*(ncol(x)*order + 1(const))&lt;/span&gt;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 2. Make Prior matrixes&lt;/span&gt;
  r &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(npara)) &lt;span style=&#34;color:#75715e&#34;&gt;# a part of dependent variable in mixed estimation&lt;/span&gt;
  iter1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))
  n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(iter1)){
    iter1[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n
    n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; order&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in iter1){
    r[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  }
  R &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara) &lt;span style=&#34;color:#75715e&#34;&gt;# a part of explanatory variables in mixed estimation&lt;/span&gt;
  V &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(explanatory),ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(explanatory)) &lt;span style=&#34;color:#75715e&#34;&gt;# coefficient matrix of var-cov matrix in mixed estimation&lt;/span&gt;
  
  V0 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara) &lt;span style=&#34;color:#75715e&#34;&gt;# Prior for var matrix&lt;/span&gt;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# PRIOR FOR VAR OF CONSTANT&lt;/span&gt;
  sigi &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)) &lt;span style=&#34;color:#75715e&#34;&gt;# var of AR(m)&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)){
    AR &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ar&lt;/span&gt;(x[,i],order.max &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; order)
    sigi[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; AR&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;var.pred
  }
  sigma_AR &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(sigi,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x),ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))
  iter2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,npara,(&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;order&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;))
  n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in iter2){
    V0[i,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; pi5&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;pi3&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigi[n]
    n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# PRIOR FOR VAR OF AUTOREGRESSIVE PARAMETER&lt;/span&gt;
  wi &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# prior weight on s.d. of autoregressive parameter&lt;/span&gt;
  k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# decay parameter&lt;/span&gt;
  iter3 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;order))
  n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;iter3[1] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(iter3)){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;((i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;%%&lt;/span&gt;order &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# const&lt;/span&gt;
      iter3[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n 
    }else{
      n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)
      iter3[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; n
    }
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in iter3) {
    k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; k &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    V0[i,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; pi5&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;pi1&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(k&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(pi4&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;wi))
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; order){
      k &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
    }
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# PRIOR FOR VAR OF DISTRIBUTED LAG PARAMETER&lt;/span&gt;
  wj &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# prior weight on s.d. of distributed lag parameter&lt;/span&gt;
  k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# decay parameter&lt;/span&gt;
  count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
  n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
  ndis &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; npara &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(iter3) &lt;span style=&#34;color:#75715e&#34;&gt;# the number of distibuted lag in each equation&lt;/span&gt;
  
  l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x),length&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;npara)
  temp &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(iter3))
  j &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;temp[1] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(temp)){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;((i&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;%%&lt;/span&gt;order &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      j &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# const&lt;/span&gt;
      temp[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j 
    }else{
      j &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)
      temp[i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; j
    }
  }
  l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; l[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(temp)]; l &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; l[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(ndis)]
  
  iter4 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;npara; iter4 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; iter4[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(iter2,iter3)]
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in iter4){
    count &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; count &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    V0[i,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; pi5&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;pi2&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigi[n]&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(k&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;exp&lt;/span&gt;(pi4&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;wj)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sigi[l[count]])
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(count&lt;span style=&#34;color:#f92672&#34;&gt;%%&lt;/span&gt;(order&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; k &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    }
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(count&lt;span style=&#34;color:#f92672&#34;&gt;%%&lt;/span&gt;(ndis&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      n &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; n &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
      k &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
    }
  }

  &lt;span style=&#34;color:#75715e&#34;&gt;# 3. Estimate OLS&lt;/span&gt;
  beta &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;explanatory))&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;dependent
  sig &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(explanatory))&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;
                      &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(dependent&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;explanatory&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;beta)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;
                      (dependent&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;explanatory&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;beta))
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 4. Implement Mixed Estimation for initial values&lt;/span&gt;
  beta_M &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;((&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;sig)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;explanatory &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(R)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V0)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;R)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;
    ((sig)&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;dependent &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(R)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V0)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;r)
  sig_M &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sig&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;((sig)&lt;span style=&#34;color:#a6e22e&#34;&gt;^&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(explanatory)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;explanatory &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(R)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(V0)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;R)
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# for kalman filter&lt;/span&gt;
  observable &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(x&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(order&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x),]) &lt;span style=&#34;color:#75715e&#34;&gt;# dependent variable&lt;/span&gt;
  coefficient &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x),ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara,(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;order))) &lt;span style=&#34;color:#75715e&#34;&gt;# explanatory variable&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(x)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;order)){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)){
      coefficient[k,(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;(k&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;npara&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(k&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;npara&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x)),i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; explanatory[i,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(npara&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NCOL&lt;/span&gt;(x))]
    }
  }
  
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(observable, coefficient, beta_M, sig_M, sigma_AR, V0, order, npara)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;observable&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;coefficient&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;beta_M&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sig_M&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sigma_AR&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;V0&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;npara&amp;#34;&lt;/span&gt;)
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;BVAR &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(m){
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# Estimation of Bayesian Vector Auto-Regression&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#   m - dataset&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;#-------------------------------------------------------------------&lt;/span&gt;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 1. Process data&lt;/span&gt;
  observable &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;observable
  coefficient &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;coefficient
  beta_M &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;beta_M
  sig_M &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;sig_M
  sigma_AR &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;sigma_AR
  V0 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;V0
  order &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;order
  npara &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;npara
  
  &lt;span style=&#34;color:#75715e&#34;&gt;# 2. Run Kalmanfilter&lt;/span&gt;
  results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;kalmanfiter&lt;/span&gt;(observable,npara,&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,nrow &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara,ncol &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; npara),
                         coefficient,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,V0,&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;,sigma_AR,beta_M,sig_M)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(results)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;m &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MPrior&lt;/span&gt;(Canada,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;abs&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rnorm&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)))
results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BVAR&lt;/span&gt;(m)

BVAR_Prediction &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(results,horizon){
  
  state_pred &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state prediction`
  state_fil &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`state filtered`
  obs_pred &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`observable prediction`
  A &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`parameter of state eq`
    
  nparaall &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(state_pred)[1]
  num &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(obs_pred)[1]
  npara &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; order&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;num&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;
  order &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; (nparaall&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;num)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(num^2)
  samplesize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dim&lt;/span&gt;(state_pred)[3]
  
  y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,horizon,num)
  B &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,horizon,nparaall)
  x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`parameter of observable eq`[1,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;npara,samplesize]
  
  B[1,] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; state_fil[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,samplesize]
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(horizon&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)) {
    B[i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;,] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; A&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;B[i,]
    y[i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;,] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; B[i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;,]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,num)&lt;span style=&#34;color:#f92672&#34;&gt;%x%&lt;/span&gt;x)
    x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,y[i&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;,],x[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(from&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(npara&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;order),to&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;npara))])
  }
  
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(B,y)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;y&amp;#34;&lt;/span&gt;)
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(result)
  
}

pre &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BVAR_Prediction&lt;/span&gt;(results,&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;)

BVAR_OPT &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x){
  int_pi &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rnorm&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
  
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;Sims, Christopher A, 1980. &amp;ldquo;Macroeconomics and Reality,&amp;rdquo; Econometrica, Econometric Society, vol. 48(1), pages 1-48, January. &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
    <item>
      <title>Gianonne et. al. (2008)ã®ãƒãƒ«ãƒãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã§å››åŠæœŸGDPã‚’äºˆæƒ³ã—ã¦ã¿ãŸ</title>
      <link>/post/post6/</link>
      <pubDate>Mon, 16 Jul 2018 00:00:00 +0000</pubDate>
      <guid>/post/post6/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚
å‰å›ã€çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰APIæ¥ç¶šã§çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’è½ã¨ã™ã¨ã„ã†è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸã€‚
ä»Šå›ã¯ãã®ãƒ‡ãƒ¼ã‚¿ã‚’ã€Gianonne et. al. (2008)ã®ãƒãƒ«ãƒãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã«ã‹ã‘ã€å››åŠæœŸGDPã®äºˆæ¸¬ã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-gianonne-et-al-2008ç‰ˆãƒãƒ«ãƒãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«&#34;&gt;1. Gianonne et. al. (2008)ç‰ˆãƒãƒ«ãƒãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://dept.ku.edu/~empirics/Courses/Econ844/papers/Nowcasting%20GDP.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å…ƒè«–æ–‡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å‰å›ã®æŠ•ç¨¿ã§ã‚‚æ›¸ãã¾ã—ãŸãŒã€ã“ã®è«–æ–‡ã¯Giannoneã‚‰ãŒ2008å¹´ã«ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ã—ãŸè«–æ–‡ã§ã™(JME)ã€‚å½¼ã‚‰ã¯ã‚¢ãƒ¡ãƒªã‚«ã®çµŒæ¸ˆæŒ‡æ¨™ã‚’ç”¨ã„ã¦å››åŠæœŸGDPã‚’æ—¥æ¬¡ã§æ¨è¨ˆã—ã€äºˆæ¸¬æŒ‡æ¨™ã¨ã—ã¦ã®æœ‰ç”¨æ€§ã‚’ç¤ºã—ã¾ã—ãŸã€‚æŒ‡æ¨™é–“ã®é€£å‹•æ€§(colinearity)ã‚’åˆ©ç”¨ã—ã¦ã€å¤šæ•°ã‚ã‚‹çµŒæ¸ˆæŒ‡æ¨™ã‚’2ã¤ã®ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã«åœ§ç¸®ã—ã€ãã®ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’å››åŠæœŸGDPã«ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã•ã›ã‚‹ã“ã¨ã«ã‚ˆã£ã¦é«˜ã„äºˆæ¸¬æ€§ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
ã¾ãšã€ã“ã®ãƒ¢ãƒ‡ãƒ«ã«ã¤ã„ã¦ã”ç´¹ä»‹ã—ã¾ã™ã€‚ã“ã®ãƒ¢ãƒ‡ãƒ«ã§ã¯2æ®µéšæ¨è¨ˆã‚’è¡Œã„ã¾ã™ã€‚ã¾ãšä¸»æˆåˆ†åˆ†æã«ã‚ˆã‚ŠçµŒæ¸ˆçµ±è¨ˆã‚’çµ±è¨ˆé–“ã®ç›¸é–¢ãŒ0ã¨ãªã‚‹ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã¸å¤‰æ›ã—ã¾ã™ï¼ˆ&lt;a href=&#34;https://datachemeng.com/principalcomponentanalysis/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‚è€ƒ&lt;/a&gt;ï¼‰ã€‚ãã—ã¦ã€ãã®å¾Œã®çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã§ã®æ¨è¨ˆã§å¿…è¦ã«ãªã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’&lt;code&gt;OLS&lt;/code&gt;æ¨è¨ˆã—ã€ãã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ï¼†ã‚«ãƒ«ãƒãƒ³ã‚¹ãƒ ãƒ¼ã‚¶ãƒ¼ã‚’å›ã—ã€ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’æ¨è¨ˆã—ã¦ã„ã¾ã™ã€‚ã§ã¯ã€å…·ä½“çš„ãªèª¬æ˜ã«ç§»ã‚Šã¾ã™ã€‚
çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’$x_{i,t|v_j}$ã¨å®šç¾©ã—ã¾ã™ã€‚ã“ã“ã§ã€$i=1,&amp;hellip;,n$ã¯çµŒæ¸ˆçµ±è¨ˆã‚’è¡¨ã—ï¼ˆã¤ã¾ã‚Š$n$ãŒå…¨çµ±è¨ˆæ•°ï¼‰ã€$t=1,&amp;hellip;,T_{iv_j}$ã¯çµ±è¨ˆ$i$ã®ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ã®æ™‚ç‚¹ã‚’è¡¨ã—ã¦ã„ã¾ã™ï¼ˆã¤ã¾ã‚Šã€$T_{iv_j}$ã¯çµ±è¨ˆ$i$ã®ãã®æ™‚ç‚¹ã§ã®æœ€æ–°ãƒ‡ãƒ¼ã‚¿æ—¥ä»˜ã‚’è¡¨ã™ï¼‰ã€‚ã¾ãŸã€$v_j$ã¯ã‚ã‚‹æ™‚ç‚¹$j$ï¼ˆ2005å¹´ãªã©ï¼‰ã§å¾—ã‚‰ã‚Œã‚‹æƒ…å ±é›†åˆï¼ˆvintageï¼‰ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚çµ±è¨ˆãƒ‡ãƒ¼ã‚¿$x_{i,t|v_j}$ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼$f_{r,t}$ã®ç·šå½¢çµåˆã§è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ï¼ˆã“ã“ã§$r$ã¯ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã®æ•°ã‚’è¡¨ã™ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;$$
x_{i,t|v_j} = \mu_i + \lambda_{i1}f_{1,t} + &amp;hellip; + \lambda_{ir}f_{r,t} + \xi_{i,t|v_j} \tag{1}
$$&lt;/p&gt;
&lt;p&gt;&lt;code&gt;\(\mu\_i\)&lt;/code&gt;ã¯å®šæ•°é …ã€$\lambda_{ir}$ã¯ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€$\xi_{i,t|v_j}$ã¯ãƒ›ãƒ¯ã‚¤ãƒˆãƒã‚¤ã‚ºã®èª¤å·®é …ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’è¡Œåˆ—å½¢å¼ã§æ›¸ãã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
x_{t|v_j}  = \mu + \Lambda F_t + \xi_{t|v_j} = \mu + \chi_t + \xi_{t|v_j} \tag{2}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$x_{t|v_j} = (x_{1,t|v_j}, &amp;hellip;, x_{n,t|v_j} )^{\mathrm{T}}$ã€$\xi_{t|v_j}=(\xi_{1,t|v_j}, &amp;hellip;, \xi_{n,t|v_j})^{\mathrm{T}}$ã€$F_t = (f_{1,t}, &amp;hellip;, f_{r,t})^{\mathrm{T}}$ã§ã‚ã‚Šã€$\Lambda$ã¯å„è¦ç´ ãŒ$ \lambda_{ij}$ã®$n\times r$è¡Œåˆ—ã®ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€$\chi_t = \Lambda F_t$ã§ã™ã€‚ã‚ˆã£ã¦ã€ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼$ F_t$ã‚’æ¨å®šã™ã‚‹ãŸã‚ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿$x_{i,t|v_j}$ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«åŸºæº–åŒ–ã—ãŸã†ãˆã§ã€åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’è¨ˆç®—ã—ã€ãã®å›ºæœ‰å€¤å•é¡Œã‚’è§£ã‘ã°ã‚ˆã„ã¨ã„ã†äº‹ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle z_{it} = \frac{1}{\hat{\sigma}_i}(x_{it} - \hat{\mu}_{it}) \tag{3}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$\displaystyle \hat{\mu}&lt;em&gt;{it} = 1/T \sum&lt;/em&gt;{t=1}^T x_{it}$ã§ã‚ã‚Šã€$\hat{\sigma}_i = \sqrt{1/T \sum_{t=1}^T (x_{it}-\hat{\mu_{it}})^2}$ã§ã™ï¼ˆã“ã“ã§$T$ã¯ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ï¼‰ã€‚åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—$S$ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle S = \frac{1}{T} \sum_{t=1}^T z_t z_t^{\mathrm{T}} \tag{4}
$$
æ¬¡ã«ã€$S$ã®ã†ã¡ã€å›ºæœ‰å€¤ã‚’å¤§ãã„é †ã«$r$å€‹å–ã‚Šå‡ºã—ã€ãã‚Œã‚’è¦ç´ ã«ã—ãŸ$ r \times r$å¯¾è§’è¡Œåˆ—ã‚’$ D$ã€ãã‚Œã«å¯¾å¿œã™ã‚‹å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«ã‚’$n \times r$è¡Œåˆ—ã«ã—ãŸã‚‚ã®ã‚’$ V$ã¨å®šç¾©ã—ã¾ã™ã€‚ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼$ \tilde{F}_t$ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ¨è¨ˆã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\tilde{F}_t = V^{\mathrm{T}} z_t \tag{5}
$$
ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°$\Lambda$ã¨èª¤å·®é …ã®å…±åˆ†æ•£è¡Œåˆ—$\Psi = \mathop{\mathbb{E}} [\xi_t\xi^{\mathrm{T}}_t]$ã¯$\tilde{F}_t$ã‚’$z_t$ã«å›å¸°ã™ã‚‹ã“ã¨ã§æ¨è¨ˆã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\displaystyle \hat{\Lambda} = \sum_{t=1}^T z_t \tilde{F}^{\mathrm{T}}_t (\sum_{t=1}^T\tilde{F}_t\tilde{F}^{\mathrm{T}}_t)^{-1} = V \tag{6}
$$&lt;/p&gt;
&lt;p&gt;$$
\hat{\Psi} = diag(S - VDV) \tag{7}
$$&lt;/p&gt;
&lt;p&gt;æ³¨æ„ã—ã¦é ‚ããŸã„ã®ã¯ã€ã“ã“ã§æ¨è¨ˆã—ãŸ$\tilde{F}_t$ã¯ã€ä»¥ä¸‹ã®çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã§ã®æ¨è¨ˆã«å¿…è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®ä¸€æ™‚çš„ãªæ¨è¨ˆå€¤ã§ã‚ã‚‹ã¨ã„ã†äº‹ã§ã™ï¼ˆï¼’æ®µéšæ¨è¨ˆã®ï¼‘æ®µéšç›®ã¨ã„ã†äº‹ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;$$
x_{t|v_j}  = \mu + \Lambda F_t + \xi_{t|v_j} = \mu + \chi_t + \xi_{t|v_j} \tag{2}
$$&lt;/p&gt;
&lt;p&gt;$$
F_t = AF_{t-1} + u_t \tag{8}
$$
ã“ã“ã§ã€$u_t$ã¯å¹³å‡0ã€åˆ†æ•£$H$ã®ãƒ›ãƒ¯ã‚¤ãƒˆãƒã‚¤ã‚ºã§ã™ã€‚å†æ²ã—ã¦ã„ã‚‹(2)å¼ãŒè¦³æ¸¬æ–¹ç¨‹å¼ã€(8)å¼ãŒé·ç§»æ–¹ç¨‹å¼ã¨ãªã£ã¦ã„ã¾ã™ã€‚æ¨å®šã™ã¹ããƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯$\Lambda$ã€$\Psi$ä»¥å¤–ã«$A$ã¨$H$ãŒã‚ã‚Šã¾ã™ï¼ˆ$\mu=0$ã¨ã—ã¦ã„ã¾ã™ï¼‰ã€‚$A$ã¯ä¸»æˆåˆ†åˆ†æã«ã‚ˆã‚Šè¨ˆç®—ã—ãŸ$\tilde{F}_t$ã‚’&lt;code&gt;VAR(1)&lt;/code&gt;ã«ã‹ã‘ã‚‹ã“ã¨ã§æ¨å®šã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\hat{A} = \sum_{t=2}^T\tilde{F}_t\tilde{F}_{t-1}^{\mathrm{T}} (\sum_{t=2}^T\tilde{F}_{t-1}\tilde{F}_{t-1}^{\mathrm{T}})^{-1} \tag{9}
$$
&lt;code&gt;\(H\)&lt;/code&gt;ã¯ä»Šæ¨è¨ˆã—ãŸ&lt;code&gt;VAR(1)&lt;/code&gt;ã®èª¤å·®é …ã®å…±åˆ†æ•£è¡Œåˆ—ã‹ã‚‰è¨ˆç®—ã—ã¾ã™ã€‚ã“ã‚Œã§å¿…è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¨å®šãŒçµ‚ã‚ã‚Šã¾ã—ãŸã€‚æ¬¡ã«ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚’å›ã—ã¾ã™ã€‚ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã«é–¢ã—ã¦ã¯&lt;a href=&#34;https://qiita.com/MoriKen/items/0c80ef75749977767b43&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚ã“ã‚Œã§æœ€çµ‚çš„ã«$\hat{F}_{t|v_j}$ã®æ¨è¨ˆãŒã§ãã‚‹ã‚ã‘ã§ã™ã€‚
GDPãŒã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã§èª¬æ˜å¯èƒ½ã§ã‚ã‚Šï¼ˆã¤ã¾ã‚Šå›ºæœ‰ã®å¤‰å‹•ãŒãªã„ï¼‰ã€GDPã¨æœˆæ¬¡çµŒæ¸ˆæŒ‡æ¨™ãŒjointly normalã§ã‚ã‚Œã°ä»¥ä¸‹ã®ã‚ˆã†ãªå˜ç´”ãªOLSæ¨è¨ˆã§GDPã‚’äºˆæ¸¬ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“æœˆæ¬¡çµŒæ¸ˆæŒ‡æ¨™ã®æ–¹ãŒæ—©ãå…¬è¡¨ã•ã‚Œã‚‹ã®ã§ã€å†…ç”Ÿæ€§ã®å•é¡Œã¯ãªã„ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\hat{y}&lt;em&gt;{3k|v_j} = \alpha + \beta^{\mathrm{T}} \hat{F}&lt;/em&gt;{3k|v_j} \tag{10}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$3k$ã¯å››åŠæœŸã®æœ€çµ‚æœˆã‚’ç¤ºã—ã¦ã„ã¾ã™ï¼ˆ3æœˆã€6æœˆãªã©ï¼‰$\hat{y}&lt;em&gt;{3k|v_j}$ã¯$j$æ™‚ç‚¹ã§å¾—ã‚‰ã‚Œã‚‹æƒ…å ±é›†åˆ$v_j$ã§ã®å››åŠæœŸGDPã‚’è¡¨ã—ã¦ãŠã‚Šã€$\hat{F}&lt;/em&gt;{3k|v_j}$ã¯ãã®æ™‚ç‚¹ã§æ¨å®šã—ãŸãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’è¡¨ã—ã¦ã„ã¾ã™ï¼ˆå››åŠæœŸæœ€çµ‚æœˆã®å€¤ã ã‘ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ç‚¹ã«æ³¨æ„ï¼‰ã€‚ã“ã‚Œã§æ¨è¨ˆæ–¹æ³•ã®èª¬æ˜ã¯çµ‚ã‚ã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-rã§å®Ÿè£…ã™ã‚‹&#34;&gt;2. Rã§å®Ÿè£…ã™ã‚‹&lt;/h2&gt;
&lt;p&gt;ã§ã¯å®Ÿè£…ã—ã¾ã™ã€‚å‰å›è¨˜äº‹ã§å¾—ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ï¼ˆdatasetï¼‰ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ã€‚ã¾ãšã€ä¸»æˆåˆ†åˆ†æã§ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ãªãŠã€å‰å›ã®è¨˜äº‹ã§3ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã®ç´¯ç©å¯„ä¸åº¦ãŒ80%ã‚’è¶…ãˆãŸãŸã‚ã€ä»Šå›ã‚‚ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼æ•°ã¯3ã«ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#------------------------&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# Giannone et. al. 2008 &lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#------------------------&lt;/span&gt;

&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(xts)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(tidyverse)

&lt;span style=&#34;color:#75715e&#34;&gt;# ä¸»æˆåˆ†åˆ†æã§ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’è¨ˆç®—&lt;/span&gt;
f &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼æ•°ã‚’å®šç¾©&lt;/span&gt;
a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;which&lt;/span&gt;(dataset1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2012-04-01&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚µãƒ³ãƒ—ãƒ«é–‹å§‹æœŸé–“ã‚’2012å¹´ã«è¨­å®šã€‚&lt;/span&gt;
dataset2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dataset1[a&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(dataset1),]
&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(dataset2) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dataset2&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication
dataset2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dataset2[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-2&lt;/span&gt;]
z &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(dataset2) &lt;span style=&#34;color:#75715e&#34;&gt;# zã¯åŸºæº–åŒ–ã•ã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z)){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;eval&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(text &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;paste&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;S_i &amp;lt;- z[i,]%*%t(z[i,])&amp;#34;&lt;/span&gt;,sep &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(i&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
    S &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; S_i
  }else{
    S &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; S &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; S_i
  }
}
S &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z))&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;S &lt;span style=&#34;color:#75715e&#34;&gt;# åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã‚’è¨ˆç®— (4)å¼&lt;/span&gt;
gamma &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;eigen&lt;/span&gt;(S) 
D &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(gamma&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;values[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;f])
V &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; gamma&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;vectors[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;f]
F_t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z),f)
&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z)){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;eval&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;parse&lt;/span&gt;(text &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;paste&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;F_t[&amp;#34;&lt;/span&gt;,i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,]&amp;lt;- z[&amp;#34;&lt;/span&gt;,i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;,]%*%V&amp;#34;&lt;/span&gt;,sep &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;))) &lt;span style=&#34;color:#75715e&#34;&gt;# (5)å¼ã‚’å®Ÿè¡Œ&lt;/span&gt;
}
F_t.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(F_t,order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;row.names&lt;/span&gt;(z)))
&lt;span style=&#34;color:#a6e22e&#34;&gt;plot.zoo&lt;/span&gt;(F_t.xts,col &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;red&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;green&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;yellow&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;purple&amp;#34;&lt;/span&gt;),plot.type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;single&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# æ™‚ç³»åˆ—ãƒ—ãƒ­ãƒƒãƒˆ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post6/index_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;lambda_hat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; V
psi &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(S&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;V&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;D&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V)) &lt;span style=&#34;color:#75715e&#34;&gt;# (7)å¼&lt;/span&gt;
R &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cov&lt;/span&gt;(z&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;z&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;V&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V)))) 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¨è¨ˆã—ãŸãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼$\tilde{F}_t$ã®æ™‚ç³»åˆ—ãƒ—ãƒ­ãƒƒãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€å‰å›&lt;code&gt;princomp&lt;/code&gt;é–¢æ•°ã§è¨ˆç®—ã—ãŸãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã¨å®Œå…¨ä¸€è‡´ã—ã¾ã™ï¼ˆã˜ã‚ƒã‚&lt;code&gt;princomp&lt;/code&gt;ã§ã„ã„ã‚„ã‚“ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒå®Ÿè£…ã—ãªã„ã¨å‹‰å¼·ã«ãªã‚Šã¾ã›ã‚“ã®ã§ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ã€&lt;code&gt;VAR(1)&lt;/code&gt;ã‚’æ¨è¨ˆã—ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–ã‚Šå‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# VAR(1)ãƒ¢ãƒ‡ãƒ«ã‚’æ¨è¨ˆ&lt;/span&gt;
a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,f,f)
b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,f,f)
&lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(t in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z)){
  a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; F_t[t,]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(F_t[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,])
  b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; b &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; F_t[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(F_t[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,])
}
b_inv &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;solve&lt;/span&gt;(b)
A_hat &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;b_inv &lt;span style=&#34;color:#75715e&#34;&gt;# (9)å¼&lt;/span&gt;

e &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;numeric&lt;/span&gt;(f)
&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(t in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(F_t)){
  e &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; e &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; F_t[t,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;F_t[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;A_hat
}
H &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(e)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;e
Q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,f,f)
Q[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;f,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;f] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; H
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;VAR(1)&lt;/code&gt;ã«é–¢ã—ã¦ã‚‚&lt;code&gt;var&lt;/code&gt;é–¢æ•°ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ•°å€¤ãŒä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªæ¸ˆã¿ã§ã™ã€‚ã„ã‚ˆã„ã‚ˆã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚’å®Ÿè¡Œ&lt;/span&gt;
RR &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(z),&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(z),&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z))) &lt;span style=&#34;color:#75715e&#34;&gt;# RRã¯è¦³æ¸¬å€¤ã®åˆ†æ•£è¡Œåˆ—ï¼ˆç›¸é–¢ã¯ãªã„ã¨ä»®å®šï¼‰&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(z)){
  miss &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;is.na&lt;/span&gt;(z[i,])
  R_temp &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(R)
  R_temp[miss] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1e+32&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# æ¬ æå€¤ã®åˆ†æ•£ã¯ç„¡é™å¤§ã«ã™ã‚‹&lt;/span&gt;
  RR[,,i] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(R_temp)
}
zz &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; z; zz&lt;span style=&#34;color:#a6e22e&#34;&gt;[is.na&lt;/span&gt;(z)] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# æ¬ æå€¤ï¼ˆNAï¼‰ã«0ã‚’ä»£å…¥ï¼ˆè¨ˆç®—çµæœã«ã¯ã»ã¨ã‚“ã©å½±éŸ¿ã—ãªã„ï¼‰ã€‚&lt;/span&gt;
a_t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(zz),f) &lt;span style=&#34;color:#75715e&#34;&gt;# a_tã¯çŠ¶æ…‹å¤‰æ•°ã®äºˆæ¸¬å€¤&lt;/span&gt;
a_tt &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(zz),f) &lt;span style=&#34;color:#75715e&#34;&gt;# a_ttã¯çŠ¶æ…‹å¤‰æ•°ã®æ›´æ–°å¾Œã®å€¤&lt;/span&gt;
a_tt[1,] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; F_t[1,] &lt;span style=&#34;color:#75715e&#34;&gt;# çŠ¶æ…‹å¤‰æ•°ã®åˆæœŸå€¤ã«ã¯ä¸»æˆåˆ†åˆ†æã§æ¨è¨ˆã—ãŸãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’ä½¿ç”¨&lt;/span&gt;
sigma_t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(f,f,&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(zz))) &lt;span style=&#34;color:#75715e&#34;&gt;# sigma_tã¯çŠ¶æ…‹å¤‰æ•°ã®åˆ†æ•£ã®äºˆæ¸¬å€¤&lt;/span&gt;
sigma_tt &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(f,f,&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(zz))) &lt;span style=&#34;color:#75715e&#34;&gt;# sigma_tã¯çŠ¶æ…‹å¤‰æ•°ã®åˆ†æ•£ã®æ›´æ–°å€¤&lt;/span&gt;
p &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;kronecker&lt;/span&gt;(A_hat,A_hat)))&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kronecker&lt;/span&gt;(A_hat,A_hat))
sigma_tt[,,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(p,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# çŠ¶æ…‹å¤‰æ•°ã®åˆ†æ•£ã®åˆæœŸå€¤ã¯VAR(1)ã®æ¨è¨ˆå€¤ã‹ã‚‰è¨ˆç®—&lt;/span&gt;
y_t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;matrix&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(zz),&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(zz)) &lt;span style=&#34;color:#75715e&#34;&gt;# y_tã¯è¦³æ¸¬å€¤ã®äºˆæ¸¬å€¤&lt;/span&gt;
K_t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;array&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,dim &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(f,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(zz),&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(zz))) &lt;span style=&#34;color:#75715e&#34;&gt;# K_tã¯ã‚«ãƒ«ãƒãƒ³ã‚²ã‚¤ãƒ³&lt;/span&gt;
data.m &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.matrix&lt;/span&gt;(dataset2)
&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã‚’å®Ÿè¡Œ&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(t in &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(zz)){
  a_t[t,] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; A_hat&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;a_tt[t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,]
  sigma_t[,,t] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; A_hat&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;sigma_tt[,,t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(A_hat) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; Q
  y_t[t,] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.vector&lt;/span&gt;(V&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;a_t[t,])
  S_t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; V&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;sigma_tt[,,t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;RR[,,t]
  GG &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(RR[,,t]))&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;V
  Sinv &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(RR[,,t])) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(RR[,,t]))&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;V&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ginv&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(A_hat))&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;sigma_t[,,t]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;GG)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;sigma_t[,,t]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;diag&lt;/span&gt;(RR[,,t]))
  K_t[,,t] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sigma_t[,,t]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;Sinv
  a_tt[t,] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; a_t[t,] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; K_t[,,t]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;(zz[t,]&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;y_t[t,])
  sigma_tt[,,t] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sigma_t[,,t] &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; K_t[,,t]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;V&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;sigma_tt[,,t&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(V)&lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(K_t[,,t])
  }

F.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(a_tt,order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(data.m)))
&lt;span style=&#34;color:#a6e22e&#34;&gt;plot.zoo&lt;/span&gt;(F.xts, col &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;red&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;green&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;yellow&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;purple&amp;#34;&lt;/span&gt;),plot.type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;single&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å¾—ã‚‰ã‚ŒãŸæ¨è¨ˆå€¤ã‚’æ™‚ç³»åˆ—ãƒ—ãƒ­ãƒƒãƒˆ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post6/index_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã«ã‚ˆã‚Šæ¨è¨ˆã—ãŸãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã®æ™‚ç³»åˆ—ãƒ—ãƒ­ãƒƒãƒˆãŒä»¥ä¸‹ã§ã™ã€‚é·ç§»æ–¹ç¨‹å¼ãŒAR(1)ã ã£ãŸã‹ã‚‰ã‹ã‹ãªã‚Šå¹³æº–åŒ–ã•ã‚ŒãŸå€¤ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã§ã¯ã€ã“ã®å¾—ã‚‰ã‚ŒãŸãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’OLSã«ã‹ã‘ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¾—ã‚‰ã‚ŒãŸãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã¨GDPã‚’OLSã«ã‹ã‘ã‚‹&lt;/span&gt;
F_q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.data.frame&lt;/span&gt;(a_tt&lt;span style=&#34;color:#a6e22e&#34;&gt;[seq&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(a_tt),&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;),]) &lt;span style=&#34;color:#75715e&#34;&gt;# å››åŠæœŸã®çµ‚ã‚ã‚Šæœˆã®å€¤ã ã‘ã‚’å¼•ã£å¼µã£ã¦ãã‚‹ &lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(F_q) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor2&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor3&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(GDP) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GDP&amp;#34;&lt;/span&gt;)
t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;which&lt;/span&gt;(GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2012-04-01&amp;#34;&lt;/span&gt;)
t2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;which&lt;/span&gt;(GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2015-01-01&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# 2012-2q~2015-1qã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ãŒå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã€ãã‚Œä»¥é™ãŒãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿&lt;/span&gt;
GDP_q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; GDP[t&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(GDP),]
dataset.q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(GDP_q[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(t2&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;t),],F_q[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(t2&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;t),])
test &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lm&lt;/span&gt;(GDP&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;factor1 &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; factor2 &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; factor3,data&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dataset.q)
&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## Call:
## lm(formula = GDP ~ factor1 + factor2 + factor3, data = dataset.q)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1079.4  -779.4  -265.2   905.9  1280.0 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&amp;gt;|t|)    
## (Intercept) 129440.3     3784.8  34.200 4.74e-09 ***
## factor1       -776.3      846.0  -0.918    0.389    
## factor2       -699.0     2358.8  -0.296    0.776    
## factor3        552.3     1588.2   0.348    0.738    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1109 on 7 degrees of freedom
## Multiple R-squared:  0.6667,	Adjusted R-squared:  0.5239 
## F-statistic: 4.668 on 3 and 7 DF,  p-value: 0.04279
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;out_of_sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(GDP_q&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(t2&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;t&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(GDP_q),],F_q&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(t2&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;t&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(GDP_q),]) &lt;span style=&#34;color:#75715e&#34;&gt;# out of sampleã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆ&lt;/span&gt;
test.pred &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;predict&lt;/span&gt;(test, out_of_sample, interval&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;prediction&amp;#34;&lt;/span&gt;)
pred.GDP.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(test.pred[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],out_of_sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;GDP),order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; out_of_sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication)
&lt;span style=&#34;color:#a6e22e&#34;&gt;plot.zoo&lt;/span&gt;(pred.GDP.xts,col &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;red&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;),plot.type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;single&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# äºˆæ¸¬å€¤ã¨å®Ÿç¸¾å€¤ã‚’æ™‚ç³»åˆ—ãƒ—ãƒ­ãƒƒãƒˆ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post6/index_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;OLSã®æ¨è¨ˆçµæœã¯factor1ï¼ˆèµ¤ï¼‰ã¨factor2ï¼ˆé’ï¼‰ãŒæœ‰æ„ã¨ã®çµæœã€‚å‰å›ã®æŠ•ç¨¿ã§ã‚‚è¨€åŠã—ãŸã‚ˆã†ã«ã€factor1ï¼ˆèµ¤ï¼‰ã¯ãƒªã‚¹ã‚¯ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚’è¡¨ã—ã¦ã„ãã†ãªã®ã§ã€ä¿‚æ•°ã®ç¬¦å·ãŒè² ã§ã‚ã‚‹ã“ã¨ã¯é ·ã‘ã‚‹ã€‚ãŸã ã—ã€factor2ï¼ˆé’ï¼‰ã‚‚ç¬¦å·ãŒè² ãªã®ã§ã¯ãªãœãªã®ã‹â€¦ã€‚ã“ã®ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã¯ç”Ÿç”£å¹´é½¢äººå£ãªã©çµŒæ¸ˆã®æ½œåœ¨èƒ½åŠ›ã‚’è¡¨ã—ã¦ã„ã‚‹ã¨æ€ã£ã¦ã„ãŸã®ã«ã€‚ã‹ãªã‚Šè¬ã€‚ã¾ã‚ã¨ã‚Šã‚ãˆãšäºˆæ¸¬ã«ç§»ã‚Šã¾ã—ã‚‡ã†ã€‚ã“ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ãŸGDPã®äºˆæ¸¬å€¤ã¨å®Ÿç¸¾å€¤ã®æ¨ç§»ã¯ã„ã‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ç›´è¿‘ã®ç²¾åº¦ã¯æ‚ªããªã„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ã¨ã„ã†ã‹ã€ã“ã‚Œå®Œå…¨ã«å˜ä½æ ¹ã®å•é¡Œã‚’ç„¡è¦–ã—ã¦OLSã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ãªã€‚ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚‚GDPã‚‚å®Œå…¨ã«å˜ä½æ ¹ã‚’æŒã¤ã‘ã©å¿µã®ãŸã‚å˜ä½æ ¹æ¤œå®šã‚’ã‹ã‘ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(tseries)

&lt;span style=&#34;color:#a6e22e&#34;&gt;adf.test&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;factor1)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## 	Augmented Dickey-Fuller Test
## 
## data:  F_q$factor1
## Dickey-Fuller = -2.832, Lag order = 2, p-value = 0.2554
## alternative hypothesis: stationary
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;adf.test&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;factor2)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## 	Augmented Dickey-Fuller Test
## 
## data:  F_q$factor2
## Dickey-Fuller = -2.5433, Lag order = 2, p-value = 0.3654
## alternative hypothesis: stationary
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;adf.test&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;factor3)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## 	Augmented Dickey-Fuller Test
## 
## data:  F_q$factor3
## Dickey-Fuller = -2.5795, Lag order = 2, p-value = 0.3516
## alternative hypothesis: stationary
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;adf.test&lt;/span&gt;(GDP_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;GDP)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## 	Augmented Dickey-Fuller Test
## 
## data:  GDP_q$GDP
## Dickey-Fuller = -0.25589, Lag order = 3, p-value = 0.9867
## alternative hypothesis: stationary
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¯ã„ã€‚å…¨éƒ¨å˜ä½æ ¹ã‚‚ã£ã¦ã¾ã—ãŸâ€¦ã€‚éšå·®ã‚’ã¨ã£ãŸã®ã¡ã€å˜ä½æ ¹æ¤œå®šã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;GDP_q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; GDP_q &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(growth.rate&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(GDP&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lag&lt;/span&gt;(GDP)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)
F_q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; F_q &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(f1.growth.rate&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(factor1&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lag&lt;/span&gt;(factor1)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;,
                      f2.growth.rate&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(factor2&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lag&lt;/span&gt;(factor2)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;,
                      f3.growth.rate&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(factor3&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lag&lt;/span&gt;(factor3)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;)

&lt;span style=&#34;color:#a6e22e&#34;&gt;adf.test&lt;/span&gt;(GDP_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;growth.rate[2&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(GDP_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;growth.rate)])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## 	Augmented Dickey-Fuller Test
## 
## data:  GDP_q$growth.rate[2:NROW(GDP_q$growth.rate)]
## Dickey-Fuller = -2.5299, Lag order = 3, p-value = 0.368
## alternative hypothesis: stationary
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;adf.test&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;f1.growth.rate[2&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;f1.growth.rate)])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## 	Augmented Dickey-Fuller Test
## 
## data:  F_q$f1.growth.rate[2:NROW(F_q$f1.growth.rate)]
## Dickey-Fuller = -2.5185, Lag order = 2, p-value = 0.3748
## alternative hypothesis: stationary
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;adf.test&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;f2.growth.rate[2&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;f2.growth.rate)])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## 	Augmented Dickey-Fuller Test
## 
## data:  F_q$f2.growth.rate[2:NROW(F_q$f2.growth.rate)]
## Dickey-Fuller = -2.498, Lag order = 2, p-value = 0.3827
## alternative hypothesis: stationary
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;adf.test&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;f3.growth.rate[2&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(F_q&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;f3.growth.rate)])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## 	Augmented Dickey-Fuller Test
## 
## data:  F_q$f3.growth.rate[2:NROW(F_q$f3.growth.rate)]
## Dickey-Fuller = -3.3479, Lag order = 2, p-value = 0.08501
## alternative hypothesis: stationary
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;factor1ã ã‘ã¯5%æœ‰æ„æ°´æº–ã§å¸°ç„¡ä»®èª¬ã‚’æ£„å´ã§ããªã„â€¦ã€‚å›°ã‚Šã¾ã—ãŸã€‚æœ‰æ„æ°´æº–ã‚’10%ã¨ã„ã†ã“ã¨ã«ã—ã¦ã€ã¨ã‚Šã‚ãˆãšéšå·®ã§&lt;code&gt;OLS&lt;/code&gt;ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;dataset.q &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(GDP_q[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(t2&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;t),],F_q[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(t2&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;t),])
&lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(dataset.q) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GDP&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;growth.rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor1&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor2&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;factor3&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;f1.growth.rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;f2.growth.rate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;f3.growth.rate&amp;#34;&lt;/span&gt;)
test1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lm&lt;/span&gt;(growth.rate&lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;f1.growth.rate &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; f2.growth.rate &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; f3.growth.rate,data&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dataset.q)
&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(test1)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 
## Call:
## lm(formula = growth.rate ~ f1.growth.rate + f2.growth.rate + 
##     f3.growth.rate, data = dataset.q)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -1.1822 -0.2944 -0.1403  0.3495  1.2200 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(&amp;gt;|t|)
## (Intercept)    -0.1900410  0.3956316  -0.480    0.648
## f1.growth.rate -0.0138647  0.0122615  -1.131    0.301
## f2.growth.rate -0.0044379  0.0036015  -1.232    0.264
## f3.growth.rate -0.0007179  0.0006337  -1.133    0.300
## 
## Residual standard error: 0.7832 on 6 degrees of freedom
##   ( 1 å€‹ã®è¦³æ¸¬å€¤ãŒæ¬ æã®ãŸã‚å‰Šé™¤ã•ã‚Œã¾ã—ãŸ )
## Multiple R-squared:  0.3447,	Adjusted R-squared:  0.01705 
## F-statistic: 1.052 on 3 and 6 DF,  p-value: 0.4357
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¨è¨ˆçµæœãŒã‚ã‚‹ããªã‚Šã¾ã—ãŸâ€¦ã€‚äºˆæ¸¬å€¤ã‚’è¨ˆç®—ã—ã€å®Ÿç¸¾å€¤ã¨ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;out_of_sample1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(GDP_q&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(t2&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;t&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(GDP_q),],F_q&lt;span style=&#34;color:#a6e22e&#34;&gt;[&lt;/span&gt;(t2&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;t&lt;span style=&#34;color:#ae81ff&#34;&gt;+1&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(GDP_q),]) &lt;span style=&#34;color:#75715e&#34;&gt;# out of sampleã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆ&lt;/span&gt;
test1.pred &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;predict&lt;/span&gt;(test1, out_of_sample1, interval&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;prediction&amp;#34;&lt;/span&gt;)
pred1.GDP.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(test1.pred[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],out_of_sample1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;growth.rate),order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; out_of_sample1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication)
&lt;span style=&#34;color:#a6e22e&#34;&gt;plot.zoo&lt;/span&gt;(pred1.GDP.xts,col &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;red&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;),plot.type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;single&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# äºˆæ¸¬å€¤ã¨å®Ÿç¸¾å€¤ã‚’æ™‚ç³»åˆ—ãƒ—ãƒ­ãƒƒãƒˆ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post6/index_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã‚“ï½ã€ã“ã‚Œã¯ã‚„ã‚Šç›´ã—ã§ã™ã­ã€‚ä»Šæ—¥ã¯ã“ã“ã¾ã§ã§å‹˜å¼ã—ã¦ãã ã•ã„â€¦ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æ—¥æ¬¡GDPæ¨è¨ˆã«ä½¿ç”¨ã™ã‚‹çµŒæ¸ˆçµ±è¨ˆã‚’çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰é›†ã‚ã¦ã¿ãŸ</title>
      <link>/post/post7/</link>
      <pubDate>Sat, 14 Jul 2018 00:00:00 +0000</pubDate>
      <guid>/post/post7/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã¡ã‚ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘ã€ç«¶é¦¬ã°ã£ã‹ã‚Šã‚„ã£ã¦ã¾ã—ãŸãŒã€ãã‚ãã‚æœ¬æ¥­ã®ãƒã‚¯ãƒ­ã®æ–¹ã‚‚ã‚„ã‚‰ãªã„ã¨ãªã¨ã„ã†ã“ã¨ã§ä»Šå›ã¯æ—¥æ¬¡GDPæ¨è¨ˆã«ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ç·å‹™çœãŒå…¬é–‹ã—ã¦ã„ã‚‹çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰å–ã£ã¦ãã¾ã—ãŸã€‚
ãã‚‚ãã‚‚ã€å‰ã®è¨˜äº‹ã§ã¯å››åŠæœŸGDPé€Ÿå ±ã®ç²¾åº¦ãŒä½ã„ã“ã¨ã‚’ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«é«˜é »åº¦ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ã‚ˆã‚Šç²¾åº¦ã®é«˜ã„äºˆæ¸¬å€¤ã‚’ã¯ã˜ãå‡ºã™ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚Œãªã„ã‹ã¨ã„ã†ãƒ†ãƒ¼ãƒã§ç ”ç©¶ã‚’é€²ã‚ã¦ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€å…ˆè¡Œç ”ç©¶ã‚’é€²ã‚ã¦ã„ãã†ã¡ã«ã€ã©ã†ã‚„ã‚‰å¤§è¦æ¨¡ãªçµŒæ¸ˆæŒ‡æ¨™ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§æ—¥æ¬¡ã§å››åŠæœŸGDPã®äºˆæ¸¬å€¤ã‚’è¨ˆç®—ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚ã—ã‹ã‚‚ã€ç²¾åº¦ã‚‚è‰¯ã„(ç±³å›½ã§ã™ãŒ)ã¨ã„ã†ã“ã¨ã§ã€ãªã‚“ã¨ã‹ã“ã®æ–¹å‘ã§ç ”ç©¶ã‚’é€²ã‚ã¦ã„ã‘ãªã„ã‹ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-å…ˆè¡Œç ”ç©¶ã¨å…·ä½“çš„ã«ã‚„ã‚ŠãŸã„ã“ã¨&#34;&gt;1. å…ˆè¡Œç ”ç©¶ã¨å…·ä½“çš„ã«ã‚„ã‚ŠãŸã„ã“ã¨&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;http://dept.ku.edu/~empirics/Courses/Econ844/papers/Nowcasting%20GDP.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å…ˆè¡Œç ”ç©¶&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Giannoneã‚‰ãŒ2008å¹´ã«ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ã—ãŸè«–æ–‡ã§ã™(JME)ã€‚å½¼ã‚‰ã¯ã‚¢ãƒ¡ãƒªã‚«ã®çµŒæ¸ˆæŒ‡æ¨™ã‚’ç”¨ã„ã¦å››åŠæœŸGDPã‚’æ—¥æ¬¡ã§æ¨è¨ˆã—ã€äºˆæ¸¬æŒ‡æ¨™ã¨ã—ã¦ã®æœ‰ç”¨æ€§ã‚’ç¤ºã—ã¾ã—ãŸã€‚æŒ‡æ¨™é–“ã®é€£å‹•æ€§(colinearity)ã‚’åˆ©ç”¨ã—ã¦ã€å¤šæ•°ã‚ã‚‹çµŒæ¸ˆæŒ‡æ¨™ã‚’ã„ãã¤ã‹ã®ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã«åœ§ç¸®ã—ã€ãã®ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’å››åŠæœŸGDPã«ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ã•ã›ã‚‹ã“ã¨ã«ã‚ˆã£ã¦é«˜ã„äºˆæ¸¬æ€§ã‚’å®Ÿç¾ã—ã¾ã—ãŸã€‚ãªãŠã€ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã®è¨ˆç®—ã«ã¯ã‚«ãƒ«ãƒãƒ³ã‚¹ãƒ ãƒ¼ã‚¸ãƒ³ã‚°ã‚’ç”¨ã„ã¦ã„ã¾ã™(è©³ã—ã„æ¨è¨ˆæ–¹æ³•ã¯è«–æ–‡&amp;amp;Technical Appendixã‚’å‚ç…§)ã€‚ç†è«–çš„ãªå®šå¼åŒ–ã¯ç„¡ã„ã®ã§ã™ãŒã€ãªã‹ãªã‹å½“ãŸã‚Šã¾ã™ã€‚ãã‚‚ãã‚‚ç§ãŒã“ã®ç ”ç©¶ã«èˆˆå‘³ã‚’æŒã£ãŸã®ã¯ã€ä»¥ä¸‹ã®æœ¬ã‚’ç«‹ã¡èª­ã¿ã—ãŸéš›ã«å‚è€ƒæ–‡çŒ®ã¨ã—ã¦å‡ºã¦ããŸã‹ã‚‰ã§ã€ã„ã‚ˆã„ã‚ˆé‹ç”¨æ©Ÿé–¢ãªã©ã§ã‚‚ä½¿ç”¨ã•ã‚Œå§‹ã‚ã‚‹ã®ã‹ã¨æ€ã„ã€ã‚„ã£ã¦ãŠã“ã†ã¨æ€ã£ãŸæ¬¡ç¬¬ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/4532134811/hatena-blog-22/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®Ÿè·µ é‡‘èãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ éš ã‚ŒãŸæ§‹é€ ã‚’ã‚ã¶ã‚Šå‡ºã™6ã¤ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ&lt;/a&gt;
&lt;img src=&#34;https://images-na.ssl-images-amazon.com/images/I/51KIE5GeV+L._SX350_BO1,204,203,200_.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã¨ã‚Šã‚ãˆãšã¯Giannoneã®æ—¥æœ¬ç‰ˆã‚’ã‚„ã‚ã†ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚å®Ÿã¯ã“ã®å¾Œã«ã€ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ã¨DSGEã‚’çµ„ã¿åˆã‚ã›ãŸãƒ¢ãƒ‡ãƒ«ãŒã‚ã‚Šã¾ã—ã¦ãã“ã¾ã§ç™ºå±•ã•ã›ãŸã„ãªãƒ¼ãªã‚“ã¦æ€ã£ã¦ãŠã‚Šã¾ã™ãŒã€‚ã¨ã«ã‹ãã€ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®çµŒæ¸ˆçµ±è¨ˆãŒå¿…è¦ã§ã™ã®ã§ã€ä»Šå›ã¯ãã‚Œã‚’é›†ã‚ã¦ããŸã¨ã„ã†ã®ãŒã“ã®è¨˜äº‹ã®è¶£æ—¨ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã®åé›†&#34;&gt;2. çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã®åé›†&lt;/h2&gt;
&lt;p&gt;æ”¿åºœã‚„æ—¥éŠ€ãŒå…¬è¡¨ã—ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ä¸€éƒ¨ã¯çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰è½ã¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯ç·å‹™çœçµ±è¨ˆå±€ãŒæä¾›ã—ã¦ã„ã‚‹ã‚‚ã®ã§ã€ã“ã‚Œã¾ã§åˆ©ç”¨ã—ã«ãã‹ã£ãŸçµŒæ¸ˆçµ±è¨ˆã‚’ã‚ˆã‚Šèº«è¿‘ã«ä½¿ç”¨ã—ã¦ã‚‚ã‚‰ãŠã†ã¨ã„ã†ã®ãŒä¸€å¿œã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨ãªã£ã¦ã„ã¾ã™ã€‚ä¼¼ãŸã‚‚ã®ã«ç·å‹™çœçµ±è¨ˆå±€ãŒæä¾›ã—ã¦ã„ã‚‹estatãŒã‚ã‚Šã¾ã™ãŒã€æ—¥éŠ€ã®å…¬è¡¨ãƒ‡ãƒ¼ã‚¿ãŒãªã‹ã£ãŸã‚Šã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ç™»éŒ²ãŒå¿…è¦ã ã£ãŸã‚Šã¨éå¸¸ã«ä½¿ã„å‹æ‰‹ãŒæ‚ªã„ã§ã™(å€‹äººçš„æ„Ÿæƒ³)ã€‚ãŸã ã€estatã«ã¯estatapiã¨ã„ã†Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚’æ•´å½¢ã™ã‚‹ã®ã¯æ¯”è¼ƒçš„å®¹æ˜“ã§ã‚ã‚‹ã¨è¨€ãˆã¾ã™ã€‚ä»Šå›ã€çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é¸æŠã—ãŸç†ç”±ã¯ãã†ã¯è¨€ã£ã¦ã‚‚æ—¥éŠ€ã®ãƒ‡ãƒ¼ã‚¿ãŒãªã„ã®ã¯ãƒ€ãƒ¡ã ã‚ã†ã¨ã„ã†ç†ç”±ã§ã€ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢ã«é–¢ã—ã¦ã¯é–¢æ•°ã‚’çµ„ã¿ã¾ã—ãŸã€‚
ãã‚‚ãã‚‚çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯çµŒæ¸ˆçµ±è¨ˆã‚’ã‚°ãƒ©ãƒ•ãªã©ã§è¦‹ã¦æ¥½ã—ã‚€ï¼Ÿã‚‚ã®ã§ã™ãŒã€ç§ã®ã‚ˆã†ãªç ”ç©¶ã‚’ã—ãŸã„è€…ã‚’å¯¾è±¡ã«APIã‚’æä¾›ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¯å¤§ããåˆ†ã‘ã¦6ã¤ã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;20180714160029.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã‚„ã‚Šæ–¹ã¯ç°¡å˜ã§ã€ãƒ™ãƒ¼ã‚¹ã®urlã¨æ¬²ã—ã„çµ±è¨ˆã®IDã‚’GETé–¢æ•°ã§æ¸¡ã™ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å…¬å¼ã«ã‚‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¨ã—ã¦ã¯ã€ã¾ãšâ‘ ã€Œçµ±è¨ˆãƒ¡ã‚¿æƒ…å ±ï¼ˆç³»åˆ—ï¼‰å–å¾—ã€ã§å–å¾—ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã®[ç³»åˆ—ã‚³ãƒ¼ãƒ‰]ã‚’æ¤œç´¢ã—ã€ ãã®å¾Œâ‘¥ã€Œçµ±è¨ˆãƒ‡ãƒ¼ã‚¿å–å¾—ã€ã§[ç³»åˆ—ã‚³ãƒ¼ãƒ‰]ã‚’æ¤œç´¢æ¡ä»¶ã«æŒ‡å®šã—ã€ãã®ç³»åˆ—ã®æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚
ï¼ˆâ‘¡â‘¢â‘£â‘¤ã¯è£œåŠ©çš„ãªæƒ…å ±ã¨ã—ã¦ç‹¬ç«‹ã—ã¦å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã®ã¿å¿…è¦ãªå ´åˆã¯å½“è©²æ©Ÿèƒ½ã¯ä¸è¦ã§ã™ã€‚ï¼‰
å…·ä½“çš„ãªä½¿ã„æ–¹ã¯ã€ä»¥ä¸‹ã®ã€ŒWebAPIã®è©³ç´°ä»•æ§˜ã€ã«è¨˜è¼‰ã™ã‚‹[ãƒ™ãƒ¼ã‚¹URL]ã«æ¤œç´¢æ¡ä»¶ã¨ãªã‚‹[ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿]ã‚’&amp;quot;&amp;amp;&amp;ldquo;ã§é€£çµã—ã€HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆGETï¼‰ã‚’é€ä¿¡ã™ã‚‹ã“ã¨ã§ç›®çš„ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã™ã€‚
å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å=å€¤ã€ã®ã‚ˆã†ã«åç§°ã¨å€¤ã‚’&#39;=&amp;lsquo;ã§çµåˆã—ã€è¤‡æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ã€Œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å=å€¤&amp;amp;ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å=å€¤&amp;amp;â€¦ã€ã®ã‚ˆã†ã«ãã‚Œãã‚Œã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æŒ‡å®šã‚’&amp;rsquo;&amp;amp;&amp;lsquo;ã§çµåˆã—ã¦ãã ã•ã„ã€‚
ã¾ãŸã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å€¤ã¯å¿…ãšURLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰(æ–‡å­—ã‚³ãƒ¼ãƒ‰UTF-8)ã—ã¦ã‹ã‚‰çµåˆã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»Šå›ã‚‚ä»¥ä¸‹ã®æ–‡çŒ®ã‚’å‚è€ƒã«ãƒ‡ãƒ¼ã‚¿ã‚’å–ã£ã¦ããŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.amazon.co.jp/dp/486354216X&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Rã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å…¥é–€&lt;/a&gt;
&lt;img src=&#34;https://images-na.ssl-images-amazon.com/images/I/51ZBnu8oSvL._SX350_BO1,204,203,200_.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã¾ãšã€æœ€åˆã«ã“ã®APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€å¾—ã‚‰ã‚ŒãŸçµæœã‚’åˆ†æã—ã‚„ã™ã„ã‚ˆã†ã«æ•´å½¢ã™ã‚‹é–¢æ•°ã‚’å®šç¾©ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(httr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(estatapi)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(dplyr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(XML)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(xts)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(GGally)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(ggplot2)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(seasonal)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(dlm)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(vars)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(MASS)

&lt;span style=&#34;color:#75715e&#34;&gt;# é–¢æ•°ã‚’å®šç¾©&lt;/span&gt;
get_dashboard &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(ID){
  base_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://dashboard.e-stat.go.jp/api/1.0/JsonStat/getData?&amp;#34;&lt;/span&gt;
  res &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(
    url &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; base_url,
    query &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(
      IndicatorCode&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ID
    )
  )
  result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;content&lt;/span&gt;(res)
  x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;link&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;item[[1]]&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;value
  x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,x))
  date_x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;link&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;item[[1]]&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;dimension&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;Time&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;category&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;label
  date_x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,date_x))
  date_x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(date_x, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¹´&amp;#34;&lt;/span&gt;, replacement&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;)
  date_x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(date_x, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœˆ&amp;#34;&lt;/span&gt;, replacement&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
  date_x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gsub&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;([0-9]+)/([0-9]+)&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\1/\\2/1&amp;#34;&lt;/span&gt;, date_x))
  date_x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(date_x, format &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%m/%d/%Y&amp;#34;&lt;/span&gt;)
  date_x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(date_x)
  date_x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(date_x, origin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1970-01-01&amp;#34;&lt;/span&gt;)
  &lt;span style=&#34;color:#75715e&#34;&gt;#x &amp;lt;- cbind(x,date_x)&lt;/span&gt;
  x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data.frame&lt;/span&gt;(x)
  x[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(x[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])&lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(x[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
  &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(x) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;link&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;item[[1]]&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;label)
  x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; x &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; date_x)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(x)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã¾ãšãƒ™ãƒ¼ã‚¹ã®urlã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ä»Šå›ã¯ãƒ‡ãƒ¼ã‚¿ãŒæ¬²ã—ã„ã®ã§â‘¥çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®ãƒ™ãƒ¼ã‚¹urlã‚’ä½¿ç”¨ã—ã¾ã™ï¼ˆ
&lt;a href=&#34;https://dashboard.e-stat.go.jp/static/api&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‚è€ƒ&lt;/a&gt;ï¼‰ã€‚æ¬¡ã«ãƒ™ãƒ¼ã‚¹urlã¨çµ±è¨ˆIDï¼ˆIndicatorCodeï¼‰ã‚’&lt;code&gt;GET&lt;/code&gt;é–¢æ•°ã§æ¸¡ã—ã€çµæœã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚çµ±è¨ˆIDã«ã¤ã„ã¦ã¯ã‚¨ã‚¯ã‚»ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚å¾—ã‚‰ã‚ŒãŸçµæœã®ä¸­èº«ï¼ˆãƒªã‚¹ãƒˆå½¢å¼ï¼‰ã‚’resultã«æ ¼ç´ã—ã€ãƒªã‚¹ãƒˆã®æ·±å±¤ã«ã‚ã‚‹åŸæ•°å€¤ãƒ‡ãƒ¼ã‚¿ï¼ˆvalueï¼‰ã‚’xã«æ ¼ç´ã—ã¾ã™ã€‚åŸæ•°å€¤ãƒ‡ãƒ¼ã‚¿ã‚‚ãƒªã‚¹ãƒˆå½¢å¼ãªã®ã§ã€ãã‚Œã‚’&lt;code&gt;do.call&lt;/code&gt;ã§ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚æ¬¡ã«ã€ãƒ‡ãƒ¼ã‚¿æ—¥ä»˜ã‚’å–å¾—ã—ã¾ã™ã€‚resultã®ä¸­ã‚’æ·±ããŸã©ã‚‹ã¨Timeâ†’categoryâ†’labelã¨ã„ã†ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã€ãã“ã«æ—¥ä»˜ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’date_xã«æ ¼ç´ã—ã€åŒã˜ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¸å¤‰æ›ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã®ä»•æ§˜ä¸Šã€æ—¥ä»˜ã¯ã€Œyyyyå¹´mmæœˆã€ã«ãªã£ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã ã¨&lt;code&gt;R&lt;/code&gt;ã¯æ—¥ä»˜ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦èª­ã¿å–ã£ã¦ãã‚Œãªã„ã®ã§ã€&lt;code&gt;str_replace_all&lt;/code&gt;ç­‰ã§å¤‰æ›ã—ãŸã®ã¡ã€&lt;code&gt;Date&lt;/code&gt;å‹ã«å¤‰æ›ã—ã¦ã„ã¾ã™ã€‚åˆ—åã«ãƒ‡ãƒ¼ã‚¿åï¼ˆresultâ†’linkâ†’item[[1]]â†’labelï¼‰ã‚’ã¤ã‘ã€ãƒ‡ãƒ¼ã‚¿æ—¥ä»˜ã‚’xã«è¿½åŠ ã—ãŸã‚‰å®Œæˆã§ã™ã€‚
ãã®ã»ã‹ã€&lt;code&gt;data_connect&lt;/code&gt;ã¨ã„ã†é–¢æ•°ã‚‚å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ãƒ‡ãƒ¼ã‚¿ç³»åˆ—ã«ã‚ˆã‚Œã°ã€ãŸã¨ãˆã°æ¨è¨ˆæ–¹æ³•ã®å¤‰æ›´ãªã©ã§1980å¹´ï½2005å¹´ã®ç³»åˆ—ã¨2003å¹´ï½2018å¹´ã¾ã§ã®ç³»åˆ—ã®2ç³»åˆ—ãŒã‚ã‚‹ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚‚å­˜åœ¨ã—ã€ã“ã®2ç³»åˆ—ã‚’æ¥ç¶šã™ã‚‹ãŸã‚ã®é–¢æ•°ã§ã™ã€‚ã“ã‚Œã¯å˜ç´”ã«æ¥ç¶šã—ã¦ã„ã‚‹ã ã‘ãªã®ã§ã€èª¬æ˜ã¯çœç•¥ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;data_connect &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(x){
  a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;which&lt;/span&gt;(x[,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(x)] &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;))
  b &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; x[a,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(x)]&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;x[a,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
  c &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; x[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;a&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;b
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(c)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã§ã¯ã€å®Ÿéš›ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚ä»Šå›å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã¯æœˆæ¬¡ãƒ‡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯çµ±è¨ˆdashboardãŒæœˆæ¬¡ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿ãŒã¨ã‚Œãªã„ã‹ã‚‰ã§ã™ã€‚ãªã®ã§ã€ä¾‹ãˆã°æ—¥çµŒå¹³å‡ãªã©ã¯æœˆæœ«ã®çµ‚å€¤ã‚’å¼•ã£å¼µã£ã¦ã„ã¾ã™ã€‚ãŸã ã—ã€GDPã¯å››åŠæœŸãƒ‡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã•ãã»ã©å®šç¾©ã—ãŸget_dashboardã®ä½¿ç”¨æ–¹æ³•ã¯ç°¡å˜ã§ã€å¼•æ•°ã«çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹çµ±è¨ˆIDã‚’å…¥åŠ›ã™ã‚‹ã ã‘ã§ãƒ‡ãƒ¼ã‚¿ãŒå–ã‚Œã¾ã™ã€‚ä»Šå›ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä»¥ä¸‹ã®è¡¨ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;20180714212330.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—&lt;/span&gt;
Nikkei &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0702020501000010010&amp;#34;&lt;/span&gt;)
callrate &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0702020300000010010&amp;#34;&lt;/span&gt;)
TOPIX &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0702020590000090010&amp;#34;&lt;/span&gt;)
kikai &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0701030000000010010&amp;#34;&lt;/span&gt;)
kigyo.bukka &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0703040300000090010&amp;#34;&lt;/span&gt;)
money.stock1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0702010201000010030&amp;#34;&lt;/span&gt;)
money.stock2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0702010202000010030&amp;#34;&lt;/span&gt;)
money.stock &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(money.stock1,money.stock2,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
c &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data_connect&lt;/span&gt;(money.stock)
a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;which&lt;/span&gt;(money.stock[,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(money.stock)] &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;))
money.stock[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;a&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(money.stock)] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; c
money.stock &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; money.stock[,&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)]
cpi &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0703010401010090010&amp;#34;&lt;/span&gt;)
export.price &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0703050301000090010&amp;#34;&lt;/span&gt;)
import.price &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0703060301000090010&amp;#34;&lt;/span&gt;)
import.price&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`è¼¸å‡ºç‰©ä¾¡æŒ‡æ•°ï¼ˆç·å¹³å‡ï¼‰ï¼ˆå††ãƒ™ãƒ¼ã‚¹ï¼‰2015å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NULL&lt;/span&gt;
public.expenditure1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0802020200000010010&amp;#34;&lt;/span&gt;)
public.expenditure2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0802020201000010010&amp;#34;&lt;/span&gt;)
public.expenditure &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(public.expenditure1,public.expenditure2,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
c &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data_connect&lt;/span&gt;(public.expenditure)
a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;which&lt;/span&gt;(public.expenditure[,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(public.expenditure)] &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;))
public.expenditure[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;a&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(public.expenditure)] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; c
public.expenditure &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; public.expenditure[,&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)]
export.service &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;1601010101000010010&amp;#34;&lt;/span&gt;)
working.population &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0201010010000010020&amp;#34;&lt;/span&gt;)
yukoukyuujinn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0301020001000010010&amp;#34;&lt;/span&gt;)
hours_worked &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0302010000000010000&amp;#34;&lt;/span&gt;)
nominal.wage &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0302020000000010000&amp;#34;&lt;/span&gt;) 
iip &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0502070101000090010&amp;#34;&lt;/span&gt;)
shukka.shisu &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0502070102000090010&amp;#34;&lt;/span&gt;)
zaiko.shisu &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0502070103000090010&amp;#34;&lt;/span&gt;)
sanji.sangyo &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0603100100000090010&amp;#34;&lt;/span&gt;)
retail.sells &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0601010201010010000&amp;#34;&lt;/span&gt;)
GDP1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0705020101000010000&amp;#34;&lt;/span&gt;)
GDP2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0705020301000010000&amp;#34;&lt;/span&gt;)
GDP &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(GDP1,GDP2,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
c &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;data_connect&lt;/span&gt;(GDP)
a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;which&lt;/span&gt;(GDP[,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(GDP)] &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;))
GDP[1&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;a&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;ncol&lt;/span&gt;(GDP)] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; c
GDP &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; GDP[,&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)]
yen &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0702020401000010010&amp;#34;&lt;/span&gt;)
household.consumption &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0704010101000010001&amp;#34;&lt;/span&gt;)
JGB10y &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;get_dashboard&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;0702020300000010020&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»Šå–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯åŸæ•°å€¤ç³»åˆ—ã®ãƒ‡ãƒ¼ã‚¿ãŒå¤šã„ã®ã§ã€ãã‚Œã‚‰ã¯å­£ç¯€èª¿æ•´ã‚’ã‹ã‘ã¾ã™ã€‚ãªãœå­£ç¯€èª¿æ•´æ¸ˆã¿ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãªã„ã®ã‹ã¨ã„ã†ã¨ãã‚Œã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã¯ä½•æ•…ã‹æ¥µç«¯ã«ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ãŒçŸ­ããªã£ã¦ã—ã¾ã†ã‹ã‚‰ã§ã™ã€‚ã“ã“ã‚‰ã¸ã‚“ã¯ä½¿ã„å‹æ‰‹ãŒæ‚ªã„ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å­£ç¯€èª¿æ•´ã‚’ã‹ã‘ã‚‹&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.setenv&lt;/span&gt;(X13_PATH &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\\Program Files\\WinX13\\x13as&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;checkX13&lt;/span&gt;()
seasoning &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(data,i,start.y,start.m){
  timeseries &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ts&lt;/span&gt;(data[,i],frequency &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;,start&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(start.y,start.m))
  m &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seas&lt;/span&gt;(timeseries)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;data)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;series&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;s11)
}
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(kikai,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2005&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)
kikai&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`æ©Ÿæ¢°å—æ³¨é¡ï¼ˆèˆ¹èˆ¶ãƒ»é›»åŠ›ã‚’é™¤ãæ°‘éœ€ï¼‰` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(kigyo.bukka,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1960&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
kigyo.bukka&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`å›½å†…ä¼æ¥­ç‰©ä¾¡æŒ‡æ•°ï¼ˆç·å¹³å‡ï¼‰2015å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(cpi,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1970&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
cpi&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`æ¶ˆè²»è€…ç‰©ä¾¡æŒ‡æ•°ï¼ˆç”Ÿé®®é£Ÿå“ã‚’é™¤ãç·åˆï¼‰2015å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(export.price,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1960&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
export.price&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`è¼¸å‡ºç‰©ä¾¡æŒ‡æ•°ï¼ˆç·å¹³å‡ï¼‰ï¼ˆå††ãƒ™ãƒ¼ã‚¹ï¼‰2015å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(import.price,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1960&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
import.price&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`è¼¸å…¥ç‰©ä¾¡æŒ‡æ•°ï¼ˆç·å¹³å‡ï¼‰ï¼ˆå††ãƒ™ãƒ¼ã‚¹ï¼‰2015å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(public.expenditure,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2004&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;)
public.expenditure&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;å…¬å…±å·¥äº‹å—æ³¨é¡ &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(export.service,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1996&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
export.service&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`è²¿æ˜“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹åæ”¯` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(yukoukyuujinn,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1963&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
yukoukyuujinn&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;æœ‰åŠ¹æ±‚äººå€ç‡ &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(hours_worked,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1990&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
hours_worked&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;ç·å®ŸåŠ´åƒæ™‚é–“ &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(nominal.wage,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1990&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
nominal.wage&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;ç¾é‡‘çµ¦ä¸ç·é¡ &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(iip,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1978&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
iip&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`é‰±å·¥æ¥­ç”Ÿç”£æŒ‡æ•°ã€€2010å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(shukka.shisu,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1990&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
shukka.shisu&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`é‰±å·¥æ¥­å‡ºè·æŒ‡æ•°ã€€2010å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(zaiko.shisu,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1990&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
zaiko.shisu&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`é‰±å·¥æ¥­åœ¨åº«æŒ‡æ•°ã€€2010å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(sanji.sangyo,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1988&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
sanji.sangyo&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`ç¬¬ï¼“æ¬¡ç”£æ¥­æ´»å‹•æŒ‡æ•°ã€€2010å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(retail.sells,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1980&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
retail.sells&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`å°å£²æ¥­è²©å£²é¡ï¼ˆåç›®ï¼‰` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
k &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seasoning&lt;/span&gt;(household.consumption,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2010&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
household.consumption&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`äºŒäººä»¥ä¸Šã®ä¸–å¸¯ã€€æ¶ˆè²»æ”¯å‡ºï¼ˆé™¤ãä½å±…ç­‰ï¼‰` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;(k)
GDP.ts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ts&lt;/span&gt;(GDP[,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;],frequency &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;,start&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1980&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;))
m &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seas&lt;/span&gt;(GDP.ts)
GDP&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`å›½å†…ç·ç”Ÿç”£ï¼ˆæ”¯å‡ºå´ï¼‰ï¼ˆå®Ÿè³ªï¼‰2011å¹´åŸºæº–` &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; m&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;series&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;s11
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã“ã§ã¯è©³ã—ãå­£ç¯€èª¿æ•´ã®ã‹ã‘æ–¹ã¯èª¬æ˜ã—ã¾ã›ã‚“ã€‚x13arimaã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚ä¸Šè¿°ã®ã‚³ãƒ¼ãƒ‰ã‚’å›ã™éš›ã¯x13arimaãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;p&gt;[http://sinhrks.hatenablog.com/entry/2014/11/09/003632]&lt;/p&gt;
&lt;p&gt;ã§ã¯ã€ãƒ‡ãƒ¼ã‚¿æ—¥ä»˜ã‚’åŸºæº–ã«è½ã¨ã—ã¦ããŸãƒ‡ãƒ¼ã‚¿ã‚’çµåˆã—ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«çµåˆ&lt;/span&gt;
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(kigyo.bukka,callrate,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,kikai,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,Nikkei,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,money.stock,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,cpi,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,export.price,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,import.price,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,public.expenditure,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,export.service,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,working.population,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,yukoukyuujinn,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,hours_worked,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,nominal.wage,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,iip,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,shukka.shisu,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,zaiko.shisu,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,sanji.sangyo,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,retail.sells,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;full_join&lt;/span&gt;(dataset,yen,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(dataset) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DCGPI&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;publication&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;callrate&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Machinery_Orders&amp;#34;&lt;/span&gt;,
                       &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Nikkei225&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;money_stock&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;CPI&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;export_price&amp;#34;&lt;/span&gt;,
                       &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;import_price&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;public_works_order&amp;#34;&lt;/span&gt;,
                       &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;trade_service&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;working_population&amp;#34;&lt;/span&gt;,
                       &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;active_opening_ratio&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;hours_worked&amp;#34;&lt;/span&gt;,
                       &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;wage&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;iip_production&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;iip_shipment&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;iip_inventory&amp;#34;&lt;/span&gt;,
                       &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ITIA&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;retail_sales&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;yen&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€å¾Œã«åˆ—åã‚’ã¤ã‘ã¦ã„ã¾ã™ã€‚datasetã¯ãã‚Œãã‚Œã®ãƒ‡ãƒ¼ã‚¿ã®å…¬è¡¨é–‹å§‹æ™‚æœŸãŒç•°ãªã‚‹ãŸã‚ã«å¤§é‡ã®&lt;code&gt;NA&lt;/code&gt;ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã€&lt;code&gt;NA&lt;/code&gt;ã‚’å‰Šé™¤ã™ã‚‹ãŸã‚ã«æœ€ã‚‚ãƒ‡ãƒ¼ã‚¿ã®é–‹å§‹æ™‚æœŸãŒé…ã„æ©Ÿæ¢°å—æ³¨çµ±è¨ˆã«åˆã‚ã›ã¦ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’å†æ§‹ç¯‰ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;a &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;which&lt;/span&gt;(dataset&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;Machinery_Orders &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;))
dataset1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dataset[a&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;nrow&lt;/span&gt;(dataset),]
dataset1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;na.omit&lt;/span&gt;(dataset1)
&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(dataset1) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dataset1&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;publication
dataset1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dataset1[,&lt;span style=&#34;color:#ae81ff&#34;&gt;-2&lt;/span&gt;]
dataset1.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(dataset1,order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(dataset1)))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã‚Œã§ã¨ã‚Šã‚ãˆãšãƒ‡ãƒ¼ã‚¿ã®åé›†ã¯çµ‚ã‚ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-å¾—ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ä¸»æˆåˆ†åˆ†æã«ã‹ã‘ã¦ã¿ã‚‹&#34;&gt;3. å¾—ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ä¸»æˆåˆ†åˆ†æã«ã‹ã‘ã¦ã¿ã‚‹&lt;/h2&gt;
&lt;p&gt;æœ¬æ ¼çš„ãªåˆ†æã¯ã¾ãŸä»Šå¾Œã«ã—ãŸã„ã®ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã‚‹ã ã‘ã§ã¯é¢ç™½ããªã„ã®ã§ã€Gianonneã‚‰ã®ã‚ˆã†ã«ä¸»æˆåˆ†åˆ†æã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚ä¸»æˆåˆ†åˆ†æã‚’ã“ã‚Œã¾ã§ã«å­¦ã‚“ã ã“ã¨ã®ãªã„æ–¹ã¯ä»¥ä¸‹ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚å€‹äººçš„ã«ã¯ã‚ã‹ã‚Šã‚„ã™ã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://datachemeng.com/principalcomponentanalysis/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸»æˆåˆ†åˆ†æ(Principal Component Analysis, PCA)ï½ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®è¦‹ãˆã‚‹åŒ–ãƒ»å¯è¦–åŒ–ã¨ã„ã£ãŸã‚‰ã¾ãšã¯ã“ã‚Œï¼ï½&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã§ã¯ä¸»æˆåˆ†åˆ†æã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚&lt;code&gt;R&lt;/code&gt;ã§ã¯&lt;code&gt;prcomp&lt;/code&gt;é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§éå¸¸ã«ç°¡å˜ã«ä¸»æˆåˆ†åˆ†æã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ä¸»æˆåˆ†åˆ†æã‚’å®Ÿè¡Œ&lt;/span&gt;
factor.pca &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;prcomp&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dataset1, cor &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# cor = TRUEã§ãƒ‡ãƒ¼ã‚¿ã®åŸºæº–åŒ–ã‚’è‡ªå‹•ã§è¡Œã£ã¦ãã‚Œã‚‹ã€‚&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(factor.pca)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Importance of components:
##                              PC1       PC2       PC3       PC4       PC5  PC6
## Standard deviation     1.855e+06 4.268e+05 1.777e+05 1.204e+05 3.967e+04 3733
## Proportion of Variance 9.374e-01 4.963e-02 8.610e-03 3.950e-03 4.300e-04    0
## Cumulative Proportion  9.374e-01 9.870e-01 9.956e-01 9.996e-01 1.000e+00    1
##                         PC7  PC8   PC9  PC10 PC11  PC12  PC13   PC14   PC15
## Standard deviation     1347 1063 134.4 4.338 3.66 2.088 1.757 0.8261 0.7207
## Proportion of Variance    0    0   0.0 0.000 0.00 0.000 0.000 0.0000 0.0000
## Cumulative Proportion     1    1   1.0 1.000 1.00 1.000 1.000 1.0000 1.0000
##                          PC16   PC17   PC18   PC19    PC20    PC21
## Standard deviation     0.5309 0.3752 0.2632 0.1085 0.01238 0.01038
## Proportion of Variance 0.0000 0.0000 0.0000 0.0000 0.00000 0.00000
## Cumulative Proportion  1.0000 1.0000 1.0000 1.0000 1.00000 1.00000
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;screeplot&lt;/span&gt;(factor.pca)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post7/index_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;pc.xts &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;xts&lt;/span&gt;(factor.pca&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;x[,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;], order.by &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rownames&lt;/span&gt;(dataset1)))
&lt;span style=&#34;color:#a6e22e&#34;&gt;plot.zoo&lt;/span&gt;(pc.xts,col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;red&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;green&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;purple&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;yellow&amp;#34;&lt;/span&gt;),plot.type &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;single&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# ä¸»æˆåˆ†ã‚’æ™‚ç³»åˆ—ãƒ—ãƒ­ãƒƒãƒˆ&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;./post/post7/index_files/figure-html/unnamed-chunk-7-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬3ä¸»æˆåˆ†ã¾ã§ã§ãƒ‡ãƒ¼ã‚¿ã®ç´„80ï¼…ãŒèª¬æ˜ã§ãã‚‹çµæœã‚’å¾—ãŸã®ã§ã€ç¬¬3ä¸»æˆåˆ†ã¾ã§ã®ãƒ—ãƒ­ãƒƒãƒˆã‚’ãŠè¦‹ã›ã—ã¾ã™ã€‚ç¬¬1ä¸»æˆåˆ†ï¼ˆèµ¤ï¼‰ã¯ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’è¡¨ã—ã¦ãŠã‚Šã€ã“ã‚Œã‹ã‚‰æ™¯æ°—ã®è¶¨å‹¢ã‚’èª­ã¿å–ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚ç¬¬2ä¸»æˆåˆ†ï¼ˆé’ï¼‰ã¯æ™¯æ°—å¾ªç’°é …ã§ã—ã‚‡ã†ã‹ã€‚å‘¨æœŸçš„ãªå‹•ããŒèª­ã¿å–ã‚Œã¾ã™ã€‚ç¬¬3ä¸»æˆåˆ†ï¼ˆç·‘ï¼‰ã¯2014å¹´ã«å¤§ããä¸Šæ˜‡ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œä»¥å¤–ã¯ç‰¹ã«ç›®ç«‹ã£ãŸå‹•ãã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è¬ã§ã™ã­ã€‚ã¨ã‚Šã‚ãˆãšä»Šæ—¥ã¯ã“ã‚Œã¾ã§ã€‚æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’ãƒˆãƒ¬ãƒ³ãƒ‰é …ã€å¾ªç’°é …ã€èª¤å·®é …ã«åˆ†è§£ã—ãŸã‚ˆã†ãªçµæœã§ã—ãŸã€‚æ¬¡å›ã¯Gianonne et. al.(2008)ã®æ—¥æœ¬ç‰ˆã®å†ç¾ã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>rvestã§yahooç«¶é¦¬ã«ã‚ã‚‹éå»ã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã—ã¦ã¿ãŸ</title>
      <link>/post/post9/</link>
      <pubDate>Sat, 19 May 2018 00:00:00 +0000</pubDate>
      <guid>/post/post9/</guid>
      <description>&lt;p&gt;ã¿ãªã•ã‚“ã€ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚&lt;/p&gt;
&lt;p&gt;ç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’çš„ä¸­ã•ã›ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚ã†ã¨ã„ã†ã“ã¨ã§ç ”ç©¶ã‚’ã¯ã˜ã‚ã¾ã—ãŸãŒã€ã¾ãšã¯ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªåˆ†ã§å–ã£ã¦ãã‚‹ã¨ã“ã‚ã‹ã‚‰ã‚„ã‚ã†ã¨ãŠã‚‚ã„ã¾ã™ã€‚ã©ã“ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–ã£ã¦ãã‚‹ã®ã‹ã¨ã„ã†ç‚¹ãŒé‡è¦ã«ãªã‚‹ã‚ã‘ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿å…ˆã¨ã—ã¦ã¯datascisotistã•ã‚“ãŒã¾ã¨ã‚ã‚‰ã‚ŒãŸéå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ã„è¨˜äº‹ãŒã‚ã‚Šã¾ã™ã€‚ã©ã“ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãŒå–ã‚Œã‚‹ã®ã‹ã¨ã„ã†ã¨å¤§ããåˆ†ã‘ã¦äºŒã¤ã§ã€â‘ JRAæä¾›ã®JRA-VANã‚„é›»å­ç«¶é¦¬æ–°èã§ãŠãªã˜ã¿ã®ï¼ŸJRJDã¨ã„ã£ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€â‘¡netkeibaã€yahooç«¶é¦¬ã¨ã¨ã„ã£ãŸç«¶é¦¬æƒ…å ±ã‚µã‚¤ãƒˆã€ã¨ãªã£ã¦ã„ã¾ã™ã€‚â‘¡ã®å ´åˆã¯è‡ªåˆ†ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»Šå›ã¯â‘¡ã‚’é¸æŠã—ã€yahooç«¶é¦¬ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã§è½ã¨ã—ã¦ããŸã„ã¨æ€ã„ã¾ã™ã€‚Rã§ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚’è¡Œã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã¯ã€rvest, httr, XMLãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯1ç•ªç°¡å˜ã«ä½¿ãˆã‚‹rvestã‚’ç”¨ã„ã¾ã™ã€‚yahooç«¶é¦¬ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å„ãƒ¬ãƒ¼ã‚¹çµæœãŒè¡¨ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ï¼ˆ5æœˆã®æ—¥æœ¬ãƒ€ãƒ¼ãƒ“ãƒ¼ã®çµæœï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://keiba.yahoo.co.jp/race/result/1805021210/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;yahooç«¶é¦¬&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å„é¦¬ã®ã–ã£ãã‚Šã¨ã—ãŸç‰¹å¾´ã‚„ãƒ¬ãƒ¼ã‚¹çµæœï¼ˆé€šéé †ä½ç­‰å«ã‚€ï¼‰ã€ã‚ªãƒƒã‚ºãŒæ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšã€ã“ã®ãã‚‰ã„æƒ…å ±ãŒã‚ã‚Œã°è‰¯ã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ï¼ˆã‚ªãƒƒã‚ºã®æƒ…å ±ã¯ã‚‚ã†å°‘ã—æ¬²ã—ã„ã®ã§ã™ãŒï¼‰ã€‚ãŸã ã€ä»Šå¾Œã¯å°‘ã—ãšã¤å¿…è¦ã«ãªã£ãŸæƒ…å ±ã‚’æ‹¡å……ã—ã¦ã„ã“ã†ã¨ã‚‚æ€ã£ã¦ã„ã¾ã™ã€‚1986å¹´ã¾ã§ã®ãƒ¬ãƒ¼ã‚¹çµæœãŒæ ¼ç´ã•ã‚Œã¦ãŠã‚Šã€å…¨ãƒ‡ãƒ¼ã‚¿æ•°ã¯50ä¸‡ä»¶ã‚’è¶…ãˆã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ãŸã ã€å˜å‹ã‚ªãƒƒã‚ºãŒåˆ©ç”¨ã§ãã‚‹ã®ã¯1994å¹´ã‹ã‚‰ã®ã‚ˆã†ãªã®ã§ä»Šå›ã¯1994å¹´ã‹ã‚‰ç›´è¿‘ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’è½ã¨ã—ã¦ãã¾ã™ã€‚ä»Šå›ã®ã‚´ãƒ¼ãƒ«ã¯ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’csvãƒ•ã‚¡ã‚¤ãƒ« or SQLã«æ ¼ç´ã™ã‚‹ã“ã¨ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-rvestã¨ã¯&#34;&gt;1. Rvestã¨ã¯&lt;/h2&gt;
&lt;p&gt;Rvestã¨ã¯ã€webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€ç¨®ã§dplyrã§ãŠãªã˜ã¿ã®Hadley Wickhamã•ã‚“ã«ã‚ˆã£ã¦ä½œæˆã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚ãŸã£ãŸæ•°è¡Œã§webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãŒã§ãã‚‹å„ªã‚Œã‚‚ã®ã¨ãªã£ã¦ãŠã‚Šã€æ“ä½œãŒéå¸¸ã«ç°¡å˜ã§ã‚ã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚ä»Šå›ã¯ä»¥ä¸‹ã®æœ¬ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/486354216X/hatena-blog-22/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Rã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å…¥é–€&lt;/a&gt;
&lt;img src=&#34;https://images-na.ssl-images-amazon.com/images/I/51ZBnu8oSvL._SX350_BO1,204,203,200_.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ãã‚‚ãã‚‚ã€htmlã‚‚å¤§å­¦1å¹´ç”Ÿã«ã‚„ã£ãŸç¨‹åº¦ã§ã»ã¨ã‚“ã©å¿˜ã‚Œã¦ã„ãŸã®ã§ã™ãŒã€ã“ã®æœ¬ã¯ãã“ã‚‚éå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã•ã‚Œã¦ãŠã‚Šã€éå¸¸ã«å®Ÿè·µçš„ãªæœ¬ã ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ã¿ã‚‹&#34;&gt;2. ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ã¿ã‚‹&lt;/h2&gt;
&lt;p&gt;å®Ÿéš›ã«yahooç«¶é¦¬ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’è½ã¨ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã”ç•™æ„é ‚ããŸã„ã®ã¯ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ä½¿ç”¨ã—ã¦ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡Œã†ã“ã¨ã¯ã”é æ…®ã„ãŸã ããŸã„ã¨ã„ã†äº‹ã§ã™ã€‚webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã¯é«˜é€Ÿã§ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã€ã‚µã‚¤ãƒˆã¸ã®è² è·ãŒå¤§ãããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡Œã†éš›ã¯ã€æ™‚é–“ã‚’ç©ºã‘ã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ãªã©ãã®ç‚¹ã«ç•™æ„ã‚’ã—ã¦è¡Œã£ã¦ãã ã•ã„ï¼ˆæœ€æ‚ªè¨´ãˆã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’å–ã‚Šã¾ã›ã‚“ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# rvestã«ã‚ˆã‚‹ç«¶é¦¬ãƒ‡ãƒ¼ã‚¿ã®webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;rvest&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#if (!require(&amp;#34;pacman&amp;#34;)) install.packages(&amp;#34;pacman&amp;#34;)&lt;/span&gt;
pacman&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;p_load&lt;/span&gt;(qdapRegex)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(rvest)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(dplyr)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯&lt;code&gt;qdapRegex&lt;/code&gt;ã€&lt;code&gt;rvest&lt;/code&gt;ã€&lt;code&gt;stringr&lt;/code&gt;ã€&lt;code&gt;dplyr&lt;/code&gt;ã§ã™ã€‚&lt;code&gt;qdapRegex&lt;/code&gt;ã¯ã‚«ãƒƒã‚³å†…ã®æ–‡å­—ã‚’å–ã‚Šå‡ºã™ãŸã‚ã«ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp/schedule/list/2016/?month=&amp;#34;&lt;/span&gt;,k))
race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å…¨urlã‚’å–å¾—&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®ã‚’urlã‚’å–å¾—&lt;/span&gt;
race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œresultã€ãŒå«ã¾ã‚Œã‚‹urlã‚’æŠ½å‡º&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã¾ãšã€read_htmlã§yahooç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§ã®htmlæ§‹é€ ã‚’å¼•ã£å¼µã£ã¦ãã¾ã™ï¼ˆãƒªãƒ³ã‚¯ã¯2016å¹´1æœˆã®å…¨ãƒ¬ãƒ¼ã‚¹ï¼‰ã€‚ã“ã“ã§ã€kã¨å‡ºã¦ã„ã‚‹ã®ã¯æœˆã‚’è¡¨ã—ã€k=1ã§ã‚ã‚Œã°2016å¹´1æœˆã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’å¼•ã£å¼µã£ã¦ãã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚keiba.yahooã‚’è¦—ã„ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãã®ãƒšãƒ¼ã‚¸å…¨ä½“ã®htmlæ§‹é€ ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;keiba.yahoo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## {html_document}
## &amp;lt;html xmlns=&amp;quot;http://www.w3.org/1999/xhtml&amp;quot;&amp;gt;
## [1] &amp;lt;head&amp;gt;\n&amp;lt;!---äº¬---&amp;gt;&amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; cha ...
## [2] &amp;lt;body&amp;gt;\n&amp;lt;noscript&amp;gt;\n  &amp;lt;iframe src=&amp;quot;//b.yjtag.jp/iframe?c=QXMP4c3&amp;quot; width=&amp;quot; ...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;race_urlã«ã¯yahoo.keibaã®ã†ã¡ã®2016å¹´kæœˆã«ã‚ã£ãŸå…¨ãƒ¬ãƒ¼ã‚¹çµæœã®ãƒªãƒ³ã‚¯ã‚’æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚html_nodeã¨ã¯htmlæ§‹é€ ã®ã†ã¡ã©ã®è¦ç´ ã‚’å¼•ã£å¼µã‚‹ã‹ã‚’æŒ‡å®šã—ã€ãã‚Œã‚’å¼•ã£å¼µã‚‹é–¢æ•°ã§ã€ç°¡å˜ã«è¨€ãˆã°ã»ã—ã„ãƒ‡ãƒ¼ã‚¿ã®ä½æ‰€ã‚’å…¥åŠ›ã™ã‚‹é–¢æ•°ã§ã‚ã‚‹ã¨èªè­˜ã—ã¦ã„ã¾ã™ï¼ˆãŠãã‚‰ãæ­£ã—ããªã„ï¼‰ã€‚ã“ã“ã§ã¯aè¦ç´ ã‚’å¼•ã£å¼µã‚‹ã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚æ³¨æ„ã™ã¹ãã“ã¨ã¯ã€html_nodeã¯æ¬²ã—ã„æƒ…å ±ã‚’htmlå½¢å¼ã§å¼•ã£å¼µã‚‹ã“ã¨ã§ã™ã€‚ãªã®ã§ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ãƒªãƒ³ã‚¯ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã«ã¯html_attrã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚html_attrã®å¼•æ•°ã¨ã—ã¦ã€ãƒªãƒ³ã‚¯å±æ€§ã‚’è¡¨ã™hrefã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã§ãƒ¬ãƒ¼ã‚¹çµæœã®urlãŒå–ã‚ŒãŸã¨æ€ã„ãã‚„ã€å®Ÿã¯ã“ã‚Œã§ã¯ä»–ã®ãƒªãƒ³ã‚¯ã‚‚ã¨ã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚ä¸€ç•ªã‚ã‹ã‚Šã‚„ã™ã„ã®ãŒåºƒå‘Šã®ãƒªãƒ³ã‚¯ã§ã™ã€‚ã“ã†ã„ã£ãŸãƒªãƒ³ã‚¯ã¯é™¤å¤–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ¬ãƒ¼ã‚¹çµæœã®urlã«ã¯&amp;quot;result&amp;quot;ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã®æ–‡å­—ãŒå…¥ã£ã¦ã„ã‚‹è¦ç´ ã ã‘ã‚’æŠ½å‡ºã—ãŸã®ãŒä¸€ç•ªæœ€å¾Œã®ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race_url)){
  race1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,race_url[i])) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®urlã‚’å–å¾—&lt;/span&gt;

  &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//table[@id = &amp;#39;raceScore&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;html_table&lt;/span&gt;()
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,race_result) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒªã‚¹ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›´&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(race_result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;frame_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_name/age&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time/margin&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;passing_rank/last_3F&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jockey/weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;popularity/odds&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;trainer&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;#ã€€åˆ—åå¤‰æ›´&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã•ã¦ã€ã„ã‚ˆã„ã‚ˆãƒ¬ãƒ¼ã‚¹çµæœã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡Œã„ã¾ã™ã€‚ã•ãã»ã©å–å¾—ã—ãŸãƒªãƒ³ã‚¯å…ˆã®htmlæ§‹é€ ã‚’ä¸€ã¤ä¸€ã¤å–å¾—ã—ã€ãã®ä¸­ã§å¿…è¦ãªãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‚’å¼•ã£å¼µã‚‹ã¨ã„ã†ä½œæ¥­ã‚’Rã«å®Ÿè¡Œã•ã›ã¾ã™ï¼ˆãªã®ã§ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ã†ï¼‰ã€‚race_1ã«ã¯ã‚ã‚‹ãƒ¬ãƒ¼ã‚¹çµæœãƒšãƒ¼ã‚¸ã®htmlæ§‹é€ ãŒæ ¼ç´ã•ã‚ŒãŠã‚Šã€race_resultã«ã¯ãã®çµæœãŒå…¥ã£ã¦ã„ã¾ã™ã€‚html_nodesã®å¼•æ•°ã«å…¥ã£ã¦ã„ã‚‹xpathã§ã™ãŒã€ã“ã‚Œã¯XLMãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰åŠ¹ç‡çš„ã«è¦ç´ ã‚’æŠœãå‡ºã™è¨€èªã§ã™ã€‚å…ˆã»ã©èª¬æ˜ã—ãŸä½æ‰€ã®ã‚ˆã†ãªã‚‚ã®ã¨æ€ã£ã¦ã„ãŸã ã‘ã‚Œã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚ãã®æ¨ªã«æ›¸ã„ã¦ã‚ã‚‹&lt;code&gt;//table[@id = &#39;raceScore&#39;]&lt;/code&gt;ãŒä½æ‰€ã§ã™ã€‚ã“ã‚Œã¯webãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ç°¡å˜ã«æ¢ã™ã“ã¨ãŒã§ãã¾ã™ã€‚Firefoxã®èª¬æ˜ã«ãªã‚Šã¾ã™ãŒã€ã»ã‹ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚åŒã˜ã‚ˆã†ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ—ã—ãŸã„ç”»é¢ã§&lt;code&gt;Ctrl+Shift+C&lt;/code&gt;ã‚’æŠ¼ã™ã¨ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼ã®æ¨ªã®ãƒãƒ¼ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ã‚«ãƒ¼ã‚½ãƒ«ã§æŒ‡ã—ãŸéƒ¨åˆ†ã®htmlæ§‹é€ ï¼ˆä½æ‰€ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã“ã®å ´åˆã ã¨ã€ãƒ¬ãƒ¼ã‚¹çµæœã¯tableå±æ€§ã®&lt;code&gt;id&lt;/code&gt;ãŒraceScoreã®å ´æ‰€ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ãªã®ã§ã€ä¸Šã®ã‚³ãƒ¼ãƒ‰ã§ã¯&lt;code&gt;xpath=&lt;/code&gt;ã®ã¨ã“ã‚ã«ãã‚Œã‚’è¨˜è¿°ã—ã¦ã„ã‚‹ã®ã§ã™ã€‚ãã—ã¦ã€ãƒ¬ãƒ¼ã‚¹çµæœã¯è¡¨ï¼ˆtableï¼‰å½¢å¼ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€&lt;code&gt;html_table&lt;/code&gt;ã§ã”ã£ãã‚Šã¨ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ—ã—ã¾ã—ãŸã€‚åŸºæœ¬çš„ã«ãƒªã‚¹ãƒˆå½¢å¼ã§è¿”ã•ã‚Œã‚‹ã®ã§ã€ãã‚Œã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›ã—ã€é©å½“ã«åˆ—åã‚’ã¤ã‘ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# é€šéé †ä½ã¨ä¸Šã‚Š3Fã®ã‚¿ã‚¤ãƒ &lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,passing_rank&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(\\d{2}-\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2})&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,last_3F&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-6&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¿ã‚¤ãƒ ã¨ç€å·®&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,time&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d\\.\\d{2}\\.\\d|\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,margin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;./.é¦¬èº«|.é¦¬èº«|.[:space:]./.é¦¬èº«|[ã‚¢-ãƒ³-]+&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-5&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬åã€é¦¬é½¢ã€é¦¬ä½“é‡&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã‚¡-ãƒ´ãƒ¼ãƒ»]+&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_age&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‰¡\\d+|ç‰\\d+|ã›ã‚“\\d+&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{3}&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight_change&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\([\\+|\\-]\\d+\\)|\\([\\d+]\\)&amp;#34;&lt;/span&gt;)))
  race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¸ãƒ§ãƒƒã‚­ãƒ¼&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,jockey&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã-ã‚“ä¸€-é¾ ]+\\s[ã-ã‚“ä¸€-é¾ ]+|[:upper:].[ã‚¡-ãƒ¶ãƒ¼]+&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚ªãƒƒã‚ºã¨äººæ°—&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,odds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\(.+\\)&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,popularity&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+[^(\\d+.\\d)]&amp;#34;&lt;/span&gt;)))
  race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã“ã¾ã§ã§ãƒ‡ãƒ¼ã‚¿ã¯å–å¾—ã§ããŸã‚ã‘ãªã®ã§ã™ãŒã€ãã®ãƒ‡ãƒ¼ã‚¿ã¯ç¶ºéº—ãªã‚‚ã®ã«ã¯ãªã£ã¦ã„ã¾ã›ã‚“ã€‚ ä¸Šã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãã®æ•´å½¢ä½œæ¥­ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ç¾åœ¨ã€å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(race_result)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div data-pagedtable=&#34;false&#34;&gt;
  &lt;script data-pagedtable-source type=&#34;application/json&#34;&gt;
{&#34;columns&#34;:[{&#34;label&#34;:[&#34;&#34;],&#34;name&#34;:[&#34;_rn_&#34;],&#34;type&#34;:[&#34;&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;order&#34;],&#34;name&#34;:[1],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;frame_number&#34;],&#34;name&#34;:[2],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;horse_number&#34;],&#34;name&#34;:[3],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;trainer&#34;],&#34;name&#34;:[4],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;passing_rank&#34;],&#34;name&#34;:[5],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;last_3F&#34;],&#34;name&#34;:[6],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;time&#34;],&#34;name&#34;:[7],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;margin&#34;],&#34;name&#34;:[8],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_name&#34;],&#34;name&#34;:[9],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_age&#34;],&#34;name&#34;:[10],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_weight&#34;],&#34;name&#34;:[11],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_weight_change&#34;],&#34;name&#34;:[12],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;jockey&#34;],&#34;name&#34;:[13],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;odds&#34;],&#34;name&#34;:[14],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;popularity&#34;],&#34;name&#34;:[15],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;race_date&#34;],&#34;name&#34;:[16],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;race_name&#34;],&#34;name&#34;:[17],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]}],&#34;data&#34;:[{&#34;1&#34;:&#34;1&#34;,&#34;2&#34;:&#34;2&#34;,&#34;3&#34;:&#34;2&#34;,&#34;4&#34;:&#34;æ²³é‡ é€šæ–‡&#34;,&#34;5&#34;:&#34;06-07-06-06&#34;,&#34;6&#34;:&#34;35.1&#34;,&#34;7&#34;:&#34;3.19.7&#34;,&#34;8&#34;:&#34;character(0)&#34;,&#34;9&#34;:&#34;ã‚»ãƒ³ã‚´ã‚¯ã‚·ãƒ«ãƒãƒ¼&#34;,&#34;10&#34;:&#34;ç‰¡6&#34;,&#34;11&#34;:&#34;478&#34;,&#34;12&#34;:&#34;+2&#34;,&#34;13&#34;:&#34;ç”°ä¸­ å‹æ˜¥&#34;,&#34;14&#34;:&#34;2.3&#34;,&#34;15&#34;:&#34;1&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;1&#34;},{&#34;1&#34;:&#34;2&#34;,&#34;2&#34;:&#34;6&#34;,&#34;3&#34;:&#34;9&#34;,&#34;4&#34;:&#34;æ­¦ é‚¦å½¦&#34;,&#34;5&#34;:&#34;06-05-04-04&#34;,&#34;6&#34;:&#34;35.7&#34;,&#34;7&#34;:&#34;3.19.9&#34;,&#34;8&#34;:&#34;1 1/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ã‚¸ãƒ£ãƒ ã‚·ãƒ¼ãƒ‰&#34;,&#34;10&#34;:&#34;ç‰¡6&#34;,&#34;11&#34;:&#34;480&#34;,&#34;12&#34;:&#34;0&#34;,&#34;13&#34;:&#34;æŸ´ç”° æ”¿äºº&#34;,&#34;14&#34;:&#34;14&#34;,&#34;15&#34;:&#34;7&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;2&#34;},{&#34;1&#34;:&#34;3&#34;,&#34;2&#34;:&#34;7&#34;,&#34;3&#34;:&#34;10&#34;,&#34;4&#34;:&#34;ç™½äº• å¯¿æ˜­&#34;,&#34;5&#34;:&#34;08-07-06-06&#34;,&#34;6&#34;:&#34;35.7&#34;,&#34;7&#34;:&#34;3.20.1&#34;,&#34;8&#34;:&#34;1 1/2é¦¬èº«&#34;,&#34;9&#34;:&#34;ãƒ›ã‚¯ã‚»ãƒ„ã‚®ãƒ³ã‚¬&#34;,&#34;10&#34;:&#34;ç‰¡6&#34;,&#34;11&#34;:&#34;500&#34;,&#34;12&#34;:&#34;+4&#34;,&#34;13&#34;:&#34;å°å±‹æ•· æ˜­&#34;,&#34;14&#34;:&#34;7.5&#34;,&#34;15&#34;:&#34;3&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;3&#34;},{&#34;1&#34;:&#34;4&#34;,&#34;2&#34;:&#34;7&#34;,&#34;3&#34;:&#34;11&#34;,&#34;4&#34;:&#34;çŸ¢é‡ é€²&#34;,&#34;5&#34;:&#34;03-03-03-02&#34;,&#34;6&#34;:&#34;36.3&#34;,&#34;7&#34;:&#34;3.20.4&#34;,&#34;8&#34;:&#34;1 3/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ã‚µãƒãƒ¼ãƒ¯ã‚¤ãƒ³&#34;,&#34;10&#34;:&#34;ç‰5&#34;,&#34;11&#34;:&#34;422&#34;,&#34;12&#34;:&#34;-4&#34;,&#34;13&#34;:&#34;æœ¨å¹¡ åˆåºƒ&#34;,&#34;14&#34;:&#34;32.6&#34;,&#34;15&#34;:&#34;9&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;4&#34;},{&#34;1&#34;:&#34;5&#34;,&#34;2&#34;:&#34;1&#34;,&#34;3&#34;:&#34;1&#34;,&#34;4&#34;:&#34;ç§‹å±± å²éƒ&#34;,&#34;5&#34;:&#34;12-12-12-12&#34;,&#34;6&#34;:&#34;35.6&#34;,&#34;7&#34;:&#34;3.20.5&#34;,&#34;8&#34;:&#34;1/2é¦¬èº«&#34;,&#34;9&#34;:&#34;ãƒ€ã‚¤ãƒ¯ã‚¸ã‚§ãƒ¼ãƒ ã‚¹&#34;,&#34;10&#34;:&#34;ç‰¡6&#34;,&#34;11&#34;:&#34;472&#34;,&#34;12&#34;:&#34;+6&#34;,&#34;13&#34;:&#34;å¤§å¡š æ „ä¸‰éƒ&#34;,&#34;14&#34;:&#34;5.9&#34;,&#34;15&#34;:&#34;2&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;5&#34;},{&#34;1&#34;:&#34;6&#34;,&#34;2&#34;:&#34;5&#34;,&#34;3&#34;:&#34;7&#34;,&#34;4&#34;:&#34;é ˆè² å½¦ä¸‰&#34;,&#34;5&#34;:&#34;11-10-06-06&#34;,&#34;6&#34;:&#34;36.1&#34;,&#34;7&#34;:&#34;3.20.5&#34;,&#34;8&#34;:&#34;ãƒãƒŠ&#34;,&#34;9&#34;:&#34;ã‚·ã‚²ãƒãƒ©ãƒ³ãƒœãƒ¼&#34;,&#34;10&#34;:&#34;ç‰¡7&#34;,&#34;11&#34;:&#34;438&#34;,&#34;12&#34;:&#34;-6&#34;,&#34;13&#34;:&#34;é ˆè² å°šä»‹&#34;,&#34;14&#34;:&#34;8.7&#34;,&#34;15&#34;:&#34;4&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;6&#34;}],&#34;options&#34;:{&#34;columns&#34;:{&#34;min&#34;:{},&#34;max&#34;:[10]},&#34;rows&#34;:{&#34;min&#34;:[10],&#34;max&#34;:[10]},&#34;pages&#34;:{}}}
  &lt;/script&gt;
&lt;/div&gt;
&lt;p&gt;ã”è¦§ã®ã‚ˆã†ã«ã€&lt;code&gt;\n&lt;/code&gt;ãŒå…¥ã£ã¦ã„ãŸã‚Šã€é€šéé †ä½ã¨ä¸Šã‚Š3ãƒãƒ­ãƒ³ã®ã‚¿ã‚¤ãƒ ãŒä¸€ã¤ã®ã‚»ãƒ«ã«å…¥ã£ã¦ã„ãŸã‚Šã¨ã“ã®ã¾ã¾ã§ã¯åˆ†æãŒã§ãã¾ã›ã‚“ã€‚ä¸è¦ãªã‚‚ã®ã‚’å–ã‚Šé™¤ã„ãŸã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚’äºŒã¤ã«åˆ†å‰²ã™ã‚‹ä½œæ¥­ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ä»Šå›ã®è¨˜äº‹ã§ã¯ã“ã®éƒ¨åˆ†ã«ã¤ã„ã¦è©³ã—ãã¯èª¬æ˜ã—ã¾ã›ã‚“ã€‚ã“ã®éƒ¨åˆ†ã¯æ­£è¦è¡¨ç¾ã‚’é§†ä½¿ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ç§è‡ªèº«å…¨ãè©³ã—ããªã„ã‹ã‚‰ã§ã™ã€‚ä»Šå›ã‚‚æ‰‹æ¢ã‚Šã§ã‚„ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹æƒ…å ±&lt;/span&gt;
  race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/p[@id = &amp;#39;raceTitDay&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
  race_name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/h1[@class = &amp;#39;fntB&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()

  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+å¹´\\d+æœˆ\\d+æ—¥&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_name,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))

&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ•ã‚¡ã‚¤ãƒ«æ ¼ç´&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
    dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result
  } else {
    dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(dataset,race_result)
  }&lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡ã®çµ‚ã‚ã‚Š&lt;/span&gt;
} &lt;span style=&#34;color:#75715e&#34;&gt;# iãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;write.csv&lt;/span&gt;(race_result,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race_result.csv&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€å¾Œã«ã€ãƒ¬ãƒ¼ã‚¹æ—¥æ™‚ã¨ãƒ¬ãƒ¼ã‚¹åã‚’æŠœãå‡ºã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ™‚çš„ã«æ ¼ç´ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¨csvãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã™ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦çµ‚äº†ã§ã™ã€‚å®Œæˆãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ…‹ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(dataset)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div data-pagedtable=&#34;false&#34;&gt;
  &lt;script data-pagedtable-source type=&#34;application/json&#34;&gt;
{&#34;columns&#34;:[{&#34;label&#34;:[&#34;&#34;],&#34;name&#34;:[&#34;_rn_&#34;],&#34;type&#34;:[&#34;&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;order&#34;],&#34;name&#34;:[1],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;frame_number&#34;],&#34;name&#34;:[2],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;horse_number&#34;],&#34;name&#34;:[3],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;trainer&#34;],&#34;name&#34;:[4],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;passing_rank&#34;],&#34;name&#34;:[5],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;last_3F&#34;],&#34;name&#34;:[6],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;time&#34;],&#34;name&#34;:[7],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;margin&#34;],&#34;name&#34;:[8],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_name&#34;],&#34;name&#34;:[9],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_age&#34;],&#34;name&#34;:[10],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_weight&#34;],&#34;name&#34;:[11],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_weight_change&#34;],&#34;name&#34;:[12],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;jockey&#34;],&#34;name&#34;:[13],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;odds&#34;],&#34;name&#34;:[14],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;popularity&#34;],&#34;name&#34;:[15],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;race_date&#34;],&#34;name&#34;:[16],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;race_name&#34;],&#34;name&#34;:[17],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]}],&#34;data&#34;:[{&#34;1&#34;:&#34;1&#34;,&#34;2&#34;:&#34;8&#34;,&#34;3&#34;:&#34;11&#34;,&#34;4&#34;:&#34;æ£®å®‰ å¼˜æ˜­&#34;,&#34;5&#34;:&#34;01-01-01-01&#34;,&#34;6&#34;:&#34;35.7&#34;,&#34;7&#34;:&#34;2.00.7&#34;,&#34;8&#34;:&#34;character(0)&#34;,&#34;9&#34;:&#34;ãƒ’ãƒ€ã‚«ãƒãƒ¤ãƒˆ&#34;,&#34;10&#34;:&#34;ç‰¡8&#34;,&#34;11&#34;:&#34;488&#34;,&#34;12&#34;:&#34;-2&#34;,&#34;13&#34;:&#34;å¤§å¡š æ „ä¸‰éƒ&#34;,&#34;14&#34;:&#34;29&#34;,&#34;15&#34;:&#34;10&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;1&#34;},{&#34;1&#34;:&#34;2&#34;,&#34;2&#34;:&#34;5&#34;,&#34;3&#34;:&#34;6&#34;,&#34;4&#34;:&#34;çŸ¢é‡ é€²&#34;,&#34;5&#34;:&#34;06-06-04-03&#34;,&#34;6&#34;:&#34;35.3&#34;,&#34;7&#34;:&#34;2.00.8&#34;,&#34;8&#34;:&#34;3/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ã‚¹ãƒ†ãƒ¼ã‚¸ãƒãƒ£ãƒ³ãƒ—&#34;,&#34;10&#34;:&#34;ç‰¡5&#34;,&#34;11&#34;:&#34;462&#34;,&#34;12&#34;:&#34;+14&#34;,&#34;13&#34;:&#34;å²¡éƒ¨ å¹¸é›„&#34;,&#34;14&#34;:&#34;3.2&#34;,&#34;15&#34;:&#34;1&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;2&#34;},{&#34;1&#34;:&#34;3&#34;,&#34;2&#34;:&#34;4&#34;,&#34;3&#34;:&#34;4&#34;,&#34;4&#34;:&#34;æ–°é–¢ åŠ›&#34;,&#34;5&#34;:&#34;03-03-02-02&#34;,&#34;6&#34;:&#34;35.8&#34;,&#34;7&#34;:&#34;2.01.1&#34;,&#34;8&#34;:&#34;1 3/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ãƒã‚­ãƒãƒˆã‚¦ã‚·ãƒ§ã‚¦&#34;,&#34;10&#34;:&#34;ç‰¡5&#34;,&#34;11&#34;:&#34;502&#34;,&#34;12&#34;:&#34;+6&#34;,&#34;13&#34;:&#34;çš„å ´ å‡&#34;,&#34;14&#34;:&#34;6.9&#34;,&#34;15&#34;:&#34;4&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;3&#34;},{&#34;1&#34;:&#34;4&#34;,&#34;2&#34;:&#34;8&#34;,&#34;3&#34;:&#34;12&#34;,&#34;4&#34;:&#34;å¤§å’Œç”° ç¨”&#34;,&#34;5&#34;:&#34;02-02-03-03&#34;,&#34;6&#34;:&#34;35.7&#34;,&#34;7&#34;:&#34;2.01.1&#34;,&#34;8&#34;:&#34;ãƒãƒŠ&#34;,&#34;9&#34;:&#34;ãƒšã‚¬ã‚µã‚¹&#34;,&#34;10&#34;:&#34;ç‰¡5&#34;,&#34;11&#34;:&#34;464&#34;,&#34;12&#34;:&#34;+4&#34;,&#34;13&#34;:&#34;å®‰ç”° å¯Œç”·&#34;,&#34;14&#34;:&#34;5.7&#34;,&#34;15&#34;:&#34;2&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;4&#34;},{&#34;1&#34;:&#34;5&#34;,&#34;2&#34;:&#34;7&#34;,&#34;3&#34;:&#34;9&#34;,&#34;4&#34;:&#34;ç”°ä¸­ å’Œå¤«&#34;,&#34;5&#34;:&#34;07-07-07-05&#34;,&#34;6&#34;:&#34;35.8&#34;,&#34;7&#34;:&#34;2.01.6&#34;,&#34;8&#34;:&#34;3é¦¬èº«&#34;,&#34;9&#34;:&#34;ã‚·ãƒ£ãƒãƒ¼ãƒ‰ã‚·ãƒ³ãƒœãƒª&#34;,&#34;10&#34;:&#34;ç‰¡7&#34;,&#34;11&#34;:&#34;520&#34;,&#34;12&#34;:&#34;+4&#34;,&#34;13&#34;:&#34;ç”°ä¸­ å‰›&#34;,&#34;14&#34;:&#34;29.6&#34;,&#34;15&#34;:&#34;12&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;5&#34;},{&#34;1&#34;:&#34;6&#34;,&#34;2&#34;:&#34;3&#34;,&#34;3&#34;:&#34;3&#34;,&#34;4&#34;:&#34;ä¸­å³¶ æ•æ–‡&#34;,&#34;5&#34;:&#34;09-10-10-09&#34;,&#34;6&#34;:&#34;35.5&#34;,&#34;7&#34;:&#34;2.01.7&#34;,&#34;8&#34;:&#34;3/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ãƒ¢ãƒ³ã‚¿ãƒŸãƒ¼ãƒ«&#34;,&#34;10&#34;:&#34;ç‰¡7&#34;,&#34;11&#34;:&#34;474&#34;,&#34;12&#34;:&#34;+4&#34;,&#34;13&#34;:&#34;è“‘ç”° æ—©äºº&#34;,&#34;14&#34;:&#34;10.4&#34;,&#34;15&#34;:&#34;6&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;6&#34;}],&#34;options&#34;:{&#34;columns&#34;:{&#34;min&#34;:{},&#34;max&#34;:[10]},&#34;rows&#34;:{&#34;min&#34;:[10],&#34;max&#34;:[10]},&#34;pages&#34;:{}}}
  &lt;/script&gt;
&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šã§ã™ã€‚æ¬¡å›ã¯ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€åˆ†æã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚æ¬¡å›ã¾ã§ã«ã¯1994å¹´ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã€è¿½è¨˜ï¼ˆ2018/6/10ï¼‰ã€‘&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”¨ã„ã¦ã€ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡Œã£ãŸã¨ã“ã‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚ã©ã†ã‚„ã‚‰ãƒ¬ãƒ¼ã‚¹çµæœã®ä¸­ã«ã¯å¼·é¢¨ãªã©ã§ä¸­æ­¢ã«ãªã£ãŸã‚‚ã®ã‚‚å«ã¾ã‚Œã¦ã„ã‚‹ã‚‰ã—ãã€ãã“ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹æ§˜å­ï¼ˆrace_resultãŒcharacter(0)ã«ãªã£ã¦ã—ã¾ã†ï¼‰ã€‚ãªã®ã§ã€ã“ã®éƒ¨åˆ†ã‚’ä¿®æ­£ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä»¥ä¸‹ã§å…¬é–‹ã—ã¦ãŠãã¾ã™ã€‚ã“ã¡ã‚‰ã¯ç§ã® PCç’°å¢ƒã§ã¯æ­£å¸¸ã«ä½œå‹•ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# rvestã«ã‚ˆã‚‹ç«¶é¦¬ãƒ‡ãƒ¼ã‚¿ã®webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;rvest&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#if (!require(&amp;#34;pacman&amp;#34;)) install.packages(&amp;#34;pacman&amp;#34;)&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;install.packages&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;beepr&amp;#34;&lt;/span&gt;)
  pacman&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;p_load&lt;/span&gt;(qdapRegex)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(rvest)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringr)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(dplyr)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(beepr)

&lt;span style=&#34;color:#75715e&#34;&gt;# pathã®è¨­å®š&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;setwd&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:/Users/assiy/Dropbox/ç«¶é¦¬çµ±è¨ˆè§£æ&amp;#34;&lt;/span&gt;)

  &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(year in &lt;span style=&#34;color:#ae81ff&#34;&gt;1994&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2018&lt;/span&gt;){

  &lt;span style=&#34;color:#75715e&#34;&gt;# yahooç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§ãƒšãƒ¼ã‚¸ã®å–å¾—&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;){

    keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp/schedule/list/&amp;#34;&lt;/span&gt;, year,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/?month=&amp;#34;&lt;/span&gt;,k))
    race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å…¨urlã‚’å–å¾—&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®ã‚’urlã‚’å–å¾—&lt;/span&gt;
    race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œresultã€ãŒå«ã¾ã‚Œã‚‹urlã‚’æŠ½å‡º&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race_url)){

    &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç¾åœ¨ã€&amp;#34;&lt;/span&gt;, year, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¹´&amp;#34;&lt;/span&gt;, k, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœˆ&amp;#34;&lt;/span&gt;, i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç•ªç›®ã®ãƒ¬ãƒ¼ã‚¹ã®ä¿å­˜ä¸­ã§ã™&amp;#34;&lt;/span&gt;))

    race1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,race_url[i])) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®urlã‚’å–å¾—&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹ãŒä¸­æ­¢ã§ãªã‘ã‚Œã°å‡¦ç†ã‚’å®Ÿè¡Œ&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;identical&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@class = &amp;#39;resultAtt mgnBL fntSS&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;(),&lt;span style=&#34;color:#a6e22e&#34;&gt;character&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;){

    &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//table[@id = &amp;#39;raceScore&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_table&lt;/span&gt;()
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,race_result) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒªã‚¹ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›´&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(race_result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;frame_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_name/age&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time/margin&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;passing_rank/last_3F&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jockey/weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;popularity/odds&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;trainer&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;#ã€€åˆ—åå¤‰æ›´&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;# é€šéé †ä½ã¨ä¸Šã‚Š3Fã®ã‚¿ã‚¤ãƒ &lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,passing_rank&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(\\d{2}-\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2})&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,last_3F&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-6&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¿ã‚¤ãƒ ã¨ç€å·®&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,time&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d\\.\\d{2}\\.\\d|\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,margin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;./.é¦¬èº«|.é¦¬èº«|.[:space:]./.é¦¬èº«|[ã‚¢-ãƒ³-]+&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-5&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬åã€é¦¬é½¢ã€é¦¬ä½“é‡&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã‚¡-ãƒ´ãƒ¼ãƒ»]+&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_age&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‰¡\\d+|ç‰\\d+|ã›ã‚“\\d+&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{3}&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight_change&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\([\\+|\\-]\\d+\\)|\\([\\d+]\\)&amp;#34;&lt;/span&gt;)))
    race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¸ãƒ§ãƒƒã‚­ãƒ¼&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,jockey&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã-ã‚“ä¸€-é¾ ]+\\s[ã-ã‚“ä¸€-é¾ ]+|[:upper:].[ã‚¡-ãƒ¶ãƒ¼]+&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚ªãƒƒã‚ºã¨äººæ°—&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,odds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\(.+\\)&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,popularity&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+[^(\\d+.\\d)]&amp;#34;&lt;/span&gt;)))
    race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹æƒ…å ±&lt;/span&gt;
    race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/p[@id = &amp;#39;raceTitDay&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
    race_name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/h1[@class = &amp;#39;fntB&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()

    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+å¹´\\d+æœˆ\\d+æ—¥&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_name,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))

    &lt;span style=&#34;color:#75715e&#34;&gt;## ãƒ•ã‚¡ã‚¤ãƒ«è²¯ã‚ã‚‹ã®ã‹ã&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; year &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1994&lt;/span&gt;){
    dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result
    } else {
    dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(dataset,race_result)
    } &lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡2ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    } &lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡1ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    } &lt;span style=&#34;color:#75715e&#34;&gt;# iãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    } &lt;span style=&#34;color:#75715e&#34;&gt;# kãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;beep&lt;/span&gt;()
    } &lt;span style=&#34;color:#75715e&#34;&gt;# yearãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;write.csv&lt;/span&gt;(dataset,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race_result.csv&amp;#34;&lt;/span&gt;, row.names &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã‚Œã‚’å›ã™ã®ã«16æ™‚é–“ã‹ã‹ã‚Šã¾ã—ãŸï¼ˆç¬‘ï¼‰ãƒ‡ãƒ¼ã‚¿æ•°ã¯æƒ³å®šã—ã¦ã„ãŸã‚ˆã‚Šã¯å°‘ãªãã€97939ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ã¯ã˜ã‚ã¾ã—ã¦</title>
      <link>/post/post4/</link>
      <pubDate>Fri, 18 May 2018 00:00:00 +0000</pubDate>
      <guid>/post/post4/</guid>
      <description>&lt;p&gt;ã©ã†ã‚‚ã¯ã˜ã‚ã¾ã—ã¦ã€‚
æ±äº¬ã«ã‚ã‚‹è³‡ç”£é‹ç”¨ä¼šç¤¾ã«å‹¤ã‚ã‚‹æ–°å’1å¹´ç›®ã®è‘¦åŸå½©äººã¨ç”³ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ç°¡å˜ã«è‡ªå·±ç´¹ä»‹ã‚’ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
å¤§å­¦é™¢å’ã®24æ­³ã§ã™ã€‚
å°‚æ”»ã¯ãƒã‚¯ãƒ­çµŒæ¸ˆå­¦ã§ç‰¹ã«DSGEãƒ¢ãƒ‡ãƒ«ã€çŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ã€ã‚«ãƒ«ãƒãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã€ãƒ™ã‚¤ã‚ºæ¨å®šã€MCMCãªã‚“ã‹ã‚’ã‚„ã£ã¦ã„ã¾ã—ãŸã€‚
æŒ‡å°æ•™å®˜ã®ç ”ç©¶ã‚µãƒãƒ¼ãƒˆã¨ã—ã¦è‡ªç„¶è¨€èªå‡¦ç†ã‚’ã‚„ã£ãŸã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚
ã‚‚ã¨ã‚‚ã¨å­¦è€…å¿—æœ›ã§ã—ãŸãŒé‡‘éŠ­çš„ãªå•é¡Œã§å°±è·ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚
ä»Šã¯å–¶æ¥­ã‚µãƒãƒ¼ãƒˆã®ä¸‹åƒãã‚’ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®ãƒ–ãƒ­ã‚°ã¯ç ”ç©¶ã¸ã®èˆˆå‘³é–¢å¿ƒã‚’æ¨ã¦ã‚‹ã“ã¨ãŒã§ããªã„ç§ãŒè¶£å‘³ã¨ã—ã¦ç ”ç©¶ã‚’é€²ã‚ã¦ã„ãéš›ã®å‚™å¿˜éŒ²ã¨ã„ã†ä½ç½®ä»˜ã‘ã«ãªã‚‹ã®ã ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ç¾åœ¨é€²ã‚ã¦ã„ã‚‹ç ”ç©¶ã¯ä»¥ä¸‹ã®ï¼’ã¤ã§ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é¦¬åˆ¸ç‰ˆãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«&lt;/li&gt;
&lt;li&gt;å››åŠæœŸGDPäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;1ã¯ã€é¦¬åˆ¸å¸‚å ´ãŒæ ªå¼å¸‚å ´ã‚ˆã‚Šã‚‚æŠ•æ©Ÿçš„ã«é­…åŠ›ã®ã‚ã‚‹å¸‚å ´ã§ã‚ã‚‹ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã€å›åç‡100%è¶…ãˆã‚’ç›®æŒ‡ã™é¦¬åˆ¸ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚’æ§‹ç¯‰ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã§ããªã„ã‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚æ ªå¼ã«ã¯ãƒ•ã‚¡ãƒ¼ãƒãƒ•ãƒ¬ãƒ³ãƒã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ãŒã‚ã‚Šã¾ã™ãŒã€ãã‚Œã‚’å¿œç”¨ã—ã¦é¦¬åˆ¸ç‰ˆãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒ¢ãƒ‡ãƒ«ãªã‚‹ã‚‚ã®ã‚’ä½œã‚Œãªã„ã‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;2ã¯æœ€è¿‘ã®å››åŠæœŸGDPé€Ÿå ±ã®ç²¾åº¦ãŒä½ã„ã¨ã„ã†å•é¡Œæ„è­˜ã‹ã‚‰ã€ç²¾åº¦ã®é«˜ã„äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’æ–°ãŸã«æ§‹ç¯‰ã§ããªã„ã‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚ç‰¹ã«ã“ã‚Œã¾ã§ã®ã‚ˆã†ãªãƒã‚¯ãƒ­çµŒæ¸ˆç†è«–ã«åŸºã¥ã„ãŸãƒ¢ãƒ‡ãƒ«ã§ã¯ãªãã€æ©Ÿæ¢°å­¦ç¿’ã‚’ç”¨ã„ã€é€šå¸¸ãƒã‚¯ãƒ­çµŒæ¸ˆå­¦ã®ç ”ç©¶ã§ä½¿ç”¨ã—ãªã„ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚’ç¹”ã‚Šè¾¼ã‚“ã ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã™ã‚‹æ–¹å‘ã§ç ”ç©¶ã‚’é€²ã‚ã¦ã„ããŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã¾ã ã€ç ”ç©¶ã¯å§‹ã‚ãŸã°ã‹ã‚Šãªã®ã§ã™ãŒã€
èˆˆå‘³ã‚’æŒã£ã¦ã‚‚ã‚‰ãˆã‚‹ã‚ˆã†ã«é ‘å¼µã‚ŠãŸã„ã¨æ€ã„ã¾ã™â€¦
ã§ã¯ã€æœ€åˆã¯ã“ã®è¾ºã§ã€‚&lt;/p&gt;
&lt;p&gt;ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Does Financial Risk Explain Japanâ€™s Great Stagnation?</title>
      <link>/publication/%E7%B4%80%E8%A6%812019/</link>
      <pubDate>Sat, 31 Mar 2018 00:00:00 +0000</pubDate>
      <guid>/publication/%E7%B4%80%E8%A6%812019/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Cite&lt;/em&gt; button above to get Bibtex and Cite ME !!
  &lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Is fiscal expansion more effective in a financial crisis?</title>
      <link>/publication/ael2018/</link>
      <pubDate>Tue, 07 Mar 2017 00:00:00 +0000</pubDate>
      <guid>/publication/ael2018/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Cite&lt;/em&gt; button above to get Bibtex and Cite ME !!
  &lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>External Project</title>
      <link>/project/external-project/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0000</pubDate>
      <guid>/project/external-project/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Internal Project</title>
      <link>/project/internal-project/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0000</pubDate>
      <guid>/project/internal-project/</guid>
      <description>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
