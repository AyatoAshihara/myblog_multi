<!DOCTYPE html><html lang="ja" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 4.8.0 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Ayato Ashihara">

  
  
  
    
  
  <meta name="description" content="Rでデータ集めをします。データ分析はデータ集めと前処理が7割を占めるといわれる中、データ集めを自動化すべくウェブスクレイピングを行いました。">

  
  <link rel="alternate" hreflang="ja" href="../../post/post7/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  <script src="../../js/mathjax-config.js"></script>
  

  
  
  
  
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/solarized-dark.min.css" crossorigin="anonymous" title="hl-light">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/solarized-dark.min.css" crossorigin="anonymous" title="hl-dark" disabled>
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="../../css/wowchemy.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-140804055-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-140804055-1', { 'anonymize_ip': true });

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  
  

  

  <link rel="manifest" href="../../index.webmanifest">
  <link rel="icon" type="image/png" href="../../images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="../../images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="../../post/post7/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@vdjgdkhvskcndj">
  <meta property="twitter:creator" content="@vdjgdkhvskcndj">
  
  <meta property="og:site_name" content="京都の電子部品メーカーで働く社会人が研究に没頭するブログ">
  <meta property="og:url" content="/post/post7/">
  <meta property="og:title" content="日次GDP推計に使用する経済統計を統計ダッシュボードから集めてみた | 京都の電子部品メーカーで働く社会人が研究に没頭するブログ">
  <meta property="og:description" content="Rでデータ集めをします。データ分析はデータ集めと前処理が7割を占めるといわれる中、データ集めを自動化すべくウェブスクレイピングを行いました。"><meta property="og:image" content="/post/post7/featured.png">
  <meta property="twitter:image" content="/post/post7/featured.png"><meta property="og:locale" content="ja">
  
    
      <meta property="article:published_time" content="2018-07-14T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2018-07-14T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/post7/"
  },
  "headline": "日次GDP推計に使用する経済統計を統計ダッシュボードから集めてみた",
  
  "image": [
    "/post/post7/featured.png"
  ],
  
  "datePublished": "2018-07-14T00:00:00Z",
  "dateModified": "2018-07-14T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Ayato Ashihara"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "京都の電子部品メーカーで働く社会人が研究に没頭するブログ",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "Rでデータ集めをします。データ分析はデータ集めと前処理が7割を占めるといわれる中、データ集めを自動化すべくウェブスクレイピングを行いました。"
}
</script>

  

  


  
  
  
  
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js" integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css" integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin="anonymous">
  
  <script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#2962ff",
          "text": "rgb(255, 255, 255)"
        },
        "button": {
          "background": "rgb(255, 255, 255)",
          "text": "#2962ff"
        }
      },
      "theme": "classic",
      "content": {
        "message": "このウェブサイトはあなたが最高の体験を得るためにクッキーを使用します。",
        "dismiss": "はい",
        "link": "詳細を見る",
        "href": "https://www.cookiesandyou.com"
      }
    })});
  </script>



  





  <title>日次GDP推計に使用する経済統計を統計ダッシュボードから集めてみた | 京都の電子部品メーカーで働く社会人が研究に没頭するブログ</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class=" ">

  
  
  
    <script>window.wcDarkLightEnabled = true;</script>
  
  
    <script>const isSiteThemeDark = false;</script>
  
  
  <script src="../../js/load-theme.js"></script>

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="検索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="../../">京都の電子部品メーカーで働く社会人が研究に没頭するブログ</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="ナビゲーションの切り替え">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="../../">京都の電子部品メーカーで働く社会人が研究に没頭するブログ</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="../../#about"><span>About</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="../../post"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="../../publication"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="../../#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>



  <div class="container-fluid docs">
  <div class="row flex-xl-nowrap">

    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Table Of Contents</a></li>
      </ul>
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-先行研究と具体的にやりたいこと">1. 先行研究と具体的にやりたいこと</a></li>
        <li><a href="#2-統計ダッシュボードからのデータの収集">2. 統計ダッシュボードからのデータの収集</a></li>
        <li><a href="#3-得られたデータを主成分分析にかけてみる">3. 得られたデータを主成分分析にかけてみる</a></li>
      </ul>
    </li>
  </ul>
</nav>
      
    </div>

    <main class="col-12 col-md-0 col-xl-10 py-md-3 pl-md-5 docs-content" role="main">
      <article class="article">

        




















  
  


<div class="article-container pt-3">
  <h1>日次GDP推計に使用する経済統計を統計ダッシュボードから集めてみた</h1>

  

  

<div id="code-folding-buttons" class="dropdown btn-group pull-right">
  <a class="btn btn-light btn-sm dropdown-toggle" href="#" role="button" id="allCodeToggleButton"
     data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Code
  </a>
  <div class="dropdown-menu" aria-labelledby="allCodeToggleButton">
    <a id="rmd-show-all-code" class="dropdown-item small" href="#">Show all</a>
    <a id="rmd-hide-all-code" class="dropdown-item small" href="#">Hide all</a>
  </div>
</div>



  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Jul 14, 2018
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    10 分で読める
  </span>
  

  
  
  
  <span class="middot-divider"></span>
  <a href="../../post/post7/#disqus_thread"></a>
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="../../category/%E3%83%9E%E3%82%AF%E3%83%AD%E7%B5%8C%E6%B8%88%E5%AD%A6/">マクロ経済学</a>, <a href="../../category/web%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%92%E3%83%B3%E3%82%AF/">Webスクレイピング</a></span>
  

</div>

  














</div>


<div class="article-header container featured-image-wrapper mt-4 mb-4" style="max-width: 244px; max-height: 346px;">
  <div style="position: relative">
    <img src="../../post/post7/featured.png" alt="" class="featured-image">
    
  </div>
</div>



        <div class="article-container">

          <div class="article-style">
            <p>おはこんばんちわ。</p>
<p>最近、競馬ばっかりやってましたが、そろそろ本業のマクロの方もやらないとなということで今回は日次GDP推計に使用するデータを総務省が公開している統計ダッシュボードから取ってきました。
そもそも、前の記事では四半期GDP速報の精度が低いことをモチベーションに高頻度データを用いてより精度の高い予測値をはじき出すモデルを作れないかというテーマで研究を進めていました。しかし、先行研究を進めていくうちに、どうやら大規模な経済指標を利用することで日次で四半期GDPの予測値を計算することが可能であることが判明しました。しかも、精度も良い(米国ですが)ということで、なんとかこの方向で研究を進めていけないかということになりました。</p>
<h2 id="1-先行研究と具体的にやりたいこと">1. 先行研究と具体的にやりたいこと</h2>
<p><a href="http://dept.ku.edu/~empirics/Courses/Econ844/papers/Nowcasting%20GDP.pdf" target="_blank" rel="noopener">先行研究</a></p>
<p>Giannoneらが2008年にパブリッシュした論文です(JME)。彼らはアメリカの経済指標を用いて四半期GDPを日次で推計し、予測指標としての有用性を示しました。指標間の連動性(colinearity)を利用して、多数ある経済指標をいくつかのファクターに圧縮し、そのファクターを四半期GDPにフィッティングさせることによって高い予測性を実現しました。なお、ファクターの計算にはカルマンスムージングを用いています(詳しい推計方法は論文&amp;Technical Appendixを参照)。理論的な定式化は無いのですが、なかなか当たります。そもそも私がこの研究に興味を持ったのは、以下の本を立ち読みした際に参考文献として出てきたからで、いよいよ運用機関などでも使用され始めるのかと思い、やっておこうと思った次第です。</p>
<p><a href="http://www.amazon.co.jp/exec/obidos/ASIN/4532134811/hatena-blog-22/" target="_blank" rel="noopener">実践 金融データサイエンス 隠れた構造をあぶり出す6つのアプローチ</a>
<img src="https://images-na.ssl-images-amazon.com/images/I/51KIE5GeV+L._SX350_BO1,204,203,200_.jpg" alt=""></p>
<p>とりあえずはGiannoneの日本版をやろうかなと思っています。実はこの後に、ファクターモデルとDSGEを組み合わせたモデルがありましてそこまで発展させたいなーなんて思っておりますが。とにかく、ファクターを計算するための経済統計が必要ですので、今回はそれを集めてきたというのがこの記事の趣旨です。</p>
<h2 id="2-統計ダッシュボードからのデータの収集">2. 統計ダッシュボードからのデータの収集</h2>
<p>政府や日銀が公表しているデータの一部は統計ダッシュボードから落とすことができます。これは総務省統計局が提供しているもので、これまで利用しにくかった経済統計をより身近に使用してもらおうというのが一応のコンセプトとなっています。似たものに総務省統計局が提供しているestatがありますが、日銀の公表データがなかったり、メールアドレスの登録が必要だったりと非常に使い勝手が悪いです(個人的感想)。ただ、estatにはestatapiというRパッケージがあり、データを整形するのは比較的容易であると言えます。今回、統計ダッシュボードを選択した理由はそうは言っても日銀のデータがないのはダメだろうという理由で、データの整形に関しては関数を組みました。
そもそも統計ダッシュボードは経済統計をグラフなどで見て楽しむ？ものですが、私のような研究をしたい者を対象にAPIを提供してくれています。取得できるデータは大きく分けて6つあります。</p>
<p><img src="20180714160029.png" alt=""></p>
<p>やり方は簡単で、ベースのurlと欲しい統計のIDをGET関数で渡すことによって、データを取得することができます。公式にも以下のように書かれています。</p>
<blockquote>
<p>基本的な使い方としては、まず①「統計メタ情報（系列）取得」で取得したいデータの[系列コード]を検索し、 その後⑥「統計データ取得」で[系列コード]を検索条件に指定し、その系列の情報を取得します。
（②③④⑤は補助的な情報として独立して取得できるようにしています。データのみ必要な場合は当該機能は不要です。）
具体的な使い方は、以下の「WebAPIの詳細仕様」に記載する[ベースURL]に検索条件となる[パラメータ]を&quot;&amp;&ldquo;で連結し、HTTPリクエスト（GET）を送信することで目的のデータを取得できます。
各パラメータは「パラメータ名=値」のように名称と値を'=&lsquo;で結合し、複数のパラメータを指定する場合は「パラメータ名=値&amp;パラメータ名=値&amp;…」のようにそれぞれのパラメータ指定を&rsquo;&amp;&lsquo;で結合してください。
また、パラメータ値は必ずURLエンコード(文字コードUTF-8)してから結合してください。</p>
</blockquote>
<p>今回も以下の文献を参考にデータを取ってきたいと思います。</p>
<p><a href="https://www.amazon.co.jp/dp/486354216X" target="_blank" rel="noopener">Rによるスクレイピング入門</a>
<img src="https://images-na.ssl-images-amazon.com/images/I/51ZBnu8oSvL._SX350_BO1,204,203,200_.jpg" alt=""></p>
<p>まず、最初にこのAPIからデータを取得し、得られた結果を分析しやすいように整形する関数を定義したいと思います。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">library</span>(httr)
<span style="color:#a6e22e">library</span>(estatapi)
<span style="color:#a6e22e">library</span>(dplyr)
<span style="color:#a6e22e">library</span>(XML)
<span style="color:#a6e22e">library</span>(stringr)
<span style="color:#a6e22e">library</span>(xts)
<span style="color:#a6e22e">library</span>(GGally)
<span style="color:#a6e22e">library</span>(ggplot2)
<span style="color:#a6e22e">library</span>(seasonal)
<span style="color:#a6e22e">library</span>(dlm)
<span style="color:#a6e22e">library</span>(vars)
<span style="color:#a6e22e">library</span>(MASS)

<span style="color:#75715e"># 関数を定義</span>
get_dashboard <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(ID){
  base_url <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;https://dashboard.e-stat.go.jp/api/1.0/JsonStat/getData?&#34;</span>
  res <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">GET</span>(
    url <span style="color:#f92672">=</span> base_url,
    query <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(
      IndicatorCode<span style="color:#f92672">=</span>ID
    )
  )
  result <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">content</span>(res)
  x <span style="color:#f92672">&lt;-</span> result<span style="color:#f92672">$</span>link<span style="color:#f92672">$</span>item[[1]]<span style="color:#f92672">$</span>value
  x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">t</span>(<span style="color:#a6e22e">do.call</span>(<span style="color:#e6db74">&#34;data.frame&#34;</span>,x))
  date_x <span style="color:#f92672">&lt;-</span> result<span style="color:#f92672">$</span>link<span style="color:#f92672">$</span>item[[1]]<span style="color:#f92672">$</span>dimension<span style="color:#f92672">$</span>Time<span style="color:#f92672">$</span>category<span style="color:#f92672">$</span>label
  date_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">t</span>(<span style="color:#a6e22e">do.call</span>(<span style="color:#e6db74">&#34;data.frame&#34;</span>,date_x))
  date_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_replace_all</span>(date_x, pattern<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;年&#34;</span>, replacement<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/&#34;</span>)
  date_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">str_replace_all</span>(date_x, pattern<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;月&#34;</span>, replacement<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>)
  date_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#a6e22e">gsub</span>(<span style="color:#e6db74">&#34;([0-9]+)/([0-9]+)&#34;</span>, <span style="color:#e6db74">&#34;\\1/\\2/1&#34;</span>, date_x))
  date_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.Date</span>(date_x, format <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;%m/%d/%Y&#34;</span>)
  date_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(date_x)
  date_x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.Date</span>(date_x, origin<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;1970-01-01&#34;</span>)
  <span style="color:#75715e">#x &lt;- cbind(x,date_x)</span>
  x <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(x)
  x[,<span style="color:#ae81ff">1</span>] <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.character</span>(x[,<span style="color:#ae81ff">1</span>])<span style="color:#f92672">%&gt;%</span><span style="color:#a6e22e">as.numeric</span>(x[,<span style="color:#ae81ff">1</span>])
  <span style="color:#a6e22e">colnames</span>(x) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(result<span style="color:#f92672">$</span>link<span style="color:#f92672">$</span>item[[1]]<span style="color:#f92672">$</span>label)
  x <span style="color:#f92672">&lt;-</span> x <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">mutate</span>(<span style="color:#e6db74">&#34;publication&#34;</span> <span style="color:#f92672">=</span> date_x)
  <span style="color:#a6e22e">return</span>(x)
}
</code></pre></div><p>まずベースのurlを定義しています。今回はデータが欲しいので⑥統計データのベースurlを使用します（
<a href="https://dashboard.e-stat.go.jp/static/api" target="_blank" rel="noopener">参考</a>）。次にベースurlと統計ID（IndicatorCode）を<code>GET</code>関数で渡し、結果を取得しています。統計IDについてはエクセルファイルで公開されています。得られた結果の中身（リスト形式）をresultに格納し、リストの深層にある原数値データ（value）をxに格納します。原数値データもリスト形式なので、それを<code>do.call</code>でデータフレームに変換しています。次に、データ日付を取得します。resultの中を深くたどるとTime→category→labelというデータがあり、そこに日付データが保存されているので、それをdate_xに格納し、同じようにデータフレームへ変換します。データの仕様上、日付は「yyyy年mm月」になっていますが、これだと<code>R</code>は日付データとして読み取ってくれないので、<code>str_replace_all</code>等で変換したのち、<code>Date</code>型に変換しています。列名にデータ名（result→link→item[[1]]→label）をつけ、データ日付をxに追加したら完成です。
そのほか、<code>data_connect</code>という関数も定義しています。これはデータ系列によれば、たとえば推計方法の変更などで1980年～2005年の系列と2003年～2018年までの系列の2系列があるようなデータも存在し、この2系列を接続するための関数です。これは単純に接続しているだけなので、説明は省略します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">data_connect <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(x){
  a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">which</span>(x[,<span style="color:#a6e22e">ncol</span>(x)] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;NA&#34;</span>))
  b <span style="color:#f92672">&lt;-</span> x[a,<span style="color:#a6e22e">ncol</span>(x)]<span style="color:#f92672">/</span>x[a,<span style="color:#ae81ff">1</span>]
  c <span style="color:#f92672">&lt;-</span> x[1<span style="color:#f92672">:</span>a<span style="color:#ae81ff">-1</span>,<span style="color:#ae81ff">1</span>]<span style="color:#f92672">*</span>b
  <span style="color:#a6e22e">return</span>(c)
}
</code></pre></div><p>では、実際にデータを取得していきます。今回取得するデータは月次データとなっています。これは統計dashboardが月次以下のデータがとれないからです。なので、例えば日経平均などは月末の終値を引っ張っています。ただし、GDPは四半期データとなっています。さきほど定義したget_dashboardの使用方法は簡単で、引数に統計ダッシュボードで公開されている統計IDを入力するだけでデータが取れます。今回使用するデータを以下の表にまとめました。</p>
<p><img src="20180714212330.png" alt=""></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># データを取得</span>
Nikkei <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0702020501000010010&#34;</span>)
callrate <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0702020300000010010&#34;</span>)
TOPIX <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0702020590000090010&#34;</span>)
kikai <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0701030000000010010&#34;</span>)
kigyo.bukka <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0703040300000090010&#34;</span>)
money.stock1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0702010201000010030&#34;</span>)
money.stock2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0702010202000010030&#34;</span>)
money.stock <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(money.stock1,money.stock2,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
c <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data_connect</span>(money.stock)
a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">which</span>(money.stock[,<span style="color:#a6e22e">ncol</span>(money.stock)] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;NA&#34;</span>))
money.stock[1<span style="color:#f92672">:</span>a<span style="color:#ae81ff">-1</span>,<span style="color:#a6e22e">ncol</span>(money.stock)] <span style="color:#f92672">&lt;-</span> c
money.stock <span style="color:#f92672">&lt;-</span> money.stock[,<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>)]
cpi <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0703010401010090010&#34;</span>)
export.price <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0703050301000090010&#34;</span>)
import.price <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0703060301000090010&#34;</span>)
import.price<span style="color:#f92672">$</span>`輸出物価指数（総平均）（円ベース）2015年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#66d9ef">NULL</span>
public.expenditure1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0802020200000010010&#34;</span>)
public.expenditure2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0802020201000010010&#34;</span>)
public.expenditure <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(public.expenditure1,public.expenditure2,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
c <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data_connect</span>(public.expenditure)
a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">which</span>(public.expenditure[,<span style="color:#a6e22e">ncol</span>(public.expenditure)] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;NA&#34;</span>))
public.expenditure[1<span style="color:#f92672">:</span>a<span style="color:#ae81ff">-1</span>,<span style="color:#a6e22e">ncol</span>(public.expenditure)] <span style="color:#f92672">&lt;-</span> c
public.expenditure <span style="color:#f92672">&lt;-</span> public.expenditure[,<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>)]
export.service <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;1601010101000010010&#34;</span>)
working.population <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0201010010000010020&#34;</span>)
yukoukyuujinn <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0301020001000010010&#34;</span>)
hours_worked <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0302010000000010000&#34;</span>)
nominal.wage <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0302020000000010000&#34;</span>) 
iip <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0502070101000090010&#34;</span>)
shukka.shisu <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0502070102000090010&#34;</span>)
zaiko.shisu <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0502070103000090010&#34;</span>)
sanji.sangyo <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0603100100000090010&#34;</span>)
retail.sells <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0601010201010010000&#34;</span>)
GDP1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0705020101000010000&#34;</span>)
GDP2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0705020301000010000&#34;</span>)
GDP <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(GDP1,GDP2,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
c <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data_connect</span>(GDP)
a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">which</span>(GDP[,<span style="color:#a6e22e">ncol</span>(GDP)] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;NA&#34;</span>))
GDP[1<span style="color:#f92672">:</span>a<span style="color:#ae81ff">-1</span>,<span style="color:#a6e22e">ncol</span>(GDP)] <span style="color:#f92672">&lt;-</span> c
GDP <span style="color:#f92672">&lt;-</span> GDP[,<span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>)]
yen <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0702020401000010010&#34;</span>)
household.consumption <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0704010101000010001&#34;</span>)
JGB10y <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">get_dashboard</span>(<span style="color:#e6db74">&#34;0702020300000010020&#34;</span>)
</code></pre></div><p>今取得したデータは原数値系列のデータが多いので、それらは季節調整をかけます。なぜ季節調整済みのデータを取得しないのかというとそれらのデータは何故か極端にサンプル期間が短くなってしまうからです。ここらへんは使い勝手が悪いです。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># 季節調整をかける</span>
<span style="color:#a6e22e">Sys.setenv</span>(X13_PATH <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;C:\\Program Files\\WinX13\\x13as&#34;</span>)
<span style="color:#a6e22e">checkX13</span>()
seasoning <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(data,i,start.y,start.m){
  timeseries <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ts</span>(data[,i],frequency <span style="color:#f92672">=</span> <span style="color:#ae81ff">12</span>,start<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(start.y,start.m))
  m <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seas</span>(timeseries)
  <span style="color:#a6e22e">summary</span>(m<span style="color:#f92672">$</span>data)
  <span style="color:#a6e22e">return</span>(m<span style="color:#f92672">$</span>series<span style="color:#f92672">$</span>s11)
}
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(kikai,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2005</span>,<span style="color:#ae81ff">4</span>)
kikai<span style="color:#f92672">$</span>`機械受注額（船舶・電力を除く民需）` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(kigyo.bukka,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1960</span>,<span style="color:#ae81ff">1</span>)
kigyo.bukka<span style="color:#f92672">$</span>`国内企業物価指数（総平均）2015年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(cpi,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1970</span>,<span style="color:#ae81ff">1</span>)
cpi<span style="color:#f92672">$</span>`消費者物価指数（生鮮食品を除く総合）2015年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(export.price,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1960</span>,<span style="color:#ae81ff">1</span>)
export.price<span style="color:#f92672">$</span>`輸出物価指数（総平均）（円ベース）2015年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(import.price,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1960</span>,<span style="color:#ae81ff">1</span>)
import.price<span style="color:#f92672">$</span>`輸入物価指数（総平均）（円ベース）2015年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(public.expenditure,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2004</span>,<span style="color:#ae81ff">4</span>)
public.expenditure<span style="color:#f92672">$</span>公共工事受注額 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(export.service,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1996</span>,<span style="color:#ae81ff">1</span>)
export.service<span style="color:#f92672">$</span>`貿易・サービス収支` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(yukoukyuujinn,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1963</span>,<span style="color:#ae81ff">1</span>)
yukoukyuujinn<span style="color:#f92672">$</span>有効求人倍率 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(hours_worked,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1990</span>,<span style="color:#ae81ff">1</span>)
hours_worked<span style="color:#f92672">$</span>総実労働時間 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(nominal.wage,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1990</span>,<span style="color:#ae81ff">1</span>)
nominal.wage<span style="color:#f92672">$</span>現金給与総額 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(iip,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1978</span>,<span style="color:#ae81ff">1</span>)
iip<span style="color:#f92672">$</span>`鉱工業生産指数　2010年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(shukka.shisu,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1990</span>,<span style="color:#ae81ff">1</span>)
shukka.shisu<span style="color:#f92672">$</span>`鉱工業出荷指数　2010年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(zaiko.shisu,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1990</span>,<span style="color:#ae81ff">1</span>)
zaiko.shisu<span style="color:#f92672">$</span>`鉱工業在庫指数　2010年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(sanji.sangyo,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1988</span>,<span style="color:#ae81ff">1</span>)
sanji.sangyo<span style="color:#f92672">$</span>`第３次産業活動指数　2010年基準` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(retail.sells,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1980</span>,<span style="color:#ae81ff">1</span>)
retail.sells<span style="color:#f92672">$</span>`小売業販売額（名目）` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
k <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seasoning</span>(household.consumption,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2010</span>,<span style="color:#ae81ff">1</span>)
household.consumption<span style="color:#f92672">$</span>`二人以上の世帯　消費支出（除く住居等）` <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.numeric</span>(k)
GDP.ts <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">ts</span>(GDP[,<span style="color:#ae81ff">2</span>],frequency <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>,start<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1980</span>,<span style="color:#ae81ff">1</span>))
m <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">seas</span>(GDP.ts)
GDP<span style="color:#f92672">$</span>`国内総生産（支出側）（実質）2011年基準` <span style="color:#f92672">&lt;-</span> m<span style="color:#f92672">$</span>series<span style="color:#f92672">$</span>s11
</code></pre></div><p>ここでは詳しく季節調整のかけ方は説明しません。x13arimaを使用しています。上述のコードを回す際はx13arimaがインストールされている必要があります。以下の記事を参考にしてください。</p>
<p>[http://sinhrks.hatenablog.com/entry/2014/11/09/003632]</p>
<p>では、データ日付を基準に落としてきたデータを結合し、データセットを作成します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># データセットに結合</span>
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(kigyo.bukka,callrate,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,kikai,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,Nikkei,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,money.stock,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,cpi,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,export.price,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,import.price,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,public.expenditure,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,export.service,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,working.population,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,yukoukyuujinn,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,hours_worked,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,nominal.wage,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,iip,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,shukka.shisu,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,zaiko.shisu,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,sanji.sangyo,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,retail.sells,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
dataset <span style="color:#f92672">&lt;-</span> dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">full_join</span>(dataset,yen,by<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;publication&#34;</span>)
<span style="color:#a6e22e">colnames</span>(dataset) <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;DCGPI&#34;</span>,<span style="color:#e6db74">&#34;publication&#34;</span>,<span style="color:#e6db74">&#34;callrate&#34;</span>,<span style="color:#e6db74">&#34;Machinery_Orders&#34;</span>,
                       <span style="color:#e6db74">&#34;Nikkei225&#34;</span>,<span style="color:#e6db74">&#34;money_stock&#34;</span>,<span style="color:#e6db74">&#34;CPI&#34;</span>,<span style="color:#e6db74">&#34;export_price&#34;</span>,
                       <span style="color:#e6db74">&#34;import_price&#34;</span>,<span style="color:#e6db74">&#34;public_works_order&#34;</span>,
                       <span style="color:#e6db74">&#34;trade_service&#34;</span>,<span style="color:#e6db74">&#34;working_population&#34;</span>,
                       <span style="color:#e6db74">&#34;active_opening_ratio&#34;</span>,<span style="color:#e6db74">&#34;hours_worked&#34;</span>,
                       <span style="color:#e6db74">&#34;wage&#34;</span>,<span style="color:#e6db74">&#34;iip_production&#34;</span>,<span style="color:#e6db74">&#34;iip_shipment&#34;</span>,<span style="color:#e6db74">&#34;iip_inventory&#34;</span>,
                       <span style="color:#e6db74">&#34;ITIA&#34;</span>,<span style="color:#e6db74">&#34;retail_sales&#34;</span>,<span style="color:#e6db74">&#34;yen&#34;</span>)
</code></pre></div><p>最後に列名をつけています。datasetはそれぞれのデータの公表開始時期が異なるために大量の<code>NA</code>を含むデータフレームとなっているので、<code>NA</code>を削除するために最もデータの開始時期が遅い機械受注統計に合わせてデータセットを再構築します。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">min</span>(<span style="color:#a6e22e">which</span>(dataset<span style="color:#f92672">$</span>Machinery_Orders <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;NA&#34;</span>))
dataset1 <span style="color:#f92672">&lt;-</span> dataset[a<span style="color:#f92672">:</span><span style="color:#a6e22e">nrow</span>(dataset),]
dataset1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">na.omit</span>(dataset1)
<span style="color:#a6e22e">rownames</span>(dataset1) <span style="color:#f92672">&lt;-</span> dataset1<span style="color:#f92672">$</span>publication
dataset1 <span style="color:#f92672">&lt;-</span> dataset1[,<span style="color:#ae81ff">-2</span>]
dataset1.xts <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">xts</span>(dataset1,order.by <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#a6e22e">rownames</span>(dataset1)))
</code></pre></div><p>これでとりあえずデータの収集は終わりました。</p>
<h2 id="3-得られたデータを主成分分析にかけてみる">3. 得られたデータを主成分分析にかけてみる</h2>
<p>本格的な分析はまた今後にしたいのですが、データを集めるだけでは面白くないので、Gianonneらのように主成分分析を行いたいと思います。主成分分析をこれまでに学んだことのない方は以下を参考にしてください。個人的にはわかりやすいと思っています。</p>
<p><a href="https://datachemeng.com/principalcomponentanalysis/" target="_blank" rel="noopener">主成分分析(Principal Component Analysis, PCA)～データセットの見える化・可視化といったらまずはこれ！～</a></p>
<p>では主成分分析を実行してみます。<code>R</code>では<code>prcomp</code>関数を使用することで非常に簡単に主成分分析を行うことができます。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e"># 主成分分析を実行</span>
factor.pca <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">prcomp</span>(x<span style="color:#f92672">=</span>dataset1, cor <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#75715e"># cor = TRUEでデータの基準化を自動で行ってくれる。</span>
<span style="color:#a6e22e">summary</span>(factor.pca)
</code></pre></div><pre><code>## Importance of components:
##                              PC1       PC2       PC3       PC4       PC5  PC6
## Standard deviation     1.855e+06 4.268e+05 1.777e+05 1.204e+05 3.967e+04 3733
## Proportion of Variance 9.374e-01 4.963e-02 8.610e-03 3.950e-03 4.300e-04    0
## Cumulative Proportion  9.374e-01 9.870e-01 9.956e-01 9.996e-01 1.000e+00    1
##                         PC7  PC8   PC9  PC10 PC11  PC12  PC13   PC14   PC15
## Standard deviation     1347 1063 134.4 4.338 3.66 2.088 1.757 0.8261 0.7207
## Proportion of Variance    0    0   0.0 0.000 0.00 0.000 0.000 0.0000 0.0000
## Cumulative Proportion     1    1   1.0 1.000 1.00 1.000 1.000 1.0000 1.0000
##                          PC16   PC17   PC18   PC19    PC20    PC21
## Standard deviation     0.5309 0.3752 0.2632 0.1085 0.01238 0.01038
## Proportion of Variance 0.0000 0.0000 0.0000 0.0000 0.00000 0.00000
## Cumulative Proportion  1.0000 1.0000 1.0000 1.0000 1.00000 1.00000
</code></pre><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">screeplot</span>(factor.pca)
</code></pre></div><p><img src="../../post/post7/index_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">pc.xts <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">xts</span>(factor.pca<span style="color:#f92672">$</span>x[,<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>], order.by <span style="color:#f92672">=</span> <span style="color:#a6e22e">as.Date</span>(<span style="color:#a6e22e">rownames</span>(dataset1)))
<span style="color:#a6e22e">plot.zoo</span>(pc.xts,col<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;red&#34;</span>,<span style="color:#e6db74">&#34;blue&#34;</span>,<span style="color:#e6db74">&#34;green&#34;</span>,<span style="color:#e6db74">&#34;purple&#34;</span>,<span style="color:#e6db74">&#34;yellow&#34;</span>),plot.type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;single&#34;</span>) <span style="color:#75715e"># 主成分を時系列プロット</span>
</code></pre></div><p><img src="../../post/post7/index_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<p>第3主成分まででデータの約80％が説明できる結果を得たので、第3主成分までのプロットをお見せします。第1主成分（赤）はトレンドを表しており、これから景気の趨勢を読み取れると思います。第2主成分（青）は景気循環項でしょうか。周期的な動きが読み取れます。第3主成分（緑）は2014年に大きく上昇していますが、それ以外は特に目立った動きはありません。謎ですね。とりあえず今日はこれまで。時系列データをトレンド項、循環項、誤差項に分解したような結果でした。次回はGianonne et. al.(2008)の日本版の再現を行いたいと思います。</p>

          </div>

          






<div class="article-tags">
  
  <a class="badge badge-light" href="../../tag/r/">R</a>
  
  <a class="badge badge-light" href="../../tag/api/">API</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=../../post/post7/&amp;text=%e6%97%a5%e6%ac%a1GDP%e6%8e%a8%e8%a8%88%e3%81%ab%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e7%b5%8c%e6%b8%88%e7%b5%b1%e8%a8%88%e3%82%92%e7%b5%b1%e8%a8%88%e3%83%80%e3%83%83%e3%82%b7%e3%83%a5%e3%83%9c%e3%83%bc%e3%83%89%e3%81%8b%e3%82%89%e9%9b%86%e3%82%81%e3%81%a6%e3%81%bf%e3%81%9f" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/post7/&amp;t=%e6%97%a5%e6%ac%a1GDP%e6%8e%a8%e8%a8%88%e3%81%ab%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e7%b5%8c%e6%b8%88%e7%b5%b1%e8%a8%88%e3%82%92%e7%b5%b1%e8%a8%88%e3%83%80%e3%83%83%e3%82%b7%e3%83%a5%e3%83%9c%e3%83%bc%e3%83%89%e3%81%8b%e3%82%89%e9%9b%86%e3%82%81%e3%81%a6%e3%81%bf%e3%81%9f" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=%e6%97%a5%e6%ac%a1GDP%e6%8e%a8%e8%a8%88%e3%81%ab%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e7%b5%8c%e6%b8%88%e7%b5%b1%e8%a8%88%e3%82%92%e7%b5%b1%e8%a8%88%e3%83%80%e3%83%83%e3%82%b7%e3%83%a5%e3%83%9c%e3%83%bc%e3%83%89%e3%81%8b%e3%82%89%e9%9b%86%e3%82%81%e3%81%a6%e3%81%bf%e3%81%9f&amp;body=/post/post7/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=../../post/post7/&amp;title=%e6%97%a5%e6%ac%a1GDP%e6%8e%a8%e8%a8%88%e3%81%ab%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e7%b5%8c%e6%b8%88%e7%b5%b1%e8%a8%88%e3%82%92%e7%b5%b1%e8%a8%88%e3%83%80%e3%83%83%e3%82%b7%e3%83%a5%e3%83%9c%e3%83%bc%e3%83%89%e3%81%8b%e3%82%89%e9%9b%86%e3%82%81%e3%81%a6%e3%81%bf%e3%81%9f" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=%e6%97%a5%e6%ac%a1GDP%e6%8e%a8%e8%a8%88%e3%81%ab%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e7%b5%8c%e6%b8%88%e7%b5%b1%e8%a8%88%e3%82%92%e7%b5%b1%e8%a8%88%e3%83%80%e3%83%83%e3%82%b7%e3%83%a5%e3%83%9c%e3%83%bc%e3%83%89%e3%81%8b%e3%82%89%e9%9b%86%e3%82%81%e3%81%a6%e3%81%bf%e3%81%9f%20/post/post7/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=../../post/post7/&amp;title=%e6%97%a5%e6%ac%a1GDP%e6%8e%a8%e8%a8%88%e3%81%ab%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e7%b5%8c%e6%b8%88%e7%b5%b1%e8%a8%88%e3%82%92%e7%b5%b1%e8%a8%88%e3%83%80%e3%83%83%e3%82%b7%e3%83%a5%e3%83%9c%e3%83%bc%e3%83%89%e3%81%8b%e3%82%89%e9%9b%86%e3%82%81%e3%81%a6%e3%81%bf%e3%81%9f" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="../../"><img class="avatar mr-3 avatar-circle" src="../../author/ayato-ashihara/avatar_hu77c0c0affdebd3b9cbda9c39412092b5_245163_270x270_fill_q90_lanczos_center.jpg" alt="Ayato Ashihara"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="../../">Ayato Ashihara</a></h5>
      <h6 class="card-subtitle">会社員8年目</h6>
      
      
      
      
        
      
      
        <p class="card-text author-dynamic">

















  
  
  
    
  



  
  
  
  
  
  
  
    
  
  




  
  
    
      
      
      
      
      
      社会人8年目が夜な夜な更新中。本ブログの内容は筆者が所属する組織の公式見解とは関係ありません。
    
  

</p>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="../../#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.facebook.com/ASSIY" target="_blank" rel="noopener">
        <i class="fab fa-facebook"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/AyatoAshihara/myblog_multi" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/%E5%BD%A9%E4%BA%BA-%E8%91%A6%E5%8E%9F-9391b7143/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>







<section id="comments">
  
    
<div id="disqus_thread"></div>
<script>
  let disqus_config = function () {
    
    
    
  };
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
      return;
    }
    var d = document, s = d.createElement('script'); s.async = true;
    s.src = 'https://' + "ayatoashihara-github-io-myblog-multi" + '.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  
</section>




<div class="article-widget">
  
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">次へ</div>
    <a href="../../post/post6/" rel="next">Gianonne et. al. (2008)のマルチファクターモデルで四半期GDPを予想してみた</a>
  </div>
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">前へ</div>
    <a href="../../post/post9/" rel="prev">rvestでyahoo競馬にある過去のレース結果をクローリングしてみた</a>
  </div>
  
</div>

</div>





  
  
  <div class="article-widget content-widget-hr">
    <h3>関連項目</h3>
    <ul>
      
      <li><a href="../../post/post22/">OECD.orgからマクロパネルデータをAPIで取得する</a></li>
      
      <li><a href="../../post/post14/">10年物長期金利をフィッティングしてみる</a></li>
      
      <li><a href="../../post/post8/">GPLVMでマルチファクターモデルを構築してみた</a></li>
      
      <li><a href="../../post/post3/">カルマンフィルタの実装</a></li>
      
      <li><a href="../../post/post1/">ガウス回帰の実装をやってみた</a></li>
      
    </ul>
  </div>
  





        </div>
      </article>
    </main>

  </div>
</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.0/mermaid.min.js" integrity="sha512-ja+hSBi4JDtjSqc4LTBsSwuBT3tdZ3oKYKd07lTVYmCnTCor56AnRql00ssqnTOR9Ss4gOP/ROGB3SfcJnZkeg==" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/latex.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/sql.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/cpp.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"結果が見つかりませんでした","placeholder":"検索...","results":"results found"};
      const content_type = {
        'post': "投稿",
        'project': "プロジェクト",
        'publication' : "発表文献",
        'talk' : "登壇",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    <script id="dsq-count-scr" src="https://ayatoashihara-github-io-myblog-multi.disqus.com/count.js" async></script>
    

    
    
    
    
    
    
    
    
    
      
    
    
      
    
    
    
    <script src="../../js/wowchemy.min.2a3f95be2bc4762ba1847fb5d7a28317.js"></script>

    


  
  
  <div class="container">
    <footer class="site-footer">
  

  
   
  <script>
  $(document).ready(function () {
    window.initializeCodeFolding("show" === "show");
  });
  </script>
  <script src="../../js/codefolding.js"></script>


  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    
    Published with
    <a href="https://wowchemy.com" target="_blank" rel="noopener">Wowchemy</a>  —
    the free, <a href="https://github.com/wowchemy/wowchemy-hugo-modules" target="_blank" rel="noopener">
    open source</a> website builder that empowers creators.
    

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> コピー
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> ダウンロード
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
