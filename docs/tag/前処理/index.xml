<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>å‰å‡¦ç† | äº¬éƒ½ã®é›»å­éƒ¨å“ãƒ¡ãƒ¼ã‚«ãƒ¼ã§åƒãç¤¾ä¼šäººãŒç ”ç©¶ã«æ²¡é ­ã™ã‚‹ãƒ–ãƒ­ã‚°</title>
    <link>/tag/%E5%89%8D%E5%87%A6%E7%90%86/</link>
      <atom:link href="/tag/%E5%89%8D%E5%87%A6%E7%90%86/index.xml" rel="self" type="application/rss+xml" />
    <description>å‰å‡¦ç†</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>ja</language><lastBuildDate>Fri, 25 Mar 2022 00:00:00 +0000</lastBuildDate>
    <image>
      <url>/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png</url>
      <title>å‰å‡¦ç†</title>
      <link>/tag/%E5%89%8D%E5%87%A6%E7%90%86/</link>
    </image>
    
    <item>
      <title>ã€å¾¹åº•æ¯”è¼ƒã€‘ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºæ‰‹æ³•ï¼ï¼ - ç¬¬3å›</title>
      <link>/post/post28/</link>
      <pubDate>Fri, 25 Mar 2022 00:00:00 +0000</pubDate>
      <guid>/post/post28/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºä¼ç”»ã®ç¬¬3å¼¾ã§ã™ã€‚
ä»Šå›ã¯ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºæ–¹æ³•ã‚’å®Ÿè·µã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-åˆ†ææ‰‹æ³•ã®èª¬æ˜&#34;&gt;1. åˆ†ææ‰‹æ³•ã®èª¬æ˜&lt;/h2&gt;
&lt;h3 id=&#34;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã¨ã¯&#34;&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã¨ã¯&lt;/h3&gt;
&lt;p&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã€ã¾ãŸã¯å˜ç´”ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã¨å‘¼ã°ã‚Œã‚‹æ‰‹æ³•ã§ã™ã€‚åˆ†é¡å•é¡Œã‚’ãƒ™ã‚¤ã‚ºã®å®šç†ã‚’ç”¨ã„ã¦è§£ãæ‰‹æ³•ã‚’æŒ‡ã—ã¾ã™ã€‚ã¾ãšã€ãƒ™ã‚¤ã‚ºã®å®šç†ã‹ã‚‰èª¬æ˜ã—ã¾ã™ã€‚å…¥åŠ›æƒ…å ±$X$ãŒä¸ãˆã‚‰ã‚ŒãŸæ™‚ã«ã€å‡ºåŠ›$Y$ãŒå¾—ã‚‰ã‚Œã‚‹ç¢ºç‡ã¯ä»¥ä¸‹ã§è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
P(Y|X) = \frac{P(X|Y)P(Y)}{P(X)}
$$&lt;/p&gt;
&lt;p&gt;ã“ã‚ŒãŒãƒ™ã‚¤ã‚ºã®å®šç†ã§ã€$P(Y)$ã¯äº‹å‰ç¢ºç‡ã€$P(Y|X)$ã¯äº‹å¾Œç¢ºç‡ã€$P(X|Y)$ã¯å°¤åº¦ã¨å‘¼ã°ã‚Œã¾ã™ã€‚ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ãŒåˆ©ç”¨ã•ã‚Œã‚‹å…¸å‹çš„ãªå•é¡Œã«è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ã®åˆ†é¡å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã“ã®å•é¡Œã ã¨ã€$X$ã¯å—ä¿¡ãƒ¡ãƒ¼ãƒ«ã«å«ã¾ã‚Œã¦ã„ã‚‹å˜èªã€$Y$ã¯è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ã‹ã©ã†ã‹ã‚’è¡¨ã™2å€¤(0,1)ã®ãƒ‡ãƒ¼ã‚¿ã¨ãªã‚Šã¾ã™ã€‚å—ä¿¡ãƒ¡ãƒ¼ãƒ«ã«$\hat{X}$ã¨ã„ã†å˜èªãŒå«ã¾ã‚Œã¦ã„ã‚‹éš›ã«ã€ãã®ãƒ¡ãƒ¼ãƒ«ãŒè¿·æƒ‘ãƒ¡ãƒ¼ãƒ«($Y=1$)ã§ã‚ã‚‹ç¢ºç‡ã¯$P(Y=1|X=\hat{X})$ã§ã‚ã‚Šã€ãã‚Œã¯ä»¥ä¸‹ã®3ã¤ã§æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ãŒç™ºç”Ÿã™ã‚‹ç¢ºç‡$P(Y=1)$&lt;/li&gt;
&lt;li&gt;ãã®ãƒ¡ãƒ¼ãƒ«ãŒè¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ã ã£ãŸéš›ã«å˜èª$\hat{X}$ãŒå«ã¾ã‚Œã¦ã„ã‚‹ç¢ºç‡$P(X=\hat{X}|Y=1)$&lt;/li&gt;
&lt;li&gt;å˜èª$\hat{X}$ãŒç™ºç”Ÿã™ã‚‹ç¢ºç‡$P(X=\hat{X})$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ãŸã ã—ã€äº‹å¾Œç¢ºç‡ã«ã‚ˆã£ã¦æ–‡æ›¸åˆ†é¡ã‚’è¡Œã†éš›ã«ã¯ã€ä¸Šå¼ã®ç¢ºç‡ã‚’è¨ˆç®—ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚çŸ¥ã‚ŠãŸã„ã®ã¯ç¢ºç‡ã®å€¤ã§ã¯ãªãã€ã‚ã‚‹$X$ãŒä¸ãˆã‚‰ã‚ŒãŸæ™‚ã«$P(Y=1|X)$ã¨$P(Y=0|X)$ã®ã©ã¡ã‚‰ãŒå¤§ãã„ã‹ã§ã™ã®ã§ã€å…±é€šã—ã¦ã„ã‚‹åˆ†æ¯ã¯è¨ˆç®—ã‹ã‚‰é™¤å¤–ã™ã‚‹ã“ã¨ãŒã§ãã€åˆ†å­$P(X|Y)P(Y)$ã‚’ãã‚Œãã‚Œè¨ˆç®—ã—ã€ãã®å¤§å°é–¢ä¿‚ã«ã‚ˆã£ã¦è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ã‹ã©ã†ã‹ã‚’å‰²ã‚ŠæŒ¯ã‚Œã°ã‚ˆã„ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;br&gt;
ã¾ãŸã€ä¸Šè¨˜ã¯è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ã®åˆ†é¡ã«é™ã‚‰ãšã€ä»Šå›è¡ŒãŠã†ã¨ã—ã¦ã„ã‚‹ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆæƒ…å ±ã€ã¤ã¾ã‚Šãã®æ–‡æ›¸å†…å®¹ãŒãƒã‚¸ãƒ†ã‚£ãƒ–ã‹ãƒã‚¬ãƒ†ã‚£ãƒ–ã‹ã‚’åˆ†é¡ã™ã‚‹å•é¡Œã«å¯¾ã—ã¦ã‚‚ä½¿ãˆã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;äº‹å¾Œç¢ºç‡ã®æ¨å®šæ–¹æ³•&#34;&gt;äº‹å¾Œç¢ºç‡ã®æ¨å®šæ–¹æ³•&lt;/h3&gt;
&lt;p&gt;æ±‚ã‚ãŸã„äº‹å¾Œç¢ºç‡ã®åˆ†å­ã‚’æ±‚ã‚ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ãã®è¨ˆç®—ã®ãŸã‚ã«ã¯äº‹å‰ç¢ºç‡$P(Y)$ã¨å°¤åº¦$P(Y|X)$ã‚’æ±‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€åŸºæœ¬çš„ã«ãã‚Œãã‚Œã«ãƒ‘ãƒ©ãƒ¡ãƒˆãƒªãƒƒã‚¯ãªç¢ºç‡åˆ†å¸ƒã‚’ä»®å®šã™ã‚‹ãŸã‚ã€ç¢ºç‡åˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¨å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãªãŠã€äº‹å‰ç¢ºç‡ãŒå¾“ã†ç¢ºç‡åˆ†å¸ƒã‚’äº‹å‰åˆ†å¸ƒã¨å‘¼ã³ã¾ã™ã€‚&lt;br&gt;
å…¥åŠ›å˜èªãƒ™ã‚¯ãƒˆãƒ«ã‚’$X={x_1,x_2,&amp;hellip;,x_N}$ã¨ã—ã¾ã™ã€‚ã“ã“ã§ã€å„$x_n$ã¯$n$ç•ªç›®ã®å˜èªã‚’è¡¨ã—ã¾ã™ã€‚å„$x_n$ãŒç”Ÿèµ·ã™ã‚‹æ¡ä»¶ä»˜ç¢ºç‡ã¯èªé †ã‚„å‘¨è¾ºã®å˜èªã«ä¾å­˜ã—ãªã„ã¨ä»®å®šã™ã‚‹ã¨ã€$P(X|Y)$ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
P(X|Y) = \Pi_{i=1}^N P(x_i|Y)
$$&lt;/p&gt;
&lt;p&gt;ã§ã¯ã€ä¸Šè¨˜ã®æ¡ä»¶ä»˜ç¢ºç‡ã‚’ã©ã®ã‚ˆã†ã«æ±‚ã‚ã‚‹ã‹ã«è©±ã‚’ç§»ã—ã¾ã—ã‚‡ã†ã€‚ä»Šã€$P(ãƒ»)$ã®ãã‚Œãã‚Œã«ã¨ã‚ã‚‹ç¢ºç‡åˆ†å¸ƒã‚’ä»®å®šã™ã‚‹ã¨ã€$P(X|Y)P(Y)$ã¯&lt;/p&gt;
&lt;p&gt;$$
P(Y;\Theta,\Phi)P(X;\Theta|Y) \tag{1}
$$
ã¨æ›¸ã‘ã¾ã™ã€‚ã“ã“ã§ã€$\Theta={\theta_1,\theta_2,&amp;hellip;,\theta_M}, \Phi={\phi_1,\phi_2,&amp;hellip;,\phi_L}$ã¯ç¢ºç‡åˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™ã€‚ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã€(1)ã‚’è¨ˆç®—ã§ãã€$X$ãŒä¸ãˆã‚‰ã‚ŒãŸéš›ã®$Y={0,1}$ã®ãã‚Œãã‚Œã®äº‹å¾Œç¢ºç‡ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ &lt;br&gt;
ã“ã®ã‚ˆã†ã«ã—ã¦ã€äº‹å¾Œç¢ºç‡ã®æ¨å®šå•é¡Œã‚’ç¢ºç‡åˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¨å®šå•é¡Œã«å¸°ç€ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚å…·ä½“çš„ã«ã€ã©ã®ã‚ˆã†ã«ã—ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¨å®šã™ã‚‹ã®ã‹ã«ã¤ã„ã¦ã€è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚&lt;br&gt;
å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¨ã—ã¦ã€&lt;/p&gt;
&lt;p&gt;$$
{(S,T)} = (Y=S_1,X=T_1), (Y=S_2,X=T_2), &amp;hellip;,(Y=S_D,X=T_D)
$$&lt;/p&gt;
&lt;p&gt;ãŒå¾—ã‚‰ã‚Œã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚ã“ã“ã§ã€$D$ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã§ã™ã€‚ã¾ãŸã€$Y$ã¯$1$ã®æ™‚ã«ãƒã‚¸ãƒ†ã‚£ãƒ–ã€$0$ã®æ™‚ã«ãƒã‚¬ãƒ†ã‚£ãƒ–ã¨ã—ã€ç‹¬ç«‹ã‚’ä»®å®šã—ã¾ã™(ã¤ã¾ã‚Š$S$ã¯0,1ã®2å€¤ã‚’å–ã‚‹)ã€‚æœ€ã‚‚æœ›ã¾ã—ã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$\Phi$ã®å€¤ã¯ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®(1)ã®åŒæ™‚ç¢ºç‡ã‚’æœ€å¤§ã«ã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¨å®šå€¤ã¨ã—ã¦é¸æŠã™ã‚‹ã“ã¨ã«ã—ã€$\Theta$ã¯äº‹å‰ã«ã‚ã‹ã£ã¦ã„ã‚‹çŸ¥è­˜ã‚’ç”¨ã„ã¦ä½•ã‚‰ã‹ã®å€¤ã‚’å®šã‚ã¾ã™ã€‚ã¤ã¾ã‚Šã€ä»¥ä¸‹ã‚’æœ€å¤§ã«ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
M(\Theta,\Phi) = \Pi_{j=1}^{D}P(S_j;\Theta,\Phi)P(T_j;\Theta|S_j) \tag{2}
$$&lt;/p&gt;
&lt;p&gt;(2)ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰å½¢ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div&gt;
$$
\begin{eqnarray*}
M(\Theta,\Phi) &amp;=&amp; P(T_1;\Theta|0)P(0;\Theta,\Phi)Ã—P(T_2;\Theta|0)P(0;\Theta,\Phi)Ã—...\\
&amp;&amp;Ã—P(T_Q;\Theta|0)P(0;\Theta,\Phi)Ã—P(T_{Q+1};\Theta|1)P(1;\Theta,\Phi) \\
&amp;=&amp; \Pi_{k=0}^1P(k;\Theta,\Phi)\Pi_{i=1}^{Q_k}P(T_{Q_i};\Theta|k) \tag{3}
\end{eqnarray*}
$$
&lt;/div&gt;
&lt;div&gt;
ã“ã“ã§ã€$Q_k$ã¯$Y=k$ã¨ãªã‚‹å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®å€‹æ•°ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚  
&lt;/div&gt;
&lt;h3 id=&#34;ç¢ºç‡åˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¨å®šæ–¹æ³•&#34;&gt;ç¢ºç‡åˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¨å®šæ–¹æ³•&lt;/h3&gt;
&lt;p&gt;æ¬¡ã«æ°—ã«ãªã‚‹ã®ã¯$\Theta, \Phi$ã‚’å…·ä½“çš„ã«ã©ã®ã‚ˆã†ã«ã—ã¦è¨ˆç®—ã™ã‚‹ã‹ã§ã™ã€‚ã“ã‚Œã¯ç¢ºç‡åˆ†å¸ƒã‚’ç‰¹å®šã—ãªã„ã¨é€²ã‚ãªã„ãŸã‚ã€å°¤åº¦ã«ã¯å¤šé …åˆ†å¸ƒã€äº‹å‰åˆ†å¸ƒã«ã¯ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã‚’ä»®å®šã—ã¾ã™ã€‚ä¸€èˆ¬çš„ãªä»®å®šã ã¨æ€ã„ã¾ã™ã€‚å¤šé …åˆ†å¸ƒã¨ã¯ç¢ºç‡å¯†åº¦é–¢æ•°ãŒä»¥ä¸‹ã®ã‚ˆã†ãªç¢ºç‡åˆ†å¸ƒã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
P(n_1,&amp;hellip;,n_k) = \frac{n!}{n_1!&amp;hellip;n_k!}p_1^{n_1}&amp;hellip;p_k^{n_k}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$n_i$ã¯éè² ã§$n=n_1+&amp;hellip;+n_k$ã§ã™ã€‚ã¾ãŸã€$p_1+&amp;hellip;p_k=1$ã‚’æº€ãŸã—ã¾ã™ã€‚å¤šé …åˆ†å¸ƒã¯åå‰ã‹ã‚‰åˆ†ã‹ã‚‹ã¨ãŠã‚Šã€äºŒé …åˆ†å¸ƒã®æ‹¡å¼µç‰ˆã§ã™ã€‚äºŒé …åˆ†å¸ƒã¯ã‚³ã‚¤ãƒ³æŠ•ã’ãŒä¾‹ã¨ã—ã¦ä½¿ã‚ã‚Œã¾ã™ãŒã€å¤šé …åˆ†å¸ƒã¯ã‚µã‚¤ã‚³ãƒ­æŠ•ã’ãŒå¾“ã†åˆ†å¸ƒã§ã™($n=6, p_i=1/6$)ã€‚ãƒ†ã‚­ã‚¹ãƒˆè§£æã®æ–‡è„ˆã§ã¯ã€$n_i$ã¯æ–‡ç« ã«å«ã¾ã‚Œã‚‹å˜èª$i$ã®å‡ºç¾å›æ•°ã«ãªã‚Šã¾ã™ã€‚&lt;br&gt;
ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã¯åŒæ™‚ç¢ºç‡å¯†åº¦é–¢æ•°ãŒä»¥ä¸‹ã®ã‚ˆã†ãªç¢ºç‡åˆ†å¸ƒã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
f(x_1,&amp;hellip;,x_n) = \frac{\Gamma(\alpha)}{\Gamma(\alpha_1)&amp;hellip;\Gamma(\alpha_n)}x_1^{\alpha_1-1}&amp;hellip;x_n^{\alpha_n-1}
$$&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã€$x_i$ã¯éè² ã§$x_1+&amp;hellip;+x_n=1$ã€$\alpha_1+&amp;hellip;+\alpha_n=\alpha$ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã™ã€‚ä»Šã€$\alpha_i$ã‚’æ­£ã®æ•´æ•°ã¨ã™ã‚‹ã¨$\Gamma(\alpha_i)=(\alpha_{i-1})!$ã‚ˆã‚Šã€&lt;/p&gt;
&lt;p&gt;$$
f(x_1,&amp;hellip;,x_n) = \frac{(\alpha-1)!}{(\alpha_{1}-1)!&amp;hellip;(\alpha_n-1)!}x_1^{\alpha_1-1}&amp;hellip;x_n^{\alpha_n-1}
$$&lt;/p&gt;
&lt;p&gt;ã¨ãªã‚Šã¾ã™ã€‚å¤šé …åˆ†å¸ƒã¨ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã®ç¢ºç‡åˆ†å¸ƒã‚’è¦‹æ¯”ã¹ã‚‹ã¨ã€ã¨ã¦ã‚‚ä¼¼ãŸå½¢ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ä¸¡è€…ã¯å½¢ã¯ä¼¼ã¦ã„ã¾ã™ãŒã€é–¢æ•°ã®å…¥åŠ›ãŒç•°ãªã‚Šã¾ã™ã€‚å¤šé …åˆ†å¸ƒã¯å„å˜èªã®ç”Ÿèµ·ç¢ºç‡ãŒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€æŒ‡æ•°éƒ¨åˆ†ã®å‡ºç¾å›æ•°ãŒå…¥åŠ›ã§ã‚ã‚‹ä¸€æ–¹ã€ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã¯ç”Ÿèµ·ç¢ºç‡ãŒå…¥åŠ›ã€å‡ºç¾å›æ•°ãŒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã¯å¤šé …åˆ†å¸ƒã®å…±å½¹äº‹å‰åˆ†å¸ƒã¨ãªã£ã¦ã„ã¾ã™ã€‚ ã“ã‚Œã‚‰ã®ç¢ºç‡åˆ†å¸ƒã‚’ä»®å®šã™ã‚‹ã¨ã€(3)ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div&gt;
$$
\begin{eqnarray*}
M(\vec{p};\vec{\alpha}) &amp;\propto&amp; \frac{1}{Z(\vec{\alpha})}\Pi_{k=0}^1\Pi_{i=1}^Vp_{k_i}^{\alpha_{i}-1}\Pi_{j=1}^V p_{k_{j}}^{\tau_{k_{j}}} \\
&amp;=&amp; \frac{1}{Z(\vec{\alpha})}\Pi_{k=0}^1 \Pi_{j=1}^V p_{k_{j}}^{\tau_{k_{j}}+\alpha_j-1} \tag{4}
\end{eqnarray*}
$$
&lt;/div&gt;
&lt;p&gt;ã“ã“ã§ã€$p_{k_j}$ã¯ãƒã‚¸ãƒ†ã‚£ãƒ–(ã¾ãŸã¯ãƒã‚¬ãƒ†ã‚£ãƒ–)ã§ã‚ã‚‹æ–‡æ›¸($k={1,0}$)ã§å˜èª$j$ãŒå‡ºç¾ã™ã‚‹ç¢ºç‡ã€$\tau_{k_j}=\sum_{i=1}^{Q_k}c_{kij}$ã¯ãƒã‚¸ãƒ†ã‚£ãƒ–(ã¾ãŸã¯ãƒã‚¬ãƒ†ã‚£ãƒ–)ã§ã‚ã‚‹æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã«å«ã¾ã‚Œã‚‹å˜èª$j$ã®ç·æ•°ã€$\alpha_j$ã¯å˜èª$j$ã®ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€$V$ã¯å˜èªæ•°ã®ä¸Šé™ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚$Z(\vec{\alpha})$ã¯ç¢ºç‡ã®ç·å’Œã‚’1ã¨ã™ã‚‹ãŸã‚ã®æ­£è¦åŒ–å®šæ•°ã§ã€ãƒ™ã‚¤ã‚ºçµ±è¨ˆå­¦ã§ã¯åˆ†é…é–¢æ•°ã¨å‘¼ã°ã‚Œã¾ã™ã€‚(3)ã«å¯¾å¿œã•ã›ã‚‹ã¨ã€$\Theta=\vec{p}={p_{k_j}}_{k_j=0_1}^{1_V}$ã€$\Phi=\vec{\alpha}={\alpha_j}_{j=1}^V$ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã‹ã‚‰ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$p_{k_{j}}$ã®æ¨å®šå€¤ã‚’$M(\vec{\alpha};\vec{p})$ã‚’æœ€å¤§ã«ã™ã‚‹å€¤ã¨ã—ã¦æ±‚ã‚ã¾ã™ã€‚ãŸã ã—ã€ä»¥ä¸‹ã®åˆ¶ç´„æ¡ä»¶ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\sum_{j=1}^V p_{k_{j}}=1
$$&lt;/p&gt;
&lt;p&gt;ã¤ã¾ã‚Šã€ä»¥ä¸‹ã®æœ€é©åŒ–å•é¡Œã¨ã—ã¦å®šå¼åŒ–ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div&gt;
$$
\begin{eqnarray*}
\hat{p}_{k_j} &amp;=&amp; \underset{{p_{k_j}}}{\arg\max}~M(\vec{p};\vec{\alpha})~~s.t.\sum_{j=1}^V p_{k_{j}}=1\\
&amp;=&amp;\underset{{p_{k_j}}}{\arg\max}~\frac{1}{Z(\vec{\alpha})}\Pi_{k=0}^1 \Pi_{j=1}^V p_{k_{j}}^{\tau_{k_{j}}+\alpha_j-1}~~s.t.\sum_{j=1}^V p_{k_{j}}=1
\end{eqnarray*}
$$
&lt;/div&gt;
&lt;p&gt;ã“ã®å•é¡Œã‚’è§£ããŸã‚ã«ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥æœªå®šä¹—æ•°æ³•ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div&gt;
$$
\begin{eqnarray*}
L &amp;=&amp; (\frac{1}{Z(\vec{\alpha})}\Pi_{k=0}^1 \Pi_{j=1}^V p_{k_{j}}^{\tau_{k_{j}}+\alpha_j-1}-\lambda(1-\sum_{k=1}^V p_{k_{j}})) \\
\frac{\partial L}{\partial p_{l_m}}
&amp;=&amp; (\tau_{l_m}+\alpha_m-1)p_{l_m}^{\tau_{l_m}+\alpha_m-2}\frac{1}{Z(\vec{\alpha})}\Pi_{k\neq l}^1 \Pi_{j\neq m}^V p_{k_{j}}^{\tau_{k_{j}}+\alpha_j-1}-\lambda \\
&amp;=&amp; (\tau_{l_m}+\alpha_m-1)p_{l_m}^{-1}\frac{1}{Z(\vec{\alpha})}\Pi_{k=0}^1 \Pi_{j=1}^V p_{k_{j}}^{\tau_{k_{j}}+\alpha_j-1}-\lambda \\
p_{l_m} &amp;=&amp; \frac{(\tau_{l_m}+\alpha_m-1)}{\lambda}\frac{1}{Z(\vec{\alpha})}\Pi_{k=0}^1 \Pi_{j=1}^V p_{k_{j}}^{\tau_{k_{j}}+\alpha_j-1} \tag{5}
\end{eqnarray*}
$$
&lt;/div&gt;
ä¸Šè¨˜ã®ã‚ˆã†ã«è§£ã‘ã¾ã™ã€‚ã“ã“ã§ã€åˆ¶ç´„æ¡ä»¶ã‚’ç”¨ã„ã¦ä¸Šå¼ã®ä¸¡è¾ºã§ç·å’Œã‚’å–ã‚‹ã¨ã€
&lt;div&gt;
$$
\begin{eqnarray*}
1 &amp;=&amp; \sum_{m=1}^V \frac{(\tau_{l_m}+\alpha_m-1)}{\lambda}\frac{1}{Z(\vec{\alpha})}\Pi_{k=0}^1 \Pi_{j=1}^V p_{k_{j}}^{\tau_{k_{j}}+\alpha_j-1} \\
\lambda &amp;=&amp; \sum_{m=1}^V (\tau_{l_m}+\alpha_m-1)\frac{1}{Z(\vec{\alpha})}\Pi_{k=0}^1 \Pi_{j=1}^V p_{k_{j}}^{\tau_{k_{j}}+\alpha_j-1}
\end{eqnarray*}
$$
&lt;/div&gt;
&lt;p&gt;ã¨ãªã‚‹ã®ã§ã€$\lambda$ã‚’(5)å¼ã«ä»£å…¥ã™ã‚‹ã¨ã€&lt;/p&gt;
&lt;div&gt;
$$
\hat{p}_{l_m} = \frac{(\tau_{l_m}+\alpha_m-1)}{\sum_{m=1}^V (\tau_{l_m}+\alpha_m-1)} \tag{6}
$$
&lt;/div&gt;
&lt;p&gt;ã¨ã€äº‹å¾Œåˆ†å¸ƒã‚’æœ€å¤§ã«ã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚$p_{l_m}$ã®ç›´æ„Ÿçš„ãªè§£é‡ˆã¯ã€ãƒã‚¸ãƒ†ã‚£ãƒ–(ãƒã‚¬ãƒ†ã‚£ãƒ–)ãªæ–‡è„ˆã§ã®å˜èª$m$ã®å‡ºç¾é »åº¦ãŒå…¨ã¦ã®å˜èªã®å‡ºç¾é »åº¦ã«å ã‚ã‚‹å‰²åˆã§ã™ã€‚ãŸã ã€ãã‚Œã ã‘ã ã¨å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«å«ã¾ã‚Œãªã„å˜èªã®$p_{l_m}$ãŒï¼ã¨ãªã£ã¦ã—ã¾ã„ã€äº‹å¾Œç¢ºç‡ã‚‚0ã¨ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ä¸Šè¨˜ã§ã¯ã€äº‹å‰åˆ†å¸ƒã«ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€$p_{l_m}$ãŒ0ã«ãªã‚‰ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™($+\alpha_m$ã®éƒ¨åˆ†)ã€‚æ‰€è¬‚ã€é »åº¦ã‚¼ãƒ­å•é¡Œã‚’è§£æ±ºã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã¨ã“ã‚ã§ã€ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã®$\alpha_m$ã¯äº‹å‰ã«ã‚ã‹ã£ã¦ã„ã‚‹çŸ¥è­˜ã‚’ç”¨ã„ã¦ä½•ã‚‰ã‹ã®å€¤ã‚’å®šã‚ã‚‹ã¨è¨€ã£ã¦ã„ã¾ã—ãŸãŒã€ã©ã®ã‚ˆã†ã«ã—ã¦æ±‚ã‚ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿæ¨å®šå€¤ã‚’è¦‹ã‚Œã°ã‚ã‹ã‚‹é€šã‚Šã€$\alpha_m$ã¯æ–‡æ›¸å†…ã«ãŠã‘ã‚‹å˜èª$m$ã®ä¸»è¦³çš„ãªå‡ºç¾é »åº¦ã‚’è¡¨ã—ã¦ã„ã‚‹ã¨è§£é‡ˆã§ãã¾ã™ã€‚ã§ã™ãŒã€æ­£ç›´$\alpha_m$ã«æ„å‘³ã‚’æŒãŸã›ã¦ã„ã‚‹äººã¯å°‘ãªãã€å…ˆè¿°ã—ãŸé »åº¦ã‚¼ãƒ­å•é¡Œã‚’è§£æ±ºã§ãã‚Œã°ã‚ˆã„ã¨è€ƒãˆã¦ã„ã‚‹äººãŒå¤§åŠã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚ã¤ã¾ã‚Šã€$\alpha_m=\alpha+1$($\alpha$ã¯å®šæ•°ã€ä¾‹ãˆã°1ã¨ã‹)ã¨ã—ã¦ã—ã¾ã†ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã“ã‚Œã¯åŠ ç®—ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã¨å‘¼ã°ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã•ã¦ã€ã“ã®ã‚ˆã†ã«ã—ã¦æ±‚ã‚ãŸåˆ†é¡å™¨ã§åˆ†é¡ã‚’è¡Œã„ã¾ã™ã€‚æ€è€ƒå®Ÿé¨“ã¨ã—ã¦ã€1ã¤ã®å˜èªã‚’é™¤ã„ã¦ä»–ã®å˜èªãŒãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã‹ã¤å„å˜èªã®å‡ºç¾é »åº¦ãŒå…¨ã¦åŒã˜æ–‡æ›¸ã‚’è€ƒãˆã¾ã™ã€‚ã“ã®å ´åˆã€ãã®1ã¤ã®å˜èªãŒä¸¡æ–‡è„ˆ(ãƒã‚¸ãƒ†ã‚£ãƒ–/ãƒã‚¬ãƒ†ã‚£ãƒ–)ã®ã†ã¡ç›¸å¯¾çš„ã«é »å‡ºã§ã‚ã‚‹æ–‡è„ˆã¸åˆ†é¡ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã¯æ•™å¸«ã‚ã‚Šå­¦ç¿’ã§ã™ã€‚ã¤ã¾ã‚Šã€æ­£è§£ãƒ©ãƒ™ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚ŒãŒãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã®æ¬ ç‚¹ã§ã™ãŒã€ä¸€æ–¹ã§ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã«ã¯ç‰¹æ®Šãªæ–‡è„ˆã§ã‚‚åˆ†é¡ãŒå¯èƒ½ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã®åˆ©ç‚¹æ¬ ç‚¹&#34;&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã®åˆ©ç‚¹ãƒ»æ¬ ç‚¹&lt;/h3&gt;
&lt;p&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã®åˆ©ç‚¹ãƒ»æ¬ ç‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&amp;lt;åˆ©ç‚¹ğŸ‘&amp;gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¾æ›¸ãŒä¸è¦&lt;/li&gt;
&lt;li&gt;æœªçŸ¥èªãŒå‡ºç¾ã—ã¦ã‚‚åˆ†é¡ã§ãã‚‹&lt;/li&gt;
&lt;li&gt;åˆ†é¡éç¨‹ãŒã‚ã‹ã‚Šã‚„ã™ã„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;lt;æ¬ ç‚¹ğŸ‘&amp;gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å­¦ç¿’ã®ãŸã‚ã®æ•™å¸«ã‚ã‚Šãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒå¿…è¦&lt;/li&gt;
&lt;li&gt;æ–‡ç« ã®èªé †ã‚’è€ƒæ…®ã§ããªã„(bag of words)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¬ ç‚¹ã®æ–‡ç« ã®èªé †ã‚’è€ƒæ…®ã§ããªã„ã¨ã„ã†ç‚¹ã¯è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã«ã‚‚å½“ã¦ã¯ã¾ã‚Šã¾ã™ãŒã€&lt;strong&gt;æ–‡ç« ä¸­ã®å˜èªã®ç™ºç”Ÿå›æ•°ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€èªé †ã®é–¢ä¿‚æ€§ã‚„ä¿‚ã‚Šå—ã‘ã¨ã„ã£ãŸæƒ…å ±ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“&lt;/strong&gt;ã€‚ãã®ãŸã‚ã€ä¾‹ãˆã°ã€Œè‰¯ããªã„ã€ã®ã‚ˆã†ãªè‚¯å®šèªã‚’å¦å®šã™ã‚‹ã‚ˆã†ãªè¨€ã„å›ã—ã¯ã€ãƒã‚¸ãƒ†ã‚£ãƒ–ã¨åˆ†é¡ã•ã‚Œã‚„ã™ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã®å®Ÿè·µ&#34;&gt;2. ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã®å®Ÿè·µ&lt;/h2&gt;
&lt;p&gt;ã“ã“ã‹ã‚‰ã¯ã€ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã‚’ç”¨ã„ã¦å®Ÿéš›ã«åˆ†æã‚’ã—ã¦ã„ãã¾ã™ã€‚å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã§ã¯ã€ã‚¿ã‚¯ã‚·ãƒ¼é‹è»¢æ‰‹ã‚„å°å£²åº—ã®åº—ä¸»ã€æ—…é¤¨ã®çµŒå–¶è€…ãªã©æ™¯æ°—ã«æ•æ„Ÿãªæ–¹ã€…(æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼)ã«å¯¾ã—ã¦ã€5æ®µéšã®æ™¯æ³æ„Ÿã¨ãã®ç†ç”±ã‚’æ¯æœˆã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚5æ®µéšã¯ã€ã€Œè‰¯ã„(â—)ã€ã€ã€Œã‚„ã‚„è‰¯ã„(â—‹)ã€ã€ã€Œå¤‰ã‚ã‚‰ãªã„(â– )ã€ã€ã€Œã‚„ã‚„æ‚ªã„(â–²)ã€ã€ã€Œæ‚ªã„(Ã—)ã€ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;br&gt;
ã¾ãšã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;filePath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\Users\hogehoge\Watchder\RawData\*.csv&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; glob

files &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; glob&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;glob(filePath)
lists &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; []
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; file &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; files:
  df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_csv(file, encoding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;shift-jis&amp;#34;&lt;/span&gt;)
  lists&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;append(df)

sample &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;concat(lists, axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, ignore_index&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)
sample &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample[((sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;âˆ’&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ï¼Š&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;False)]
sample &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample[sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â–¡&amp;#39;&lt;/span&gt;]
corpus &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãƒ»&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
corpus&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0                              åº—é ­ã®å–æ‰±é¡ãŒå‰å¹´æ¯”ç´„120ï¼…ã¨å¥½èª¿ã§ã‚ã£ãŸã€‚
## 1    å½“æ–½è¨­ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã¯ï¼‘æœˆ26æ—¥æ™‚ç‚¹ã§å‰å¹´æ¯”130.1ï¼…ã¨ãªã£ã¦ãŠã‚Šã€ï¼‘æœˆã¨ã—ã¦ã¯éå»æœ€é«˜ã®...
## 2    å¹´æœ«ã®æ¶ˆè²»ã®åå‹•ã‚‚ã‚ã£ã¦ã‹ã€å®¢ã®å‹•ããŒã‚„ã‚„éˆã„ã€‚ãŸã ã€ç›¸å¤‰ã‚ã‚‰ãšé«˜é¡å•†æãŒå£²ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“...
## 3    å¤–å›½äººè¦³å…‰å®¢ã«ã‚ˆã‚‹å£²ä¸ŠãŒå‰å¹´æ¯”152ï¼…ã¨å¥½èª¿ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ã»ã‹ã€æ¥å®¢æ•°ãŒå‰å¹´æ¯”102ï¼…ã¨å¥½èª¿...
## 4          ç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã«ã‚ã‚‹ã¨ã¾ã§ã¯ã„ã„ã¥ã‚‰ã„ã‚‚ã®ã®ã€ï¼“ã‹æœˆå‰ã¨ã®æ¯”è¼ƒã§ã¯æ”¹å–„ã—ã¦ã„ã‚‹ã€‚
## Name: è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜, dtype: object
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ãªãŠã€è‡ªç”±è¨˜è¿°éƒ¨åˆ†(è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜)ãŒã€Œï¼ã€ã¯å›ç­”ãŒå­˜åœ¨ã—ãªã„ã€ã€Œï¼Šã€ã¯ä¸»ã ã£ãŸå›ç­”ç­‰ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰é™¤å¤–ã—ã¦ã„ã¾ã™ã€‚  ã¾ãŸã€æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ãŒã€Œå¤‰ã‚ã‚‰ãªã„(â– )ã€ã®ãƒ‡ãƒ¼ã‚¿ã¯åˆ†é¡å¯¾è±¡å¤–ã¨ã™ã‚‹ãŸã‚ã€ã“ã¡ã‚‰ã‚‚ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰é™¤å¤–ã—ã¦ã„ã¾ã™ã€‚&lt;br&gt;
æ¬¡ã«ã€åˆ†é¡å¯¾è±¡ã¨ãªã‚‹ãƒ©ãƒ™ãƒ«(æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­)ã‚’æ•°å€¤ã¸åŠ å·¥ã—ã¾ã™ã€‚ã€Œè‰¯ã„(â—)ã€ã¨ã€Œã‚„ã‚„è‰¯ã„(â—‹)ã€ã‚’1ã€ã€Œã‚„ã‚„æ‚ªã„(â–²)ã€ã€ã€Œæ‚ªã„(Ã—)ã€ã‚’0ã¨ã™ã‚‹2å€¤åˆ†é¡ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.preprocessing &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; LabelEncoder

score_mapping &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â—&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â—‹&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â–²&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Ã—&amp;#39;&lt;/span&gt;:&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;}
labels &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;map(score_mapping)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è‡ªç”±è¨˜è¿°éƒ¨åˆ†ã®å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚å‰ç¯€ã§èª¬æ˜ã—ãŸã¨ãŠã‚Šã€ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã¯å…¥åŠ›å¤‰æ•°ã¨ã—ã¦ã€å„æ–‡ç« ã«å«ã¾ã‚Œã‚‹å˜èªã®å‡ºç¾å›æ•°ãŒå¿…è¦ã§ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã¯ã€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®æ–‡ç« ã‚’å½¢æ…‹ç´ ã«åˆ†è§£&lt;/li&gt;
&lt;li&gt;å„æ–‡ä¸­ã«å½¢æ…‹ç´ ãŒå‡ºç¾ã™ã‚‹å›æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã®å‡¦ç†ãŒå¿…è¦ã§ã™ã€‚è‹±èªã§ã‚ã‚Œã°ã€ã“ã®å‡¦ç†ã¯&lt;code&gt;sklearn.feature_extraction.CountVectorizer&lt;/code&gt;ãŒè¡Œã£ã¦ãã‚Œã¾ã™ãŒã€æ—¥æœ¬èªã®å ´åˆã¯ãã†ã¯ã„ã‹ãšã€å½¢æ…‹ç´ è§£æã®ãŸã‚ã®é–¢æ•°ã‚’æ¸¡ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚ˆã£ã¦ã€å…¥åŠ›ï¼šæ–‡ç« ãƒ™ã‚¯ãƒˆãƒ«ã€å‡ºåŠ›ï¼šå½¢æ…‹ç´ ã®ãƒªã‚¹ãƒˆã¨ãªã‚‹é–¢æ•°&lt;code&gt;tokenizer_sudachi&lt;/code&gt;ã‚’å®šç¾©ã—ã€ãã‚Œã‚’&lt;code&gt;sklearn.feature_extraction.CountVectorizer&lt;/code&gt;ã®å¼•æ•°&lt;code&gt;analyzer&lt;/code&gt;ã«æ¸¡ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; tokenizer
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; dictionary
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.feature_extraction.text &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; CountVectorizer

tokenizer_obj &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dictionary&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dictionary()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;create()
mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;A
tokenizer_sudachi &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; t: [m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(t, mode)]

vectorizer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; CountVectorizer(analyzer&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;tokenizer_sudachi)
counts &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; vectorizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fit_transform(corpus)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;counts&lt;/code&gt;ã¯ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºÃ—å‡ºç¾å˜èªç·æ•°ã¨ãªã‚‹&lt;code&gt;sparse matrix&lt;/code&gt;ã§ã€ã“ã‚ŒãŒãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã®å…¥åŠ›å¤‰æ•°ã¨ãªã‚Šã¾ã™ã€‚&lt;br&gt;
å…¥åŠ›&lt;code&gt;counts&lt;/code&gt;ã¨å‡ºåŠ›&lt;code&gt;labels&lt;/code&gt;ãŒæº–å‚™ã§ããŸã®ã§ã€&lt;code&gt;sklearn.model_selection.train_test_split&lt;/code&gt;ã‚’ä½¿ã£ã¦å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã«ãƒ©ãƒ³ãƒ€ãƒ ã«åˆ†å‰²ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.model_selection &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; train_test_split

X_train, X_test, y_train, y_test &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; train_test_split(counts, labels, test_size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;, random_state&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;42&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‰å›ã®è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã§ã¯ã‚µãƒ³ãƒ—ãƒ«å…¨ä½“ã‚’ç”¨ã„ã¦äºˆæ¸¬ã‚’è¡Œã„ã¾ã—ãŸã€‚ãã‚Œã¯è¾æ›¸ã«å«ã¾ã‚Œã‚‹æ¥µæ€§ã‚¹ã‚³ã‚¢ãŒæ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚‚ã¨ã«ä½œæˆã—ãŸã‚‚ã®ã§ã¯ãªãã€éå­¦ç¿’ã—ãªã„ãŸã‚ã§ã™ã€‚ãŸã ã€ä»Šå›ã®ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã¯ãã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å­¦ç¿’ã‚’è¡Œã†æ•™å¸«ã‚ã‚Šå­¦ç¿’ã®ãŸã‚ã€ãã®æ€§èƒ½ã‚’é©åˆ‡ã«è©•ä¾¡ã™ã‚‹ãŸã‚ã«ã¯å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ä»¥å¤–ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œè¨¼ç”¨ã«æ®‹ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚&lt;br&gt;
ã„ã‚ˆã„ã‚ˆã€å­¦ç¿’ãƒ‘ãƒ¼ãƒˆã«å…¥ã‚Šã¾ã™ã€‚å­¦ç¿’ã«ã¯&lt;code&gt;sklearn.naive_bayes.MultinomialNB&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã¯å‰ç¯€ã§èª¬æ˜ã—ãŸ(6)ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¨è¨ˆã‚’è¡Œã„ã€äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã™ã‚‹ã‚¯ãƒ©ã‚¹ã¨ãªã£ã¦ã„ã¾ã™ã€‚å¼•æ•°ã¨ã—ã¦&lt;code&gt;alpha&lt;/code&gt;ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯äº‹å‰åˆ†å¸ƒã§ã‚ã‚‹ãƒ‡ã‚£ãƒªã‚¯ãƒ¬åˆ†å¸ƒã®$\alpha$ã§ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ã‚ã‚‹1ã‚’æŒ‡å®šã™ã‚‹ã¨ã€åŠ ç®—ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã¨ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.naive_bayes &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; MultinomialNB
clf &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; MultinomialNB(alpha&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;clf&lt;/code&gt;ã¨ã—ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
ã§ã¯ã€&lt;code&gt;fit()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã¦ã€å­¦ç¿’ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;clf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fit(X_train, y_train)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## MultinomialNB()
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å­¦ç¿’ãŒå®Œäº†ã—ã¾ã—ãŸã€‚&lt;code&gt;score()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹æ­£è§£ç‡ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;clf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;score(X_train, y_train)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.874935083329399
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ãŠã‚ˆã87.5%ã¨ã„ã†ã“ã¨ã§ã€é«˜ã„æ­£è§£ç‡ã‚’å¾—ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚&lt;br&gt;
ãŸã ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦éå­¦ç¿’ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã®ç²¾åº¦ã‚‚ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®äºˆæ¸¬å€¤ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã«ã¯&lt;code&gt;predict&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;y_pred &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; clf&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;predict(X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«ã€æ··åŒè¡Œåˆ—(ConfusionMatrix)ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã¯åˆ†é¡ãƒ¢ãƒ‡ãƒ«ã®æ€§èƒ½ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã‚‚ã®ã§ã€æ¨ªè»¸ã«äºˆæ¸¬å€¤ã€ç¸¦è»¸ã«å®Ÿéš›ã®å€¤ã‚’ã¨ã‚Šã€(1,1)ã¨(2,2)è¦ç´ ã«å¤šãã‚µãƒ³ãƒ—ãƒ«ãŒé›†ã¾ã‚‹ã»ã©æ­£ã—ã„äºˆæ¸¬ãŒã§ãã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.metrics &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; classification_report, confusion_matrix, ConfusionMatrixDisplay
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt

ConfusionMatrixDisplay(confusion_matrix(y_test, y_pred))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;plot()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;sklearn.metrics._plot.confusion_matrix.ConfusionMatrixDisplay object at 0x000000000EC7CA48&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post28/index_files/figure-html/unnamed-chunk-12-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ãŸã¾ã«ã€æ­£è§£ç‡ãŒé«˜ãã¦ã‚‚ã»ã¨ã‚“ã©0ã‚’äºˆæ¸¬ã™ã‚‹ã ã‘ã®ãƒ¢ãƒ‡ãƒ«ã«ãªã£ã¦ãŠã‚Šã€æ­£è§£ãƒ‡ãƒ¼ã‚¿ã‚‚0ãŒå¤šã„ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ãŸã‚ã€è¦‹ã‹ã‘ä¸Šä¸Šæ‰‹ãåˆ†é¡ã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã«é™ã£ã¦ã¯ã—ã£ã‹ã‚Šã¨è­˜åˆ¥ã§ãã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚æ­£ä¾‹ã‚ˆã‚Šã‚‚è² ä¾‹ã®äºˆæ¸¬ç²¾åº¦ãŒé«˜ã„ã‚ˆã†ã§ã™ã€‚å˜ç´”ã«è² ä¾‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã„ã®ãŒåŸå› ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ã€‚&lt;br&gt;
æœ€å¾Œã«ã€æ€§èƒ½è©•ä¾¡ã®ãŸã‚ã®åˆ†é¡æŒ‡æ¨™ã‚’è¨˜è¼‰ã—ã¾ã™ã€‚å„æŒ‡æ¨™ã®æ„å‘³ã¯ã“ã“ã§ã¯èª¬æ˜ã—ã¾ã›ã‚“ãŒã€æ­£è§£ç‡ã¯å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨å¤‰ã‚ã‚‰ãšã€éå­¦ç¿’ã¯ã—ã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(classification_report(y_test, y_pred))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##               precision    recall  f1-score   support
## 
##            0       0.87      0.88      0.87     13223
##            1       0.79      0.78      0.78      7958
## 
##     accuracy                           0.84     21181
##    macro avg       0.83      0.83      0.83     21181
## weighted avg       0.84      0.84      0.84     21181
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;3-çµ‚ã‚ã‚Šã«&#34;&gt;3. çµ‚ã‚ã‚Šã«&lt;/h3&gt;
&lt;p&gt;ã“ã®postã§ã¯ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã‚’ç”¨ã„ãŸã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆæƒ…å ±ã®æŠ½å‡ºãªã‚‰ã³ã«æ–‡æ›¸åˆ†é¡å•é¡Œã®å®Ÿè·µã‚’è¡Œã„ã¾ã—ãŸã€‚
&lt;code&gt;sklearn.naive_bayes.MultinomialNB&lt;/code&gt;ã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã‚Œã°ã€æ¯”è¼ƒçš„å®¹æ˜“ã«åˆ†æã‚’è¡Œã†ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ç²¾åº¦ã‚‚é«˜ãã€æ•™å¸«ã‚ã‚Šå­¦ç¿’ã®å¨åŠ›ã‚’æ€ã„çŸ¥ã‚Šã¾ã—ãŸã€‚ã„ããªã‚Šæ·±å±¤å­¦ç¿’ã‚’è¡Œã†ã®ã§ã¯ãªãã€ã¾ãšã¯ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã‹ã‚‰é–‹å§‹ã™ã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚&lt;br&gt;
æ¬¡å›ã¯ã€æº–æ•™å¸«ã‚ã‚Šå­¦ç¿’ã§ã‚ã‚‹å˜èªåŸ‹ã‚è¾¼ã¿(Word Embedding)ã‚’ç”¨ã„ãŸæ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ã€å¾¹åº•æ¯”è¼ƒã€‘ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºæ‰‹æ³•ï¼ï¼ - ç¬¬2å›</title>
      <link>/post/post27/</link>
      <pubDate>Thu, 24 Mar 2022 00:00:00 +0000</pubDate>
      <guid>/post/post27/</guid>
      <description>&lt;script src=&#34;../../post/post27/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post27/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post27/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post27/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../post/post27/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post27/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post27/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post27/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../post/post27/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post27/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post27/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post27/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºä¼ç”»ã®ç¬¬2å¼¾ã§ã™ã€‚
ä»Šå›ã¯è¾æ›¸ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºæ–¹æ³•ã‚’å®Ÿè·µã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-åˆ†ææ‰‹æ³•ã®èª¬æ˜&#34;&gt;1. åˆ†ææ‰‹æ³•ã®èª¬æ˜&lt;/h2&gt;
&lt;h3 id=&#34;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã¨ã¯&#34;&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã¨ã¯&lt;/h3&gt;
&lt;p&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã¯ãã®åã®é€šã‚Šã€è¾æ›¸ã‚’ç”¨ã„ã¦ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã™ã‚‹æ‰‹æ³•ã§ã™ã€‚å„å˜èªãŒæŒã¤æ„Ÿæƒ…æ¥µæ€§(ã“ã“ã§ã¯ã€ãƒã‚¸ãƒ†ã‚£ãƒ–ãªæ„å‘³ã‹ãƒã‚¬ãƒ†ã‚£ãƒ–ãªæ„å‘³ã‹ã‚’è¡¨ã™)ã‚’ã‚¹ã‚³ã‚¢åŒ–ã—ãŸã‚‚ã®ã‚’ã‚ã‚‰ã‹ã˜ã‚è¾æ›¸ã¨ã—ã¦ä¿å­˜ã—ã€æ–‡æ›¸å†…ã§å‡ºç¾ã—ãŸå˜èªã¨ãã‚Œãã‚Œã®è¾æ›¸ã‚¹ã‚³ã‚¢ã‚’ç´ä»˜ã‘ã€(ä½•ã‚‰ã‹ã®æ–¹æ³•ã§)é›†è¨ˆã™ã‚‹ã“ã¨ã§ã€ãã®æ–‡æ›¸å…¨ä½“ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’å‚ç…§ã™ã‚‹è¾æ›¸&#34;&gt;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’å‚ç…§ã™ã‚‹è¾æ›¸&lt;/h3&gt;
&lt;p&gt;ä¸Šè¨˜ã«ãŠã„ã¦ã¯ã€ã‚¹ã‚³ã‚¢ã‚’ã©ã®ã‚ˆã†ã«ç®—å‡ºã™ã‚‹ã®ã‹ãŒé‡è¦ã«ãªã‚Šã¾ã™ã€‚ç¾åœ¨å…¬é–‹ã•ã‚Œã¦ã„ã‚‹æ—¥æœ¬èªè¾æ›¸ã®ä¸­ã§æœ‰åãªæ±äº¬å·¥æ¥­å¤§å­¦ã®é«˜æ‘ç ”ç©¶å®¤ãŒä½œæˆã—ãŸè¾æ›¸(Takamura, Inui, and Okumura 2005)ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ã§ç®—å‡ºã‚’è¡Œã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™(&lt;a href=&#34;http://lr-www.pi.titech.ac.jp/wp/?page_id=4&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸå…¸ã¯ã“ã¡ã‚‰&lt;/a&gt;)ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ã¾ãšï¼Œè¾æ›¸ï¼Œã‚·ã‚½ãƒ¼ãƒ©ã‚¹ï¼ˆé¡ç¾©èªè¾å…¸ï¼‰ï¼Œã‚³ãƒ¼ãƒ‘ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ï¼Œæ¥µæ€§ãŒåŒã˜ã«ãªã‚Šã‚„ã™ã„å˜èªãƒšã‚¢ã‚’æŠ½å‡ºã—ï¼Œãã—ã¦ãã‚Œã‚‰ã®ãƒšã‚¢ã‚’é€£çµã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šå·¨å¤§ãªèªå½™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’æ§‹ç¯‰ã—ã¾ã™ï¼ãŸã¨ãˆã°ï¼Œã€Œè‰¯ã„ã€ã¨ã€Œè‰¯å¥½ã€ãŒé¡ç¾©èªé–¢ä¿‚ã«ã‚ã‚‹ã®ã§ï¼Œã“ã®äºŒå˜èªã‚’çµã¶ãªã©ã®ä½œæ¥­ã‚’è¡Œã„ã¾ã™ï¼ã“ã“ã§ï¼Œå˜èªã®æ„Ÿæƒ…æ¥µæ€§ã‚’é›»å­ã‚¹ãƒ”ãƒ³ã®æ–¹å‘ã¨ã¿ãªã—ï¼Œèªå½™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ã‚¹ãƒ”ãƒ³ç³»ã¨ã¿ãªã—ã¦ï¼Œèªå½™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®çŠ¶æ…‹ï¼ˆå„ã‚¹ãƒ”ãƒ³ãŒã©ã®æ–¹å‘ã‚’å‘ã„ã¦ã„ã‚‹ã‹ï¼‰ã‚’è¨ˆç®—ã—ã¾ã™ï¼ã“ã®è¨ˆç®—çµæœã‚’è¦‹ã‚‹ã“ã¨ã«ã‚ˆã‚Šï¼Œå˜èªã®æ„Ÿæƒ…æ¥µæ€§ãŒã‚ã‹ã‚‹ã®ã§ã™ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã“ã¡ã‚‰ã®è¾æ›¸ã¯HPã§å…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€éå–¶åˆ©ç›®çš„ã§ã‚ã‚Œã°åˆ©ç”¨ãŒå¯èƒ½ã®ã‚ˆã†ã§ã™ã€‚ã¡ã‚‡ã£ã¨è¦—ã„ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;##       å˜èª èª­ã¿ä»®å   å“è© æ„Ÿæƒ…æ¥µæ€§ã‚¹ã‚³ã‚¢
## 1   å„ªã‚Œã‚‹ ã™ãã‚Œã‚‹   å‹•è©       1.000000
## 2     è‰¯ã„     ã‚ˆã„ å½¢å®¹è©       0.999995
## 3     å–œã¶ ã‚ˆã‚ã“ã¶   å‹•è©       0.999979
## 4   è¤’ã‚ã‚‹   ã»ã‚ã‚‹   å‹•è©       0.999979
## 5 ã‚ã§ãŸã„ ã‚ã§ãŸã„ å½¢å®¹è©       0.999645
## 6     è³¢ã„ ã‹ã—ã“ã„ å½¢å®¹è©       0.999486
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã¯1ã‹ã‚‰-1ã¾ã§ã‚’å–ã‚Šã€1ã«è¿‘ã„ã»ã©ãƒã‚¸ãƒ†ã‚£ãƒ–ã‚’è¡¨ã—ã¾ã™ã€‚æœ€ã‚‚ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå˜èªã¯ã€Œå„ªã‚Œã‚‹ã€ã¨ãªã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã®åˆ©ç‚¹æ¬ ç‚¹&#34;&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã®åˆ©ç‚¹ãƒ»æ¬ ç‚¹&lt;/h3&gt;
&lt;p&gt;&amp;lt;åˆ©ç‚¹&amp;gt;æ‰‹æ³•ã®ã‚ã‹ã‚Šã‚„ã™ã•/æ•™å¸«ãƒ‡ãƒ¼ã‚¿ãŒä¸è¦ğŸ‘&lt;br&gt;
è¾æ›¸ã‚’åˆ©ç”¨ã™ã‚‹è‰¯ã„ç‚¹ã¯ã€æ‰‹æ³•ã®ã‚ã‹ã‚Šã‚„ã™ã•ã¨æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã‚’å¿…è¦ã¨ã—ãªã„ç‚¹ã§ã™ã€‚ç‰¹ã«å¾Œè€…ã¯è¾æ›¸ãƒ™ãƒ¼ã‚¹ãªã‚‰ã§ã¯ã®é•·æ‰€ã§ã™ã€‚é€šå¸¸ã€æ–‡æ›¸åˆ†é¡å™¨ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã¯ã€ãã®æ–‡æ›¸ãŒãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ»ãƒã‚¬ãƒ†ã‚£ãƒ–ã®ã©ã¡ã‚‰ã§ã‚ã‚‹ã‹ã¨ã„ã†æ­£è§£ãƒ©ãƒ™ãƒ«ã®ä»˜ã„ãŸæ•™å¸«ãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦ã§ã™ã€‚å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã¯æ–‡è„ˆã«ã‚‚ã‚ˆã‚‹ã¨æ€ã„ã¾ã™ãŒã€å°‘ãªãã¨ã‚‚100ä»¶ã¯å¿…è¦ã§ã—ã‚‡ã†ã€‚ã“ã‚Œã¯åˆ†æè€…ãŒå°‘ãªãã¨ã‚‚100ä»¶ä»¥ä¸Šã®æ–‡æ›¸ã‚’èª­ã‚“ã§ã€æ‰‹ä½œæ¥­ã§ãƒ©ãƒ™ãƒ«ã‚’ä»˜ä¸ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&amp;lt;æ¬ ç‚¹&amp;gt;è¾æ›¸ã®æ€§èƒ½ã«çµæœãŒå¤§ããä¾å­˜ã™ã‚‹ğŸ‘&lt;br&gt;
çŸ­æ‰€ã¨ã—ã¦ã¯ã€ç‰¹æ®Šãªæ–‡è„ˆã«ãŠã‘ã‚‹ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’å‚é›†ã™ã‚‹å ´åˆã¯å°‚ç”¨ã®è¾æ›¸ãŒå¿…è¦ã«ãªã‚‹ã¨ã„ã†ç‚¹ã§ã™ã€‚è¾æ›¸ãƒ™ãƒ¼ã‚¹ã®åˆ†é¡æ³•ã®å ´åˆã€è¾æ›¸ã«å«ã¾ã‚Œãªã„å˜èªã¯ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã¸å½±éŸ¿ã‚’å…¨ãä¸ãˆã¾ã›ã‚“ã€‚ã¾ãŸã€ä¸€èˆ¬ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹è¾æ›¸ã¯wikipediaç­‰ã®ã‚ªãƒ¼ãƒ«ã‚¸ãƒ£ãƒ³ãƒ«ã®æ–‡æ›¸ã‚’å­¦ç¿’ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã€æ„Ÿæƒ…æ¥µæ€§ãŒæ–‡è„ˆã«å¯¾ã—ã¦ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚ˆã£ã¦ã€ä¾‹ãˆã°é‡‘èç­‰ã®æ–‡è„ˆã«ãŠã‘ã‚‹ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã™ã‚‹å ´åˆã€å°‚é–€ç”¨èªã®æ„Ÿæ€§æ¥µæ€§ãŒ0ã¨ãªã£ãŸã‚Šã€æ–‡è„ˆã‚’è€ƒæ…®ã—ãŸæ„Ÿæ€§æ¥µæ€§ãŒå¾—ã‚‰ã‚Œãªã„ã“ã¨ã‹ã‚‰ã€ç›´æ„Ÿã¨ç•°ãªã‚‹çµæœãŒå‡ºã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã®å®Ÿè·µ&#34;&gt;2. è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã®å®Ÿè·µ&lt;/h2&gt;
&lt;h3 id=&#34;ä½¿ç”¨ãƒ‡ãƒ¼ã‚¿&#34;&gt;ä½¿ç”¨ãƒ‡ãƒ¼ã‚¿&lt;/h3&gt;
&lt;p&gt;ã§ã¯ã€å®Ÿéš›ã«è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã‚’ç”¨ã„ã¦ã€æ™¯æ°—ã‚¦ã‚©ãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã®æ–‡ç« ã‹ã‚‰ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã®æŠ½å‡ºã‚’è©¦ã¿ã¾ã™ã€‚æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã§ã¯ã€ã‚¿ã‚¯ã‚·ãƒ¼é‹è»¢æ‰‹ã‚„å°å£²åº—ã®åº—ä¸»ã€æ—…é¤¨ã®çµŒå–¶è€…ãªã©æ™¯æ°—ã«æ•æ„Ÿãªæ–¹ã€…(æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼)ã«å¯¾ã—ã¦ã€5æ®µéšã®æ™¯æ³æ„Ÿã¨ãã®ç†ç”±ã‚’æ¯æœˆã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚5æ®µéšã¯ã€ã€Œè‰¯ã„(â—)ã€ã€ã€Œã‚„ã‚„è‰¯ã„(â—‹)ã€ã€ã€Œå¤‰ã‚ã‚‰ãªã„(â– )ã€ã€ã€Œã‚„ã‚„æ‚ªã„(â–²)ã€ã€ã€Œæ‚ªã„(Ã—)ã€ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã‚’è¦—ã„ã¦ã¿ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
åŸºæº–å¹´
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
åŸºæº–æ—¥
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
æ¥­ç¨®ãƒ»è·ç¨®
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
åˆ¤æ–­ã®ç†ç”±
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ—…è¡Œä»£ç†åº—ï¼ˆå¾“æ¥­å“¡ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
è²©å£²é‡ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»åº—é ­ã®å–æ‰±é¡ãŒå‰å¹´æ¯”ç´„120ï¼…ã¨å¥½èª¿ã§ã‚ã£ãŸã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
è¦³å…‰åæ‰€ï¼ˆå¾“æ¥­å“¡ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ¥å®¢æ•°ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å½“æ–½è¨­ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã¯ï¼‘æœˆ26æ—¥æ™‚ç‚¹ã§å‰å¹´æ¯”130.1ï¼…ã¨ãªã£ã¦ãŠã‚Šã€ï¼‘æœˆã¨ã—ã¦ã¯éå»æœ€é«˜ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã«ãªã‚‹ã“ã¨ãŒç¢ºå®šã—ãŸã»ã©ã®å…¥è¾¼çŠ¶æ³ã«ã‚ã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ä¸€èˆ¬å°å£²åº—ï¼»é…’ï¼½ï¼ˆçµŒå–¶è€…ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
å˜ä¾¡ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å¹´æœ«ã®æ¶ˆè²»ã®åå‹•ã‚‚ã‚ã£ã¦ã‹ã€å®¢ã®å‹•ããŒã‚„ã‚„éˆã„ã€‚ãŸã ã€ç›¸å¤‰ã‚ã‚‰ãšé«˜é¡å•†æãŒå£²ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€å£²ä¸Šã¯ãã‚Œãªã‚Šã®é‡‘é¡ã‚’ã‚­ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆå£²å ´ä¸»ä»»ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãŠå®¢æ§˜ã®æ§˜å­
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å¤–å›½äººè¦³å…‰å®¢ã«ã‚ˆã‚‹å£²ä¸ŠãŒå‰å¹´æ¯”152ï¼…ã¨å¥½èª¿ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ã»ã‹ã€æ¥å®¢æ•°ãŒå‰å¹´æ¯”102ï¼…ã¨å¥½èª¿ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚æœˆåŠã°ã«åœæ»ã—ãŸå£²ä¸Šã‚‚ä¸‹æ—¬ã«å…¥ã£ã¦ã‹ã‚‰å›å¾©å‚¾å‘ã«ã‚ã‚Šã€å®šä¾¡å“ã€ãƒãƒ¼ã‚²ãƒ³å“ã¨ã‚‚å‰å¹´ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆæ‹…å½“è€…ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ¥å®¢æ•°ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»ç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã«ã‚ã‚‹ã¨ã¾ã§ã¯ã„ã„ã¥ã‚‰ã„ã‚‚ã®ã®ã€ï¼“ã‹æœˆå‰ã¨ã®æ¯”è¼ƒã§ã¯æ”¹å–„ã—ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆè²©å£²ä¿ƒé€²æ‹…å½“ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãã‚Œä»¥å¤–
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»æ°—æ¸©ãŒå¹³å¹´ä¸¦ã¿ã¨ãªã‚Šã€ã“ã‚Œã¾ã§ã®æ¸©æš–ã€å°‘é›ªã®çŠ¶æ…‹ãŒã¿ã‚‰ã‚Œãªããªã£ã¦ããŸã“ã¨ã§ã€é˜²å¯’è¡£æ–™ã€é›‘è²¨å•†æã‚’ä¸­å¿ƒã«å¤šå°‘æ”¹å–„ã®å‚¾å‘ãŒã¿ã‚‰ã‚Œã‚‹ã€‚
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã€Œæ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã€ãŒæ™¯æ³æ„Ÿã‚’è¡¨ã—ã¦ãŠã‚Šã€ãã®åˆ¤æ–­ã®ç†ç”±ãŒã€Œè¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ã€ã«ã‚ã‚‹å½¢ã§ã™ã€‚ã‚ˆã£ã¦ã€å‰è€…ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã€å¾Œè€…ã‚’èª¬æ˜ãƒ‡ãƒ¼ã‚¿ã¨ã™ã‚‹æ•™å¸«ã‚ã‚Šå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã®æŠ½å‡º&#34;&gt;ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã®æŠ½å‡º&lt;/h3&gt;
&lt;p&gt;ã§ã¯ã€å®Ÿè·µã§ã™ã€‚&lt;code&gt;quanteda&lt;/code&gt;ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã‚‹ãŸã‚ã€&lt;code&gt;R&lt;/code&gt;ã§è¡Œã£ã¦ã„ãã¾ã™ã€‚&lt;br&gt;
ã¾ãšã€å‰å‡¦ç†ã§ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;filepath &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(C:\Users\hogehoge\Watcher\RawData)&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(magrittr)
files &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(filepath, &lt;span style=&#34;color:#a6e22e&#34;&gt;list.files&lt;/span&gt;(filepath, pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*.csv&amp;#34;&lt;/span&gt;))
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_csv&lt;/span&gt;(files,locale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;locale&lt;/span&gt;(encoding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Shift-JIS&amp;#34;&lt;/span&gt;),show_col_types &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample[sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;âˆ’&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼Š&amp;#34;&lt;/span&gt;,]
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample[sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–¡&amp;#34;&lt;/span&gt;,]
sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;factor&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­, levels&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â—&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â—‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–²&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Ã—&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«ã€&lt;code&gt;sudachi&lt;/code&gt;ã‚’ç”¨ã„ã¦ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®TokenåŒ–ã‚’è¡Œã„ã¾ã™ã€‚&lt;code&gt;R&lt;/code&gt;ã«ã¯&lt;code&gt;sudachi&lt;/code&gt;ã‚’ä½¿ãˆã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå­˜åœ¨ã—ãªã„ã®ã§ã€Pythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®&lt;code&gt;sudachipy&lt;/code&gt;ã‚’&lt;code&gt;reticulate&lt;/code&gt;ã§å‘¼ã³å‡ºã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;stopwords_path &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(C:\Users\hogehoge\Watcher\marimo-master\yaml\stopwords_ja.yml)&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# sudachiã«ã‚ˆã‚‹å½¢æ…‹ç´ è§£æâ†’TokenåŒ–&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;# stopwordsã¯marimoã‚’ä½¿ç”¨&lt;/span&gt;
ja_stopwords &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dictionary&lt;/span&gt;(yaml&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_yaml&lt;/span&gt;(stopwords_path))
&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚³ãƒ¼ãƒ‘ã‚¹ç”Ÿæˆ&lt;/span&gt;
corp &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;corpus&lt;/span&gt;(sample,text_field&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;# sudachipyå‘¼ã³å‡ºã—â†’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–&lt;/span&gt;
sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; reticulate&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;import&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sudachipy&amp;#34;&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;# æ­£è¦åŒ–é–¢æ•°å®šç¾©&lt;/span&gt;
sudachi_normalize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(tokens){
  res &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;()
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(tokens)&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)){
    res &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;append&lt;/span&gt;(res,tokens[i]&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;normalized_form&lt;/span&gt;())
  }
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(res)
}
&lt;span style=&#34;color:#75715e&#34;&gt;# tokenizeé–¢æ•°å®šç¾©&lt;/span&gt;
sudachi_tokenize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(sentence, mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;){
  tokenizer_obj &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sudachipy&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;dictionary&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Dictionary&lt;/span&gt;()&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;create&lt;/span&gt;()
  mode &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;switch&lt;/span&gt;(mode, 
                 &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sudachipy&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;A,
                 &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sudachipy&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;B,
                 &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sudachipy&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;C,
                 &lt;span style=&#34;color:#a6e22e&#34;&gt;stop&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Only Can Use A, B, C&amp;#34;&lt;/span&gt;))
  res &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; purrr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;map&lt;/span&gt;(sentence, &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sudachi_normalize&lt;/span&gt;(tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;tokenize&lt;/span&gt;(., mode)))
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;(res)
}

&lt;span style=&#34;color:#75715e&#34;&gt;# TokenåŒ–å®Ÿè¡Œ&lt;/span&gt;
toks_sent &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; corp &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
              &lt;span style=&#34;color:#a6e22e&#34;&gt;sudachi_tokenize&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
              quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.tokens&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
              quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;tokens_remove&lt;/span&gt;(ja_stopwords, padding &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’Tokenã«å†ä»˜ä¸&lt;/span&gt;
quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;docvars&lt;/span&gt;(toks_sent) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;docvars&lt;/span&gt;(corp)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã®&lt;code&gt;toks_sent&lt;/code&gt;ã‹ã‚‰æ–‡æ›¸è¡Œåˆ—ã‚’ç”Ÿæˆã—ã¾ã™ã€‚æ–‡æ›¸è¡Œåˆ—ã¨ã¯ã€å˜èªã¨æ–‡æ›¸ã®é–¢ä¿‚ã‚’è¡¨ã™è¡Œåˆ—ã§ã€å„è¡ŒãŒå˜èª(token)ã€å„åˆ—ãŒæ–‡æ›¸ã‚’è¡¨ã—ã€å„è¦ç´ ã¯æ–‡æ›¸ä¸­ã®å˜èªã®å‡ºç¾å›æ•°ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# æ–‡æ›¸è¡Œåˆ—ã®ç”Ÿæˆ&lt;/span&gt;
dfmt_sent &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; toks_sent &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
              quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
              quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm_remove&lt;/span&gt;(pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
              quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm_trim&lt;/span&gt;(min_termfreq &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ–‡æ›¸è¡Œåˆ—&lt;code&gt;dfmt_sent&lt;/code&gt;ã¨å„å˜èªã®ã‚¹ã‚³ã‚¢ãƒ™ã‚¯ãƒˆãƒ«ã®å†…ç©ã‚’å–ã‚Šã€æ–‡æ›¸ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å˜èªæ„Ÿæƒ…æ¥µæ€§å¯¾å¿œè¡¨&lt;/span&gt;
PNdict &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read.delim&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://www.lr.pi.titech.ac.jp/~takamura/pubs/pn_ja.dic&amp;#34;&lt;/span&gt;,header&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;,sep&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;:&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# è¾æ›¸ã®ä¸¦ã³ã«åˆã‚ã›ã¦æ–‡æ›¸è¡Œåˆ—ã®åˆ—ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã€‚&lt;/span&gt;
dfmt_sent_arranged &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm_match&lt;/span&gt;(dfmt_sent, PNdict&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;V1)

&lt;span style=&#34;color:#75715e&#34;&gt;# æ–‡æ›¸ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡º&lt;/span&gt;
n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unname&lt;/span&gt;(quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rowSums&lt;/span&gt;(dfmt_sent_arranged))
score_dict &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ifelse&lt;/span&gt;(n&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rowSums&lt;/span&gt;(dfmt_sent_arranged &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; PNdict&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;V4)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;n, &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;))
sample_with_score_dict &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(score_dict) 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æŠœãå‡ºã—ã¦ã€ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã‚’è¦³å¯Ÿã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample_with_score_dict &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  knitr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
åŸºæº–å¹´
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
åŸºæº–æ—¥
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
æ¥­ç¨®ãƒ»è·ç¨®
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
åˆ¤æ–­ã®ç†ç”±
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
score_dict
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ—…è¡Œä»£ç†åº—ï¼ˆå¾“æ¥­å“¡ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
è²©å£²é‡ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»åº—é ­ã®å–æ‰±é¡ãŒå‰å¹´æ¯”ç´„120ï¼…ã¨å¥½èª¿ã§ã‚ã£ãŸã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.1372119
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
è¦³å…‰åæ‰€ï¼ˆå¾“æ¥­å“¡ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ¥å®¢æ•°ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å½“æ–½è¨­ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã¯ï¼‘æœˆ26æ—¥æ™‚ç‚¹ã§å‰å¹´æ¯”130.1ï¼…ã¨ãªã£ã¦ãŠã‚Šã€ï¼‘æœˆã¨ã—ã¦ã¯éå»æœ€é«˜ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã«ãªã‚‹ã“ã¨ãŒç¢ºå®šã—ãŸã»ã©ã®å…¥è¾¼çŠ¶æ³ã«ã‚ã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.7233374
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ä¸€èˆ¬å°å£²åº—ï¼»é…’ï¼½ï¼ˆçµŒå–¶è€…ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
å˜ä¾¡ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å¹´æœ«ã®æ¶ˆè²»ã®åå‹•ã‚‚ã‚ã£ã¦ã‹ã€å®¢ã®å‹•ããŒã‚„ã‚„éˆã„ã€‚ãŸã ã€ç›¸å¤‰ã‚ã‚‰ãšé«˜é¡å•†æãŒå£²ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€å£²ä¸Šã¯ãã‚Œãªã‚Šã®é‡‘é¡ã‚’ã‚­ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.9988214
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆå£²å ´ä¸»ä»»ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãŠå®¢æ§˜ã®æ§˜å­
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å¤–å›½äººè¦³å…‰å®¢ã«ã‚ˆã‚‹å£²ä¸ŠãŒå‰å¹´æ¯”152ï¼…ã¨å¥½èª¿ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ã»ã‹ã€æ¥å®¢æ•°ãŒå‰å¹´æ¯”102ï¼…ã¨å¥½èª¿ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚æœˆåŠã°ã«åœæ»ã—ãŸå£²ä¸Šã‚‚ä¸‹æ—¬ã«å…¥ã£ã¦ã‹ã‚‰å›å¾©å‚¾å‘ã«ã‚ã‚Šã€å®šä¾¡å“ã€ãƒãƒ¼ã‚²ãƒ³å“ã¨ã‚‚å‰å¹´ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.1159495
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆæ‹…å½“è€…ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ¥å®¢æ•°ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»ç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã«ã‚ã‚‹ã¨ã¾ã§ã¯ã„ã„ã¥ã‚‰ã„ã‚‚ã®ã®ã€ï¼“ã‹æœˆå‰ã¨ã®æ¯”è¼ƒã§ã¯æ”¹å–„ã—ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
3.2269249
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆè²©å£²ä¿ƒé€²æ‹…å½“ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãã‚Œä»¥å¤–
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»æ°—æ¸©ãŒå¹³å¹´ä¸¦ã¿ã¨ãªã‚Šã€ã“ã‚Œã¾ã§ã®æ¸©æš–ã€å°‘é›ªã®çŠ¶æ…‹ãŒã¿ã‚‰ã‚Œãªããªã£ã¦ããŸã“ã¨ã§ã€é˜²å¯’è¡£æ–™ã€é›‘è²¨å•†æã‚’ä¸­å¿ƒã«å¤šå°‘æ”¹å–„ã®å‚¾å‘ãŒã¿ã‚‰ã‚Œã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.0416559
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;2è¡Œç›®ã®æ–‡ç« ã¯æ˜ã‚‰ã‹ã«ãƒã‚¸ãƒ†ã‚£ãƒ–ã§ã™ãŒã€ãªã«ãŒå½±éŸ¿ã—ãŸã®ã‹ãƒã‚¬ãƒ†ã‚£ãƒ–å¯„ã‚Šã®åˆ¤å®šã«ãªã£ã¦ã„ã¾ã™ã­ã€‚ã¾ãŸã€é¡•è‘—ãªã®ãŒ3è¡Œç›®ã§ã€Œéˆã„ã€ã¨ã„ã†å˜èªã«å¼•ã£å¼µã‚‰ã‚Œã€ãƒã‚¬ãƒ†ã‚£ãƒ–ãªã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚’æŠ½å‡ºã—ã‚„ã™ããªã£ã¦ã„ã¾ã™ã€‚ã“ã®æ–‡ç« ã®æœ¬æ„ã¯ã€ŒãŸã ãƒ»ãƒ»ãƒ»ã€ã¨ã„ã†é€†æ¥ä»¥é™ã®æ–‡ç« ã§ã™ãŒã€æ–‡è„ˆã‚„èªé †ãŒæ‰ãˆã‚‰ã‚Œãªã„ãŸã‚ã«æ­£ã—ã„æƒ…å ±ã‚’å¼•ãå‡ºã™ã“ã¨ãŒã§ãã¦ã„ã¾ã›ã‚“ã€‚5è¡Œç›®ã¯ã€Œç©æ¥µçš„ã€ã€ã€Œä¸Šå‘ãã€ã€ã€Œæ”¹å–„ã€ã¨ã„ã£ãŸå˜èªã‚’æ¤œçŸ¥ã—ã€ã‹ãªã‚Šãƒã‚¸ãƒ†ã‚£ãƒ–ãªã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆãŒã‚ã‚‹ã¨ã„ã†åˆ¤å®šã‚’ã—ã¦ã„ã¾ã™ãŒã€ã€Œç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã¨ã¯&lt;strong&gt;ã„ã„ã¥ã‚‰ã„&lt;/strong&gt;ã€ã¨ã„ã†ãƒã‚¬ãƒ†ã‚£ãƒ–ãªæ–‡è„ˆã‚’æ‰ãˆåˆ‡ã‚Œã¦ãŠã‚‰ãšã€éå¤§è©•ä¾¡ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# çµæœã®å¯è¦–åŒ–&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(ggplot2)
&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(sample_with_score_dict, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;score_dict)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_boxplot&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post27/index_files/figure-html/unnamed-chunk-13-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã€Œæ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã€æ¯ã«boxplotã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸãŒã€ã±ã£ã¨è¦‹ã¯ã‚ã¾ã‚Šå¤‰ã‚ã‚‰ãªã„çµæœã«ãªã‚Šã¾ã—ãŸã€‚
ã»ã‚“ã®å°‘ã—ç·©ã‚„ã‹ã«å³ä¸‹ãŒã‚Šã®ã‚ˆã†ãªæ°—ã‚‚ã—ã¾ã™ãŒã€æ–‡æ›¸åˆ†é¡å¯èƒ½ãªçµæœã§ã¯ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¿½åŠ æ¤œè¨¼tf-idfã‚’ç”¨ã„ãŸç®—å‡º&#34;&gt;(è¿½åŠ æ¤œè¨¼)tf-idfã‚’ç”¨ã„ãŸç®—å‡º&lt;/h3&gt;
&lt;p&gt;ä¸Šè¨˜ã®åˆ†æã§ã¯å˜èªã®å‡ºç¾å›æ•°ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸãŒã€tf-idfã‚’ç”¨ã„ãŸåˆ†æã‚‚è¡Œã†ã“ã¨ã«ã—ã¾ã™ã€‚tf-idfã¨ã¯ã€term frequency-inverse document frequencyã®ç•¥ã§ã€æƒ…å ±æ¤œç´¢ã‚„ãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ‹ãƒ³ã‚°ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹é‡ã¿ã®ã“ã¨ã§ã™ã€‚ã“ã®é‡ã¿ã¯ã€ã‚ã‚‹å˜èªãŒã‚³ãƒ¼ãƒ‘ã‚¹&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ã®ä¸­ã®æ–‡æ›¸ã«ã¨ã£ã¦ã©ã‚Œã ã‘é‡è¦ã‹ã‚’è©•ä¾¡ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã‚‹çµ±è¨ˆçš„å°ºåº¦ã§ã€ãã®ç‰¹å¾´é‡ã¯æ–‡æ›¸ä¸­ã®å˜èªã®å‡ºç¾å›æ•°ãŒå¢—åŠ ã™ã‚‹ã»ã©ä¸Šæ˜‡ã—ã¾ã™ãŒã€ã‚³ãƒ¼ãƒ‘ã‚¹ä¸­ã®å˜èªã®é »åº¦ã«ã‚ˆã£ã¦ç›¸æ®ºã•ã‚Œã¾ã™ã€‚ä¾‹ãˆã°ã€è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ã‚’åˆ†é¡ã™ã‚‹ã“ã¨ã‚’æ„å›³ã—ãŸé›»å­ãƒ¡ãƒ¼ãƒ«ã®ã‚³ãƒ¼ãƒ‘ã‚¹ã«ãŠã„ã¦ã€ã€ŒãŠçŸ¥ã‚‰ã›ã€ã‚„ã€Œãƒ‹ãƒ¥ãƒ¼ã‚¹ã€ãªã©ã¯å‡ºç¾é »åº¦ãŒé«˜ã„ä¸€æ–¹ã§ã©ã®æ–‡æ›¸ã«ã‚‚å‡ºç¾ã™ã‚‹ãŸã‚ã€è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ã‚’ç‰¹å®šã™ã‚‹ã¨ã„ã†ç‚¹ã«ãŠã„ã¦ã¯é‡è¦åº¦ã¯é«˜ãã‚ã‚Šã¾ã›ã‚“ã€‚ä¸€æ–¹ã§ã€ã€Œå½“é¸ã€ã‚„ã€Œä»Šã ã‘ï¼ã€ãªã©ã¯ã‚³ãƒ¼ãƒ‘ã‚¹ä¸Šã«ã¯ãã“ã¾ã§å‡ºç¾é »åº¦ãŒé«˜ããªã„å˜èªã§ã‚ã‚‹ã‚‚ã®ã®ã€è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«ã®æ–‡ç« ä¸­ã«ã¯é »åº¦ãŒé«˜ãå‡ºç¾ã™ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã¾ã™ã€‚tf-idfã§ã¯å¾Œè€…ã®å˜èªã®ç‰¹å¾´é‡ãŒé«˜ããªã‚‹ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;tf-idfã®è¨ˆç®—æ–¹æ³•ã¯tfã¨idfã«åˆ†ã‹ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;tf: Term frequency
å˜èªãŒæ–‡æ›¸ä¸­ã«ã©ã‚Œã ã‘é »ç¹ã«å‡ºç¾ã—ã¦ã„ã‚‹ã‹ã‚’æ¸¬å®šã™ã‚‹ã‚‚ã®ã€‚æ–‡æ›¸ã®é•·ã•ã¯ãã‚Œãã‚Œç•°ãªã‚‹ãŸã‚ã€é•·ã„æ–‡æ›¸ã§ã¯çŸ­ã„æ–‡æ›¸ã‚ˆã‚Šã¯ã‚‹ã‹ã«å¤šãã®ç”¨èªãŒå‡ºç¾ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ãã®ãŸã‚ã€æ­£è¦åŒ–ã®æ–¹æ³•ã¨ã—ã¦ã€å˜èªé »åº¦ã‚’æ–‡æ›¸ã®é•·ã•ï¼ˆæ–‡æ›¸å†…ã®å˜èªç·æ•°ï¼‰ã§å‰²ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$$
tf(t) = \frac{æ–‡ç« å†…ã®å˜èªtã®å‡ºç¾å›æ•°}{æ–‡ç« å†…ã®å˜èªç·æ•°}
$$&lt;/p&gt;
&lt;p&gt;-idf: Inverse Document Frequency
ã‚ã‚‹å˜èªãŒã‚³ãƒ¼ãƒ‘ã‚¹å†…ã§ã©ã®ç¨‹åº¦å¸Œå°‘ã§ã‚ã‚‹ã‹ã‚’æ¸¬å®šã™ã‚‹ã‚‚ã®ã€‚ã€Œã§ã™ã€ã€ã€Œã¯ã€ã€ã€ŒãŒã€ãªã©ã®é »å‡ºèªã‚’æ¸›ã‚‰ã—ã¦ã€å¸Œå°‘èªã‚’å¢—ã‚„ã™æ„å›³ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
idf(t) = \log(\frac{ã‚³ãƒ¼ãƒ‘ã‚¹å†…ã®æ–‡æ›¸ç·æ•°}{å˜èªtã‚’å«ã‚€æ–‡æ›¸æ•°})
$$&lt;/p&gt;
&lt;p&gt;&lt;code&gt;r&lt;/code&gt;ã§å®Ÿè£…ã—ã¦ã¿ã¾ã™ã€‚tf-idfã¯&lt;code&gt;quanteda::dfm_tfidf()&lt;/code&gt;ã§è¨ˆç®—ã§ãã¾ã™ã€‚å¼•æ•°ã«ã¯ã€æ–‡æ›¸è¡Œåˆ—ã‚’æ¸¡ã—ã¾ã™ã€‚ãã®ã»ã‹ã¯ä¸Šè¨˜ã®åˆ†æã¨åŒã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# tf-idfç‰ˆæ–‡æ›¸è¡Œåˆ—ã®ç”Ÿæˆ&lt;/span&gt;
dfmt_tfidf_sent &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dfmt_sent &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm_tfidf&lt;/span&gt;()

&lt;span style=&#34;color:#75715e&#34;&gt;# è¾æ›¸ã®ä¸¦ã³ã«åˆã‚ã›ã¦æ–‡æ›¸è¡Œåˆ—ã®åˆ—ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã€‚&lt;/span&gt;
dfmt_tfidf_sent_arranged &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;dfm_match&lt;/span&gt;(dfmt_tfidf_sent, PNdict&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;V1)

&lt;span style=&#34;color:#75715e&#34;&gt;# æ–‡æ›¸ã®ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡º&lt;/span&gt;
n &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;unname&lt;/span&gt;(quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rowSums&lt;/span&gt;(dfmt_tfidf_sent_arranged))
score_dict &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;scale&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ifelse&lt;/span&gt;(n&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, quanteda&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;rowSums&lt;/span&gt;(dfmt_tfidf_sent_arranged &lt;span style=&#34;color:#f92672&#34;&gt;%*%&lt;/span&gt; PNdict&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;V4)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;n, &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;))
sample_with_score_dict &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;cbind&lt;/span&gt;(score_dict)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…ˆã»ã©ã¨åŒã˜ã‚ˆã†ã«ã‚µãƒ³ãƒ—ãƒ«ã‚’æŠœãå‡ºã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample_with_score_dict &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  knitr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
åŸºæº–å¹´
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
åŸºæº–æ—¥
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
æ¥­ç¨®ãƒ»è·ç¨®
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
åˆ¤æ–­ã®ç†ç”±
&lt;/th&gt;
&lt;th style=&#34;text-align:left;&#34;&gt;
è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜
&lt;/th&gt;
&lt;th style=&#34;text-align:right;&#34;&gt;
score_dict
&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ—…è¡Œä»£ç†åº—ï¼ˆå¾“æ¥­å“¡ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
è²©å£²é‡ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»åº—é ­ã®å–æ‰±é¡ãŒå‰å¹´æ¯”ç´„120ï¼…ã¨å¥½èª¿ã§ã‚ã£ãŸã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.1641589
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
è¦³å…‰åæ‰€ï¼ˆå¾“æ¥­å“¡ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ¥å®¢æ•°ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å½“æ–½è¨­ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã¯ï¼‘æœˆ26æ—¥æ™‚ç‚¹ã§å‰å¹´æ¯”130.1ï¼…ã¨ãªã£ã¦ãŠã‚Šã€ï¼‘æœˆã¨ã—ã¦ã¯éå»æœ€é«˜ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã«ãªã‚‹ã“ã¨ãŒç¢ºå®šã—ãŸã»ã©ã®å…¥è¾¼çŠ¶æ³ã«ã‚ã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.0770581
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ä¸€èˆ¬å°å£²åº—ï¼»é…’ï¼½ï¼ˆçµŒå–¶è€…ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
å˜ä¾¡ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å¹´æœ«ã®æ¶ˆè²»ã®åå‹•ã‚‚ã‚ã£ã¦ã‹ã€å®¢ã®å‹•ããŒã‚„ã‚„éˆã„ã€‚ãŸã ã€ç›¸å¤‰ã‚ã‚‰ãšé«˜é¡å•†æãŒå£²ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€å£²ä¸Šã¯ãã‚Œãªã‚Šã®é‡‘é¡ã‚’ã‚­ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
-0.8631460
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆå£²å ´ä¸»ä»»ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãŠå®¢æ§˜ã®æ§˜å­
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»å¤–å›½äººè¦³å…‰å®¢ã«ã‚ˆã‚‹å£²ä¸ŠãŒå‰å¹´æ¯”152ï¼…ã¨å¥½èª¿ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ã»ã‹ã€æ¥å®¢æ•°ãŒå‰å¹´æ¯”102ï¼…ã¨å¥½èª¿ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚æœˆåŠã°ã«åœæ»ã—ãŸå£²ä¸Šã‚‚ä¸‹æ—¬ã«å…¥ã£ã¦ã‹ã‚‰å›å¾©å‚¾å‘ã«ã‚ã‚Šã€å®šä¾¡å“ã€ãƒãƒ¼ã‚²ãƒ³å“ã¨ã‚‚å‰å¹´ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
1.0510362
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆæ‹…å½“è€…ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
æ¥å®¢æ•°ã®å‹•ã
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»ç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã«ã‚ã‚‹ã¨ã¾ã§ã¯ã„ã„ã¥ã‚‰ã„ã‚‚ã®ã®ã€ï¼“ã‹æœˆå‰ã¨ã®æ¯”è¼ƒã§ã¯æ”¹å–„ã—ã¦ã„ã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2.3897946
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
2016
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
1æœˆ31æ—¥
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
â—‹
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ç™¾è²¨åº—ï¼ˆè²©å£²ä¿ƒé€²æ‹…å½“ï¼‰
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãã‚Œä»¥å¤–
&lt;/td&gt;
&lt;td style=&#34;text-align:left;&#34;&gt;
ãƒ»æ°—æ¸©ãŒå¹³å¹´ä¸¦ã¿ã¨ãªã‚Šã€ã“ã‚Œã¾ã§ã®æ¸©æš–ã€å°‘é›ªã®çŠ¶æ…‹ãŒã¿ã‚‰ã‚Œãªããªã£ã¦ããŸã“ã¨ã§ã€é˜²å¯’è¡£æ–™ã€é›‘è²¨å•†æã‚’ä¸­å¿ƒã«å¤šå°‘æ”¹å–„ã®å‚¾å‘ãŒã¿ã‚‰ã‚Œã‚‹ã€‚
&lt;/td&gt;
&lt;td style=&#34;text-align:right;&#34;&gt;
0.8152262
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å‚¾å‘ã¯å…ˆã»ã©ã®åˆ†æã¨ã•ã»ã©å¤‰ã‚ã‚‰ãªã„ã‚ˆã†ã«è¦‹å—ã‘ã‚‰ã‚Œã¾ã™ã€‚
boxplotã®çµæœã‚‚è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# çµæœã®å¯è¦–åŒ–&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(ggplot2)
&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(sample_with_score_dict, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;score_dict)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_boxplot&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post27/index_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;å³ä¸‹ãŒã‚Šã®å‚¾å‘ãŒå¼·ããªã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãŸã ã€ä¾ç„¶ã¨ã—ã¦æ™¯æ°—åˆ¤æ–­åˆ¥ã«è¦‹ãŸã‚¹ã‚³ã‚¢ã®åˆ†å¸ƒã¯å·®ãŒãªãã€æ–‡æ›¸åˆ†é¡ãŒã§ãã‚‹ç²¾åº¦ã§ã¯ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-çµ‚ã‚ã‚Šã«&#34;&gt;3. çµ‚ã‚ã‚Šã«&lt;/h2&gt;
&lt;p&gt;æœ€ã‚‚ç°¡æ˜“ãªæ‰‹æ³•ã¨ã„ã†ã“ã¨ã§äºˆæƒ³ã¯ã—ã¦ã„ã¾ã—ãŸãŒã€è¾æ›¸ãƒ™ãƒ¼ã‚¹æ‰‹æ³•ã§ã¯ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ã®æŠ½å‡ºã¯ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã¡ã‚ã‚“ã€ç§ã®ã‚„ã‚Šæ–¹ãŒæ‚ªã„ã®ãŒç†ç”±ã§ä¸Šæ‰‹ãã‚„ã‚Œã°æ–‡æ›¸ã®åˆ†é¡ã¯å¯èƒ½ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãŸã ã€çµŒæ¸ˆã«ç‰¹åŒ–ã—ãŸæ¥µæ€§è¾æ›¸ã‚’æº–å‚™ã—ãªã‘ã‚Œã°é›£ã—ã„ã®ã§ã¯ãªã„ã‹ã¨ã„ã†ã®ãŒã€ç§ã®æ„Ÿæƒ³ã§ã™ã€‚
æ¬¡ã¯ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨ã‚’ç”¨ã„ãŸæ–‡æ›¸åˆ†é¡ã«å–ã‚Šçµ„ã¿ã¾ã™ã€‚
ã“ã“ã¾ã§ã€èª­ã¿é€²ã‚ã¦é ‚ãã¾ã—ã¦ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚æ¬¡å›ã®è¨˜äº‹ã‚‚æœŸå¾…ã—ã¦ã„ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;div id=&#34;refs&#34; class=&#34;references csl-bib-body hanging-indent&#34;&gt;
&lt;div id=&#34;ref-takamura2005&#34; class=&#34;csl-entry&#34;&gt;
&lt;p&gt;Takamura, Hiroya, Takashi Inui, and Manabu Okumura. 2005. â€œThe 43rd Annual Meeting.â€ In. Association for Computational Linguistics. &lt;a href=&#34;https://doi.org/10.3115/1219840.1219857&#34;&gt;https://doi.org/10.3115/1219840.1219857&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;æ–‡ç« ã‚’æ§‹é€ åŒ–ã—å¤§è¦æ¨¡ã«é›†ç©ã—ãŸã‚‚ã® &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
    <item>
      <title>ã€å¾¹åº•æ¯”è¼ƒã€‘ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¹ã‚³ã‚¢ç®—å‡ºæ‰‹æ³•ï¼ï¼ - ç¬¬1å›</title>
      <link>/post/post25/</link>
      <pubDate>Mon, 21 Mar 2022 00:00:00 +0000</pubDate>
      <guid>/post/post25/</guid>
      <description>&lt;script src=&#34;../../post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;../../post/post25/index_files/kePrint/kePrint.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;../../post/post25/index_files/lightable/lightable.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;../../post/post25/index_files/bsTable/bootstrapTable.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;../../post/post25/index_files/bsTable/bootstrapTable.js&#34;&gt;&lt;/script&gt;
&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ãƒ†ã‚­ã‚¹ãƒˆè§£æã¯ãƒ‡ãƒ¼ã‚¿åˆ†æç•Œéšˆã§ã¯ã‚‚ã†ã‹ãªã‚Šå½“ãŸã‚Šå‰ã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚ãƒ†ã‚­ã‚¹ãƒˆã®æ„Ÿæ€§æƒ…å ±(ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ)ã‚’æŠ½å‡ºã™ã‚‹æ‰‹æ³•ã«ã¯ã€ã©ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã‹ã‚ã‚‹ã®ã‹èª¿ã¹ãŸã¨ã“ã‚ã‹ãªã‚Šæ™‚ä»£ã¯é€²ã‚“ã§ã„ã‚‹ã¨å®Ÿæ„Ÿã—ã¾ã—ãŸã€‚ã“ã‚Œã‚‰æ•°å›ã«ã‚ãŸã£ã¦ã€å®Ÿéš›ã«&lt;code&gt;R&lt;/code&gt;ã‚„&lt;code&gt;Python&lt;/code&gt;ã§ä½œæˆã—ãŸæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦ã‚’æ¯”è¼ƒã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ ä»Šå›ã¯ãã®ç¬¬ï¼‘å›ç›®ã¨ã„ã†ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚„å…¨ä½“æ„Ÿã®ãŠè©±ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-è§£ããŸã„å•é¡Œ&#34;&gt;1. è§£ããŸã„å•é¡Œ&lt;/h2&gt;
&lt;p&gt;ä»Šå›è§£ããŸã„å•é¡Œã¯ã€Œæ™¯æ³æ„Ÿã‚’è¡¨ã™æ–‡æ›¸è¡¨ç¾ã‚’å­¦ç¿’ã—ã€å®Ÿéš›ã®æ™¯æ°—åˆ¤æ–­ã‚’äºˆæ¸¬ã™ã‚‹ã€ã¨ã„ã†ã‚¿ã‚¹ã‚¯ã§ã™ã€‚ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã¯ã€å†…é–£åºœãŒå‡ºã—ã¦ã„ã‚‹æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã¨ã¯&#34;&gt;æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã¨ã¯&lt;/h3&gt;
&lt;p&gt;æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã¨ã¯ã€å†…é–£åºœãŒæœˆæ¬¡ã§å…¬è¡¨ã—ã¦ã„ã‚‹æ™¯æ°—å‹•å‘åˆ¤æ–­ã®ãŸã‚ã®çµ±è¨ˆæƒ…å ±ã§ã™ã€‚èª¿æŸ»ã®ç›®çš„ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™(&lt;a href=&#34;https://www5.cao.go.jp/keizai3/watcher/watcher_mokuteki.html#mokuteki&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å†…é–£åºœWebã‚µã‚¤ãƒˆ&lt;/a&gt;ã‚ˆã‚Š)ã€‚&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;&amp;lt;èª¿æŸ»ã®ç›®çš„&amp;gt;&lt;/dt&gt;
&lt;dd&gt;
&lt;p&gt;åœ°åŸŸã®æ™¯æ°—ã«é–¢é€£ã®æ·±ã„å‹•ãã‚’è¦³å¯Ÿã§ãã‚‹ç«‹å ´ã«ã‚ã‚‹äººã€…ã®å”åŠ›ã‚’å¾—ã¦ã€åœ°åŸŸã”ã¨ã®æ™¯æ°—å‹•å‘ã‚’çš„ç¢ºã‹ã¤è¿…é€Ÿã«æŠŠæ¡ã—ã€æ™¯æ°—å‹•å‘åˆ¤æ–­ã®åŸºç¤è³‡æ–™ã¨ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã™ã‚‹ã€‚&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;ã§ã¯ã€ã“ã®ã€Œåœ°åŸŸã®æ™¯æ°—ã«é–¢é€£ã®æ·±ã„å‹•ãã‚’è¦³å¯Ÿã§ãã‚‹ç«‹å ´ã«ã‚ã‚‹äººã€…ã€ã€ã€Œåœ°åŸŸã”ã¨ã®æ™¯æ°—å‹•å‘ã€ã€ã€Œçš„ç¢ºã‹ã¤è¿…é€Ÿã«ã€ã¨ã„ã†éƒ¨åˆ†ã«ã¤ã„ã¦å°‘ã—æ·±æ˜ã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;èª¿æŸ»ã®å¯¾è±¡ç¯„å›²&#34;&gt;èª¿æŸ»ã®å¯¾è±¡ç¯„å›²&lt;/h4&gt;
&lt;p&gt;èª¿æŸ»ã®å¯¾è±¡ç¯„å›²ã¯47éƒ½é“åºœçœŒã¨ãªã£ã¦ã„ã¾ã™ã€‚ã¾ãŸã€èª¿æŸ»å¯¾è±¡è€…ã¯ã€Œå®¶è¨ˆå‹•å‘ã€ä¼æ¥­å‹•å‘ã€é›‡ç”¨ç­‰ã€ä»£è¡¨çš„ãªçµŒæ¸ˆæ´»å‹•é …ç›®ã®å‹•å‘ã‚’æ•æ„Ÿã«åæ˜ ã™ã‚‹ç¾è±¡ã‚’è¦³å¯Ÿã§ãã‚‹æ¥­ç¨®ã®é©å½“ãªè·ç¨®ã®ä¸­ã‹ã‚‰é¸å®šã—ãŸ2,050äººã€ã¨ãªã£ã¦ãŠã‚Šã€ä¾‹ãˆã°å°å£²åº—ã‚„é£²é£Ÿåº—ã®åº—å“¡ãƒ»åº—é•·ã€ã‚¿ã‚¯ã‚·ãƒ¼é‹è»¢æ‰‹ã€è£½é€ æ¥­ãƒ»éè£½é€ æ¥­ä¼æ¥­ã®çµŒå–¶è€…ãƒ»å¾“æ¥­å“¡ã€äººææ´¾é£ä¼šç¤¾ç¤¾å“¡ãªã©ã‚’å¯¾è±¡ã«è¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;èª¿æŸ»æœŸæ—¥ãŠã‚ˆã³æœŸé–“&#34;&gt;èª¿æŸ»æœŸæ—¥ãŠã‚ˆã³æœŸé–“&lt;/h4&gt;
&lt;p&gt;èª¿æŸ»ã¯æœˆæ¬¡ã§è¡Œã‚ã‚Œã€æ¯æœˆ25æ—¥ã‹ã‚‰æœˆæœ«ã«ã‹ã‘ã¦å®Ÿæ–½ã•ã‚Œã¾ã™ã€‚å½“æœˆã®æ™¯æ³æ„Ÿã«ã¤ã„ã¦èª¿æŸ»ãŒè¡Œã‚ã‚Œã€ç¿Œæœˆã«å…¬è¡¨ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;èª¿æŸ»ã®å®Ÿæ–½æ–¹æ³•&#34;&gt;èª¿æŸ»ã®å®Ÿæ–½æ–¹æ³•&lt;/h4&gt;
&lt;p&gt;ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆèª¿æŸ»ã‚’é›»è©±ãƒ»Webã‚µã‚¤ãƒˆãƒ»é›»å­ãƒ¡ãƒ¼ãƒ«ã®ã„ãšã‚Œã‹ã§å›ç­”ã™ã‚‹ã“ã¨ã«ãªã£ã¦ã„ã¾ã™ã€‚è³ªå•é …ç›®ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™(&lt;a href=&#34;https://www5.cao.go.jp/keizai3/watcher/chousahyo.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;èª¿æŸ»ç¥¨&lt;/a&gt;)ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ™¯æ°—ã®ç¾çŠ¶ã«å¯¾ã™ã‚‹åˆ¤æ–­ï¼ˆæ–¹å‘æ€§ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;1.ã®ç†ç”±&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2.ã®è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜(è‡ªç”±è¨˜è¿°)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ™¯æ°—ã®å…ˆè¡Œãã«å¯¾ã™ã‚‹åˆ¤æ–­(æ–¹å‘æ€§)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(4)ã®ç†ç”±&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(å‚è€ƒ)æ™¯æ°—ã®ç¾çŠ¶ã«å¯¾ã™ã‚‹åˆ¤æ–­(æ°´æº–)&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ã”å‚è€ƒã¾ã§ã«2016å¹´1æœˆèª¿æŸ»ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ãŠè¦‹ã›ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;filePath &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(C:\Users\hogehoge\Watcher\RawData\watcher_2016.csv)&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(magrittr)
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_csv&lt;/span&gt;(filePath,locale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;locale&lt;/span&gt;(encoding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SHIFT-JIS&amp;#34;&lt;/span&gt;), show_col_types&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
&lt;span style=&#34;color:#a6e22e&#34;&gt;options&lt;/span&gt;(kableExtra.html.bsTable &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;)
knitr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(sample)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; åŸºæº–å¹´ &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; åŸºæº–æ—¥ &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; æ¥­ç¨®ãƒ»è·ç¨® &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; åˆ¤æ–­ã®ç†ç”± &lt;/th&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â— &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ—…è¡Œä»£ç†åº—ï¼ˆå¾“æ¥­å“¡ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è²©å£²é‡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»åº—é ­ã®å–æ‰±é¡ãŒå‰å¹´æ¯”ç´„120ï¼…ã¨å¥½èª¿ã§ã‚ã£ãŸã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â— &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è¦³å…‰åæ‰€ï¼ˆå¾“æ¥­å“¡ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ¥å®¢æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»å½“æ–½è¨­ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã¯ï¼‘æœˆ26æ—¥æ™‚ç‚¹ã§å‰å¹´æ¯”130.1ï¼…ã¨ãªã£ã¦ãŠã‚Šã€ï¼‘æœˆã¨ã—ã¦ã¯éå»æœ€é«˜ã®åˆ©ç”¨ä¹—é™å®¢æ•°ã«ãªã‚‹ã“ã¨ãŒç¢ºå®šã—ãŸã»ã©ã®å…¥è¾¼çŠ¶æ³ã«ã‚ã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ä¸€èˆ¬å°å£²åº—ï¼»é…’ï¼½ï¼ˆçµŒå–¶è€…ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å˜ä¾¡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»å¹´æœ«ã®æ¶ˆè²»ã®åå‹•ã‚‚ã‚ã£ã¦ã‹ã€å®¢ã®å‹•ããŒã‚„ã‚„éˆã„ã€‚ãŸã ã€ç›¸å¤‰ã‚ã‚‰ãšé«˜é¡å•†æãŒå£²ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‚Šã€å£²ä¸Šã¯ãã‚Œãªã‚Šã®é‡‘é¡ã‚’ã‚­ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç™¾è²¨åº—ï¼ˆå£²å ´ä¸»ä»»ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãŠå®¢æ§˜ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»å¤–å›½äººè¦³å…‰å®¢ã«ã‚ˆã‚‹å£²ä¸ŠãŒå‰å¹´æ¯”152ï¼…ã¨å¥½èª¿ã‚’ç¶™ç¶šã—ã¦ã„ã‚‹ã»ã‹ã€æ¥å®¢æ•°ãŒå‰å¹´æ¯”102ï¼…ã¨å¥½èª¿ã‚’ç¶­æŒã—ã¦ã„ã‚‹ã€‚æœˆåŠã°ã«åœæ»ã—ãŸå£²ä¸Šã‚‚ä¸‹æ—¬ã«å…¥ã£ã¦ã‹ã‚‰å›å¾©å‚¾å‘ã«ã‚ã‚Šã€å®šä¾¡å“ã€ãƒãƒ¼ã‚²ãƒ³å“ã¨ã‚‚å‰å¹´ã‚’ä¸Šå›ã£ã¦ã„ã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç™¾è²¨åº—ï¼ˆæ‹…å½“è€…ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ¥å®¢æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»ç©æ¥µçš„ã«æ™¯æ°—ãŒä¸Šå‘ãã«ã‚ã‚‹ã¨ã¾ã§ã¯ã„ã„ã¥ã‚‰ã„ã‚‚ã®ã®ã€ï¼“ã‹æœˆå‰ã¨ã®æ¯”è¼ƒã§ã¯æ”¹å–„ã—ã¦ã„ã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; 1æœˆ31æ—¥ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç™¾è²¨åº—ï¼ˆè²©å£²ä¿ƒé€²æ‹…å½“ï¼‰ &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãã‚Œä»¥å¤– &lt;/td&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãƒ»æ°—æ¸©ãŒå¹³å¹´ä¸¦ã¿ã¨ãªã‚Šã€ã“ã‚Œã¾ã§ã®æ¸©æš–ã€å°‘é›ªã®çŠ¶æ…‹ãŒã¿ã‚‰ã‚Œãªããªã£ã¦ããŸã“ã¨ã§ã€é˜²å¯’è¡£æ–™ã€é›‘è²¨å•†æã‚’ä¸­å¿ƒã«å¤šå°‘æ”¹å–„ã®å‚¾å‘ãŒã¿ã‚‰ã‚Œã‚‹ã€‚ &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;å•é¡Œè¨­å®š&#34;&gt;å•é¡Œè¨­å®š&lt;/h3&gt;
&lt;p&gt;ä»Šå›ã®å•é¡Œè¨­å®šã¯ã€ã€Œè¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ã€ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‚’ã‚‚ã¨ã«ã€ã€Œæ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã€ã‚’äºˆæ¸¬ã™ã‚‹ã‚¿ã‚¹ã‚¯ã«ãªã‚Šã¾ã™ã€‚
ã€Œæ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã€ã¯ã€Œè‰¯ã„(â—)ã€ã€ã€Œã‚„ã‚„è‰¯ã„(â—‹)ã€ã€ã€Œå¤‰ã‚ã‚‰ãªã„(â– )ã€ã€ã€Œã‚„ã‚„æ‚ªã„(â–²)ã€ã€ã€Œæ‚ªã„(Ã—)ã€ã¨ãªã£ã¦ãŠã‚Šã€ã“ã‚Œã‚’2å€¤åˆ†é¡å•é¡Œã«ã—ã¦å­¦ç¿’ã‚’è¡Œã„ã¾ã™(å¤‰ã‚ã‚‰ãªã„(â– )ã¯ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰é™¤å¤–)ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ãƒ†ã‚­ã‚¹ãƒˆè§£ææ‰‹æ³•ã®é€²åŒ–ã®è­œç³»&#34;&gt;2. ãƒ†ã‚­ã‚¹ãƒˆè§£ææ‰‹æ³•ã®é€²åŒ–ã®è­œç³»&lt;/h2&gt;
&lt;p&gt;ä¸Šè¨˜å•é¡Œè¨­å®šã‚’è§£ããŸã‚ã«ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‹ã‚‰æ„Ÿæ€§æƒ…å ±(ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆ)ã‚’æŠ½å‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç§ãŒèª¿ã¹ãŸæµ…ã„çŸ¥è­˜ã«ã‚ˆã‚‹ã¨ã€æ„Ÿæ€§æƒ…å ±ã®æŠ½å‡ºæ–¹æ³•ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ‰‹æ³•ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹&lt;/li&gt;
&lt;li&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨&lt;/li&gt;
&lt;li&gt;å˜èªåŸ‹ã‚è¾¼ã¿(Word Embedding)ã‚’ç”¨ã„ãŸæ–¹æ³•&lt;/li&gt;
&lt;li&gt;Recurrent neural network(RNN)&lt;/li&gt;
&lt;li&gt;Transformer&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ãŠãã‚‰ãã€ä¸‹ã«è¡Œãã«ã¤ã‚Œã¦ã‚ˆã‚Šæœ€æ–°ã®æ‰‹æ³•ã«ãªã£ã¦ãŠã‚Šã€ç²¾åº¦ã‚‚é«˜ã„ã®ã§ã¯ãªã„ã‹ã¨æ¨å¯Ÿã•ã‚Œã¾ã™ã€‚ ã¾ãŸã€1,2,3ã¯ã‚„ã‚Šæ–¹ã«ã‚‚ã‚ˆã‚‹ã‚“ã§ã—ã‚‡ã†ãŒæ–‡ç« ãŒä¸ãˆã‚‰ã‚ŒãŸéš›ã«ãã®èªé †é–¢ä¿‚ã‚’è€ƒæ…®ã—ã¾ã›ã‚“ã€‚ ä»Šå¾Œã€å„æ‰‹æ³•ã«ã¤ã„ã¦è§£æçµæœã®è¨˜äº‹ã‚’æŠ•ç¨¿ã™ã‚‹äºˆå®šã§ã™ã®ã§ã€è©³ã—ã„ä¸­èº«ã«ã¤ã„ã¦ã¯ãã‚Œãã‚Œã®å›ã§è§¦ã‚ŒãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æ¦‚è¦³&#34;&gt;3. ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æ¦‚è¦³&lt;/h2&gt;
&lt;h3 id=&#34;ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿&lt;/h3&gt;
&lt;p&gt;ä»Šå›ä½¿ç”¨ã™ã‚‹æ™¯æ°—ã‚¦ã‚ªãƒƒãƒãƒ£ãƒ¼èª¿æŸ»ã®ã‚µãƒ³ãƒ—ãƒ«ã¯2016å¹´~2020å¹´ã®ã‚‚ã®ã¨ãªã£ã¦ã„ã¾ã™ã€‚ç¾çŠ¶åˆ¤æ–­ã®èª¿æŸ»çµæœã‚’æ ¼ã®ã—ãŸcsvãƒ•ã‚¡ã‚¤ãƒ«(æ™¯æ°—åˆ¤æ–­ç†ç”±é›†)ã‚’æœˆã”ã¨ã«å†…é–£åºœã®Webãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€æ•´å½¢ã—ãŸã‚‚ã®ã‚’å¹´ã”ã¨ã«é€£çµã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;filepath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; r&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(C:\Users\hogehoge\Watcher\RawData)&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;files &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(filepath, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;list.files&lt;/span&gt;(filepath, pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*.csv&amp;#34;&lt;/span&gt;))
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_csv&lt;/span&gt;(files, locale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;locale&lt;/span&gt;(encoding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SHIFT-JIS&amp;#34;&lt;/span&gt;), show_col_types &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
&lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œï¼ã€ã¯å›ç­”ãŒå­˜åœ¨ã—ãªã„ã€ã€Œï¼Šã€ã¯ä¸»ã ã£ãŸå›ç­”ç­‰ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€é™¤å¤–&lt;/span&gt;
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample[sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼&amp;#34;&lt;/span&gt;,]
sample &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample[sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼Š&amp;#34;&lt;/span&gt;,]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;çŸ¥ã‚‰ãªã‹ã£ãŸã‚“ã§ã™ãŒã€&lt;code&gt;readr::read_csv&lt;/code&gt;ã£ã¦2.0.0ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆã‚’å¼•æ•°ã¨ã—ã¦csvã‚’èª­ã¿è¾¼ã¿ã€ãã®çµæœã‚’é€£çµã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã‚“ã§ã™ã­ã€‚åœ°å‘³ã«ä¾¿åˆ©ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&#34;&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;/h3&gt;
&lt;p&gt;ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã¯76800ã§ã—ãŸã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã¨ã—ã¦ã¯ç”³ã—åˆ†ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(sample)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 76800
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¿µã®ãŸã‚ã€å„å¹´ã”ã¨ã«ã‚‚è¦‹ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(magrittr)
sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(åŸºæº–å¹´) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1)) %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; åŸºæº–å¹´ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 15168 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 19.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2017 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 16724 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 21.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2018 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 14756 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 19.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2019 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 14588 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 19.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2020 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 15564 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 20.3 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å„å¹´ãŠã‚ˆã14,000~16,000ã‚µãƒ³ãƒ—ãƒ«ã»ã©å­˜åœ¨ã™ã‚‹ã‚ˆã†ã§ã™ã€‚å¤§ããªãƒãƒ©ãƒ„ã‚­ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã®åˆ†å¸ƒ&#34;&gt;&lt;code&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/code&gt;ã®åˆ†å¸ƒ&lt;/h3&gt;
&lt;p&gt;ã“ã‚Œã‹ã‚‰äºˆæ¸¬ã‚’è¡Œã†&lt;code&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/code&gt;ã¯ã©ã®ã‚ˆã†ãªåˆ†å¸ƒã«ãªã£ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;factor&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­, levels&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â—&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â—‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–¡&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–²&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Ã—&amp;#34;&lt;/span&gt;))
sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1)) %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1569 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â—‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 14370 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 18.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â–¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 34438 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 44.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; â–² &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 18642 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 24.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; Ã— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 7781 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 10.1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ€ã£ãŸã‚ˆã‚Šã‚­ãƒ¬ã‚¤ãªåˆ†å¸ƒã‚’ã—ã¦ã„ã‚‹å°è±¡ã§ã™ã€‚ã“ã®ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ã§ã¯ã€ã€Œã©ã¡ã‚‰ã¨ã‚‚è¨€ãˆãªã„ã€ãŒæœ€ã‚‚å¤šãã€ã¾ãŸã€æ¯”è¼ƒçš„ã€Œã‚„ã‚„æ‚ªã„ã€ã‚„ã€Œæ‚ªã„ã€ãŒå¤šã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã®ã‚ãŸã‚Šã¯2019å¹´åº¦ä»¥é™ã®ã‚³ãƒ­ãƒŠç¦ã®å½±éŸ¿ã‚’åæ˜ ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€æ–°ãŸã«æ™‚é–“è»¸ã‚’è¿½åŠ ã—ã€ã‚¯ãƒ­ã‚¹é›†è¨ˆã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(åŸºæº–å¹´, æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;tally&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  tidyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;spread&lt;/span&gt;(æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­, n) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  knitr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; åŸºæº–å¹´ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; â— &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; â—‹ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; â–¡ &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; â–² &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; Ã— &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2016 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 235 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2455 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 7546 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4129 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 803 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2017 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 375 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4031 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8681 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3053 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 584 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2018 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 349 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3105 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 7340 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3336 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 626 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2019 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 237 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2050 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6743 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4516 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1042 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2020 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 373 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2729 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4128 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3608 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4726 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã‚„ã¯ã‚Šã€2019å¹´ä»¥é™ã€Œæ‚ªã„ã€ãŒå¤šãå‡ºç¾ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ä¸€æ–¹ã§ã€ã€Œã‚„ã‚„æ‚ªã„ã€ã¯ãã‚Œä»¥å‰ã®å¹´ã§ã‚‚æ’å¸¸çš„ã«å¤šã„ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å›ç­”è€…ã®å±æ€§&#34;&gt;å›ç­”è€…ã®å±æ€§&lt;/h3&gt;
&lt;p&gt;æ¬¡ã«å›ç­”è€…ã®å±æ€§ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚å›ç­”è€…ã®å±æ€§ã¯&lt;code&gt;æ¥­ç¨®ãƒ»è·ç¨®&lt;/code&gt;ã‹ã‚‰å–å¾—ã§ãã¾ã™ã€‚ã¾ãšã€ã©ã†ã„ã£ãŸæ¥­ç¨®ãŒå¤šãå›ç­”ã—ã¦ã„ã‚‹ã®ã‹ç¢ºèªã—ã¦ã¿ã¾ã™ã€‚å›ç­”æ•°ä¸Šä½10ç•ªç›®ã¾ã§ã®æ¥­ç¨®ã‚’è¡¨ç¤ºã•ã›ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(æ¥­ç¨® &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_remove&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`æ¥­ç¨®ãƒ»è·ç¨®`, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼ˆ.+ï¼‰&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_remove&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼».+ï¼½&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(æ¥­ç¨®) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;arrange&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;desc&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;top_n&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1)) %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; æ¥­ç¨® &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç™¾è²¨åº— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4959 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 15.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ã‚¹ãƒ¼ãƒ‘ãƒ¼ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4738 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 14.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ä¸€èˆ¬å°å£²åº— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3851 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 11.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ã‚³ãƒ³ãƒ“ãƒ‹ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3772 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 11.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ä¹—ç”¨è»Šè²©å£²åº— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2967 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 9.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; é€šä¿¡ä¼šç¤¾ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2866 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å•†åº—è¡— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2734 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; äººææ´¾é£ä¼šç¤¾ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2700 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è¡£æ–™å“å°‚é–€åº— &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2128 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è·æ¥­å®‰å®šæ‰€ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2088 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.4 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å›ç­”æ•°ä¸Šä½ã«ã¯ã€ç™¾è²¨åº—ã‚„ã‚¹ãƒ¼ãƒ‘ãƒ¼ãªã©å°å£²åº—ãŒç›®ç«‹ã¡ã¾ã™ã€‚ã¾ãŸã€è»Šã®ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼ã®æ–¹ã‚„äººææ´¾é£ä¼šç¤¾ãªã©ç”Ÿç”£ãƒ»é›‡ç”¨ã«é–¢é€£ã™ã‚‹æ¥­ç¨®ã®å›ç­”è€…ã‚‚å¤šã„ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ã€çµŒå–¶è€…ã‚„è·å“¡ãªã©è·ç¨®ã®åˆ†å¸ƒã‚’ç¢ºèªã—ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚ä¸Šä½10ä½ã¾ã§ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(è·ç¨® &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`æ¥­ç¨®ãƒ»è·ç¨®`, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼ˆ.+ï¼‰&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_remove&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼ˆ&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
  stringr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;str_remove&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ï¼‰&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(è·ç¨®) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;arrange&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;desc&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;top_n&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1)) %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; è·ç¨® &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; çµŒå–¶è€… &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 20612 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 40.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å–¶æ¥­æ‹…å½“ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 7057 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 13.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å¾“æ¥­å“¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4371 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; åº—é•· &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4343 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 8.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; NA &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3145 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è·å“¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3118 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç·å‹™æ‹…å½“ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2930 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ä»£è¡¨è€… &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2615 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç¤¾å“¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1796 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å½¹å“¡ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1518 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2.9 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;è·ç¨®åˆ¥ã§ã¯çµŒå–¶è€…ãŒãƒ€ãƒ³ãƒˆãƒ„ã§å¤šã„çµæœã¨ãªã‚Šã¾ã—ãŸã€‚ä»£è¡¨è€…ãªã©è¡¨è¨˜æºã‚Œã‚‚ã‚ã‚Šã¾ã™ã®ã§ã€å®Ÿæ…‹ã¯ã‚‚ã†å°‘ã—å¤šã„ã¨æ€ã„ã¾ã™ã€‚æƒ³åƒã§ã¯ã€ç¾å ´ã®è·å“¡ã®æ–¹ã®å›ç­”ãŒå¤šã„ã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒäºˆæƒ³ã¨ã¯ç•°ãªã‚‹çµæœã¨ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ™¯æ°—åˆ¤æ–­ã®ç†ç”±ã®åˆ†å¸ƒ&#34;&gt;&lt;code&gt;(æ™¯æ°—)åˆ¤æ–­ã®ç†ç”±&lt;/code&gt;ã®åˆ†å¸ƒ&lt;/h3&gt;
&lt;p&gt;æ¬¡ã«&lt;code&gt;(æ™¯æ°—)åˆ¤æ–­ã®ç†ç”±&lt;/code&gt;ã®åˆ†å¸ƒã‚’è¦‹ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; sample &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
            dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;group_by&lt;/span&gt;(åˆ¤æ–­ã®ç†ç”±) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
            dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summarise&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;()) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
            dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;arrange&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;desc&lt;/span&gt;(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
            dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;`å‰²åˆ&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;%)`=round(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º/sum(ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º)*100, digits=1))
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;            
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;results %&amp;gt;% 
&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;  knitr::kable() %&amp;gt;&lt;/span&gt;% 
  kableExtra&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;kable_styling&lt;/span&gt;(bootstrap_options &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;striped&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;table class=&#34;table table-striped&#34; style=&#34;margin-left: auto; margin-right: auto;&#34;&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style=&#34;text-align:left;&#34;&gt; åˆ¤æ–­ã®ç†ç”± &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚º &lt;/th&gt;
   &lt;th style=&#34;text-align:right;&#34;&gt; å‰²åˆ(%) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ¥å®¢æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 17432 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 22.7 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è²©å£²é‡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 16153 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 21.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãŠå®¢æ§˜ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 11511 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 15.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å—æ³¨é‡ã‚„è²©å£²é‡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 9033 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 11.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å–å¼•å…ˆã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5034 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 6.6 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ±‚äººæ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4155 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ãã‚Œä»¥å¤– &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4007 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 5.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å˜ä¾¡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 3654 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 4.8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; ç«¶äº‰ç›¸æ‰‹ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1603 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 2.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å‘¨è¾ºä¼æ¥­ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1161 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; å—æ³¨ä¾¡æ ¼ã‚„è²©å£²ä¾¡æ ¼ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1099 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1.4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ±‚è·è€…æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 930 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; æ¡ç”¨è€…æ•°ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 666 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 0.9 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; é›‡ç”¨å½¢æ…‹ã®æ§˜å­ &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 361 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 0.5 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style=&#34;text-align:left;&#34;&gt; è²©å£²é‡ã®å‹•ã &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 1 &lt;/td&gt;
   &lt;td style=&#34;text-align:right;&#34;&gt; 0.0 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã€Œæ¥å®¢æ•°ã®å‹•ãã€ã¨ã€Œè²©å£²é‡ã®å‹•ãã€ãŒå¤šãã€ã€ŒãŠå®¢æ§˜ã®æ§˜å­ã€ã‚„ã€Œå—æ³¨é‡ã‚„è²©å£²é‡ã®å‹•ãã€ã¾ã§å«ã‚ã‚‹ã¨7å‰²ã‚’å ã‚ã¾ã™ã€‚å›ç­”æ¥­ç¨®ã«å°å£²åº—ãŒå¤šã„ã“ã¨ã‹ã‚‰ã€ã“ã®ã‚ˆã†ãªé …ç›®ãŒä¸Šä½ã«ãã¦ã„ã‚‹ã®ã ã¨æ¨å¯Ÿã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ™¯æ°—åˆ¤æ–­ã®ç†ç”±ã«é–¢ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ‹ãƒ³ã‚°&#34;&gt;æ™¯æ°—åˆ¤æ–­ã®ç†ç”±ã«é–¢ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆãƒã‚¤ãƒ‹ãƒ³ã‚°&lt;/h3&gt;
&lt;p&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­ã«å¯¾ã™ã‚‹ç†ç”±ã®è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜ã‚’è§£æã—ã€ã©ã®ã‚ˆã†ãªå˜èªãŒé »ç¹ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’WordCloudã‚’ç”¨ã„ã¦ç¢ºèªã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã¾ãšã€æ–‡æ›¸ã®ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã‚’è¡Œã„ã¾ã™ã€‚æ—¥æœ¬èªã®ã‚ˆã†ãªè¨€èªã§ã¯è‹±èªãªã©ã¨ç•°ãªã‚Šå˜èªã”ã¨ã®é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒãªã„ãŸã‚ã€åˆ¥é€”åŒºåˆ‡ã‚Šã‚’å…¥ã‚Œã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚åŒºåˆ‡ã‚‰ã‚ŒãŸå„èªã¯å½¢æ…‹ç´ ã¨å‘¼ã°ã‚Œã€è¨€è‘‰ãŒæ„å‘³ã‚’æŒã¤ã¾ã¨ã¾ã‚Šã®å˜èªã®æœ€å°å˜ä½ã‚’æŒ‡ã—ã¾ã™ã€‚ã¾ãŸã€æ–‡ç« ã‚’å½¢æ…‹ç´ ã¸åˆ†å‰²ã™ã‚‹ã“ã¨ã‚’å½¢æ…‹ç´ è§£æã¨è¨€ã„ã¾ã™(è‹±èªã®ã‚ˆã†ãªå ´åˆå˜ã«Tokenizationã¨è¨€ã£ãŸã‚Šã—ã¾ã™)ã€‚&lt;br&gt;
å½¢æ…‹ç´ è§£æã‚’è¡Œã†ãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒå­˜åœ¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MeCab&lt;/li&gt;
&lt;li&gt;JUMAN&lt;/li&gt;
&lt;li&gt;JANOME&lt;/li&gt;
&lt;li&gt;Ginza&lt;/li&gt;
&lt;li&gt;Sudachi&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ãŠãã‚‰ãæœ€ã‚‚ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯Mecabã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ãŒã€æ¨™æº–è£…å‚™ã•ã‚Œã¦ã„ã‚‹è¾æ›¸(ipadic)ã®æ›´æ–°ãŒã‚¹ãƒˆãƒƒãƒ—ã—ã¦ãŠã‚Šã€æœ€è¿‘ã®æ–°èªã«å¯¾å¿œã§ããªã„ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯æ–°èªã«å¼·ã„NEologdè¾æ›¸ã‚’åŠ ãˆã‚‹ã“ã¨ã§ã€å¯¾å‡¦å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’åˆ¥è¨˜äº‹ã§ç´¹ä»‹ã—ã¦ã„ã¾ã™ãŒã€ä»Šå›ã¯ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚ºãŒæä¾›ã—ã¦ã„ã‚‹Sudachi[@TAKAOKA18.8884]ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚å…¬å¼Githubã‹ã‚‰Sudachiã®ç‰¹é•·ã‚’å¼•ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¤‡æ•°ã®åˆ†å‰²å˜ä½ã®ä½µç”¨&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¿…è¦ã«å¿œã˜ã¦åˆ‡ã‚Šæ›¿ãˆ&lt;/li&gt;
&lt;li&gt;å½¢æ…‹ç´ è§£æã¨å›ºæœ‰è¡¨ç¾æŠ½å‡ºã®èåˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¤šæ•°ã®åéŒ²èªå½™&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;UniDic ã¨ NEologd ã‚’ãƒ™ãƒ¼ã‚¹ã«èª¿æ•´&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ©Ÿèƒ½ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŒ–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡å­—æ­£è¦åŒ–ã‚„æœªçŸ¥èªå‡¦ç†ã«æ©Ÿèƒ½è¿½åŠ ãŒå¯èƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åŒç¾©èªè¾æ›¸ã¨ã®é€£æº&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¾Œæ—¥å…¬é–‹äºˆå®š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç‰¹è³ªã™ã¹ãã¯ã€Œè¤‡æ•°ã®åˆ†å‰²å˜ä½ã®ä½µç”¨ã€ã§ã—ã‚‡ã†ã€‚Sudachiã§ã¯çŸ­ã„æ–¹ã‹ã‚‰ A, B, Cã®3ã¤ã®åˆ†å‰²ãƒ¢ãƒ¼ãƒ‰ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚Aã¯UniDicçŸ­å˜ä½ç›¸å½“ã€Cã¯å›ºæœ‰è¡¨ç¾ç›¸å½“ã€Bã¯A, Cã®ä¸­é–“çš„ãªå˜ä½ã¨ãªã£ã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«åŒã˜ã€Œé¸æŒ™ç®¡ç†å§”å“¡ä¼šã€ã¨ã„ã†å˜èªã§ã‚‚å½¢æ…‹ç´ ãŒç•°ãªã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚ã“ã‚Œã¯Sudachiç‰¹æœ‰ã®ç‰¹é•·ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; tokenizer
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; dictionary

tokenizer_obj &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dictionary&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dictionary()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;create()

mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;A
[m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¸æŒ™ç®¡ç†å§”å“¡ä¼š&amp;#34;&lt;/span&gt;, mode)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;é¸æŒ™&#39;, &#39;ç®¡ç†&#39;, &#39;å§”å“¡&#39;, &#39;ä¼š&#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;B
[m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¸æŒ™ç®¡ç†å§”å“¡ä¼š&amp;#34;&lt;/span&gt;, mode)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;é¸æŒ™&#39;, &#39;ç®¡ç†&#39;, &#39;å§”å“¡ä¼š&#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;C
[m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¸æŒ™ç®¡ç†å§”å“¡ä¼š&amp;#34;&lt;/span&gt;, mode)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;é¸æŒ™ç®¡ç†å§”å“¡ä¼š&#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¾ãŸã€è¾æ›¸ã«ã¤ã„ã¦ã‚‚UniDicã¨NEologdã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦æ›´æ–°ãŒç¶šã‘ã‚‰ã‚Œã¦ãŠã‚Šã€æ–°èªã«ã‚‚å¯¾å¿œã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;C
[m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹&amp;#34;&lt;/span&gt;, mode)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;æ–°å‹ã‚³ãƒ­ãƒŠã‚¦ã‚¤ãƒ«ã‚¹&#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å€‹äººçš„ã«ç´ æ™´ã‚‰ã—ã„ã¨æ€ã†ãƒã‚¤ãƒ³ãƒˆã¯è¡¨è¨˜æ­£è¦åŒ–ã‚„æ–‡å­—æ­£è¦åŒ–ãŒã§ãã‚‹ã¨è¨€ã†ã“ã¨ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ—§å­—ç­‰ã§åŒã˜æ„å‘³ã ãŒè¡¨è¨˜ãŒç•°ãªã‚‹å˜èªã‚„è‹±èª/æ—¥æœ¬èªã€æ›¸ãé–“é•ãˆç­‰ã‚’æ­£è¦åŒ–ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é™„å±&amp;#34;&lt;/span&gt;, mode)[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &#39;ä»˜å±&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SUMMER&amp;#34;&lt;/span&gt;, mode)[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &#39;ã‚µãƒãƒ¼&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚·ãƒ¥ãƒŸãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³&amp;#34;&lt;/span&gt;, mode)[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &#39;ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã“ã®ã‚ˆã†ãªé«˜æ€§èƒ½ãªå½¢æ…‹ç´ è§£æãƒ„ãƒ¼ãƒ«ãŒç„¡å„Ÿã§ã—ã‹ã‚‚å•†ç”¨åˆ©ç”¨ã‚‚å¯ã¨ã„ã†ã¨ã“ã‚ã«é©šãã‚’éš ã›ã¾ã›ã‚“ã€‚æ¬¡å›ä»¥é™ã§èª¬æ˜ã—ã¾ã™ãŒã€ã“ã®Sudachiã§å½¢æ…‹ç´ è§£æã‚’è¡Œã£ãŸWord2vecãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹Chiveã‚‚æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;èª¬æ˜ãŒé•·ããªã‚Šã¾ã—ãŸãŒSudachiã§Tokenizationã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚Sudachiã¯&lt;code&gt;Python&lt;/code&gt;ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚èª¬æ˜ãŒå‰å¾Œã—ã¦ã„ã¾ã™ãŒã€ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã§è¡Œã£ã¦ã„ã‚‹ã‚ˆã†ã«&lt;code&gt;tokenizer&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€&lt;code&gt;tokenize()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§æ–‡ç« ã‚’Tokenizeã—ã¾ã™ã€‚Tokenizeã•ã‚ŒãŸçµæœã¯&lt;code&gt;MorphemeList&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚&lt;code&gt;MorphemeList&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å„è¦ç´ ã«å¯¾ã—ã¦&lt;code&gt;normalized_form()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§æ­£è¦åŒ–ã•ã‚ŒãŸå½¢æ…‹ç´ ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã“ã¾ã§ã‚’ã‚„ã£ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã¾ãšã€ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; tokenizer
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sudachipy &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; dictionary
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.preprocessing &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; LabelEncoder
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd

sample &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_csv(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\Users\hogehoge\Watcher\RawData\watcher_2016.csv&amp;#34;&lt;/span&gt;,encoding&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;shift-jis&amp;#34;&lt;/span&gt;)
sample &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample[(sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;âˆ’&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ï¼Š&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;False&lt;span style=&#34;color:#f92672&#34;&gt;|&lt;/span&gt;(sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;æ™¯æ°—ã®ç¾çŠ¶åˆ¤æ–­&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;â–¡&amp;#39;&lt;/span&gt;)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;èª­ã¿è¾¼ã‚“ã &lt;code&gt;sample&lt;/code&gt;ã‚’tokenizerã§TokenåŒ–ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;tokenizer_obj &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dictionary&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dictionary()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;create()
mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Tokenizer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;SplitMode&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;C
tokenizer_sudachi &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; t: [m&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;normalized_form() &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; m &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokenizer_obj&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;tokenize(t, mode)]
tokens &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;map(tokenizer_sudachi)
tokens&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0    [ãƒ», åº—é ­, ã®, å–ã‚Šæ‰±ã„, é¡, ãŒ, å‰å¹´, æ¯”, ç´„, 120, %, ã¨, å¥½èª¿...
## 1    [ãƒ», å½“, æ–½è¨­, ã®, åˆ©ç”¨, ä¹—é™, å®¢æ•°, ã¯, 1, æœˆ, 26, æ—¥, æ™‚ç‚¹, ...
## 2    [ãƒ», å¹´, æœ«, ã®, æ¶ˆè²», ã®, åå‹•, ã‚‚, æœ‰ã‚‹, ã¦, ã‹, ã€, å®¢, ã®, ...
## 3    [ãƒ», å¤–å›½äºº, è¦³å…‰å®¢, ã«, ã‚ˆã‚‹, å£²ã‚Šä¸Šã’, ãŒ, å‰å¹´, æ¯”, 152, %, ã¨...
## 4    [ãƒ», ç©æ¥µçš„, ã , æ™¯æ°—, ãŒ, ä¸Šå‘ã, ã«, æœ‰ã‚‹, ã¨, ã¾ã§, ã¯, è¨€ã†, è¾›...
## Name: è¿½åŠ èª¬æ˜åŠã³å…·ä½“çš„çŠ¶æ³ã®èª¬æ˜, dtype: object
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Tokenizeã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
WordCloudã‚’ä½œæˆã™ã‚‹ãŸã‚ã«&lt;code&gt;Python&lt;/code&gt;ã®&lt;code&gt;wordcloud&lt;/code&gt;ã‚’ç”¨ã„ã¾ã™ã€‚ã“ã‚Œã¯å¼•æ•°ã«Tokenã‚’ã‚¹ãƒšãƒ¼ã‚¹ã§åŒºåˆ‡ã£ãŸæ–‡å­—åˆ—ã‚’ä¸ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ãã®æ•´å½¢ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;word_lists &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; []
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; token &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; tokens:
  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; word &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; token:
    word_lists&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;append(word)
word_chain &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(word_lists)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã§ã¯ã€wordcloudã‚’ä½œæˆã—ã¦ã„ãã¾ã™ã€‚æ—¥æœ¬èªè¡¨ç¤ºã§ã¯æ–‡å­—åŒ–ã‘ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€&lt;a href=&#34;https://moji.or.jp/ipafont/ipaex00401/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã§ãƒ•ã‚©ãƒ³ãƒˆã€ŒIPAexã‚´ã‚·ãƒƒã‚¯ã€ã‚’äºˆã‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã—ãŸã‚‚ã®ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;font_path &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\Users\hogehoge\Watcher\ipaexg.ttf&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;wordcloud.WordCloud.genetate()&lt;/code&gt;ã§WordCloudã‚’ä½œæˆã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; wordcloud &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; WordCloud
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt
wc &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; WordCloud(background_color&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;white&amp;#34;&lt;/span&gt;, font_path&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;font_path, max_words&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;, max_font_size&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;, contour_width&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, contour_color&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;steelblue&amp;#39;&lt;/span&gt;)
wc&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;generate(word_chain)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;figure(figsize&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;))
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(wc, cmap&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;cm&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;gray, interpolation&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;bilinear&amp;#34;&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;axis(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post25/wordcloud.png&#34; alt=&#34;alt text&#34;&gt;&lt;/p&gt;
&lt;p&gt;åŠ©è©ã‚„ã€Œç‚ºã‚‹ã€ã€ã€Œæœ‰ã‚‹ã€ã€ã€Œå±…ã‚‹ã€ã€ã€Œæˆã‚‹ã€ãªã©ç‰¹å¾´ã®ãªã„èªå¥ãŒé »å‡ºã—ã¦ãŠã‚Šã€æ„å‘³ã®ã‚ã‚‹å¯è¦–åŒ–ã«ãªã£ã¦ã„ã¾ã›ã‚“ã€‚ã“ã‚Œã‚‰ã‚’&lt;code&gt;word_chain&lt;/code&gt;ã‹ã‚‰é™¤ãã€ã‚‚ã†ä¸€åº¦å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;stopwords &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¦‹ã‚‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‚ºã‚‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœ‰ã‚‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å±…ã‚‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æˆã‚‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã¯&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã«&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚ˆã‚‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãŸ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãŒ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã¦&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã &amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãªã©&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã¨&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚‚&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã®&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚„&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã§&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‹ã‚‰&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚’&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãŠã‚‹&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚ˆã‚Š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç­‰&amp;#34;&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; stopword &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; stopwords:
  word_chain &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; word_chain&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(stopword, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
wc&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;generate(word_chain)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;figure(figsize&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;))
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(wc, cmap&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;cm&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;gray, interpolation&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;bilinear&amp;#34;&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;axis(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post25/wordcloud2.png&#34; alt=&#34;alt text&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…ˆã»ã©ã‚ˆã‚Šã¯æ„å‘³ã®ã‚ã‚‹å¯è¦–åŒ–ã«ãªã£ã¦ã„ã¾ã™ã€‚ã€Œæ¥å®¢æ•°ã€ã€ã€Œå£²ã‚Šä¸Šã’ã€ã€ã€Œè²©å£²é‡ã€ãªã©ã‚„ã¯ã‚Šå°å£²åº—é–¢é€£ã®ãƒ¯ãƒ¼ãƒ‰ãŒé »å‡ºã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã‚Œã¯å›ç­”è€…å±æ€§ã¨ã‚‚æ•´åˆçš„ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-çµ‚ã‚ã‚Šã«&#34;&gt;4. çµ‚ã‚ã‚Šã«&lt;/h2&gt;
&lt;p&gt;ã“ã‚Œã‹ã‚‰å„å›ã§ä»¥ä¸‹ã®æ‰‹æ³•ã‚’ç”¨ã„ãŸäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰ã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚æ¬¡å›ã¯ã€è¾æ›¸ãƒ™ãƒ¼ã‚¹ã«åŸºã¥ãã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã®æŠ½å‡ºã‚’è¡Œã„ã€æ–‡æ›¸ã®ãƒã‚¸ãƒã‚¬åˆ†é¡ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¾æ›¸ãƒ™ãƒ¼ã‚¹&lt;/li&gt;
&lt;li&gt;ãƒŠã‚¤ãƒ¼ãƒ–ãƒ™ã‚¤ã‚ºåˆ†é¡å™¨&lt;/li&gt;
&lt;li&gt;å˜èªåŸ‹ã‚è¾¼ã¿(Word Embedding)ã‚’ç”¨ã„ãŸæ–¹æ³•&lt;/li&gt;
&lt;li&gt;Recurrent neural network(RNN)&lt;/li&gt;
&lt;li&gt;Transformer&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®Ÿã¯ã€è§£æè‡ªä½“ã¯å…¨ã¦å®Œäº†ã—ã¦ãŠã‚Šã€æ–‡æ›¸ã‚’æ›¸ãã ã‘ã®ãƒ•ã‚§ãƒ¼ã‚ºã«ãªã£ã¦ã„ã¾ã™ã€‚ã¡ã‚ƒã‚“ã¨çµæœã‚‚å‡ºã¦ã„ã¾ã™ã®ã§ã€ä¹ã†ã”æœŸå¾…ã§ã™ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Pythonã®pandas_datareaderã‹ã‚‰è‰²ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã¿ã‚‹</title>
      <link>/post/post15/</link>
      <pubDate>Tue, 03 Nov 2020 00:00:00 +0000</pubDate>
      <guid>/post/post15/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚æœ€è¿‘ä¼šç¤¾ã®PCã«&lt;code&gt;Anaconda&lt;/code&gt;ã‚’å…¥ã‚Œã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚æ¥­å‹™ã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ãªã„ã®ã§ã™ãŒã€ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã§ä½¿ç”¨ã™ã‚‹ã®ã§è‰²ã€…å‹‰å¼·ã—ã¦ã„ã¾ã™ã€‚ä»¥å‰ã€GoogleãŒæä¾›ã—ã¦ã„ã‚‹&lt;code&gt;Earth Engine&lt;/code&gt;ã‹ã‚‰è¡›æ˜Ÿç”»åƒã‚’å–å¾—ã—ã¦è§£æã—ãŸéš›ã«&lt;code&gt;Python&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¾ã—ãŸãŒã€ä»Šå›ã¯&lt;code&gt;Python&lt;/code&gt;ã‹ã‚‰æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã‚‹&lt;code&gt;pandas_datareader&lt;/code&gt;ã‚’ä½¿ç”¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;code&gt;pandas_datareader&lt;/code&gt;ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Tiingo&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IEX&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Alpha Vantage&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Enigma&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Quandl&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;St.Louis FED&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Kenneth French&amp;rsquo;s data library&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;World Bank&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;OECD&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eurostat&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Thrift Saving Plan&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Nasdaq Trader symbol definitions&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Stooq&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MOEX&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Naver Finance&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ãªãŠã€ã“ã®ãƒ–ãƒ­ã‚°ã§ã¯&lt;code&gt;Rstuio&lt;/code&gt;ã¨&lt;code&gt;blogdown&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€&lt;code&gt;git&lt;/code&gt;ã‚’çµ„ã¿åˆã‚ã›ã¦&lt;code&gt;github&lt;/code&gt;ä¸Šã«è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã¦ã„ã¾ã™ã€‚ã§ã™ãŒã€&lt;code&gt;Rstudio&lt;/code&gt;ã¨&lt;code&gt;reticulate&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãŠã‹ã’ã§ã€&lt;code&gt;python&lt;/code&gt;ã‚’ä½¿ç”¨ã—ãŸè¨˜äº‹ã‚‚&lt;code&gt;rmd&lt;/code&gt;ã§ä½œæˆã—ã€&lt;code&gt;html&lt;/code&gt;ã¨ã—ã¦å‡ºåŠ›ã§ãã¦ã„ã¾ã™ã€‚ã“ã“ã§ã¾ãšã€&lt;code&gt;reticulate&lt;/code&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç”¨ã„ã¦&lt;code&gt;conda&lt;/code&gt;ä»®æƒ³ç’°å¢ƒã¸æ¥ç¶šã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(reticulate)
conda_path &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\\Users\\hoge\\Anaconda3\\envs\\ç’°å¢ƒå&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;use_condaenv&lt;/span&gt;(conda_path)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã‚Œã§æ¥ç¶šã§ãã¾ã™ã€‚&lt;code&gt;conda_path&lt;/code&gt;ã«ã¯ä»®æƒ³ç’°å¢ƒã¸ã®ãƒ‘ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; sys
sys&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;version
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &#39;3.7.7 (default, May  6 2020, 11:45:54) [MSC v.1916 64 bit (AMD64)]&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;1-econdbã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—&#34;&gt;1. ECONDBã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;pandas_datareader&lt;/code&gt;ã§ã¯ã€&lt;a href=&#34;https://www.econdb.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ECOMDB&lt;/a&gt;ã‹ã‚‰ãƒã‚¯ãƒ­çµŒæ¸ˆé–¢é€£ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;econdbã¨ã¯&#34;&gt;ECONDBã¨ã¯ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;econdb.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ECONDBã¯å„å›½ã®ä¸»è¦ãƒã‚¯ãƒ­çµŒæ¸ˆãƒ‡ãƒ¼ã‚¿ã‚’dashboardå½¢å¼ã§æä¾›ã—ã¦ãã‚Œã‚‹Webã‚µã‚¤ãƒˆã§ã€ã¾ãŸAPIã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€Pythonã‚„Excelã«ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ã‚’é€£ä¿‚ã—ã¦ãã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;econdb2.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;pandas_datareader&lt;/code&gt;ã‚’ç”¨ã„ãŸä½¿ç”¨æ–¹æ³•ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•&#34;&gt;åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;pandas_datareader&lt;/code&gt;ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas_datareader.data &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; web
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## C:\Users\aashi\Documents\R\win-library\4.1\reticulate\python\rpytools\loader.py:44: FutureWarning: pandas.util.testing is deprecated. Use the functions in the public API at pandas.testing instead.
##   level=level
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;EconDBã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€&lt;code&gt;DataReader&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«&lt;code&gt;data_source&lt;/code&gt;å¼•æ•°ã«&lt;code&gt;&#39;econdb&#39;&lt;/code&gt;ã¨é©å½“ãª&lt;code&gt;query&lt;/code&gt;ã‚’æ¸¡ã›ã°ã‚ˆã„ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(query, data_source&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;econdb&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;**&lt;/span&gt;kwargs)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å½¢å¼ã¯ã€å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ç¨®é¡ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ã‚¯ã‚¨ãƒªæŒ‡å®šæ–¹æ³•&#34;&gt;ã‚¯ã‚¨ãƒªæŒ‡å®šæ–¹æ³•&lt;/h4&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã¯ã„ãã¤ã‹ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«åˆ†å‰²ã•ã‚Œã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã¯ã€ãƒˆãƒ”ãƒƒã‚¯ã€é »åº¦ã€èª¿æŸ»æ–¹æ³•ãªã©ã®å…±é€šã®ç‰¹å¾´ã‚’æŠ½å‡ºã§ãã‚‹ãƒ†ã‚£ãƒƒã‚«ãƒ¼ãŒä»˜ä¸ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ¤œç´¢æ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ¢ã™ã“ã¨ãŒã§ãã¾ã™ã€‚UST_MSPDãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä¾‹ã«ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;econdb3.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ãƒšãƒ¼ã‚¸ã«å…¥ã‚‹ã¨ã€ã„ãã¤ã‹ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒã‚ã‚Šã€ç‰¹å®šã®ã‚·ãƒªãƒ¼ã‚ºã¨ç‰¹å®šã®ã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ã«é¸æŠã‚’çµã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚é©åˆ‡ãªãƒ•ã‚£ãƒ«ã‚¿ãŒè¨­å®šã•ã‚ŒãŸçŠ¶æ…‹ã§ã€&lt;code&gt;Export&lt;/code&gt;ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€é¸æŠã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãŸã‚ã®å¤šãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ãã®ä¸­ã§ã‚‚ã€&lt;code&gt;Export to Python&lt;/code&gt;ã¯ã€äº‹å‰ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒã¤ã‚³ãƒ¼ãƒ‰ã®é‡è¦ãªéƒ¨åˆ†ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã¦ã—ã¾ãˆã°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;econdb4.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;query &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;amp;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join([
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;dataset=UST_MSPD&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;v=Category&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;h=TIME&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;from=2018-01-01&amp;#34;&lt;/span&gt;,
    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;to=2019-12-31&amp;#34;&lt;/span&gt;
])
df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(query, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;econdb&amp;#39;&lt;/span&gt;)
df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Category                         Bills  ... United States Savings Securities
## Holder      Intragovernmental Holdings  ...                           Totals
## TIME_PERIOD                             ...                                 
## 2018-01-01                      3830.0  ...                           159902
## 2018-02-01                      3748.0  ...                           159475
## 2018-03-01                      4552.0  ...                           159040
## 2018-04-01                      2641.0  ...                           158606
## 2018-05-01                       577.0  ...                           158233
## 
## [5 rows x 51 columns]
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id=&#34;å®Ÿè·µçš„ãªå–å¾—ã‚³ãƒ¼ãƒ‰&#34;&gt;å®Ÿè·µçš„ãªå–å¾—ã‚³ãƒ¼ãƒ‰&lt;/h4&gt;
&lt;p&gt;ã“ã‚“ãªã“ã¨ã‚‚ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; matplotlib &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pyplot &lt;span style=&#34;color:#66d9ef&#34;&gt;as&lt;/span&gt; plt
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas_datareader.data &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; web
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; datetime &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; datetime
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; seaborn &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; sns

start &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; datetime(&lt;span style=&#34;color:#ae81ff&#34;&gt;1980&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
end &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; datetime(&lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;31&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# parameters for data from econdb&lt;/span&gt;
country &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;US&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;UK&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;JP&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;EU&amp;#39;&lt;/span&gt;]
indicator &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;RGDP&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CPI&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;URATE&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;HOU&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;POP&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;RETA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;IP&amp;#39;&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# Parse API from econdb&lt;/span&gt;
econ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataFrame()
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; cnty &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; country:
    temp2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataFrame()
    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; idctr &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; indicator:
        temp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ticker=&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; idctr &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; cnty,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;econdb&amp;#39;&lt;/span&gt;,start,end)
        temp&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;columns &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [idctr]
        temp2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;concat([temp2,temp],join&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;outer&amp;#39;&lt;/span&gt;,axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
    temp2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; temp2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;assign(kuni&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;cnty,kijyundate&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;temp2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;index)
    econ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;concat([econ,temp2],join&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;outer&amp;#39;&lt;/span&gt;)
    econ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; econ&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;reset_index(drop&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)
econ&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()

&lt;span style=&#34;color:#75715e&#34;&gt;# Plot CPI for example&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##         RGDP   CPI  URATE       CA  HOU       POP  RETA     IP kuni kijyundate
## 0  6842024.0  78.0    6.3 -10666.0  NaN  226554.0   NaN  52.17   US 1980-01-01
## 1        NaN  79.0    6.3      NaN  NaN  226753.0   NaN  52.20   US 1980-02-01
## 2        NaN  80.1    6.3      NaN  NaN  226955.0   NaN  51.98   US 1980-03-01
## 3  6701046.0  80.9    6.9   9844.0  NaN  227156.0   NaN  50.97   US 1980-04-01
## 4        NaN  81.7    7.5      NaN  NaN  227387.0   NaN  49.71   US 1980-05-01
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;sns&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;set
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;function set at 0x0000000031ED0B88&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;sns&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;relplot(data&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;econ,x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;kijyundate&amp;#39;&lt;/span&gt;,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CPI&amp;#39;&lt;/span&gt;,hue&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;kuni&amp;#39;&lt;/span&gt;,kind&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;line&amp;#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post15/index_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;282&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post15/index_files/figure-html/unnamed-chunk-8-2.png&#34; width=&#34;556&#34; /&gt;&lt;/p&gt;
&lt;h2 id=&#34;2-world-bankã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;2. World Bankã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;ä¸–ç•ŒéŠ€è¡Œã‹ã‚‰å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&#34;&gt;ä¸–ç•ŒéŠ€è¡Œã‹ã‚‰å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸–ç•ŒéŠ€è¡Œã¯å‰èº«ãŒå›½éš›å¾©èˆˆé–‹ç™ºéŠ€è¡Œ(IBRD)ã€å›½éš›é–‹ç™ºå”ä¼š(IDA)ã§ã‚ã‚‹ã“ã¨ã‹ã‚‰ã‚‚ã‚ã‹ã‚‹ã‚ˆã†ã«é–‹ç™ºç³»ã®ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã¾ã™ã€‚æœ€è¿‘ã§ã¯COVID-19é–¢é€£ã®ãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ &lt;code&gt;pandas_datareader&lt;/code&gt;ã§ã¯ã€&lt;code&gt;wb&lt;/code&gt;é–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€&lt;a href=&#34;https://data.worldbank.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;World Bank&amp;rsquo;s World Development Indicators&lt;/a&gt;ã¨å‘¼ã°ã‚Œã‚‹ä¸–ç•ŒéŠ€è¡Œã®æ•°åƒã‚‚ã®ãƒ‘ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ã«ç°¡å˜ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢æ–¹æ³•&#34;&gt;ãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;ä¾‹ãˆã°ã€åŒ—ç±³åœ°åŸŸã®å›½ã€…ã®ä¸€äººå½“ãŸã‚Šã®å›½å†…ç·ç”Ÿç”£ã‚’ãƒ‰ãƒ«ãƒ™ãƒ¼ã‚¹ã§æ¯”è¼ƒã—ãŸã„å ´åˆã¯ã€&lt;code&gt;search&lt;/code&gt;é–¢æ•°ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; pandas_datareader &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; wb
matches &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; wb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;search(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;gdp.*capita.*const&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(matches&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;loc[:,[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;id&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;name&amp;#39;&lt;/span&gt;]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##                          id                                               name
## 716      6.0.GDPpc_constant  GDP per capita, PPP (constant 2011 internation...
## 10411        NY.GDP.PCAP.KD                 GDP per capita (constant 2015 US$)
## 10413        NY.GDP.PCAP.KN                      GDP per capita (constant LCU)
## 10415     NY.GDP.PCAP.PP.KD  GDP per capita, PPP (constant 2017 internation...
## 10416  NY.GDP.PCAP.PP.KD.87  GDP per capita, PPP (constant 1987 internation...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;NY.GDP.PCAP.KD&lt;/code&gt;ãŒãã‚Œã«å½“ãŸã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚2010å¹´ã®USãƒ‰ãƒ«ãƒ™ãƒ¼ã‚¹ã§å®Ÿè³ªåŒ–ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿ã®å–å¾—æ–¹æ³•&#34;&gt;ãƒ‡ãƒ¼ã‚¿ã®å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;download&lt;/code&gt;é–¢æ•°ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;dat &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; wb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;download(indicator&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NY.GDP.PCAP.KD&amp;#39;&lt;/span&gt;, country&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;US&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CA&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;MX&amp;#39;&lt;/span&gt;], start&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2010&lt;/span&gt;, end&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2018&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(dat)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##                     NY.GDP.PCAP.KD
## country       year                
## Canada        2018    44917.369814
##               2017    44325.416776
##               2016    43536.913403
##               2015    43596.135537
##               2014    43635.095481
##               2013    42846.284196
##               2012    42315.807389
##               2011    42036.997844
##               2010    41155.323638
## Mexico        2018     9945.776845
##               2017     9842.400712
##               2016     9751.569083
##               2015     9616.645558
##               2014     9426.324588
##               2013     9282.991933
##               2012     9280.258638
##               2011     9076.301453
##               2010     8878.561377
## United States 2018    59821.592274
##               2017    58387.775808
##               2016    57418.933846
##               2015    56863.371496
##               2014    55574.356825
##               2013    54604.130054
##               2012    53989.248340
##               2011    53190.231121
##               2010    52759.998081
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;pandas&lt;/code&gt;ã®&lt;code&gt;dataframe&lt;/code&gt;å½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚å¹´ã¨å›½ãŒindexã«ãªã£ã¦ã„ã¾ã™ã­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-famafrench-data-libraryã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;3. Fama/French Data Libraryã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;famafrench-data-libraryã§å–ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&#34;&gt;Fama/French Data Libraryã§å–ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&lt;/h3&gt;
&lt;p&gt;é‡‘èé–¢é€£ãƒ‡ãƒ¼ã‚¿ã«ãªã‚Šã¾ã™ãŒã€æœ‰åãªFama/Frechã®3 Factor modelã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒ&lt;a href=&#34;http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fama/French Data Library&lt;/a&gt;ã‹ã‚‰å–å¾—ã§ãã¾ã™ã€‚&lt;code&gt;get_available_datasets&lt;/code&gt;é–¢æ•°ã¯ã€åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ãƒªã‚¹ãƒˆã‚’è¿”ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•-1&#34;&gt;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; pandas_datareader.famafrench &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; get_available_datasets
len(get_available_datasets())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 297
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ©ç”¨å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯297ã§ã™ã€‚ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã©ã‚“ãªã‚‚ã®ãŒã‚ã‚‹ã‹ã€20å€‹ã»ã©ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; random
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(random&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sample(get_available_datasets(),&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [&#39;Japan_3_Factors_Daily&#39;, &#39;Developed_ex_US_Mom_Factor_Daily&#39;, &#39;Portfolios_Formed_on_ME&#39;, &#39;25_Portfolios_OP_INV_5x5&#39;, &#39;North_America_6_Portfolios_ME_OP&#39;, &#39;Europe_6_Portfolios_ME_Prior_250_20_daily&#39;, &#39;Portfolios_Formed_on_INV&#39;, &#39;10_Industry_Portfolios_Wout_Div&#39;, &#39;5_Industry_Portfolios&#39;, &#39;32_Portfolios_ME_OP_INV_2x4x4&#39;, &#39;Europe_32_Portfolios_ME_INV(TA)_OP_2x4x4&#39;, &#39;North_America_6_Portfolios_ME_Prior_12_2&#39;, &#39;Europe_25_Portfolios_ME_Prior_12_2&#39;, &#39;Developed_ex_US_25_Portfolios_ME_OP_Daily&#39;, &#39;Europe_3_Factors&#39;, &#39;Portfolios_Formed_on_E-P&#39;, &#39;Asia_Pacific_ex_Japan_25_Portfolios_ME_Prior_12_2&#39;, &#39;Europe_25_Portfolios_ME_OP&#39;, &#39;Developed_25_Portfolios_ME_BE-ME&#39;, &#39;38_Industry_Portfolios&#39;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ—¥æœ¬æ ªã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚‚å­˜åœ¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;ds &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;5_Industry_Portfolios&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;famafrench&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(ds[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;DESCR&amp;#39;&lt;/span&gt;])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 5 Industry Portfolios
## ---------------------
## 
## This file was created by CMPT_IND_RETS using the 202201 CRSP database. It contains value- and equal-weighted returns for 5 industry portfolios. The portfolios are constructed at the end of June. The annual returns are from January to December. Missing data are indicated by -99.99 or -999. Copyright 2022 Kenneth R. French
## 
##   0 : Average Value Weighted Returns -- Monthly (59 rows x 5 cols)
##   1 : Average Equal Weighted Returns -- Monthly (59 rows x 5 cols)
##   2 : Average Value Weighted Returns -- Annual (5 rows x 5 cols)
##   3 : Average Equal Weighted Returns -- Annual (5 rows x 5 cols)
##   4 : Number of Firms in Portfolios (59 rows x 5 cols)
##   5 : Average Firm Size (59 rows x 5 cols)
##   6 : Sum of BE / Sum of ME (5 rows x 5 cols)
##   7 : Value-Weighted Average of BE/ME (5 rows x 5 cols)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;5ã¤ç›®ãŒãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã«å«ã¾ã‚Œã‚‹éŠ˜æŸ„æ•°ã€1ã¤ç›®ãŒvalue weightedãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã®æœˆæ¬¡ãƒªã‚¿ãƒ¼ãƒ³ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;ds[&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##          Cnsmr  Manuf  HiTec  Hlth   Other
## Date                                      
## 2017-03    519    592    663    577   1025
## 2017-04    517    586    658    574   1018
## 2017-05    515    583    655    572   1009
## 2017-06    511    580    651    570   1000
## 2017-07    525    615    684    613   1056
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;ds[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##          Cnsmr  Manuf  HiTec  Hlth   Other
## Date                                      
## 2017-03   0.79  -0.20   1.91   0.03  -1.69
## 2017-04   1.82   0.36   2.19   0.91   0.23
## 2017-05   2.02   0.35   3.12  -0.25  -0.45
## 2017-06  -1.19   0.32  -2.12   5.54   4.22
## 2017-07  -0.07   2.31   4.02   0.70   1.49
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;4-ferdã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;4. FERDã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;fredã§å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&#34;&gt;FREDã§å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://fred.stlouisfed.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;FRED&lt;/a&gt;ã§ã¯å¤šç¨®å¤šæ§˜ãªçµŒæ¸ˆçµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã‚µã‚¤ãƒˆã¸è¡Œãã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«çµ±è¨ˆæ¯ã«ãƒšãƒ¼ã‚¸ãŒå­˜åœ¨ã—ã¾ã™ã€‚ã“ã®çµ±è¨ˆåã®æ¨ªã«ã¤ã„ã¦ã„ã‚‹&lt;code&gt;CPIAUCSL&lt;/code&gt;ãŒTickerã«ãªã£ã¦ãŠã‚Šã€ã“ã‚Œã‚’æ¸¡ã™ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;FRED.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•-2&#34;&gt;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;å…ˆã»ã©è¦‹ãŸTickerã‚’&lt;code&gt;DataReader&lt;/code&gt;é–¢æ•°ã«æ¸¡ã—ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’&lt;code&gt;fred&lt;/code&gt;ã¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; datetime
start &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; datetime&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;datetime(&lt;span style=&#34;color:#ae81ff&#34;&gt;2010&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
end &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; datetime&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;datetime(&lt;span style=&#34;color:#ae81ff&#34;&gt;2013&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;27&lt;/span&gt;)

gdp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;GDP&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;fred&amp;#39;&lt;/span&gt;, start, end)
inflation &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader([&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CPIAUCSL&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CPILFESL&amp;#39;&lt;/span&gt;], &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;fred&amp;#39;&lt;/span&gt;, start, end)

gdp&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##                   GDP
## DATE                 
## 2010-01-01  14764.611
## 2010-04-01  14980.193
## 2010-07-01  15141.605
## 2010-10-01  15309.471
## 2011-01-01  15351.444
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;inflation&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##             CPIAUCSL  CPILFESL
## DATE                          
## 2010-01-01   217.488   220.633
## 2010-02-01   217.281   220.731
## 2010-03-01   217.353   220.783
## 2010-04-01   217.403   220.822
## 2010-05-01   217.290   220.962
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;5-oecdã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;5. OECDã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://stats.oecd.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OECD&lt;/a&gt;ã¯ä»¥å‰ä»¥ä¸‹ã®è¨˜äº‹ã§ç´¹ä»‹ã—ã¾ã—ãŸãŒã€&lt;code&gt;pandas_datareader&lt;/code&gt;ã§ã‚‚å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;ttps://ayatoashihara.github.io/myblog_multi/post/post22/&#34;&gt;OECD.orgã‹ã‚‰ãƒã‚¯ãƒ­ãƒ‘ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’APIã§å–å¾—ã™ã‚‹&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ãŸã ã€&lt;code&gt;OECD dataset code&lt;/code&gt;ã‚’æŒ‡å®šã™ã‚‹ã ã‘&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ãªã®ã§ã€&lt;code&gt;pandasdmx&lt;/code&gt;ã‚ˆã‚Šã¯è‡ªç”±åº¦ãŒä½ã„ã§ã™ã€‚ ã‚ã¨ã€å‰å›å–å¾—ã—ãŸ&lt;code&gt;MEI_ARCHIVE&lt;/code&gt;ã¨ã‹æŒ‡å®šã™ã‚‹ã¨ãƒ‡ãƒ¼ã‚¿ãŒå¤šã™ãã¦ã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚OECDãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã¨ãã«ã¯ã€å›½ã‚„æœŸé–“ãªã©ç´°ã‹ã„æŒ‡å®šã®ã§ãã‚‹&lt;code&gt;pandasdmx&lt;/code&gt;ã®ã»ã†ãŒè‰¯ã„ã¨å€‹äººçš„ã«æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ãªãŠã€ä½¿ç”¨æ–¹æ³•ã¯FREDã¨åŒæ§˜ã§ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã«&lt;code&gt;oecd&lt;/code&gt;ã‚’æŒ‡å®šã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;TUD&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;oecd&amp;#39;&lt;/span&gt;)
df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Country                  Australia  ...                Slovenia
## Frequency                   Annual  ...                  Annual
## Measure    Percentage of employees  ... Percentage of employees
## Time                                ...                        
## 2018-01-01                     NaN  ...                     NaN
## 2019-01-01                     NaN  ...                     NaN
## 2020-01-01                     NaN  ...                     NaN
## 
## [3 rows x 39 columns]
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;6-eurostatã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&#34;&gt;6. Eurostatã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h2&gt;
&lt;h3 id=&#34;eurostatã‹ã‚‰å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&#34;&gt;Eurostatã‹ã‚‰å–å¾—ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã¯&lt;/h3&gt;
&lt;p&gt;Eurostatã¯æ¬§å·é€£åˆã®çµ±è¨ˆå±€ã§ã€ä¸»ã«EUåœ°åŸŸã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å¤šå²ã«ã‚ãŸã£ã¦ãŠã‚Šã€çµŒæ¸ˆé‡‘èã ã‘ã§ãªãè¾²æ¥­ã‚„äººå£å‹•æ…‹ã€è¼¸é€ã€ç’°å¢ƒç­‰ã€…å¤šç¨®å¤šæ§˜ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;eurostat.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;IDã‚’ã©ã®ã‚ˆã†ã«å–å¾—ã™ã‚Œã°ã‚ˆã„ã®ã‹ã§ã™ãŒã€ä»¥ä¸‹ã®&lt;a href=&#34;https://ec.europa.eu/eurostat/data/database&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ãƒšãƒ¼ã‚¸&lt;/a&gt;ã«ã¦ã€å–å¾—ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã‚’é †ã€…ã«æ˜ã‚Šé€²ã‚ã¦ã„ãã¨é»„è‰²ã§è‰²ã‚’ä»˜ã‘ãŸã‚ˆã†ãªIDã‚³ãƒ¼ãƒ‰ãŒå‡ºã¦ãã¾ã™ã€‚ã“ã‚Œã§å–å¾—ãƒ‡ãƒ¼ã‚¿ã®IDã‚’ç‰¹å®šã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;eurostat2.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ãŸã ã€eurostatã‚‚OECDã¨åŒã˜ãsdmxã«å¯¾å¿œã—ã¦ã„ã‚‹ãŸã‚ã€&lt;code&gt;pandasdmx&lt;/code&gt;ã®ã»ã†ãŒä½¿ã„ã‚„ã™ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•-3&#34;&gt;ãƒ‡ãƒ¼ã‚¿å–å¾—æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;ä¸€ä¾‹ã¨ã—ã¦ã€ å…ˆã»ã©è¦‹ãŸ&lt;code&gt;Employment and activity by sex and age - annual data&lt;/code&gt;ã‚’å–å¾—ã—ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; web&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;DataReader(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;lfsi_emp_a&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;eurostat&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unstack()
df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## UNIT                            INDIC_EM                                                   SEX      AGE                  GEO      FREQ    TIME_PERIOD
## Percentage of total population  Persons in the labour force (former name: active persons)  Females  From 15 to 24 years  Austria  Annual  2018-01-01     54.0
##                                                                                                                                           2019-01-01     52.7
##                                                                                                                                           2020-01-01     52.7
##                                                                                                                          Belgium  Annual  2018-01-01     27.8
##                                                                                                                                           2019-01-01     29.5
## dtype: float64
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;æœ€å¾Œã«&#34;&gt;æœ€å¾Œã«&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;pandas_datareader&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¦ã€æ§˜ã€…ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰å¤šç¨®å¤šæ§˜ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã—ãŸã€‚è³‡ç”£é‹ç”¨ä¼šç¤¾ãªã©ã§åƒã„ã¦ã„ã‚‹æ–¹ã¯bloombergã‚„EIKONã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ãŸã‚ã€ã‚ã¾ã‚Šé­…åŠ›çš„ã«æ„Ÿã˜ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å€‹äººã§åˆ†æã‚’ã—ã¦ã„ã‚‹æ–¹ã‚„å®šæœŸçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã„æ–¹ã¯éå¸¸ã«ã‚ˆã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã¨æ€ã„ã¾ã™ã€‚è‡ªåˆ†è‡ªèº«ã€ã“ã®æ–°ã—ã„Webã‚µã‚¤ãƒˆã«ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã—ã¦ã‹ã‚‰ã€é€±æ¬¡ã‚„æœˆæ¬¡å˜ä½ã§çµŒæ¸ˆåˆ†æã‚’ä¸Šã’ã‚ˆã†ã‹ãªã¨æ€ã£ã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã‚’ä½¿ç”¨ã—ã¦çµŒæ¸ˆã®å®šç‚¹è¦³æ¸¬ã‚’ã—ãŸã„ãªã¨æ€ã£ã¦ã„ã‚‹ã¨ã“ã‚ã§ã™ã€‚çš†ã•ã‚“ã‚‚èˆˆå‘³ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’&lt;code&gt;pandas_datareader&lt;/code&gt;ã§è‡ªå‹•åé›†ã—ã¦ã¿ã¦ãã ã•ã„ï¼&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;ã‚µã‚¤ãƒˆã§çµ±è¨ˆã‚’é¸ã³ã€&lt;code&gt;export &amp;gt;- SDMX Query&lt;/code&gt;ã¨ã™ã‚‹ã¨ãã®çµ±è¨ˆã®ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã‚Œã¾ã™ã€‚ &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
    <item>
      <title>OECD.orgã‹ã‚‰ãƒã‚¯ãƒ­ãƒ‘ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’APIã§å–å¾—ã™ã‚‹</title>
      <link>/post/post22/</link>
      <pubDate>Mon, 19 Oct 2020 00:00:00 +0000</pubDate>
      <guid>/post/post22/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ãƒã‚¯ãƒ­çµŒæ¸ˆãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒã€å„å›½ã®ãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã‚‹ã¨ãªã‚‹ã¨ä¸€è‹¦åŠ´ã§ã™ã€‚ã§ã™ãŒã€OECDã‹ã‚‰APIçµŒç”±ã§ãƒ‡ãƒ¼ã‚¿å–å¾—ã™ã‚Œã°é¢å€’ãªå‡¦ç†ã‚’è‡ªå‹•åŒ–ã§ãã¾ã™ã€‚ä»Šæ—¥ã¯ãã®æ–¹æ³•ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1oecdstat-web-api&#34;&gt;1.OECD.Stat Web API&lt;/h2&gt;
&lt;p&gt;OECD.orgã§ã¯&lt;a href=&#34;https://stats.oecd.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OECD.Stat&lt;/a&gt;ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ãŠã‚Šã€OECDåŠ ç›Ÿå›½ã¨ç‰¹å®šã®éåŠ ç›Ÿå›½ã®æ§˜ã€…ãªçµŒæ¸ˆãƒ‡ãƒ¼ã‚¿ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚WEBã‚µã‚¤ãƒˆã«è¡Œã‘ã°æ‰‹å‹•ã§csvãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€å®šæœŸçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€åˆ†æã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãªã‚‰ã°ãƒ‡ãƒ¼ã‚¿å–å¾—å‡¦ç†ã‚’è‡ªå‹•åŒ–ã—ãŸã„è¡å‹•ã«é§†ã‚‰ã‚Œã¾ã™ã€‚OECDã¯Web APIã‚’æä¾›ã—ã¦ã„ã‚‹ã®ã§ã€&lt;code&gt;Python&lt;/code&gt;ã‚„&lt;code&gt;R&lt;/code&gt;ã•ãˆä½¿ãˆã‚Œã°ã“ã‚Œã‚’å®Ÿç¾ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&amp;lt;OECDå®Ÿæ–½ã®å…·ä½“çš„ãªå†…å®¹&amp;gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ã¯ã€ç¾æ™‚ç‚¹ã§ã®ç‰¹å®šã®OECD REST SDMXã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…è©³ç´°ã®ãƒªã‚¹ãƒˆã§ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åŒ¿åã‚¯ã‚¨ãƒªã®ã¿ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã€èªè¨¼ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å„ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¯1,000,000ä»¶ã®ã‚ªãƒ–ã‚¶ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã«åˆ¶é™ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ãƒªã‚¯ã‚¨ã‚¹ãƒˆURLã®æœ€å¤§é•·ã¯1000æ–‡å­—ã§ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã€&lt;code&gt;CORS&lt;/code&gt; ãƒ˜ãƒƒãƒ€ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ (&lt;code&gt;CORS &lt;/code&gt;ã«ã¤ã„ã¦ã®è©³ç´°ã¯ &lt;a href=&#34;http://www.html5rocks.com/en/tutorials/cors/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã‚’å‚ç…§)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ã‚¨ãƒ©ãƒ¼ã¯çµæœã«ã¯è¿”ã•ã‚Œã¾ã›ã‚“ãŒã€HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ Web ã‚µãƒ¼ãƒ“ã‚¹ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¾“ã£ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å­˜åœ¨ã—ãªã„ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒè¦æ±‚ã•ã‚ŒãŸå ´åˆã¯ã€401 UnauthorizedãŒè¿”ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;REST&lt;/code&gt; ã‚¯ã‚¨ãƒªã® source (ã¾ãŸã¯ Agency ID) ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å¿…é ˆã§ã™ãŒã€ã€ŒALLã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“: å¸¸ã«æœ€æ–°ã®å®Ÿè£…ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã®ä¸¦ã¹æ›¿ãˆã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;lastNObservations&lt;/code&gt;ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;dimensionAtObservation=AllDimensions&lt;/code&gt; ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã§ã‚‚ã€è¦³æ¸¬ã¯æ™‚ç³»åˆ— (ã¾ãŸã¯ã‚¤ãƒ³ãƒãƒ¼ãƒˆå›ºæœ‰) ã®é †åºã«å¾“ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¾æ™‚ç‚¹ã§ã¯ã€å‚ç…§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;2pandasdmx&#34;&gt;2.pandasdmx&lt;/h2&gt;
&lt;p&gt;Web APIã¯&lt;code&gt;sdmx-json&lt;/code&gt;ã¨ã„ã†å½¢å¼ã§æä¾›ã•ã‚Œã¾ã™ã€‚&lt;code&gt;Python&lt;/code&gt;ã§ã¯ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå­˜åœ¨ã—ã¾ã™ã€‚ãã‚ŒãŒ&lt;code&gt;**pandasdmx**&lt;/code&gt;ã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ–¹æ³•ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;pandasdmx&lt;/code&gt;ã‚’&lt;code&gt;import&lt;/code&gt;ã—ã€&lt;code&gt;Request&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã«å¼•æ•°ã¨ã—ã¦&amp;rsquo;OECD&amp;rsquo;ã‚’æ¸¡ã—ã€&lt;code&gt;api.Request&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ä½œæˆã—ãŸ&lt;code&gt;api.Request&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®dataãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚¯ã‚¨ãƒªæ¡ä»¶ã‚’æ¸¡ã—ã€OECD.orgã‹ã‚‰&lt;code&gt;sdmx-json&lt;/code&gt;å½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’&lt;code&gt;to_pandas()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§&lt;code&gt;pandas&lt;/code&gt;ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¸æ•´å½¢ã™ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;3å®Ÿè£…&#34;&gt;3.å®Ÿè£…&lt;/h2&gt;
&lt;p&gt;ã§ã¯ã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å–å¾—ã™ã‚‹ã®ã¯ã€ã€Œ&lt;code&gt;**Revisions Analysis Dataset -- Infra-annual Economic Indicators**&lt;/code&gt;ã€ã¨ã„ã†ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã™ã€‚OECDã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ä¸€ã¤ã§ã‚ã‚‹&lt;code&gt;Monthly Ecnomic Indicator&lt;/code&gt;(MEI)ã®ä¿®æ­£ã‚’å«ã‚€å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã„ã‚‹ã®ã§ã€ä¸»è¦ãªçµŒæ¸ˆå¤‰æ•°(å›½å†…ç·ç”Ÿç”£ã¨ãã®æ”¯å‡ºé …ç›®ã€é‰±å·¥æ¥­ç”Ÿç”£ã¨å»ºè¨­ç”Ÿç”£æŒ‡æ•°ã€å›½éš›åæ”¯ã€è¤‡åˆä¸»è¦æŒ‡æ¨™ã€æ¶ˆè²»è€…ç‰©ä¾¡æŒ‡æ•°ã€å°å£²å–å¼•é«˜ã€å¤±æ¥­ç‡ã€å°±æ¥­è€…æ•°ã€æ™‚é–“å½“ãŸã‚Šè³ƒé‡‘ã€è²¨ãƒãƒãƒ¼ã‚µãƒ—ãƒ©ã‚¤ã€è²¿æ˜“çµ±è¨ˆãªã©)ã«ã¤ã„ã¦ã€åˆå‡ºæ™‚ã®é€Ÿå ±ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ä¿®æ­£ãŒåŠ ãˆã‚‰ã‚ŒãŸç¢ºå ±ãƒ‡ãƒ¼ã‚¿ã¾ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã¯ã€1999å¹´2æœˆã‹ã‚‰æ¯æœˆã®é–“éš”ã§ã€éå»ã«ä¸»è¦çµŒæ¸ˆæŒ‡æ¨™ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§åˆ†æå¯èƒ½ã ã£ãŸãƒ‡ãƒ¼ã‚¿ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€å„æ™‚ç‚¹ã§å…¥æ‰‹å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã€äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰ãŒã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ãªã£ã¦ã„ã¾ã™ã€‚æœ€æ–°ã®ãƒ‡ãƒ¼ã‚¿ã¯æœ‰ç”¨ã§ã™ãŒé€Ÿå ±å€¤ãªã®ã§ä¸ç¢ºå®Ÿæ€§ãŒã¤ãã¾ã¨ã„ã¾ã™ã€‚ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’è¡Œã†éš›ã«ã¯ã“ã®çŠ¶æ³ãŒå†ç¾ã§ããšå®Ÿéš›ã®é‹ç”¨ã‚ˆã‚Šã‚‚è‰¯ã„ç’°å¢ƒã§åˆ†æã—ã¦ã—ã¾ã†ã“ã¨ãŒå•é¡Œã«ãªã£ãŸã‚Šã—ã¾ã™ã€‚ã„ã‚ã‚†ã‚‹&lt;code&gt;Jagged edge&lt;/code&gt;å•é¡Œã§ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã¯å®Ÿé‹ç”¨ã®çŠ¶æ³ãŒå†ç¾ã§ãã‚‹ãŸã‚éå¸¸ã«æœ‰ç”¨ã§ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ä»Šå›ã¯ä»¥ä¸‹ã®ãƒ‡ãƒ¼ã‚¿é …ç›®ã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;çµ±è¨ˆæ¦‚è¦&lt;/th&gt;
&lt;th&gt;çµ±è¨ˆID&lt;/th&gt;
&lt;th&gt;é »åº¦&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;GDP&lt;/td&gt;
&lt;td&gt;101&lt;/td&gt;
&lt;td&gt;å››åŠæœŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;é‰±å·¥æ¥­ç”Ÿç”£æŒ‡æ•°&lt;/td&gt;
&lt;td&gt;201&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å°å£²æ¥­å–å¼•é«˜&lt;/td&gt;
&lt;td&gt;202&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;ãƒãƒãƒ¼ã‚µãƒ—ãƒ©ã‚¤ - åºƒç¾©æµå‹•æ€§&lt;/td&gt;
&lt;td&gt;601&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;è²¿æ˜“çµ±è¨ˆ&lt;/td&gt;
&lt;td&gt;702+703&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;çµŒå¸¸åæ”¯&lt;/td&gt;
&lt;td&gt;701&lt;/td&gt;
&lt;td&gt;å››åŠæœŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å°±æ¥­è€…æ•°&lt;/td&gt;
&lt;td&gt;502&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å¤±æ¥­ç‡&lt;/td&gt;
&lt;td&gt;501&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;æ™‚é–“å½“ãŸã‚Šè³ƒé‡‘ï¼ˆè£½é€ æ¥­ï¼‰&lt;/td&gt;
&lt;td&gt;503&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å˜ä½ã‚ãŸã‚ŠåŠ´åƒã‚³ã‚¹ãƒˆ&lt;/td&gt;
&lt;td&gt;504&lt;/td&gt;
&lt;td&gt;å››åŠæœŸ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;å»ºç¯‰ç”Ÿç”£æŒ‡æ•°&lt;/td&gt;
&lt;td&gt;203&lt;/td&gt;
&lt;td&gt;æœˆæ¬¡&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;ã¾ãšã€é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚å¼•æ•°ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDã€ãã®ä»–ID(å›½IDã‚„çµ±è¨ˆID)ã€é–‹å§‹åœ°ç‚¹ã€çµ‚äº†åœ°ç‚¹ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandasdmx &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; sdmx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## C:\Users\aashi\ANACON~1\lib\site-packages\pandasdmx\remote.py:13: RuntimeWarning: optional dependency requests_cache is not installed; cache options to Session() have no effect
##   RuntimeWarning,
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;oecd &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sdmx&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Request(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;OECD&amp;#39;&lt;/span&gt;)
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;resp_OECD&lt;/span&gt;(dsname,dimensions,start,end):
    dim_args &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;+&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(d) &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; d &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; dimensions]
    dim_str &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;join(dim_args)
    resp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; oecd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;data(resource_id&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dsname, key&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;dim_str &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/all?startTime=&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; start &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;amp;endTime=&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; end)
    df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; resp&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_pandas()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;reset_index()
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;(df)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹æ¬¡å…ƒã‚’æŒ‡å®šã—ã¾ã™ã€‚ä»¥ä¸‹ã§ã¯ã€â‘ å›½ã€â‘¡çµ±è¨ˆé …ç›®ã€â‘¢å…¥æ‰‹æ™‚ç‚¹ã€â‘£é »åº¦ã‚’ã‚¿ãƒ—ãƒ«ã§æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;dimensions &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ((&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;USA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;JPN&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;GBR&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;FRA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;DEU&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ITA&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CAN&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NLD&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;BEL&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;SWE&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;CHE&amp;#39;&lt;/span&gt;),(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;201&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;202&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;601&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;702&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;703&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;701&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;502&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;503&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;504&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;203&amp;#39;&lt;/span&gt;),(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202001&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202002&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202003&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202004&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202005&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202006&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202007&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;202008&amp;#34;&lt;/span&gt;),(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;M&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Q&amp;#34;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é–¢æ•°ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; resp_OECD(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;MEI_ARCHIVE&amp;#39;&lt;/span&gt;,dimensions,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2019-Q1&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2020-Q2&amp;#39;&lt;/span&gt;)
result&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;count()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## LOCATION       8266
## VAR            8266
## EDI            8266
## FREQUENCY      8266
## TIME_PERIOD    8266
## value          8266
## dtype: int64
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã®æœ€åˆæ•°ä»¶ã‚’è¦‹ã¦ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;result&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   LOCATION  VAR     EDI FREQUENCY TIME_PERIOD  value
## 0      BEL  201  202001         M     2019-01  112.5
## 1      BEL  201  202001         M     2019-02  111.8
## 2      BEL  201  202001         M     2019-03  109.9
## 3      BEL  201  202001         M     2019-04  113.5
## 4      BEL  201  202001         M     2019-05  112.1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ãŒTidyãªå½¢(Longå‹)ã§å…¥ã£ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚ä¸€ç•ªå³å´ã®&lt;code&gt;value&lt;/code&gt;ãŒå€¤ã¨ã—ã¦æ ¼ç´ã•ã‚Œã¦ãŠã‚Šã€ãã®ä»–ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;LOCATION - å›½&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;VAR - çµ±è¨ˆé …ç›®&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;EDI - å…¥æ‰‹æ™‚ç‚¹(MEI_ARCHIVEã®å ´åˆ)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FREQUENCY - é »åº¦(æœˆæ¬¡ã€å››åŠæœŸç­‰)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TIME_PERIOD - çµ±è¨ˆã®åŸºæº–æ™‚ç‚¹&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã‚ˆã£ã¦ã€&lt;code&gt;EDI&lt;/code&gt;ãŒç•°ãªã‚‹è¡Œã§åŒã˜&lt;code&gt;TIME_PERIOD&lt;/code&gt;ãŒå­˜åœ¨ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ä¸Šã§ã¯ãƒ™ãƒ«ã‚®ãƒ¼(&lt;code&gt;BEL&lt;/code&gt;)ã®é‰±å·¥æ¥­ç”Ÿç”£æŒ‡æ•°(201)ã®2020/01æ™‚ç‚¹ã§åˆ©ç”¨å¯èƒ½ãª2019-01~2019-05ã®ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚å¯è¦–åŒ–ã‚„å›å¸°ã‚‚è¡Œã„ã‚„ã™ã„Longãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã®æä¾›ãªã®ã§éå¸¸ã«ã‚ã‚ŠãŒãŸã„ã§ã™ã­ã€‚é‰±å·¥æ¥­ç”Ÿç”£æŒ‡æ•°ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¦ã„ãæ§˜å­ã‚’å¯è¦–åŒ–ã—ã¦ã¿ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; seaborn &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; sns
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd

result &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; result[result[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;FREQUENCY&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;M&amp;#39;&lt;/span&gt;]
result[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;TIME_PERIOD&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_datetime(result[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;TIME_PERIOD&amp;#39;&lt;/span&gt;],format&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;%Y-%m&amp;#39;&lt;/span&gt;)
sns&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;relplot(data&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;result[&lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; df: (df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;VAR&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;201&amp;#39;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt; (pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_numeric(df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;EDI) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;202004&lt;/span&gt;)],x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;TIME_PERIOD&amp;#39;&lt;/span&gt;,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;value&amp;#39;&lt;/span&gt;,hue&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;LOCATION&amp;#39;&lt;/span&gt;,kind&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;line&amp;#39;&lt;/span&gt;,col&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;EDI&amp;#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post22/index_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;1056&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post22/index_files/figure-html/unnamed-chunk-6-2.png&#34; width=&#34;2035&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã‚³ãƒ­ãƒŠã®çµŒæ¸ˆçš„ãªè¢«å®³ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã¦æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ãŒè½ã¡è¾¼ã‚“ã§ã„ãæ§˜å­ãŒè¦‹ã¦å–ã‚Œã‚‹ä¸€æ–¹ã€å¾®å¦™ã«ã§ã™ãŒéå»å€¤ã«ã¤ã„ã¦ã‚‚é€Ÿå ±å€¤â†’ç¢ºå ±å€¤ã¸ã¨ä¿®æ­£ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€å›½ã«ã‚ˆã£ã¦çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®å…¬è¡¨ã«ãƒ©ã‚°ãŒã‚ã‚‹ã“ã¨ã‚‚åˆ†ã‹ã‚Šã¾ã™ã€‚ãƒ™ãƒ«ã‚®ãƒ¼ã¯æœ€ã‚‚å…¬è¡¨ãŒé…ã„ã‚ˆã†ã§ã™ã€‚æ™‚é–“ãŒã‚ã‚‹ã¨ãã«ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ãŸç°¡å˜ãªäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®åˆ†æã‚’è¿½è¨˜ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4åˆ¥ä»¶ã§ã™ãŒ&#34;&gt;4.åˆ¥ä»¶ã§ã™ãŒã€‚ã€‚ã€‚&lt;/h2&gt;
&lt;p&gt;Python 3 ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢èªå®šãƒ‡ãƒ¼ã‚¿åˆ†æè©¦é¨“ã«åˆæ ¼ã—ã¾ã—ãŸã€‚åˆæ ¼ç‡70%ã ã‘ã‚ã£ã¦ã€ã‹ãªã‚Šç°¡å˜ã§ã—ãŸãŒ&lt;code&gt;Python&lt;/code&gt;ã‚’åŸºç¤ã‹ã‚‰è¦‹è¿”ã™ã„ã„æ©Ÿä¼šã«ãªã‚Šã¾ã—ãŸã€‚ä»Šã‚„ã£ã¦ã„ã‚‹æ¥­å‹™ã§ã¯ãƒ‡ãƒ¼ã‚¿åˆ†æã¯ãŠã‚ã‹&lt;code&gt;Python&lt;/code&gt;ã‚„&lt;code&gt;R&lt;/code&gt;ã‚’ä½¿ã†æ©Ÿä¼šã™ã‚‰ãªã„ã®ã§ã€è»¢è·ã‚‚å«ã‚ãŸå¯èƒ½æ€§ã‚’è€ƒãˆã¦ã„ã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšã€ä»¥ä¸‹ã®è³‡æ ¼ã‚’ä»Šå¹´åº¦ä¸­ã«å–å¾—ã™ã‚‹äºˆå®šã§ã€é‡‘èã«ã“ã ã‚ã‚‰ãšã«ã‚¹ã‚­ãƒ«ã‚’æ´»ã‹ã›ã‚‹ãƒã‚¹ãƒˆã‚’æ¢ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ãƒ€ã‚¤ã‚¨ãƒƒãƒˆã¨åŒã˜ã§å®£è¨€ã—ã¦è‡ªåˆ†ã‚’è¿½ã„è¾¼ã¾ãªã„ã¨ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Gæ¤œå®š&lt;/li&gt;
&lt;li&gt;Oracle Database Master Silver SQL&lt;/li&gt;
&lt;li&gt;Linuc ãƒ¬ãƒ™ãƒ« 1&lt;/li&gt;
&lt;li&gt;åŸºæœ¬æƒ…å ±æŠ€è¡“è€…&lt;/li&gt;
&lt;li&gt;AWS èªå®šã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ - ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆæ ¼çŠ¶æ³ã¯éƒ½åº¦ãƒ–ãƒ­ã‚°ã§å ±å‘Šã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Rcppã§ãƒ‡ãƒ¼ã‚¿ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’é«˜é€Ÿã«è¡Œã†(Tickãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã‚’äº‹ä¾‹ã«)</title>
      <link>/post/post21/</link>
      <pubDate>Thu, 10 Sep 2020 00:00:00 +0000</pubDate>
      <guid>/post/post21/</guid>
      <description>&lt;h2 id=&#34;0-ã‚„ã‚ŠãŸã„ã“ã¨&#34;&gt;0. ã‚„ã‚ŠãŸã„ã“ã¨&lt;/h2&gt;
&lt;p&gt;ä»Šå›ãŠè¦‹ã›ã™ã‚‹ã®ã¯å‰è¿°ã®é€šã‚Šã€ç‚ºæ›¿ã®Tickãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã£ãŸå‰å‡¦ç†(ã¨è§£æ)ã«ãªã‚Šã¾ã™ã€‚ä¸»çœ¼ã‚’&lt;code&gt;Rcpp&lt;/code&gt;ã‚’ç”¨ã„ãŸåŠ¹ç‡åŒ–ã«ç½®ã„ã¦ã„ã¾ã™ã®ã§è©³ã—ãã¯è¸ã¿å…¥ã‚Šã¾ã›ã‚“ãŒã€ã‚„ã‚ŠãŸã„ã“ã¨ã‚’ã–ã£ãã‚Šã¨å…ˆã«ç¤ºã—ã¦ãŠãã¾ã™ã€‚&lt;br&gt;
ã‚„ã‚ŠãŸã„ã®ã¯ã€JPY/USDãƒ¬ãƒ¼ãƒˆã®5åˆ†åˆ»ã¿ãƒªã‚¿ãƒ¼ãƒ³ã‹ã‚‰&lt;em&gt;Jump&lt;/em&gt;ã‚’æ¤œçŸ¥ã™ã‚‹ã“ã¨ã§ã™ã€‚ã“ã“ã§ã®Jumpã¨ã¯ãã‚Œã¾ã§ã¨æ¯”ã¹ã¦ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆãŒã‚¬ã‚¯ãƒƒã¨ä¸Šæ˜‡(ä¸‹è½)ã—ãŸç‚¹ã§ã™ã€‚æ—¥ä¸­ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã¯å°åˆ»ã¿ã«å‹•ãã¾ã™ãŒã€ãªã«ã‹ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚‹ã¨å¤§ããä¸Šæ˜‡(ä¸‹è½)ã—ã¾ã™ã€‚ã©ã‚“ãªã‚¤ãƒ™ãƒ³ãƒˆãŒJumpã‚’å¼•ãèµ·ã“ã™ã®ã‹ã¯éå¸¸ã«èˆˆå‘³æ·±ã„ç‚¹ã§ã™ã€‚ã“ã‚Œã‚’æ¤œè¨¼ã™ã‚‹ã«ã¯ã¾ãšJumpã‚’æ¤œçŸ¥ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã™ã€‚ å‚è€ƒã¨ã™ã‚‹ã®ã¯ä»¥ä¸‹ã®è«–æ–‡ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://academic.oup.com/rfs/article-abstract/21/6/2535/1574138?redirectedFrom=fulltext&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Suzanne S. Lee &amp;amp; Per A. Mykland, 2008. &amp;ldquo;Jumps in Financial Markets: A New Nonparametric Test and Jump Dynamics,&amp;rdquo; Review of Financial Studies, Society for Financial Studies, vol. 21(6), pages 2535-2563, November.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;CitationãŒ204ã‚‚ã‚ã‚‹éå¸¸ã«è©•ä¾¡ã•ã‚Œã¦ã„ã‚‹è«–æ–‡ã§ã™ã€‚æ¨å®šæ–¹æ³•ã‚’æ»ã„æ‘˜ã‚“ã§èª¬æ˜ã—ã¾ã™ã€‚ã¾ãšã€é€£ç¶šè¤‡åˆ©ãƒªã‚¿ãƒ¼ãƒ³ã‚’$d\log S(t)$ for $t&amp;gt;0$ã¨ã—ã¾ã™ã€‚ã“ã“ã§ã€$S(t)$ã¯$t$æ™‚ç‚¹ã§ã®è³‡ç”£ä¾¡æ ¼ã§ã™ã€‚å¸‚å ´ã«JumpãŒãªã„å ´åˆã€$S(t)$ã¯ä»¥ä¸‹ã®ç¢ºç‡éç¨‹ã«å¾“ã†ã¨ä»®å®šã—ã¾ã™ã€‚ 
$$
d\log S(t) = \mu(t)dt + \sigma(t)dW(t) \tag{1}
$$ 
ã“ã“ã§ã€$W(t)$ã¯æ¨™æº–ãƒ–ãƒ©ã‚¦ãƒ³é‹å‹•ã€$\mu(t)$ã¯ãƒ‰ãƒªãƒ•ãƒˆé …ã€$\sigma(t)$ã¯ã‚¹ãƒãƒƒãƒˆãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã™ã€‚ã¾ãŸã€JumpãŒã‚ã‚‹ã¨ãã€$S(t)$ã¯ 
$$
d\log S(t) = \mu(t)dt + \sigma(t)dW(t) + Y(t)dJ(t) \tag{2}
$$ 
ã«å¾“ã†ã¨ä»®å®šã—ã¾ã™ã€‚ã“ã“ã§ã€$J(t)$ã¯$W(t)$ã¨ã¯ç‹¬ç«‹ã—ãŸã‚«ã‚¦ãƒ³ãƒˆéç¨‹ã§ã™ã€‚&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;$Y(t)$ã¯ã‚¸ãƒ£ãƒ³ãƒ—ã®ã‚µã‚¤ã‚ºã‚’è¡¨ç¾ã—ã¦ãŠã‚Šã€äºˆæ¸¬å¯èƒ½ãªéç¨‹ã§ã‚ã‚‹ã¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ã€$S(t)$ã®å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã‚’è€ƒãˆã¾ã™ã€‚ãã‚Œã¯ã¤ã¾ã‚Š$\log S(t_i)/S(t_{i-1})$ã§ã™ãŒã€ã“ã‚Œã¯æ­£è¦åˆ†å¸ƒ$N(0,\sigma(t_i))$ã«å¾“ã„ã¾ã™ã€‚&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;ã“ã“ã§ã€$t_{i-1}$ã‹ã‚‰$t_{i}$ã«JumpãŒã‚ã£ãŸéš›ã®$t_i$æ™‚ç‚¹ã®çµ±è¨ˆé‡$\mathcal{L(i)}$ã‚’ä»¥ä¸‹ã§å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;$$
\mathcal{L(i)} \equiv \frac{|\log S(t_i)/S(t_{i-1})|}{\hat{\sigma}_{t_i}} \tag{3}
$$ 
ä¸Šè¨˜ã¯å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã®çµ¶å¯¾å€¤ã‚’å˜ç´”ã«æ¨™æº–åŒ–ã—ãŸã‚‚ã®ã§ã™ãŒã€æ¨™æº–åå·®ã®æ¨å®šé‡ã«ã¯ä»¥ä¸‹ã§å®šç¾©ã•ã‚Œã‚‹&amp;quot;Realized Bipower Variation&amp;quot;ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
$$
\hat{\sigma}_{t_i} = \frac{1}{K-2}\sum_{j=i-K+2}^{i-2}|\log S(t_j)/\log S(t_{j-1})||\log S(t_{j-1})/\log S(t_{j-2})| \tag{4}
$$ 
$K$ã¯Windowã«å«ã¾ã‚Œã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã®æ•°ã§ã™ã€‚ä»®ã«5minåˆ»ã¿ãƒªã‚¿ãƒ¼ãƒ³ã‚’ç”¨ã„ã€2020/9/10 10:00ã«JumpãŒç™ºç”Ÿã—ãŸå ´åˆã€$K=270$ã¨ã—ã¦ã„ã‚‹å ´åˆã¯å‰æ—¥2020/9/9 11:30ã‹ã‚‰2020/9/11 09:55ã¾ã§ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ç”¨ã„ã¦è¨ˆç®—ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯ã€ãƒªã‚¿ãƒ¼ãƒ³ã®çµ¶å¯¾å€¤ã‚’ã‹ã‘ãŸã‚‚ã®ã‚’è¶³ã—åˆã‚ã›ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ãŒã€ã“ã‚Œã§JumpãŒç”Ÿã˜ãŸæ¬¡ã®ç¬é–“(ã¤ã¾ã‚Š$t_{i+1}$ã¨ã‹ï¼‰ã®æ¨å®šå€¤ãŒJumpã«å½±éŸ¿ã•ã‚Œã«ãã„ã‚ˆã†ã§ã™ã€‚ã¡ãªã¿ã«$K=270$ã¯5minåˆ»ã¿ãƒªã‚¿ãƒ¼ãƒ³ã®å ´åˆã®æ¨å¥¨å€¤ã¨åˆ¥ã®æ–‡çŒ®ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã†ã—ã¦è¨ˆç®—ã•ã‚ŒãŸJumpçµ±è¨ˆé‡$\mathcal{L(i)}$ã‚’ã©ã®ã‚ˆã†ã«çµ±è¨ˆçš„æ¤œå®šã«ç”¨ã„ã¦Jumpã‚’æ¤œå‡ºã™ã‚‹ã‹ã«è©±ã‚’ç§»ã—ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã¯ç¢ºç‡å¤‰æ•°ã§ã‚ã‚‹$\mathcal{L(i)}$ã®æœ€å¤§å€¤(ã“ã¡ã‚‰ã‚‚ç¢ºç‡å¤‰æ•°)ã‚’è€ƒãˆã€ãã®åˆ†å¸ƒã‹ã‚‰å¤§ããé€¸è„±ã—ãŸå€¤ã‚’å–ã£ãŸå ´åˆ(95%ç‚¹ã¨ã‹)ã€ãã®ãƒªã‚¿ãƒ¼ãƒ³ã‚’Jumpã¨ã—ã¾ã™ã€‚
æœŸé–“$[t_{i-1},t_{i}]$ã«JumpãŒãªã„ã¨ã—ãŸå ´åˆã€ã“ã®æœŸé–“ã®é•·ã•$\Delta=t_{i}-t_{i-1}$ã‚’$0$ã«è¿‘ã¥ã‘ã‚‹ã¨ã€ã¤ã¾ã‚Š$\Delta\rightarrow0$ã¨ã™ã‚‹ã¨ã€æ¨™æº–æ­£è¦å¤‰æ•°ã®çµ¶å¯¾å€¤ã®æœ€å¤§å€¤ã¯ã€ã‚¬ãƒ³ãƒ™ãƒ«åˆ†å¸ƒã«åæŸã—ã¾ã™ã€‚çš†ã•ã‚“å¤§å¥½ãæ¥µå€¤çµ±è¨ˆã§ã™ã­ã€‚ã‚ˆã£ã¦ã€Jumpã¯ä»¥ä¸‹ã®æ¡ä»¶ãŒæº€ãŸã•ã‚ŒãŸéš›ã«å¸°ç„¡ä»®èª¬ãŒæ£„å´ã•ã‚Œã€æ¤œå‡ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ 
$$
\mathcal{L(i)} &amp;gt; G^{-1}(1-\alpha)S_{n} + C_{n} \tag{5}
$$ 
ã“ã“ã§ã€$G^{-1}(1-\alpha)$ã¯æ¨™æº–ã‚¬ãƒ³ãƒ™ãƒ«åˆ†å¸ƒã®$(1-\alpha)$åˆ†ä½é–¢æ•°ã§ã™ã€‚$\alpha=10%$ã ã¨2.25ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ 
$$
S_{n} = \frac{1}{c(2\log n)^{0.5}},~ \&lt;br&gt;
C_{n} = \frac{(2\log n)^{0.5}}{c}-\frac{\log \pi+\log(\log n)}{2c(2\log n)^{0.5}}
$$ 
ã§ã™(å°å‡ºã¯ã—ã¾ã›ã‚“ãŒã€1å¼ã¨2å¼ã‚’ä½¿ã£ã¦è¨¼æ˜ã§ãã¾ã™)ã€‚ã“ã“ã§ã€$c=(2/\pi)^{0.5}$ã§ã€$n$ã¯æ¨å®šã«ä½¿ç”¨ã™ã‚‹ç·ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã§ã™ã€‚ æœ€çµ‚çš„ã«ã€$Jump_{t_i}$ã¯
$$
Jump_{t_i} = \log\frac{S(t_i)}{S(t_{i-1})}Ã—I(\mathcal{L(i)} - G^{-1}(1-\alpha)S_{n} + C_{n})\tag{6}
$$ 
ã§æ±‚ã‚ã‚‰ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã“ã“ã§ã€$I(ãƒ»)$ã¯ä¸­èº«ãŒ0ã‚ˆã‚Šå¤§ãã„ã¨1ã€ãã‚Œä»¥å¤–ã¯0ã‚’è¿”ã™Indicatoré–¢æ•°ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿&#34;&gt;1. ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿&lt;/h2&gt;
&lt;p&gt;ã§ã¯ã€æ¨å®šæ–¹æ³•ãŒã‚ã‹ã£ãŸã®ã§ã¾ãšTickãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚’ã—ã¾ã—ã‚‡ã†ã€‚ãƒ‡ãƒ¼ã‚¿ã¯&lt;code&gt;QuantDataManager&lt;/code&gt;ã‹ã‚‰csvã‚’å–å¾—ã—ã€ãã‚Œã‚’ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(magrittr)

&lt;span style=&#34;color:#75715e&#34;&gt;# Tick dataã®èª­ã¿è¾¼ã¿&lt;/span&gt;
strPath &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; r&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(C:\Users\hogehoge\JPYUSD_Tick_2011.csv)&amp;#34;&lt;/span&gt;
JPYUSD &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; readr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;read_csv&lt;/span&gt;(strPath)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é–¢ä¿‚ãªã„ã‚“ã§ã™ãŒã€æœ€è¿‘Rã‚’4.0.2ã¸ä¸Šã’ã¾ã—ãŸã€‚4.0ä»¥ä¸Šã§ã¯&lt;code&gt;Python&lt;/code&gt;ã§ã§ããŸæ–‡å­—åˆ—ã®EscapeãŒã§ãã‚‹ã¨ã†ã“ã¨ã§ä»Šã¾ã§ã®ã‚¹ãƒˆãƒ¬ã‚¹ãŒè§£æ¶ˆã•ã‚Œã¦ã‹ãªã‚Šã†ã‚Œã—ã„ã§ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã€æ—¥ä»˜ã®ä»–ã«Bidå€¤ã€Askå€¤ã¨å–å¼•é‡ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ãªãŠã€ã“ã“ã§ã¯2011å¹´ã®Tickã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚æ±æ—¥æœ¬å¤§éœ‡ç½ã®æ™‚ã®ãƒ‰ãƒ«å††ã‚’å¯¾è±¡ã¨ã™ã‚‹ãŸã‚ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(JPYUSD)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##     DateTime                        Bid             Ask            Volume     
##  Min.   :2011-01-03 07:00:00   Min.   :75.57   Min.   :75.58   Min.   : 1.00  
##  1st Qu.:2011-03-30 15:09:23   1st Qu.:77.43   1st Qu.:77.44   1st Qu.: 2.00  
##  Median :2011-06-15 14:00:09   Median :80.40   Median :80.42   Median : 2.00  
##  Mean   :2011-06-22 05:43:11   Mean   :79.91   Mean   :79.92   Mean   : 2.55  
##  3rd Qu.:2011-09-09 13:54:51   3rd Qu.:81.93   3rd Qu.:81.94   3rd Qu.: 3.00  
##  Max.   :2011-12-30 06:59:59   Max.   :85.52   Max.   :85.54   Max.   :90.00
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¡ãªã¿ã«ã€&lt;code&gt;DateTime&lt;/code&gt;ã¯UTCåŸºæº–ã§æ—¥æœ¬æ™‚é–“ã ã¨2011/1/3 07:00:00ã‹ã‚‰2011-12-30 06:59::59(ç±³å›½æ™‚é–“2011-12-30 16:59:59)ã¾ã§ã‚’å«ã‚“ã§ã„ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã¯ç´„1200ä¸‡ä»¶ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(JPYUSD)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 11946621
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;2-å‰å‡¦ç†&#34;&gt;2. å‰å‡¦ç†&lt;/h2&gt;
&lt;p&gt;ã§ã¯æ¬¡ã«Bidã¨Askã‹ã‚‰ä»²å€¤ã‚’è¨ˆç®—ã—ã€å¾Œã§ãƒªã‚¿ãƒ¼ãƒ³ã‚’ç®—å‡ºã™ã‚‹ãŸã‚ã«å¯¾æ•°ã‚’å–ã£ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Askã¨Bidã®ä»²å€¤ã‚’è¨ˆç®—ã—ã€å¯¾æ•°åŒ–(å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ç®—å‡ºç”¨)&lt;/span&gt;
JPYUSD &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; JPYUSD &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(Mid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (Ask&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;Bid)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                     dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(logMid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(Mid))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¾çŠ¶ä¸è¦å‰‡ã«ä¸¦ã‚“ã§ã„ã‚‹å–å¼•ãƒ‡ãƒ¼ã‚¿ã‚’5minåˆ»ã¿ã®ãƒªã‚¿ãƒ¼ãƒ³ã«æ•´å½¢ã—ã¾ã™ã€‚ã‚„ã‚Šæ–¹ã¯ã€&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;1å¹´é–“ã‚’5minæ¯ã«åˆ»ã‚“ã &lt;code&gt;POSIXct&lt;/code&gt;ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½œã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;1.ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã¨ã€ãã®5minã®Windowã®ã†ã¡ã€æœ€åˆã¨æœ€å¾Œã®ã‚µãƒ³ãƒ—ãƒ«ã‹ã‚‰å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã‚’é †ã€…ã«è¨ˆç®—ã™ã‚‹é–¢æ•°ã‚’ä½œæˆã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;å®Ÿè¡Œã€‚
ã¨ã„ã†è¨ˆç”»ã§ã™ã€‚ã¾ãšã€1.ã®ãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 5minåˆ»ã¿ã§ã®ãƒªã‚¿ãƒ¼ãƒ³ã‚’ç®—å‡ºã™ã‚‹ãŸã‚ã®POSIXãƒ™ã‚¯ãƒˆãƒ«ã‚’ä½œæˆ(288Ã—æ—¥æ•°)&lt;/span&gt;
start &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2011-01-02 22:00:00&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;)
end &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2011-12-31 21:55:00&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;)
from &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;seq&lt;/span&gt;(from&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;start,to&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;end,by&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã§ã¯ã€2.ã«ç§»ã‚ã†ã¨ã„ã†ã“ã¨ãªã‚“ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿ãŒ1200ä¸‡ä»¶ã‚‚ã‚ã‚‹ã¨&lt;code&gt;R&lt;/code&gt;ã§&lt;code&gt;purrr::map&lt;/code&gt;ã¨ã‹&lt;code&gt;apply&lt;/code&gt;å±ã‚’ä½¿ç”¨ã—ãŸã¨ã—ã¦ã‚‚ã€é–¢æ•°å‘¼ã³å‡ºã—ã«æ™‚é–“ãŒã‹ã‹ã£ã¦çµæ§‹éåŠ¹ç‡ã ã£ãŸã‚Šã—ã¾ã™ã€‚ã€‚ã€‚&lt;code&gt;sapply&lt;/code&gt;ã§ã‚„ã£ã¦ã¿ã¾ã—ãŸãŒãªã‹ãªã‹å‡¦ç†ãŒå®Œäº†ã›ãšã€å¼·åˆ¶çµ‚äº†ã—ã¾ã—ãŸã€‚ã“ã†ã„ã†ã¨ãã«ã¯ã€&lt;code&gt;Rccp&lt;/code&gt;ãŒä¾¿åˆ©ã§ã™ã€‚&lt;code&gt;R&lt;/code&gt;ã¯ã‚°ãƒ©ãƒ•ã‚„çµ±è¨ˆå‡¦ç†ã®ãŸã‚ã®éå¸¸ã«ä¾¿åˆ©ãªé–¢æ•°ãŒå¤šæ•°ã‚ã‚Šã¾ã™ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å®šç¾©ã—ãŸé–¢æ•°ã®å‘¼ã³å‡ºã—ã‚’å«ã‚€ã€å¤§é‡ã®ç¹°ã‚Šè¿”ã—å‡¦ç†ã‚’è‹¦æ‰‹ã¨ã—ã¾ã™(ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªãªã®ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è¨€èªã‚ˆã‚Šã¯ã¨ã„ã†æ„å‘³ã§ã™)ã€‚ãªã®ã§ã€ç¹°ã‚Šè¿”ã—å‡¦ç†ã®éƒ¨åˆ†ã ã‘ã€&lt;code&gt;C++&lt;/code&gt;ã§æ›¸ã„ã¦ã—ã¾ã£ã¦ã€ãã‚Œã‚’&lt;code&gt;Rcpp&lt;/code&gt;ã‚’ã¤ã‹ã£ã¦&lt;code&gt;R&lt;/code&gt;ã®é–¢æ•°ã¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€å®Ÿè¡Œã€‚çµæœã®é›†è¨ˆã‚„å¯è¦–åŒ–ã€åŸ·ç­†ã¯&lt;code&gt;R&lt;/code&gt;ã§è¡Œã†ã¨ã„ã†ãƒ•ãƒ­ãƒ¼ãŒéå¸¸ã«åŠ¹ç‡çš„ã§ã™ã€‚
ã¾ãŸã€&lt;code&gt;Rccp&lt;/code&gt;ã¯&lt;code&gt;R&lt;/code&gt;ã«ä¼¼ãŸé•å’Œæ„Ÿã®å°‘ãªã„è¨˜è¿°æ–¹æ³•ã§&lt;code&gt;C++&lt;/code&gt;ã‚’è¨˜è¿°ã™ã‚‹ã®ã‚’åŠ©ã‘ã¦ãã‚Œã¾ã™ã€‚è©³ã—ã„ã“ã¨ã¯ä»¥ä¸‹ã‚’è¦‹ã‚Œã°å•é¡Œãªã„ã¨æ€ã„ã¾ã™ã€‚ã‹ãªã‚Šã¾ã¨ã¾ã£ã¦ã„ã¦æ§ãˆã‚ã«è¨€ã£ã¦ç¥ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://teuder.github.io/rcpp4everyone_ja/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã¿ã‚“ãªã®Rcpp&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã§ã¯ã€2.ã«ã‚ãŸã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«å½“ãŸã£ã¦ã¯ãƒãƒƒãƒˆä¸Šã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚&lt;code&gt;C++&lt;/code&gt;ã¯&lt;code&gt;R&lt;/code&gt;ã‚ˆã‚Šã‚‚æ­´å²ãŒã‚ã‚‹ã—ã€ä½¿ç”¨è€…ã‚‚å¤šã„ã®ã§çŸ¥ã‚ŠãŸã„æƒ…å ±ã¯ã™ãè¦‹ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;Rcpp.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;algorithm&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Rcpp;
&lt;span style=&#34;color:#75715e&#34;&gt;//[[Rcpp::plugins(cpp11)]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// [[Rcpp::export]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;DataFrame &lt;span style=&#34;color:#a6e22e&#34;&gt;Rolling_r_cpp&lt;/span&gt;(
    DataFrame input,               &lt;span style=&#34;color:#75715e&#34;&gt;//ï¼ˆè¨ˆæ¸¬æ™‚åˆ»time, è¨ˆæ¸¬å€¤dataï¼‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ 
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    newDatetimeVector from,        &lt;span style=&#34;color:#75715e&#34;&gt;//è¨ˆç®—ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®å§‹ç‚¹ãƒ™ã‚¯ãƒˆãƒ«
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; time_window &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;60&lt;/span&gt;)  &lt;span style=&#34;color:#75715e&#34;&gt;//è¨ˆç®—ã™ã‚‹windowå¹…ï¼ˆç§’ï¼‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;{ 
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆæ¸¬æ™‚åˆ»ã¨è¨ˆæ¸¬å€¤ã‚’ãƒ™ã‚¯ãƒˆãƒ«ã¨ã—ã¦å–ã‚Šå‡ºã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  newDatetimeVector time &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; input[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DateTime&amp;#34;&lt;/span&gt;]; &lt;span style=&#34;color:#75715e&#34;&gt;// ä»Šå›ã¯ time ã¯æ˜‡é †ã«ã‚½ãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ãŒå‰æã§ã™ã€‚
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  NumericVector     data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; input[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;logMid&amp;#34;&lt;/span&gt;];
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®çµ‚ç‚¹ãƒ™ã‚¯ãƒˆãƒ«
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  newDatetimeVector to &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; from &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; time_window;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã™ã‚‹æ•°
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  R_xlen_t N &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; from.length();
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// æ ¼ç´ã™ã‚‹ãƒ™ã‚¯ãƒˆãƒ«
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  NumericVector value(N);
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// ãƒ™ã‚¯ãƒˆãƒ«è¦ç´ ã®ä½ç½®ã‚’ã‚ã‚‰ã‚ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  newDatetimeVector&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;iterator begin &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; time.begin();
  newDatetimeVector&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;iterator end   &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; time.end();
  newDatetimeVector&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;iterator p1    &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; begin;
  newDatetimeVector&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;iterator p2    &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; begin;
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// window i ã«ã¤ã„ã¦ãƒ«ãƒ¼ãƒ—
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;(R_xlen_t i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; N; &lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;i){
    &lt;span style=&#34;color:#75715e&#34;&gt;// Rcout &amp;lt;&amp;lt; &amp;#34;i=&amp;#34; &amp;lt;&amp;lt; i &amp;lt;&amp;lt; &amp;#34;\n&amp;#34;;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; f &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; from[i];         &lt;span style=&#34;color:#75715e&#34;&gt;//windowã®å§‹ç‚¹ã®æ™‚åˆ»
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; t &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; f &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; time_window; &lt;span style=&#34;color:#75715e&#34;&gt;//windowã®çµ‚ç‚¹ã®æ™‚åˆ»
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    &lt;span style=&#34;color:#75715e&#34;&gt;// windowã®çµ‚ç‚¹ãŒæœ€åˆã®è¨ˆæ¸¬æ™‚åˆ»ä»¥å‰ã®æ™‚ã¯NAã€ã¾ãŸã¯
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// windowã®å§‹ç‚¹ãŒæœ€å¾Œã®è¨ˆæ¸¬æ™‚åˆ»ã®ã‚ˆã‚Šå¾Œã®æ™‚ã¯NA
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;begin &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; f &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(end&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)){ 
      value[i]  &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL;
      &lt;span style=&#34;color:#66d9ef&#34;&gt;continue&lt;/span&gt;;&lt;span style=&#34;color:#75715e&#34;&gt;//æ¬¡ã®ãƒ«ãƒ¼ãƒ—ã¸
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    }
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// ãƒ™ã‚¯ãƒˆãƒ« time ã®ä½ç½® p1 ä»¥é™ã®è¦ç´ xã‹ã‚‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ™‚åˆ»ãŒwindowã®å§‹ç‚¹fã€Œä»¥é™ã€ã§ã‚ã‚‹ã€Œæœ€åˆã®è¦ç´ ã€ã®ä½ç½®ã‚’ p1 ã¨ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    p1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;find_if(p1, end, [&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;f](&lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; x){&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; f&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt;x;});
    &lt;span style=&#34;color:#75715e&#34;&gt;// p1 = std::lower_bound(p1, end, f); //ä¸Šã¨åŒç¾©
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    &lt;span style=&#34;color:#75715e&#34;&gt;// ãƒ™ã‚¯ãƒˆãƒ« time ã®ä½ç½® p1 ä»¥é™ã®è¦ç´ xã‹ã‚‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// æ™‚åˆ»ãŒwindowã®çµ‚ç‚¹tã€Œã‚ˆã‚Šå‰ã€ã§ã‚ã‚‹ã€Œæœ€å¾Œã®è¦ç´ ã€ã®ä½ç½®ã‚’ p2 ã¨ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ï¼ˆä¸‹ã§ã¯ã€æ™‚åˆ»ãŒwindowã®çµ‚ç‚¹tã€Œä»¥é™ã€ã§ã‚ã‚‹ã€Œæœ€åˆã®è¦ç´ ã€ã®ï¼‘ã¤å‰ã®ä½ç½®ã€ã«ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã—ã¦ã„ã‚‹â€™ï¼‰
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    p2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;find_if(p1, end, [&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;t](&lt;span style=&#34;color:#66d9ef&#34;&gt;double&lt;/span&gt; x){&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; t&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt;x;}) &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; ;
    &lt;span style=&#34;color:#75715e&#34;&gt;// p2 = std::lower_bound(p1, end, t) - 1 ;//ä¸Šã¨åŒç¾©
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    &lt;span style=&#34;color:#75715e&#34;&gt;// è¦ç´ ã®ä½ç½®p1,p2ã‚’ã€è¦ç´ ç•ªå·i1, i2ã«å¤‰æ›ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    R_xlen_t i1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; p1 &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; begin;
    R_xlen_t i2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; p2 &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; begin; 
    
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// è¦ç´ ç•ªå·ã®ç¢ºèª
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// C++ã¯è¦ç´ ç•ªå·ãŒ0ã‹ã‚‰å§‹ã¾ã‚‹ã®ã§Rã«åˆã‚ã›ã‚‹ãŸã‚ã«1ã‚’è¶³ã—ã¦ã„ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// Rcout &amp;lt;&amp;lt; &amp;#34;i1 = &amp;#34; &amp;lt;&amp;lt; i1+1 &amp;lt;&amp;lt; &amp;#34; i2 = &amp;#34; &amp;lt;&amp;lt; i2+1 &amp;lt;&amp;lt; &amp;#34;\n&amp;#34;;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// è©²å½“ã™ã‚‹ç¯„å›²ã®ãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦è¨ˆç®—ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(i1&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;i2) {
      value[i] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// windowå†…ã«ãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; { 
      value[i] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; data[i2] &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; data[i1];
    }
    &lt;span style=&#34;color:#75715e&#34;&gt;// â†‘ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§æ§˜ã€…ãªwindowé–¢æ•°ã‚’ä½œæˆã§ãã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã—ãŸæ™‚é–“ã¨ã€å€¤ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  DataFrame out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
    DataFrame&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;create(
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;from&amp;#34;&lt;/span&gt;, from),
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;, value&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;));
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; out;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Rcpp::sourceCpp&lt;/code&gt;ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ã«&lt;code&gt;R&lt;/code&gt;ã®é–¢æ•°ã¨ã—ã¦å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;system.time&lt;/span&gt;(results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Rolling_r_cpp&lt;/span&gt;(JPYUSD,from))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##    ãƒ¦ãƒ¼ã‚¶   ã‚·ã‚¹ãƒ†ãƒ        çµŒé  
##       0.06       0.00       0.07
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¯ã„ã€‚1200ä¸‡ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ã«1ç§’ã‹ã‹ã‚Šã¾ã›ã‚“ã€‚ä¾¿åˆ©ãƒ¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(results)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##       from                           r         
##  Min.   :2011-01-02 22:00:00   Min.   :-1.823  
##  1st Qu.:2011-04-03 15:58:45   1st Qu.:-0.014  
##  Median :2011-07-03 09:57:30   Median : 0.000  
##  Mean   :2011-07-03 09:57:30   Mean   : 0.000  
##  3rd Qu.:2011-10-02 03:56:15   3rd Qu.: 0.015  
##  Max.   :2011-12-31 21:55:00   Max.   : 2.880  
##                                NA&#39;s   :29977
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å•é¡Œãªãã€ãƒªã‚¿ãƒ¼ãƒ³ãŒè¨ˆç®—ã•ã‚Œã¦ã„ã¾ã™ã€‚ã§ã¯ã€&lt;code&gt;Realized Bipower Variation&lt;/code&gt;ã®è¨ˆç®—ã«ç§»ã‚Šã¾ã—ã‚‡ã†ã€‚5minåˆ»ã¿ã®å ´åˆã¯Windowã®é•·ã•ã¯270ãŒæ¨å¥¨ã§ã—ãŸãŒã€ãã“ã‚‚å¼•æ•°ã¨ã—ã¦æŸ”è»Ÿã‚’æŒãŸã›ãŸä½œã‚Šã«ã—ã¾ã™ã€‚ã¾ãŸã€&lt;code&gt;NA&lt;/code&gt;ã®å‡¦ç†ã«ã¤ã„ã¦ã‚‚ä¸å¯§ã«è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;Rcpp.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;cmath&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;using&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;namespace&lt;/span&gt; Rcpp;
&lt;span style=&#34;color:#75715e&#34;&gt;//[[Rcpp::plugins(cpp11)]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;// [[Rcpp::export]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbv_cpp&lt;/span&gt;(
    NumericVector x, &lt;span style=&#34;color:#75715e&#34;&gt;// rbvã‚’è¨ˆç®—ã™ã‚‹ãƒªã‚¿ãƒ¼ãƒ³ãƒ™ã‚¯ãƒˆãƒ«
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; na_rm &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; true) &lt;span style=&#34;color:#75715e&#34;&gt;// xã«NAãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€å–ã‚Šé™¤ã„ã¦è¨ˆç®—ã™ã‚‹ã‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;{
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—å›æ•°ã‚’å–å¾—
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  R_xlen_t N &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; x.length();
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—çµæœã‚’å…¥ã‚Œã‚‹å¤‰æ•°ã‚’å®šç¾©
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;

  &lt;span style=&#34;color:#75715e&#34;&gt;// xã®æ¬ ææœ‰ç„¡ã‚’ç¢ºèª
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  LogicalVector lg_NA &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; is_na(x);
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// xã«NAãŒå­˜åœ¨ã—ãŸå ´åˆã€ãã®NAã‚’é™¤ã„ã¦è¨ˆç®—ã™ã‚‹ã‹ã©ã†ã‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(any(lg_NA).is_true() and na_rm&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;FALSE){
    out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¨ˆç®—çµæœã¨ã—ã¦å‡ºåŠ›
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’é™¤ãå ´åˆ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (any(lg_NA).is_true() and na_rm&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;TRUE){
      x[is_na(x)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;TRUE] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.00&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã«0ã‚’åŸ‹ã‚ã€å®Ÿè³ªçš„ã«è¨ˆç®—ã‹ã‚‰é™¤å¤–ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    }
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// rbvã®åˆ†å­(ç·å’Œ)ã‚’è¨ˆç®—
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;(R_xlen_t i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;; i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; N; &lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;i){
      out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; out &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;abs(x[i])&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;abs(x[i&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]);
    }
    
    &lt;span style=&#34;color:#75715e&#34;&gt;// å¹³å‡å€¤ã‚’è¨ˆç®—ã—ã€ãƒ«ãƒ¼ãƒˆã‚’ã¨ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; denomi; &lt;span style=&#34;color:#75715e&#34;&gt;//åˆ†æ¯
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(N&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sum(lg_NA)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      denomi &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; N&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;sum(lg_NA)&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;
    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
      denomi &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
    }
    out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; out&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;denomi;
    out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; std&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;sqrt(out);
  }
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; out;
}

&lt;span style=&#34;color:#75715e&#34;&gt;// [[Rcpp::export]]
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;DataFrame &lt;span style=&#34;color:#a6e22e&#34;&gt;Rolling_rbv_cpp&lt;/span&gt;(
    DataFrame input, &lt;span style=&#34;color:#75715e&#34;&gt;//ï¼ˆè¨ˆæ¸¬æ™‚åˆ»time, è¨ˆæ¸¬å€¤dataï¼‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ 
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; K &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;270&lt;/span&gt;, &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã™ã‚‹Rolling Windowå¹…
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; na_pad &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false, &lt;span style=&#34;color:#75715e&#34;&gt;// Windowå¹…ãŒè¶³ã‚Šãªã„ã¨ãã«NAã‚’è¿”ã™ã‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; na_remove &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false &lt;span style=&#34;color:#75715e&#34;&gt;// Windowå¹…ã®ä¸­ã«NAãŒå­˜åœ¨ã—ãŸå ´åˆã€é™¤ã„ã¦è¨ˆç®—ã‚’è¡Œã†ã‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;){
  &lt;span style=&#34;color:#75715e&#34;&gt;// ãƒªã‚¿ãƒ¼ãƒ³ãƒ™ã‚¯ãƒˆãƒ«ã¨ã‚µãƒ³ãƒ—ãƒ«æ•°ã‚’å–ã‚Šå‡ºã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  NumericVector data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; input[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;];
  R_xlen_t T &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; data.length();
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—çµæœã‚’æ ¼ç´ã™ã‚‹ãƒ™ã‚¯ãƒˆãƒ«ã‚’æº–å‚™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  NumericVector value(T);
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// Windowså¹…æ¯ã«RBVã‚’è¨ˆç®—ã—ã€æ ¼ç´ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(na_pad&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;TRUE){
    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// 0ã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// 0ã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    value[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  }
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt;(R_xlen_t t &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;; t &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; T; &lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;t){
    &lt;span style=&#34;color:#75715e&#34;&gt;// Windowså¹…ãŒè¶³ã‚Šã‚‹ã‹ã©ã†ã‹ã§å‡¦ç†ã‚’åˆ†å²
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (t&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;K&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
      value[t] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; rbv_cpp(data[seq(t&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;K,t&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)],na_remove); &lt;span style=&#34;color:#75715e&#34;&gt;// é€šå¸¸è¨ˆç®—ã‚’å®Ÿè¡Œ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(na_pad&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;FALSE) {
      value[t] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; rbv_cpp(data[seq(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,t&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)],na_remove); &lt;span style=&#34;color:#75715e&#34;&gt;// Kã«æº€ãŸãªã„ä¸å®Œå…¨ãªWidnowså¹…ã§è¨ˆç®—ã‚’å®Ÿè¡Œ
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
      value[t] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; NA_REAL; &lt;span style=&#34;color:#75715e&#34;&gt;// NAã‚’è¿”ã™
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    }
  }
  
  &lt;span style=&#34;color:#75715e&#34;&gt;// è¨ˆç®—ã—ãŸæ™‚é–“ã¨å€¤ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹
&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  DataFrame out &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
    DataFrame&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;create(
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;from&amp;#34;&lt;/span&gt;, input[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;from&amp;#34;&lt;/span&gt;]),
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;r&amp;#34;&lt;/span&gt;, data),
      Named(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;rbv&amp;#34;&lt;/span&gt;,value));
  
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; out;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã§ã¯ã€ã“ã‚Œã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€&lt;code&gt;R&lt;/code&gt;ã§å®Ÿè¡Œã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;system.time&lt;/span&gt;(results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Rolling_rbv_cpp&lt;/span&gt;(na_remove &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##    ãƒ¦ãƒ¼ã‚¶   ã‚·ã‚¹ãƒ†ãƒ        çµŒé  
##       1.00       0.38       1.45
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã“ã¡ã‚‰ã‚‚ä¸€ç¬ã§ã™ã­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-jumpçµ±è¨ˆé‡ã®è¨ˆç®—&#34;&gt;3. Jumpçµ±è¨ˆé‡ã®è¨ˆç®—&lt;/h2&gt;
&lt;p&gt;ã§ã¯ã€æ¬¡ã«ä»Šè¨ˆç®—ã—ãŸãƒªã‚¿ãƒ¼ãƒ³ã¨æ¨™æº–åå·®ã‹ã‚‰çµ±è¨ˆé‡$\mathcal{L}_{t_i}$ã‚’è¨ˆç®—ã—ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã®çµ¶å¯¾å€¤ã‚’æ¨™æº–åŒ–=Jumpçµ±è¨ˆé‡&lt;/span&gt;
results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(J&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ifelse&lt;/span&gt;(rbv&lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,&lt;span style=&#34;color:#a6e22e&#34;&gt;abs&lt;/span&gt;(r)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;rbv,&lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»Šã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(results)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##       from                           r               rbv              J        
##  Min.   :2011-01-02 22:00:00   Min.   :-1.823   Min.   :0.00    Min.   : 0.00  
##  1st Qu.:2011-04-03 15:58:45   1st Qu.:-0.014   1st Qu.:0.02    1st Qu.: 0.28  
##  Median :2011-07-03 09:57:30   Median : 0.000   Median :0.02    Median : 0.64  
##  Mean   :2011-07-03 09:57:30   Mean   : 0.000   Mean   :0.03    Mean   : 0.93  
##  3rd Qu.:2011-10-02 03:56:15   3rd Qu.: 0.015   3rd Qu.:0.03    3rd Qu.: 1.23  
##  Max.   :2011-12-31 21:55:00   Max.   : 2.880   Max.   :0.16    Max.   :58.60  
##                                NA&#39;s   :29977    NA&#39;s   :44367   NA&#39;s   :44423
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã§ã¯ã€Jumpæ¤œå®šã«ç§»ã‚Šã¾ã—ã‚‡ã†ã€‚ã¾ãšã€å¿…è¦ãªé–¢æ•°ã‚’å®šç¾©ã—ã¦ãŠãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Jumpæ¤œå®šã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®å®šæ•°&amp;amp;é–¢æ•°ã‚’æº–å‚™&lt;/span&gt;
c &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;pi&lt;/span&gt;)^0.5
Cn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(n){
  &lt;span style=&#34;color:#a6e22e&#34;&gt;return&lt;/span&gt;((&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(n))^0.5&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;c &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;pi&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(n)))&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;c&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(n))^0.5))
}
Sn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(n){
  &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;(c&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(n))^0.5)
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã§ã¯æ¤œå®šã‚’è¡Œã„ã¾ã™ã€‚æ£„å´ã•ã‚ŒãŸã‚µãƒ³ãƒ—ãƒ«ã¯1ã€ãã‚Œä»¥å¤–ã¯0ã‚’è¿”ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Jumpæ¤œå®š(10%)ã‚’å®Ÿè¡Œ(è¿”ã‚Šå€¤ã¯logical)&lt;/span&gt;
N &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NROW&lt;/span&gt;(results&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;J)
results &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; results &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(Jump &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; J &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2.25&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Sn&lt;/span&gt;(N) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Cn&lt;/span&gt;(N))
&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(results)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##       from                           r               rbv              J        
##  Min.   :2011-01-02 22:00:00   Min.   :-1.823   Min.   :0.00    Min.   : 0.00  
##  1st Qu.:2011-04-03 15:58:45   1st Qu.:-0.014   1st Qu.:0.02    1st Qu.: 0.28  
##  Median :2011-07-03 09:57:30   Median : 0.000   Median :0.02    Median : 0.64  
##  Mean   :2011-07-03 09:57:30   Mean   : 0.000   Mean   :0.03    Mean   : 0.93  
##  3rd Qu.:2011-10-02 03:56:15   3rd Qu.: 0.015   3rd Qu.:0.03    3rd Qu.: 1.23  
##  Max.   :2011-12-31 21:55:00   Max.   : 2.880   Max.   :0.16    Max.   :58.60  
##                                NA&#39;s   :29977    NA&#39;s   :44367   NA&#39;s   :44423  
##     Jump        
##  Mode :logical  
##  FALSE:59864    
##  TRUE :257      
##  NA&#39;s :44423    
##                 
##                 
## 
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;4-ggplot2ã‚’ç”¨ã„ãŸå¯è¦–åŒ–&#34;&gt;4. ggplot2ã‚’ç”¨ã„ãŸå¯è¦–åŒ–&lt;/h2&gt;
&lt;p&gt;æ•°å€¤ãŒè¨ˆç®—ã§ãã¾ã—ãŸã®ã§å¯è¦–åŒ–ã—ã¾ã—ã‚‡ã†ã€‚2011/03/11ã®æ—¥ä¸­ã®JPY/USDã®5minåˆ»ã¿å¯¾æ•°ãƒªã‚¿ãƒ¼ãƒ³ã®æ¨ç§»ã¨Jumpã‚’é‡ã­ã¦Plotã—ã¾ã™ã€‚ã¡ãªã¿ã«æ¨ªè»¸ã¯æ—¥æœ¬æ™‚é–“ã«ä¿®æ­£ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 2011/03/11ã®æ±æ—¥æœ¬å¤§éœ‡ç½ç™ºç”Ÿæ™‚ã®Jumpã«ã¤ã„ã¦Plot&lt;/span&gt;
results &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;filter&lt;/span&gt;(from &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2011-03-11 00:00:00&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;),from &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.POSIXct&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2011-03-12 00:00:00&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;UTC&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;from,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;r)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;geom_path&lt;/span&gt;(linetype&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;geom_path&lt;/span&gt;(ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;from,y&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;r&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;Jump,colour&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;red&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;scale_x_datetime&lt;/span&gt;(date_breaks &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2 hours&amp;#34;&lt;/span&gt;, labels &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; scales&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;date_format&lt;/span&gt;(format&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%H:%M&amp;#34;&lt;/span&gt;,tz&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Asia/Tokyo&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;
  ggplot2&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggtitle&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;JPY/USD Jumps within Tohoku earthquake on 2011-3-11&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Warning: Removed 36 row(s) containing missing values (geom_path).

## Warning: Removed 36 row(s) containing missing values (geom_path).
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;index_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã“ã“ã¾ã§åŸ·ç­†ã™ã‚‹ã®ã«çµæ§‹æ™‚é–“ä½¿ã£ã¦ã„ã¦ã€ä»Š23:37ãªã‚“ã§æ·±ã„è€ƒå¯Ÿã¯æ§ãˆã¾ã™ãŒã€éœ‡ç½ãŒç™ºç”Ÿã—ãŸã®ãŒ14:46:18ã§ã™ã‹ã‚‰å¸‚å ´ã¯éœ‡ç½ç›´å¾Œå³åº§ã«å††å®‰ã«åå¿œã—ãŸã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ãã®å¾Œãªãœã‹å††é«˜æ–¹å‘ã¸é€²ã¿19:00ã«ã¯ãƒ”ãƒ¼ã‚¯ã«ãªã£ã¦ã„ã¾ã™ã€‚å®‰å…¨è³‡ç”£ã®å††ã¨ã‹è¨€ã‚ã‚Œã¾ã™ãŒã€ã“ã®æ™‚ã°ã‹ã‚Šã¯ä¸ç¢ºå®Ÿæ€§ã®é«˜ã¾ã‚Šã‹ã‚‰ã—ã¦å®‰å…¨ã˜ã‚ƒãªã„ã ã‚ã¨æ€ã„ã¾ã™ãŒã€‚ã€‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;5-ã¾ã¨ã‚&#34;&gt;5. ã¾ã¨ã‚&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Rcpp&lt;/code&gt;ã‚’ä½¿ã£ãŸ&lt;code&gt;R&lt;/code&gt;åˆ†æã®åŠ¹ç‡åŒ–ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã—ãŸã€‚&lt;code&gt;C++&lt;/code&gt;ã¯æ„šç›´ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã‚‚Rã‚ˆã‚Šæ ¼æ®µã«å‡¦ç†ãŒæ—©ã„ã®ã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒŸã‚¹ã—ã«ãã„å°è±¡ã§ã™ã€‚å­¦è¡“çš„ãªå®Ÿè£…ã‚’ã‚„ã‚‹ã¨ãã¯å†…å®¹ãŒè¤‡é›‘ã«ãªã‚‹ã®ã§ã“ã‚Œã¯ã‚ã‚ŠãŒãŸã„ã§ã™ã€‚ã¾ãŸã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã£ã¦ã‚‚RStudioã‚’ä½¿ã£ã¦ã„ã‚Œã°ã©ã“ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒèµ·ã“ã£ã¦ã„ã‚‹ã‹æ‰‹ãŒã‹ã‚Šã‚’ãã‚Œã¾ã™ã®ã§ãã®ç‚¹ã§ã‚‚ã‚¹ãƒˆãƒ¬ã‚¹ã¯ãªã„ã®ã§ãŠå‹§ã‚ã§ã™ã€‚&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;éè² ã€æ•´æ•°ã€éæ¸›å°‘ã®å€¤ã‚’æŒã¤ç¢ºç‡éç¨‹ã®ã“ã¨ã€‚ &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;å¹³å‡ã¯ãƒ‰ãƒªãƒ•ãƒˆé …ã®å½¢çŠ¶ã«ã‚ˆã‚Šå¿…ãšã—ã‚‚0ã«ã¯ãªã‚Šã¾ã›ã‚“ãŒã€ä»Šãƒ‰ãƒªãƒ•ãƒˆé …ã¯ååˆ†å°ã•ã„å€¤ã‚’æƒ³å®šã—ã¦ã„ã‚‹ã®ã§ã“ã®æ›¸ãæ–¹ã«ã•ã›ã¦ãã ã•ã„ã€‚è«–æ–‡ã§ã¯ã‚ˆã‚Šå³å¯†ã«å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ &lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
    <item>
      <title>Pytorchã®Pre-trainedãƒ¢ãƒ‡ãƒ«ã§é¦¬ä½“å†™çœŸã®èƒŒæ™¯ã‚’è‡ªå‹•ãƒˆãƒªãƒŸãƒ³ã‚°ã™ã‚‹</title>
      <link>/post/post20/</link>
      <pubDate>Wed, 12 Aug 2020 00:00:00 +0000</pubDate>
      <guid>/post/post20/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚å‰å›ã€ç«¶èµ°é¦¬ã®é¦¬ä½“å†™çœŸã‹ã‚‰CNNã‚’ç”¨ã„ã¦é †ä½ã‚’äºˆæƒ³ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚çµæœã¯èŠ³ã—ããªãã€ç‰¹ã«&lt;code&gt;shap&lt;/code&gt;å€¤ã‚’ç”¨ã„ãŸè¦å› åˆ†æã‚’è¡Œã†ã¨é¦¬ä½“ã‚ˆã‚Šã‚‚èƒŒæ™¯ã®å©èˆã«åå¿œã—ã¦ã„ã‚‹æ§˜å­ãŒè¦‹ãˆãŸã‚Šã¨åˆ†æã®ç²¾ç·»åŒ–ãŒå¿…è¦ã¨ãªã‚Šã¾ã—ãŸã€‚ä»Šå›ã¯&lt;code&gt;Pytorch&lt;/code&gt;ã®Pre-trainedãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦é¦¬ä½“å†™çœŸã‹ã‚‰èƒŒæ™¯ã‚’åˆ‡ã‚Šå‡ºã—ã€é¦¬ä½“ã®ã¿ã¨ãªã£ãŸå†™çœŸã§å†åˆ†æã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-pre-trainedãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰&#34;&gt;1. Pre-trainedãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰&lt;/h2&gt;
&lt;p&gt;ã‚³ãƒ¼ãƒ‰ã¯&lt;a href=&#34;https://pytorch.org/hub/pytorch_vision_deeplabv3_resnet101/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã“ã¡ã‚‰&lt;/a&gt;ã®ã‚‚ã®ã‚’å‚è€ƒã«ã—ã¦ã„ã¾ã™ã€‚ã¾ãšã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; numpy &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; np
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; cv2
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; torch
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; torchvision
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; torchvision &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; transforms
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; glob
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; PIL &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; Image
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; PIL
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; os
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/span&gt;
device &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; torch&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;device(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cuda:0&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; torch&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;cuda&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;is_available() &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cpu&amp;#34;&lt;/span&gt;)
model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; torchvision&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;models&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;segmentation&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;deeplabv3_resnet101(pretrained&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)
model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to(device)
model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;eval()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã©ã†ã‚„ã‚‰å…¨ã¦ã®Pre-trainedãƒ¢ãƒ‡ãƒ«ã¯ã€åŒã˜æ–¹æ³•ã§æ­£è¦åŒ–ã•ã‚ŒãŸå½¢çŠ¶$ï¼ˆN, 3, H, Wï¼‰$ã®3ãƒãƒ£ãƒ³ãƒãƒ«RGBç”»åƒã®ãƒŸãƒ‹ãƒãƒƒãƒã‚’æƒ³å®šã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã“ã§$N$ã¯ç”»åƒã®æ•°ã€$H$ã¨$W$ã¯å°‘ãªãã¨ã‚‚224ãƒ”ã‚¯ã‚»ãƒ«ã§ã‚ã‚‹ã“ã¨ãŒæƒ³å®šã•ã‚Œã¦ã„ã¾ã™ã€‚ç”»åƒã¯ã€[0, 1]ã®ç¯„å›²ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã•ã‚Œã€ãã®å¾Œã€å¹³å‡å€¤ï¼[0.485, 0.456, 0.406]ã¨æ¨™æº–å€¤ï¼[0.229, 0.224, 0.225]ã‚’ä½¿ç”¨ã—ã¦æ­£è¦åŒ–ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¨ã„ã†ã“ã¨ã§ã€å‰å‡¦ç†ã‚’è¡Œã†é–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#å‰å‡¦ç†&lt;/span&gt;
preprocess &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; transforms&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Compose([
    transforms&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;ToTensor(),
    transforms&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Normalize(mean&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0.485&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.456&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.406&lt;/span&gt;], std&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0.229&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.224&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.225&lt;/span&gt;]),
])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;2-èƒŒæ™¯å‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ&#34;&gt;2. èƒŒæ™¯å‰Šé™¤å‡¦ç†ã®å®Ÿè¡Œ&lt;/h2&gt;
&lt;p&gt;ã§ã¯ã€å‰å›è¨˜äº‹ã®&lt;code&gt;selenium&lt;/code&gt;ã‚’ç”¨ã„ãŸã‚³ãƒ¼ãƒ‰ã§åé›†ã—ãŸç”»åƒã‚’èª­ã¿è¾¼ã¿ã€1æš1æšèƒŒæ™¯å‰Šé™¤å‡¦ç†ã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®š&lt;/span&gt;
folders &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; os&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;listdir(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:\Users\aashi\umanalytics\photo\image&amp;#34;&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;#ãã‚Œãã‚Œã®ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰ç”»åƒã‚’èª­ã¿è¾¼ã¿ã€Imageé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦RGBå€¤ãƒ™ã‚¯ãƒˆãƒ«(numpy array)ã¸å¤‰æ›&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i, folder &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; enumerate(folders):
  files &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; glob&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;glob(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:/Users/aashi/umanalytics/photo/image/&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; folder &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/*.jpg&amp;#34;&lt;/span&gt;)
  index &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; i
  &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; k, file &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; enumerate(files):
    img_array &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fromfile(file, dtype&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;uint8)
    img &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imdecode(img_array, cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;IMREAD_COLOR)
    h,w,_ &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; img&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shape
    input_tensor &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; preprocess(img)
    input_batch &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; input_tensor&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unsqueeze(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to(device)

    &lt;span style=&#34;color:#66d9ef&#34;&gt;with&lt;/span&gt; torch&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;no_grad():
      output &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; model(input_batch)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;out&amp;#39;&lt;/span&gt;][&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;]
    output_predictions &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; output&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;argmax(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
    mask_array &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; output_predictions&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;byte()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;cpu()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;numpy()
    Image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fromarray(mask_array&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;save(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\Users\aashi\umanalytics\photo\image\mask.jpg&amp;#39;&lt;/span&gt;)
    mask &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imread(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\Users\aashi\umanalytics\photo\image\mask.jpg&amp;#39;&lt;/span&gt;)
    bg &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;full_like(img,&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)
    img &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;multiply(img&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(float), mask&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(float)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)
    bg &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;multiply(bg&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(float), &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; mask&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(float)&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;255&lt;/span&gt;)
    outImage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cv2&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;add(img, bg)
    Image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fromarray(outImage&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;uint8))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;convert(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;L&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;save(file)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¡Œã£ã¦ã„ã‚‹å‡¦ç†ã¯Pre-trainedãƒ¢ãƒ‡ãƒ«ã§ä»¥ä¸‹ã®ã‚ˆã†ãª&lt;code&gt;mask&lt;/code&gt;ç”»åƒã‚’å‡ºåŠ›ã—ã€å®Ÿéš›ã®ç”»åƒã®&lt;code&gt;numpy&lt;/code&gt;é…åˆ—ã¨&lt;code&gt;mask&lt;/code&gt;ç”»åƒã‚’çµ±åˆã—ã¦ã€èƒŒæ™¯å‰Šé™¤ç”»åƒã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚å‡ºåŠ›ä¾‹ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;gray()
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;figure(figsize&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;))
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;subplot(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(img)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;subplot(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(mask)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;subplot(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(outImage)
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post20/index_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;1920&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒ•ã‚©ãƒ«ãƒ€ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚ã†ã¾ãå‡¦ç†ã§ãã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Œã°èª¿æ•™å¸«ã®æ–¹ãŒæ˜ ã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ã‚‚ã‚ã‚Šã¾ã™ã­ã€‚ç‰©ä½“ã‚’è­˜åˆ¥ã—ã¦ã€é¦¬ã ã‘ã‚’&lt;code&gt;mask&lt;/code&gt;ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ã¨ã¯æ€ã„ã¾ã™ãŒã“ã®ãƒ¢ãƒ‡ãƒ«ã§ã¯ç‰©ä½“ã®ãƒ©ãƒ™ãƒªãƒ³ã‚°ã¾ã§ã¯ã§ããªã„ã®ã§ã“ã®ã¾ã¾é€²ã¿ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;maskhorse.PNG&#34; alt=&#34;ãƒ•ã‚©ãƒ«ãƒ€&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;3-cnnã‚’ç”¨ã„ãŸåˆ†æ&#34;&gt;3. CNNã‚’ç”¨ã„ãŸåˆ†æ&lt;/h2&gt;
&lt;p&gt;ã“ã“ã‹ã‚‰ã¯å‰å›è¨˜äº‹ã¨åŒã˜å†…å®¹ã§ã™ã€‚çµæœã®ã¿æ²è¼‰ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;## Test accuracy: 0.711864406779661
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;sklearn.metrics._plot.confusion_matrix.ConfusionMatrixDisplay object at 0x000000003694DFC8&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;../../post/post20/index_files/figure-html/unnamed-chunk-9-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã¾ã£ãŸãè­˜åˆ¥ã§ãã¦ã„ã¾ã›ã‚“ã€‚å…¨ã¦ã®é¦¬ãŒè² å€¤ã®äºˆæƒ³ã«ãªã£ã¦ã„ã¾ã™ã€‚é¦¬ä½“å†™çœŸã«ã¯é †ä½ã‚’äºˆæ¸¬ã™ã‚‹ã‚ˆã†ãªç‰¹å¾´é‡ã¯ãªã„ã‚“ã§ã—ã‚‡ã†ã‹ã€‚ãã‚Œã¨ã‚‚G1ã®å‡ºèµ°é¦¬ã§ã¯ãƒãƒ©ãƒ„ã‚­ãŒãªãã€è­˜åˆ¥ä¸å¯èƒ½ãªã®ã§ã—ã‚‡ã†ã‹ã€‚ã„ãšã‚Œã„ã«ã›ã‚ˆã€ã¡ã‚‡ã£ã¨å³ã—ãã†ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-shapå€¤ã‚’ç”¨ã„ãŸçµæœè§£é‡ˆ&#34;&gt;4. Shapå€¤ã‚’ç”¨ã„ãŸçµæœè§£é‡ˆ&lt;/h2&gt;
&lt;p&gt;å‰å›åŒæ§˜ã€ã©ã®ã‚ˆã†ã«å¤±æ•—ã—ãŸã®ã‹&lt;code&gt;shap&lt;/code&gt;å€¤ã‚’ä½¿ã£ã¦æ¤œè¨¼ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã®ç”»åƒã‚’ä¾‹ã¨ã—ã¦ä½¿ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;imshow(X_test[&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;])
plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post20/index_files/figure-html/unnamed-chunk-10-5.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; shap
background &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; X_resampled[np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;random&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;choice(X_resampled&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shape[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;],&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;,replace&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)]

e &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;GradientExplainer(model,background)

shap_values &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; e&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shap_values(X_test[[&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]])
shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;image_plot(shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;],X_test[[&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post20/index_files/figure-html/unnamed-chunk-11-7.png&#34; width=&#34;576&#34; /&gt;&lt;/p&gt;
&lt;p&gt;å‰è¶³ã‹ã‚‰é¡”ã«ã‹ã‘ã¦ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚æ„å¤–ã«è‡€éƒ¨ã‚’è©•ä¾¡ã—ã¦ã„ã‚‹æ§˜å­ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;5ã¾ã¨ã‚&#34;&gt;5.ã¾ã¨ã‚&lt;/h2&gt;
&lt;p&gt;å©èˆèƒŒæ™¯ã‚’å‰Šé™¤ã—ã€å†å®Ÿè¡Œã—ã¦ã¿ã¾ã—ãŸãŒçµæœå¤‰ã‚ã‚‰ãšã§ã—ãŸã€‚PyTorchã‚’ä½¿ã£ãŸã‚Šã€èƒŒæ™¯å‰Šé™¤ã‚’è¡Œã†ã„ã„çµŒé¨“ã«ã¯ãªã‚Šã¾ã—ãŸãŒçµæœã¯ä¼´ã‚ãšã¨ã„ã†ã“ã¨ã§é¦¬ä½“å†™çœŸã¯ã„ã£ãŸã‚“ã“ã“ã§ã‚¹ãƒˆãƒƒãƒ—ã§ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>LightGBMã‚’ä½¿ç”¨ã—ã¦ç«¶é¦¬çµæœã‚’äºˆæƒ³ã—ã¦ã¿ã‚‹</title>
      <link>/post/post16/</link>
      <pubDate>Sat, 29 Feb 2020 00:00:00 +0000</pubDate>
      <guid>/post/post16/</guid>
      <description>&lt;p&gt;ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚ã‹ãªã‚Šä¹…ã—ã¶ã‚Šã§ã¯ã‚ã‚Šã¾ã™ãŒã€Pythonã®å‹‰å¼·ã‚’ã‹ã­ã¦ä»¥å‰yahoo.keibaã§åé›†ã—ãŸç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€ãƒ¬ãƒ¼ã‚¹çµæœã‚’äºˆæƒ³ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ&#34;&gt;1.ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ&lt;/h2&gt;
&lt;p&gt;ã¾ãšã€å‰å›&lt;code&gt;sqlite&lt;/code&gt;ã«ä¿å­˜ã—ãŸãƒ¬ãƒ¼ã‚¹çµæœãƒ‡ãƒ¼ã‚¿ã‚’&lt;code&gt;pandas&lt;/code&gt;ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã¸ä¿å­˜ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;conn &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sqlite3&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;connect(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;C:\hogehoge\horse_data.db&amp;#39;&lt;/span&gt;)
sql &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;SELECT * FROM race_result&amp;#39;&lt;/span&gt;
df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;read_sql(con&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;conn,sql&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;sql)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãƒ‡ãƒ¼ã‚¿ã®ä¸­èº«ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚åˆ—ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚orderãŒç€é †ã¨ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;columns
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Index([&#39;order&#39;, &#39;frame_number&#39;, &#39;horse_number&#39;, &#39;trainer&#39;, &#39;passing_rank&#39;,
##        &#39;last_3F&#39;, &#39;time&#39;, &#39;margin&#39;, &#39;horse_name&#39;, &#39;horse_age&#39;, &#39;horse_sex&#39;,
##        &#39;horse_weight&#39;, &#39;horse_weight_change&#39;, &#39;brinker&#39;, &#39;jockey&#39;,
##        &#39;jockey_weight&#39;, &#39;jockey_weight_change&#39;, &#39;odds&#39;, &#39;popularity&#39;,
##        &#39;race_date&#39;, &#39;race_course&#39;, &#39;race_name&#39;, &#39;race_distance&#39;, &#39;type&#39;,
##        &#39;race_turn&#39;, &#39;race_condition&#39;, &#39;race_weather&#39;, &#39;colour&#39;, &#39;owner&#39;,
##        &#39;farm&#39;, &#39;locality&#39;, &#39;horse_birthday&#39;, &#39;father&#39;, &#39;mother&#39;, &#39;prize&#39;,
##        &#39;http&#39;],
##       dtype=&#39;object&#39;)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;orderã®ä¸­èº«ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ã€æ‹¬å¼§ï¼ˆï¼‰ãŒã¤ã„ã¦ã„ã‚‹ç‰©ãŒå¤šãã€ã¾ãŸå–æ¶ˆã‚„ä¸­æ­¢ã€å¤±æ ¼ãªã©ãŒå­˜åœ¨ã™ã‚‹ãŸã‚ã€æ–‡å­—å‹ã«èªè­˜ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã¡ãªã¿ã«æ‹¬å¼§ï¼ˆï¼‰å†…ã®é †ä½ã¯å…¥ç·šé †ä½ã¨ã„ã†ã‚„ã¤ã§ã€ä»–é¦¬ã®èµ°è¡Œã‚’å¦¨å®³ã—ãŸã‚Šã—ã¦é †ä½ãŒé™ç€ã•ã›ã‚‰ã‚ŒãŸã“ã¨ã‚’æ„å‘³ã—ã¾ã™ï¼ˆhttp://www.jra.go.jp/judge/ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;loc[:,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unique()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## array([&#39;1&#39;, &#39;7&#39;, &#39;2&#39;, &#39;8&#39;, &#39;5&#39;, &#39;15&#39;, &#39;6&#39;, &#39;12&#39;, &#39;11&#39;, &#39;14&#39;, &#39;3&#39;, &#39;13&#39;,
##        &#39;4&#39;, &#39;16&#39;, &#39;9&#39;, &#39;10&#39;, &#39;å–æ¶ˆ&#39;, &#39;ä¸­æ­¢&#39;, &#39;é™¤å¤–&#39;, &#39;17&#39;, &#39;18&#39;, &#39;4(3)&#39;, &#39;2(1)&#39;,
##        &#39;3(2)&#39;, &#39;6(4)&#39;, &#39;å¤±æ ¼&#39;, &#39;9(8)&#39;, &#39;16(6)&#39;, &#39;12(12)&#39;, &#39;13(9)&#39;, &#39;6(3)&#39;,
##        &#39;10(7)&#39;, &#39;6(5)&#39;, &#39;9(3)&#39;, &#39;11(8)&#39;, &#39;13(2)&#39;, &#39;12(9)&#39;, &#39;14(7)&#39;,
##        &#39;10(1)&#39;, &#39;16(8)&#39;, &#39;14(6)&#39;, &#39;10(3)&#39;, &#39;12(1)&#39;, &#39;13(6)&#39;, &#39;7(1)&#39;,
##        &#39;12(6)&#39;, &#39;6(2)&#39;, &#39;11(2)&#39;, &#39;15(6)&#39;, &#39;13(10)&#39;, &#39;14(4)&#39;, &#39;7(5)&#39;,
##        &#39;17(4)&#39;, &#39;9(7)&#39;, &#39;16(14)&#39;, &#39;12(11)&#39;, &#39;14(2)&#39;, &#39;8(2)&#39;, &#39;9(5)&#39;,
##        &#39;11(5)&#39;, &#39;12(7)&#39;, &#39;11(1)&#39;, &#39;12(8)&#39;, &#39;7(4)&#39;, &#39;5(4)&#39;, &#39;13(12)&#39;,
##        &#39;14(3)&#39;, &#39;10(2)&#39;, &#39;11(10)&#39;, &#39;18(3)&#39;, &#39;10(4)&#39;, &#39;15(8)&#39;, &#39;8(3)&#39;,
##        &#39;5(1)&#39;, &#39;10(5)&#39;, &#39;7(3)&#39;, &#39;5(2)&#39;, &#39;9(1)&#39;, &#39;13(3)&#39;, &#39;16(11)&#39;,
##        &#39;11(3)&#39;, &#39;18(15)&#39;, &#39;11(6)&#39;, &#39;10(6)&#39;, &#39;14(12)&#39;, &#39;12(5)&#39;, &#39;15(14)&#39;,
##        &#39;17(8)&#39;, &#39;18(6)&#39;, &#39;4(2)&#39;, &#39;18(10)&#39;, &#39;16(7)&#39;, &#39;13(1)&#39;, &#39;16(10)&#39;,
##        &#39;15(7)&#39;, &#39;9(4)&#39;, &#39;15(5)&#39;, &#39;12(3)&#39;, &#39;8(7)&#39;, &#39;15(2)&#39;, &#39;12(10)&#39;,
##        &#39;14(9)&#39;, &#39;3(1)&#39;, &#39;6(1)&#39;, &#39;14(5)&#39;, &#39;15(4)&#39;, &#39;11(4)&#39;, &#39;12(4)&#39;,
##        &#39;16(4)&#39;, &#39;9(2)&#39;, &#39;13(5)&#39;, &#39;12(2)&#39;, &#39;15(1)&#39;, &#39;4(1)&#39;, &#39;14(13)&#39;,
##        &#39;14(1)&#39;, &#39;13(7)&#39;, &#39;5(3)&#39;, &#39;8(6)&#39;, &#39;15(13)&#39;, &#39;7(2)&#39;, &#39;15(11)&#39;,
##        &#39;10(9)&#39;, &#39;11(9)&#39;, &#39;8(4)&#39;, &#39;15(3)&#39;, &#39;13(4)&#39;, &#39;16(12)&#39;, &#39;16(5)&#39;,
##        &#39;18(11)&#39;, &#39;10(8)&#39;, &#39;18(8)&#39;, &#39;14(8)&#39;, &#39;16(9)&#39;, &#39;8(5)&#39;, &#39;8(1)&#39;,
##        &#39;14(11)&#39;, &#39;9(6)&#39;, &#39;16(13)&#39;, &#39;16(15)&#39;, &#39;11(11)&#39;, &#39;15(10)&#39;, &#39;7(6)&#39;],
##       dtype=object)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¾ãšã“ã“ã‚’ä¿®æ­£ã—ã¾ã—ã‚‡ã†ã€‚æ‹¬å¼§ã‚’é™¤å»ã—ã¦intå‹ã«å‹å¤‰æ›´ã—ã€å…¥ç·šé †ä½ã¯æ–°ãŸãªåˆ—&lt;code&gt;arriving order&lt;/code&gt;ã¨ã—ã¦è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;arriving order&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;contains(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\d*\(\d*\)&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)][&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\d+\(&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\)&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;arriving order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unique()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## array([nan,  3.,  1.,  2.,  4.,  8.,  6., 12.,  9.,  7.,  5., 10., 14.,
##        11., 15., 13.])
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\(\d+\)&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)
df &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; df: &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt;df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;str&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;contains(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;(å–æ¶ˆ|ä¸­æ­¢|é™¤å¤–|å¤±æ ¼)&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## C:\Users\aashi\ANACON~1\lib\site-packages\pandas\core\strings.py:1954: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
##   return func(self, *args, **kwargs)
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;unique()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## array([ 1.,  7.,  2.,  8.,  5., 15.,  6., 12., 11., 14.,  3., 13.,  4.,
##        16.,  9., 10., 17., 18.])
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ãã‚Œã„ãª&lt;code&gt;float&lt;/code&gt;å‹ã«å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚ã§ã¯ã€æ¬¡ã«ãƒ©ã‚¹ãƒˆ3Fã®ã‚¿ã‚¤ãƒ ã®å‰å‡¦ç†ã«ç§»ã‚Šã¾ã™ã€‚å‰èµ°ã®ãƒ©ã‚¹ãƒˆ3Fã®ã‚¿ã‚¤ãƒ ã‚’äºˆæ¸¬ã«ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; numpy &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; np
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;last_3F&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;last_3F&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;character(0)&amp;#39;&lt;/span&gt;,np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nan,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;last_3F&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;last_3F&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‰èµ°ã®ãƒ¬ãƒ¼ã‚¹ã¨é †ä½ã€è¿½åŠ é †ä½ã‚‚ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¸å«ã‚ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prerace&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_name&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;preorder&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prepassing&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;passing_rank&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‡ºèµ°æ™‚ç‚¹ã§ç²å¾—ã—ã¦ã„ã‚‹ç´¯ç©è³é‡‘é¡ã‚‚è¿½åŠ ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;preprize&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prize&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;preprize&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;preprize&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;groupby(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;)[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shift(&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ãã®ä»–ã€æ¬ æå€¤ã‚„ãƒ‡ãƒ¼ã‚¿å‹ã®ä¿®æ­£ã€ã‚«ãƒ†ã‚´ãƒªãƒ‡ãƒ¼ã‚¿ã®ãƒ©ãƒ™ãƒ«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_weight&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_weight&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;character(0)&amp;#39;&lt;/span&gt;,np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nan,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_age&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_age&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_weight_change&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_weight_change&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;jockey_weight&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;jockey_weight&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_distance&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_distance&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;m&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;&amp;#39;&lt;/span&gt;,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;True)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;float64&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;replace(&lt;span style=&#34;color:#e6db74&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;character(0)&amp;#39;&lt;/span&gt;,np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;nan,regex&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)
df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;loc[df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;

df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;colour&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;colour&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prepassing&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prepassing&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prerace&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prerace&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;father&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;father&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)
df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;mother&amp;#39;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;mother&amp;#39;&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fillna(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;missing&amp;#39;&lt;/span&gt;)

&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; preprocessing
cat_list &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;trainer&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_name&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_sex&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;brinker&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;jockey&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_course&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_name&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;type&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_turn&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_condition&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_weather&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;colour&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;father&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;mother&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prerace&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prepassing&amp;#39;&lt;/span&gt;]
&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; column &lt;span style=&#34;color:#f92672&#34;&gt;in&lt;/span&gt; cat_list:
    target_column &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[column]
    le &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; preprocessing&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;LabelEncoder()
    le&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;fit(target_column)
    label_encoded_column &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; le&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;transform(target_column)
    df[column] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Series(label_encoded_column)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;astype(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;category&amp;#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas_profiling &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pdq
profile &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pdq&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;ProfileReport(df)
profile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;2-äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ&#34;&gt;2. äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ&lt;/h2&gt;
&lt;p&gt;ã§ã¯&lt;code&gt;LightGBM&lt;/code&gt;ã§äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã£ã¦ã¿ã¾ã™ã€‚&lt;code&gt;optuna&lt;/code&gt;ã®&lt;code&gt;LightGBM&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¦ã€ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è¡Œã„ã€å­¦ç¿’ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ã¦è¨ˆç®—ã—ãŸãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®äºˆæ¸¬å€¤ã¨å®Ÿç¸¾å€¤ã®&lt;code&gt;confusion matrix&lt;/code&gt;ãªã‚‰ã³ã«æ­£è§£ç‡ã‚’ç®—å‡ºã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; optuna.integration.lightgbm &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; lgb
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.model_selection &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; train_test_split

y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;]
x &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; df&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;drop([&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;order&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;passing_rank&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;time&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;odds&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;popularity&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;owner&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;farm&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;locality&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;horse_birthday&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;prize&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;race_date&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;margin&amp;#39;&lt;/span&gt;],axis&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)

X_train, X_test, y_train, y_test &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; train_test_split(x, y)
X_train, x_val, y_train, y_val &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; train_test_split(X_train, y_train)

lgb_train &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dataset(X_train, y_train)
lgb_eval &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dataset(x_val, y_val)
lgb_test &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Dataset(X_test, y_test, reference&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;lgb_train)

lgbm_params &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;objective&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;binary&amp;#39;&lt;/span&gt;,
        &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;boost_from_average&amp;#39;&lt;/span&gt;: False
    }

model &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;train(lgbm_params, lgb_train, categorical_feature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; cat_list, valid_sets &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lgb_eval,  num_boost_round&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;, early_stopping_rounds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;, verbose_eval&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;False)

&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;calibration&lt;/span&gt;(y_proba, beta):
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; y_proba &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; (y_proba &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; y_proba) &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; beta)

sampling_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; y_train&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sum() &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; len(y_train)
y_proba &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;predict(X_test, num_iteration&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;model&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;best_iteration)
y_proba_calib &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; calibration(y_proba, sampling_rate)

y_pred &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; np&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;vectorize(&lt;span style=&#34;color:#66d9ef&#34;&gt;lambda&lt;/span&gt; x: &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; x &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.49&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)(y_proba_calib)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯è¦–åŒ–ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; sklearn.metrics &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; confusion_matrix, ConfusionMatrixDisplay, accuracy_score, precision_score, recall_score, f1_score
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt

&lt;span style=&#34;color:#75715e&#34;&gt;# Confusion Matrixã‚’ç”Ÿæˆ&lt;/span&gt;
ConfusionMatrixDisplay(confusion_matrix(y_test, y_pred))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;plot()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;sklearn.metrics._plot.confusion_matrix.ConfusionMatrixDisplay object at 0x00000000C3E2F7C8&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;show()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post16/index_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;close()

accuracy_score(y_test, y_pred)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.9299209299125913
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;precision_score(y_test, y_pred)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.9401709401709402
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;accuracy_score&lt;/code&gt;ï¼ˆäºˆæ¸¬ç²¾åº¦ï¼‰ãŒ90%ã‚’è¶…ãˆã€&lt;code&gt;precision_Score&lt;/code&gt;ï¼ˆé©åˆç‡ã€é™½=1ç€ã¨äºˆæƒ³ã—ãŸãƒ‡ãƒ¼ã‚¿ã®æ­£è§£ç‡ï¼‰ã‚‚ã„ã„æ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;recall_score(y_test, y_pred)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.009727052997700878
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;f1_score(y_test, y_pred)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## 0.019254893952212852
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€æ–¹ã€&lt;code&gt;recall_score&lt;/code&gt;(å†ç¾æ€§ã€é™½=1ç€ã®ã‚µãƒ³ãƒ—ãƒ«ã®ã†ã¡å®Ÿéš›ã«æ­£è§£ã—ãŸå‰²åˆ)ãŒä½ãå½é™°æ€§ãŒé«˜ã„ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚ãã®çµæœã€&lt;code&gt;F1&lt;/code&gt;å€¤ã‚‚ä½ããªã£ã¦ã„ã¾ã™ã­ã€‚ç«¶é¦¬äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®å ´åˆã€å½é™°æ€§ãŒé«˜ã„ã“ã¨ã¯å½é™½æ€§ãŒé«˜ã„ã“ã¨ã‚ˆã‚Šã¯ã¾ã—ãªã®ã§ã™ãŒã€å›åç‡ã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã¯å½é™°æ€§ã‚’ä¸‹ã’ã‚‹ã“ã¨ã‚’é ‘å¼µã‚‰ãªã‘ã‚Œã°ã„ã‘ã¾ã›ã‚“ã€‚ã“ã‚Œã¯ä»Šå¾Œã®èª²é¡Œã§ã™ã­ã€‚æ¬¡ç¯€ã§ã¯&lt;code&gt;shapley&lt;/code&gt;å€¤ã‚’ä½¿ã£ã¦è¦å› åˆ†è§£ã‚’ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-shapã§ã®çµæœè§£é‡ˆ&#34;&gt;3. shapã§ã®çµæœè§£é‡ˆ&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; shap

shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;initjs()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## &amp;lt;IPython.core.display.HTML object&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;explainer &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;TreeExplainer(model)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Setting feature_perturbation = &amp;quot;tree_path_dependent&amp;quot; because no background data was given.
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap_values &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; explainer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;shap_values(X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## LightGBM binary classifier with TreeExplainer shap values output has changed to a list of ndarray
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã¾ãšã€å„ç‰¹å¾´é‡ã®é‡è¦åº¦ã‚’è¦‹ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚&lt;code&gt;summary_plot&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;summary_plot(shap_values, X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post16/index_files/figure-html/unnamed-chunk-19-3.png&#34; width=&#34;768&#34; /&gt;&lt;/p&gt;
&lt;p&gt;æ¨ªè»¸ã¯å„ç‰¹å¾´é‡ã®å¹³å‡çš„ãªé‡è¦åº¦ã‚’è¡¨ã—ã¦ã„ã¾ã™(shapå€¤ã®çµ¶å¯¾å€¤)ã€‚preprize(å‰èµ°ã¾ã§ã®è³é‡‘ç²å¾—é‡‘é¡)ã‚„horse_ageã€preorder(å‰èµ°ã®ç€é †)ãªã©ãŒäºˆæ¸¬ã«é‡è¦ã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ç‰¹ã«preprizeã®é‡è¦åº¦ã¯1ç€ã®äºˆæ¸¬ã€1ç€ä»¥å¤–ã®äºˆæ¸¬ã©ã¡ã‚‰ã«å¯¾ã—ã¦ã‚‚å¤§ãã„ã§ã™ã€‚horse_ageã‚‚åŒæ§˜ã§ã™ã€‚ãŸã ã€ã“ã‚Œã§ã¯é‡è¦ã¨ã„ã†ã ã‘ã§å®šæ€§çš„ãªè©•ä¾¡ã¯ã§ãã¾ã›ã‚“ã€‚ä¾‹ãˆã°ã€preprizeãŒå¤§ãã„â†’1ä½ã«ãªã‚‹ç¢ºç‡ãŒä¸Šæ˜‡ã¨ã„ã£ãŸé–¢ä¿‚ãŒç¢ºèªã§ãã‚Œã°ã€ãã‚Œã¯é‡è¦ãªæƒ…å ±ã«ãªã‚Šå¾—ã¾ã™ã€‚æ¬¡ã«ãã‚Œã‚’ç¢ºèªã—ã¾ã™ã€‚&lt;code&gt;summary_plot&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;summary_plot(shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;], X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post16/index_files/figure-html/unnamed-chunk-20-5.png&#34; width=&#34;768&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›³ã‚‚å„ç‰¹å¾´é‡ã®é‡è¦åº¦ã‚’è¡¨ã—ã¦ã„ã¾ã™(ä»Šå›ã¯çµ¶å¯¾å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“)ã€‚ä»Šå›ã¯ãã‚Œãã‚Œã®ç‰¹å¾´é‡ã®é‡è¦åº¦ãŒãƒã‚¤ã‚ªãƒªãƒ³ãƒ—ãƒ­ãƒƒãƒˆã«ã‚ˆã£ã¦è¡¨ã•ã‚Œã¦ãŠã‚Šã€ã‹ã¤ç‰¹å¾´é‡ã®å€¤ã®å¤§ãã•ã§è‰²åˆ†ã‘ãŒã•ã‚Œã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€preprizeã ã¨æ¨ªè»¸ãŒ0ä»¥ä¸Šã®éƒ¨åˆ†ã§ã®ã¿èµ¤è‰²ã®åˆ†å¸ƒãŒç™ºç”Ÿã—ã¦ãŠã‚Šã€ã“ã“ã‹ã‚‰preprizeã®ç‰¹å¾´é‡ãŒå¤§ãã„ã€ã¤ã¾ã‚Šå‰èµ°ã¾ã§ã®ç²å¾—è³é‡‘é¡ãŒå¤šã„ã¨å¹³å‡çš„ã«1ç€ã®ç¢ºç‡ãŒä¸ŠãŒã‚‹ã¨ã„ã†å½“ãŸã‚Šå‰ã®è§£é‡ˆã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»–ã«ã‚‚ã€horse_age,preorder,last_3Fã¯ç‰¹å¾´é‡ãŒå°ã•ããªã‚‹ã»ã©1ç€ã«ãªã‚‹ç¢ºç‡ãŒã‚ãŒã‚‹ã“ã¨ã‚‚èª­ã¿å–ã‚Œã¾ã™ã€‚horse_weight, jokey_weightã¯å¤§ãããªã‚‹ã»ã©1ç€ã«ãªã‚‹ç¢ºç‡ãŒä¸ŠãŒã‚‹ã‚ˆã†ã§ã™ã€‚ä¸€æ–¹ã€ãã®ä»–ã¯ç‰¹ã«å®šæ€§çš„ãªé–¢ä¿‚ã‚’èª­ã¿å–ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ã€ç‰¹å¾´é‡ã¨ç¢ºç‡ã®é–¢ä¿‚ã‚’ã‚ˆã‚Šè©³ã—ãç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å…ˆã»ã©ã€preprizeã¯ç‰¹å¾´é‡ãŒå¤§ãããªã‚‹ã»ã©1ç€ã«ãªã‚‹ç¢ºç‡ãŒä¸Šæ˜‡ã™ã‚‹ã¨ã„ã†ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚ãŸã ã€ãã®ç¢ºç‡ã®ä¸Šæ˜‡ã¯1æ¬¡é–¢æ•°çš„ã«å¢—åŠ ã™ã‚‹ã®ã‹ã€æŒ‡æ•°çš„ã«å¢—å¤§ã™ã‚‹ã®ã‹ã€ãã‚Œã¨ã‚‚$\log x$ã®ã‚ˆã†ã«é€“æ¸›ã—ã¦ã„ãã®ã‹ã€ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚&lt;code&gt;dependence_plot&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã¦ãã‚Œã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;dependence_plot(ind&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;preprize&amp;#34;&lt;/span&gt;, shap_values&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;], features&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post16/index_files/figure-html/unnamed-chunk-21-7.png&#34; width=&#34;720&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šå›³ã¯å­¦ç¿’ã—ãŸ&lt;code&gt;LightGBM&lt;/code&gt;ã‚’preprizeã®é–¢æ•°ã¨ã—ã¦è¦‹ãŸã¨ãã®æ¦‚å½¢ã‚’plotã—ãŸã‚‚ã®ã§ã™ã€‚å…ˆã«ç¢ºèªã—ãŸã¨ãŠã‚Šã€ã‚„ã¯ã‚Šç‰¹å¾´é‡ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã€1ç€ã«ãªã‚‹ç¢ºç‡ãŒä¸Šæ˜‡ã—ã¦ã„ãã¾ã™ã€‚ãŸã ã€ãã®ä¸Šæ˜‡ã¯å¾ã€…ã«é€“æ¸›ã—ã¦ã„ãã€2000ä¸‡å††ã‚’è¶…ãˆã‚‹ã¨ã“ã‚ã§ã»ã¼é ­æ‰“ã¡ã¨ãªã‚Šã¾ã™ã€‚ã¾ãŸã€ä¸Šå›³ã§ã¯horse_ageã§ã®è‰²åˆ†ã‘ã‚’è¡Œã£ã¦ãŠã‚Šã€preprizeã¨ã®é–¢ä¿‚æ€§ã‚‚ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã‚„ã¯ã‚Šã€ç›´æ„Ÿã¨åŒã˜ãã€preprizeãŒé«˜ã„é¦¬ã®ä¸­ã§ã‚‚horse_ageãŒè‹¥ã„é¦¬ã®1ç€ç¢ºç‡ãŒé«˜ããªã‚‹ã“ã¨ãŒè¦‹ã¦å–ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;preorderã®&lt;code&gt;dependence_plot&lt;/code&gt;ã‚‚ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;shap&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;dependence_plot(ind&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;preorder&amp;#34;&lt;/span&gt;, shap_values&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;shap_values[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;], features&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;X_test)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post16/index_files/figure-html/unnamed-chunk-22-9.png&#34; width=&#34;720&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã‚„ã¯ã‚Šã€å‰èµ°ã®ç€é †ãŒä¸Šä½ã«ãªã‚‹ã»ã©1ç€ç¢ºç‡ãŒé«˜ã¾ã‚‹ã“ã¨ãŒã“ã“ã‹ã‚‰ã‚‚åˆ†ã‹ã‚Šã¾ã™ã€‚ã¾ãŸã€ãã®ç¢ºç‡ã¯6ç€ä»¥ä¸Šã¨ãã‚Œä»¥å¤–ã§æ°´æº–æ„ŸãŒå¤‰ã‚ã‚‹ã“ã¨ã‚‚åˆ†ã‹ã‚Šã¾ã™ã€‚last_3Fã®ã‚¿ã‚¤ãƒ ã¨ã®é–¢ä¿‚æ€§ã‚‚ç¢ºèªã—ã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ã‚ã¾ã‚Šé–¢é€£æ€§ã¯ãªã•ãã†ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-æœ€å¾Œã«&#34;&gt;4. æœ€å¾Œã«&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;LightGBM&lt;/code&gt;ã‚’ä½¿ç”¨ã—ã€ç«¶é¦¬ã®äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ãŸã€‚ã•ã™ãŒ&lt;code&gt;LightGBM&lt;/code&gt;ã¨ã„ã£ãŸæ„Ÿã˜ã§ã€äºˆæ¸¬ç²¾åº¦ã¯é«˜ã‹ã£ãŸã§ã™ã€‚ã¾ãŸã€&lt;code&gt;shap&lt;/code&gt;å€¤ã‚’ä½¿ç”¨ã—ãŸé‡è¦ç‰¹å¾´é‡ã®æ¤œå‡ºã‚‚ä¸Šæ‰‹ãã„ãã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€&lt;code&gt;LightGBM&lt;/code&gt;ã®æ°—æŒã¡ã‚’ç†è§£ã—ã€ã‚ˆã‚Šè‰¯ã„ç‰¹å¾´é‡ã®ç™ºè¦‹ã‚’é€²ã‚ã¦ã„ãã“ã¨ã§ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã®ç²¾åº¦ã‚’é«˜ã‚ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Google Earth Engine APIã§è¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æ™¯æ³æ„Ÿã‚’ãƒŠã‚¦ã‚­ãƒ£ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ã¦ã¿ã‚‹</title>
      <link>/post/post12/</link>
      <pubDate>Tue, 16 Jul 2019 00:00:00 +0000</pubDate>
      <guid>/post/post12/</guid>
      <description>&lt;p&gt;çš†ã•ã‚“ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã‚ã€‚å‰å›ã€GPLVMãƒ¢ãƒ‡ãƒ«ã‚’ç”¨ã„ãŸGDPäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚ãŸã ã€ãƒŠã‚¦ã‚­ãƒ£ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã¨ã„ã†ã‹ã‚‰ã«ã¯ã‚ªãƒ«ã‚¿ãƒŠãƒ†ã‚£ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ãŸè§£æã‚’è¡Œã„ãŸã„ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ã€‚ãµã¨ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://jp.reuters.com/article/gdp-u-tokyo-idJPKBN15M0NH&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç„¦ç‚¹ï¼šãƒŠã‚¦ã‚­ãƒ£ã‚¹ãƒˆã®ï¼§ï¼¤ï¼°æ¨è¨ˆã€ä¸–ç•Œåˆã®è¡›æ˜Ÿç”»åƒåˆ©ç”¨ã€€åˆ©ç”¨æ‹¡å¤§ã‚‚&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ã“ã¡ã‚‰ã¯æ±äº¬å¤§å­¦ã®æ¸¡è¾ºåŠªå…ˆç”ŸãŒäººå·¥è¡›æ˜Ÿç”»åƒã‚’ç”¨ã„ã¦GDPäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã‚’é–‹ç™ºã—ãŸã¨ã„ã†ã‚‚ã®ã§ã™ã€‚è¨˜äº‹ã«ã¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç±³å›½ã®æµ·æ´‹å¤§æ°—åºãŒé‹å–¶ã™ã‚‹æ°—è±¡è¡›æ˜Ÿã€Œã‚¹ã‚ªãƒŸï¼®ï¼°ï¼°ã€ãŒæ—¥æœ¬ä¸Šç©ºã‚’é€šéã™ã‚‹æ¯æ—¥åˆå‰ï¼‘æ™‚ï¼“ï¼åˆ†æ™‚ç‚¹ã®ç”»åƒã‚’è³¼å…¥ã—ã€ç¸¦ã€æ¨ªï¼—ï¼’ï¼ãƒ¡ãƒ¼ãƒˆãƒ«å››æ–¹ã®ãƒã‚¹ç›®ã”ã¨ã®æ˜ã‚‹ã•ã‚’è¨ˆæ¸¬ã™ã‚‹ã€‚åŒã˜æ˜ã‚‹ã•ã§ã‚‚ã€è¾²åœ°ã€å•†æ¥­ç”¨åœ°ã€å·¥æ¥­ç”¨åœ°ãªã©åœŸåœ°ã®ç”¨é€”ã«ã‚ˆã£ã¦çµŒæ¸ˆæ´»å‹•ã®å¤§ãã•ãŒç•°ãªã‚‹ãŸã‚ã€å›½åœŸåœ°ç†é™¢ã®åœŸåœ°åˆ©ç”¨èª¿æŸ»ã‚’å‚ç…§ã€‚åœŸåœ°ã®ç”¨é€”ã¨ã€æ˜ã‚‹ã•ãŒç¤ºã™çµŒæ¸ˆæ´»å‹•ã®ç›¸é–¢ã‚’å¼¾ãå‡ºã—ã€ã“ã®çµæœã‚’è€ƒæ…®ã—ãŸä¸Šã§ã€æ˜ã‚‹ã•ã‹ã‚‰çµŒæ¸ˆæ´»å‹•ã®å¤§ãã•ã‚’è©¦ç®—ã™ã‚‹ã€‚
ï¼ˆä¸­ç•¥ï¼‰è¡›æ˜Ÿç”»åƒã®ã‚ˆã†ã«èª°ã‚‚ãŒå…¥æ‰‹å¯èƒ½ãªå…¬è¡¨ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚Œã°ã€æ”¿åºœã€æ°‘é–“ã®åŒºåˆ¥ãªãåˆ†æãŒå¯èƒ½ã§ã‚ã‚‹ãŸã‚ã€æ¸¡è¾ºæ°ã¯ã“ã‚Œã‚’ã€Œçµ±è¨ˆã®æ°‘ä¸»åŒ–ã€ã¨å‘¼ã³ã€ä¸–ç•Œçš„ãªæ½®æµã«ãªã‚‹ã¨äºˆæƒ³ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ã¨æ›¸ã‹ã‚Œã¦ãŠã‚Šã€è¡›æ˜Ÿå†™çœŸã‚’ç”¨ã„ãŸåˆ†æã«èˆˆå‘³ã‚’æƒ¹ã‹ã‚Œã¾ã—ãŸã€‚ è¡›æ˜Ÿå†™çœŸã£ã¦èª°ã§ã‚‚åˆ©ç”¨å¯èƒ½ã‹ï¼Ÿã¨ã„ã†ã¨ã“ã‚ã§ã™ãŒã€GoogleãŒ&lt;code&gt;Earth Engine&lt;/code&gt;ã¨ã„ã†ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine3.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://earthengine.google.com/&#34;&gt;https://earthengine.google.com/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ï¼ˆæ‹™è¨³ï¼‰Google Earth Engineã¯ã€æ•°ãƒšã‚¿ãƒã‚¤ãƒˆã®è¡›æ˜Ÿç”»åƒç¾¤ã¨åœ°ç†ç©ºé–“ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æƒ‘æ˜Ÿè¦æ¨¡ã®è§£ææ©Ÿèƒ½ã¨çµ„ã¿åˆã‚ã›ã€ç§‘å­¦è€…ã€ç ”ç©¶è€…ã€é–‹ç™ºè€…ãŒå¤‰åŒ–ã‚’æ¤œå‡ºã—ã€å‚¾å‘ã‚’å°„å½±ã—ã€åœ°çƒã®å¤‰å®¹ã‚’å®šé‡åŒ–ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç ”ç©¶ãƒ»æ•™è‚²ãƒ»éå–¶åˆ©ç›®çš„ãªã‚‰ã°ã€ãªã‚“ã¨&lt;strong&gt;ç„¡æ–™&lt;/strong&gt;ã§è¡›æ˜Ÿå†™çœŸãƒ‡ãƒ¼ã‚¿ã‚’è§£æã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å…·ä½“çš„ã«ä½•ãŒã§ãã‚‹ã®ã‹ã¯ä»¥ä¸‹ã®å‹•ç”»ã‚’è¦‹ã¦ãã ã•ã„ã€‚&lt;/p&gt;
&lt;iframe src=&#34;//www.youtube.com/embed/gKGOeTFHnKY&#34; width=&#34;100%&#34; height=&#34;500&#34; seamless frameborder=&#34;0&#34; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;ä»Šå›ã¯ãã‚“ãªEath Engineã®python APIã‚’ç”¨ã„ã¦è¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€è§£æã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-earth-engineã‚’ä½¿ã†ãŸã‚ã®äº‹å‰æº–å‚™&#34;&gt;1. Earth Engineã‚’ä½¿ã†ãŸã‚ã®äº‹å‰æº–å‚™&lt;/h2&gt;
&lt;p&gt;Earth Engineã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã€Google Accountã‚’ä½¿ã£ã¦ç”³è«‹ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚å…ˆã»ã©ã®ç”»åƒã®å³ä¸Šã®ã€ŒSign Upã€ã‹ã‚‰ã§ãã¾ã™ã€‚ç”³è«‹ã‚’è¡Œã£ã¦ã€Gmailã«ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒ¼ãƒ«ãŒæ¥ã‚‹ã¨ã¨ã‚Šã‚ãˆãšEarth Engineã¯ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine4.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã¨ã‚Šã‚ãˆãšã¨ã„ã†ã®ã¯WEBä¸Šã®&lt;code&gt;Earth Engine&lt;/code&gt; ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã¯ä½¿ç”¨ã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã¨ã„ã†ã®ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ãŸã‚Šã€è§£æã‚’ã—ãŸã‚Šã€è§£æçµæœã‚’MAPã«æŠ•å½±ã—ãŸã‚Šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚&lt;code&gt;Earth Engine&lt;/code&gt;ã®æœ¬ä½“ã¯ã‚€ã—ã‚ã“ã„ã¤ã§ã€APIã¯å‰¯æ¬¡çš„ãªã‚‚ã®ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine5.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;çœŸã‚“ä¸­ã®ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã«ã‚³ãƒ¼ãƒ‰ã‚’æ‰“ã£ã¦ã„ãã¾ã™ãŒã€è¨€èªã¯javascriptã§ã™(APIã¯&lt;code&gt;python&lt;/code&gt;ã¨&lt;code&gt;javascript&lt;/code&gt;ä¸¡æ–¹ã‚ã‚‹ã‚“ã§ã™ã‘ã©ã­)ã€‚è§£æçµæœã‚’MAPã«æŠ•å½±ã—ãŸã‚Šã€referenceï¼ˆå·¦ï¼‰ã‚’å‚ç…§ã—ãŸã‚Šã€Consoleã«åãå‡ºã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã‹ãªã‚Šä¾¿åˆ©ã§ã™ã€‚ãŒã€ãƒ‡ãƒ¼ã‚¿ã‚’è½ã¨ã—ãŸå¾Œã§é«˜åº¦ãªè§£æã‚’è¡Œã„ãŸã„å ´åˆã¯pythonã‚’ä½¿ã£ãŸã»ã†ãŒæ…£ã‚Œã¦ã„ã‚‹ã®ã§ä»Šå›ã¯APIã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
è©±ãŒè„±ç·šã—ã¾ã—ãŸã€‚ã•ã¦ã€&lt;code&gt;Earth Engine&lt;/code&gt;ã®æ‰¿èªã‚’å¾—ãŸã‚‰ã€&lt;code&gt;pip&lt;/code&gt;ã§&lt;code&gt;earthengine-api&lt;/code&gt;ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ã€‚ãã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¸Šã§ã€&lt;code&gt;earthengine authenticate&lt;/code&gt;ã¨æ‰“ã¡ã¾ã™ã€‚ãã†ã™ã‚‹ã¨ã€å‹æ‰‹ã«ãƒ–ãƒ©ã‚¦ã‚¶ãŒç«‹ã¡ä¸ŠãŒã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«&lt;code&gt;python api&lt;/code&gt;ã®authenticationã‚’è¡Œã†ç”»é¢ãŒã§ã¾ã™ã®ã§ã€Œæ¬¡ã¸ã€ã‚’æŠ¼ä¸‹ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine1.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ¬¡ã«ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ã«ã„ãã¾ã™ã®ã§ã€ãã®ã¾ã¾æ‰¿èªã—ã¾ã™ã€‚ã“ã‚Œã§authenticationã®å®Œæˆã§ã™ã€‚&lt;code&gt;python&lt;/code&gt;ã‹ã‚‰APIãŒä½¿ãˆã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine2.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;2-python-apiã‚’ç”¨ã„ãŸè¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã®å–å¾—&#34;&gt;2. Python APIã‚’ç”¨ã„ãŸè¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã®å–å¾—&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Python&lt;/code&gt; APIã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™ãŒã§ãã¾ã—ãŸã€‚ã“ã“ã‹ã‚‰ã¯è¡›æ˜Ÿç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚ä»¥ä¸‹ã«ã‚ã‚‹ã‚ˆã†ã«&lt;code&gt;Earth Engine&lt;/code&gt;ã«ã¯ãŸãã•ã‚“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒå­˜åœ¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://developers.google.com/earth-engine/datasets/&#34;&gt;https://developers.google.com/earth-engine/datasets/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»Šå›ã¯&lt;code&gt;VIIRS Stray Light Corrected Nighttime Day/Night Band Composites Version 1&lt;/code&gt;ã¨ã„ã†ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ä¸–ç•Œä¸­ã®å¤œé–“å…‰ã®å…‰é‡ã‚’æœˆæ¬¡å˜ä½ã§å¹³å‡ã—ã€æä¾›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ã¯2014-01~ç¾åœ¨ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Earth Engine&lt;/code&gt;ã«ã¯ã„ãã¤ã‹ã®å›ºæœ‰ãªãƒ‡ãƒ¼ã‚¿å‹ãŒå­˜åœ¨ã—ã¾ã™ã€‚è¦šãˆã¦ãŠãã¹ãã‚‚ã®ã¯ä»¥ä¸‹ã®3ã¤ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;image&#34;&gt;Imageâ€¦&lt;/h3&gt;
&lt;p&gt;ã‚ã‚‹ï¼‘æ™‚ç‚¹ã«ãŠã‘ã‚‹&lt;code&gt;raste&lt;/code&gt;rãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚&lt;code&gt;image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã„ãã¤ã‹ã®&lt;code&gt;band&lt;/code&gt;ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®&lt;code&gt;band&lt;/code&gt;ã¯ãƒ‡ãƒ¼ã‚¿ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ãŒã€ãŠãŠã‚ˆãã®ãƒ‡ãƒ¼ã‚¿ã¯&lt;code&gt;band&lt;/code&gt;ãã‚Œãã‚ŒãŒRGBå€¤ã‚’è¡¨ã—ã¦ã„ãŸã‚Šã—ã¾ã™ã€‚&lt;code&gt;Earth Engine&lt;/code&gt;ã‚’ä½¿ç”¨ã™ã‚‹ä¸Šã§æœ€ã‚‚åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;imagecollection&#34;&gt;ImageCollectionâ€¦&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ™‚ç³»åˆ—ã«ä¸¦ã¹ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ä»Šå›ã¯æ™‚ç³»åˆ—è§£æã‚’ã™ã‚‹ã®ã§ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;featurecollection&#34;&gt;FeatureCollectionâ€¦&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;GeoJSON Feature&lt;/code&gt;ã§ã™ã€‚åœ°ç†æƒ…å ±ã‚’è¡¨ã™&lt;code&gt;Geometry&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ãã®ãƒ‡ãƒ¼ã‚¿ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆå›½åç­‰ï¼‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»Šå›ã¯æ—¥æœ¬ã®ä½ç½®æƒ…å ±ã‚’å–å¾—ã™ã‚‹éš›ã«ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã§ã¯ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã€æ—¥æœ¬ã®åœ°ç†æƒ…å ±ã®&lt;code&gt;FeatureCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚åœ°ç†æƒ…å ±ã¯&lt;code&gt;Fusion Tables&lt;/code&gt;ã«æ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã®ã§ã€IDã§å¼•ã£å¼µã‚ŠCountryãŒJapanã®ã‚‚ã®ã‚’æŠ½å‡ºã—ã¾ã™ã€‚&lt;code&gt;ee.FeatureCollection()&lt;/code&gt;ã®å¼•æ•°ã«IDã‚’å…¥åŠ›ã™ã‚Œã°ç°¡å˜ã«å–å¾—ã§ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; ee
&lt;span style=&#34;color:#f92672&#34;&gt;from&lt;/span&gt; dateutil.parser &lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; parse

ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Initialize()

&lt;span style=&#34;color:#75715e&#34;&gt;# get Japan geometory as FeatureCollection from fusion table&lt;/span&gt;
japan &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;FeatureCollection(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ft:1tdSwUL7MVpOauSgRzqVTOwdfy17KDbw-1d9omPw&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;filter(ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Filter&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;eq(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Country&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Japan&amp;#39;&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«å¤œé–“å…‰ã®è¡›æ˜Ÿç”»åƒã‚’å–å¾—ã—ã¦ã¿ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚&lt;code&gt;ee.ImageCollection()&lt;/code&gt;ã«ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®IDã‚’æ¸¡ã™ã¨å–å¾—ã§ãã¾ã™ã€‚ãªãŠã€ã“ã“ã§ã¯&lt;code&gt;band&lt;/code&gt;ã‚’æœˆæ¬¡ã®å¹³å‡å…‰é‡ã§ã‚ã‚‹&lt;code&gt;avg_rad&lt;/code&gt;ã«æŠ½å‡ºã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# get night-light data from earth engine from 2014-01-01 to 2019-01-01&lt;/span&gt;
dataset &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;ImageCollection(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;NOAA/VIIRS/DNB/MONTHLY_V1/VCMSLCFG&amp;#39;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;filter(ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Filter&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;date(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2014-01-01&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2019-01-01&amp;#39;&lt;/span&gt;))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;select(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;avg_rad&amp;#39;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å–å¾—ã—ãŸè¡›æ˜Ÿç”»åƒã‚’æ—¥æœ¬å‘¨è¾ºã«åˆ‡ã‚Šå‡ºã—ã€ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ›ã¯&lt;code&gt;image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å¯èƒ½ã§ã™ï¼ˆãã†ã§ãªã„ã¨ç”»åƒãŒãŸãã•ã‚“å‡ºã¦ãã¦ã—ã¾ã„ã¾ã™ã‹ã‚‰ã­ã€‚ã€‚ã€‚ï¼‰ã€‚ä»Šå–å¾—ã—ãŸã®ã¯&lt;code&gt;ImageCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã‹ã‚‰&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸åœ§ç¸®ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆä¸ŠãŒ&lt;code&gt;ImageCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ä¸‹ãŒåœ§ç¸®ã•ã‚ŒãŸ&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://developers.google.com/earth-engine/images/Reduce_ImageCollection.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã“ã“ã§ã¯ã€&lt;code&gt;ImageCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã«ã‚ã‚‹ã®&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¹³å‡å€¤ã‚’ã¨ã£ã¦ã‚µãƒ³ãƒ—ãƒ«æœŸé–“ã®å¹³å‡çš„ãªç”»åƒã‚’å‡ºåŠ›ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;code&gt;ImageCollection.mean()&lt;/code&gt;ã§ã§ãã¾ã™ã€‚ã¾ãŸã€&lt;code&gt;.visualize({min:0.5})&lt;/code&gt;ã§ãƒ”ã‚¯ã‚»ãƒ«å€¤ãŒ0.5ä»¥ä¸Šã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ã‹ã‘ã¦ã„ã¾ã™ã€‚ã“ã†ã—ãªã„ã¨é›²ã¨æ€ã‚ã‚Œã‚‹ã‚‚ã®ã‚„ã‚´ãƒŸï¼Ÿã¿ãŸã„ãªã‚‚ã®ãŒã¤ã„ã¦ã—ã¾ã„ã¾ã™ã€‚æ¬¡ã«ã€ã“ã“ã¾ã§åŠ å·¥ã—ãŸç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹urlã‚’&lt;code&gt;.getDownloadURL&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã§å–å¾—ã—ã¦ã„ã¾ã™ã€‚ãã®éš›ã€&lt;code&gt;region&lt;/code&gt;ã§åˆ‡ã‚Šå‡ºã™ç¯„å›²ã‚’ãƒãƒªã‚´ãƒ³å€¤ã§æŒ‡å®šã—ã€&lt;code&gt;scale&lt;/code&gt;ã§ãƒ‡ãƒ¼ã‚¿ã®è§£åƒåº¦ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ï¼ˆ&lt;code&gt;scale&lt;/code&gt;ãŒå°ã•ã™ãã‚‹ã¨å‡¦ç†ãŒé‡ã™ãã‚‹ã‚‰ã—ãã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦å‡¦ç†ã§ãã¾ã›ã‚“ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;dataset&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;mean()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;visualize(min&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getDownloadURL(dict(name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;thumbnail&amp;#39;&lt;/span&gt;,region&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;[[[&lt;span style=&#34;color:#ae81ff&#34;&gt;120.3345348936478&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;46.853488838010854&lt;/span&gt;],[&lt;span style=&#34;color:#ae81ff&#34;&gt;119.8071911436478&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;24.598157870729043&lt;/span&gt;],[&lt;span style=&#34;color:#ae81ff&#34;&gt;148.6353161436478&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;24.75788466523463&lt;/span&gt;],[&lt;span style=&#34;color:#ae81ff&#34;&gt;149.3384411436478&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;46.61252884462868&lt;/span&gt;]]],scale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5000&lt;/span&gt;))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å–å¾—ã—ãŸç”»åƒãŒä»¥ä¸‹ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;earthengine6.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ã‚„ã¯ã‚Šã€æ±äº¬ã‚’ä¸­å¿ƒã¨ã—ãŸé–¢æ±åœã€å¤§é˜ªã‚’ä¸­å¿ƒã¨ã—ãŸé–¢è¥¿åœã€æ„›çŸ¥ã€ç¦å²¡ã€åŒ—æµ·é“ï¼ˆæœ­å¹Œå‘¨è¾ºï¼‰ã®å…‰é‡ãŒå¤šãã€çµŒæ¸ˆæ´»å‹•ãŒæ´»ç™ºã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã¾ãŸã€é™¸å†…ã‚ˆã‚Šã‚‚æ²¿å²¸éƒ¨ã§å…‰é‡ãŒå¤šã„åœ°åŸŸãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚ã“ã‚Œã¯çµŒæ¸ˆæ´»å‹•ã¨ã¯ç›´æ¥é–¢ä¿‚ã—ãªã„ç¾è±¡ã®ã‚ˆã†ãªæ°—ã‚‚ã—ã¾ã™ã€‚ä»Šå›ã¯åˆ†æå¯¾è±¡å¤–ã§ã™ãŒã€åŒ—ç·¯38åº¦ã‚’å¢ƒã«åŒ—å´ãŒçœŸã£æš—ã«ãªã‚‹ã®ãŒå°è±¡çš„ã§ã™ã€‚ã“ã‚Œã¯è¨€ã†ã¾ã§ã‚‚ãªãåŒ—æœé®®ã¨éŸ“å›½ã®å¢ƒç•Œç·šã§ã™ã‹ã‚‰ã€ä¸¡å›½ã®çµŒæ¸ˆæ´»å‹•æ°´æº–ã®å·®ãŒè¦–è¦šçš„ã«ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã—ã‚‡ã†ã€‚ä»Šå›ä½¿ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯2014å¹´ã‹ã‚‰ã®ã‚‚ã®ã§ã™ãŒã€ä»–ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ã¯1990å¹´ä»£ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ï¼ˆãã®ä»£ã‚ã‚Šæœ€è¿‘ã®ãƒ‡ãƒ¼ã‚¿ã¯å–ã‚Œã¾ã›ã‚“ãŒï¼‰ã€‚ãã‚Œã‚‰ã‚’ç”¨ã„ã¦æœé®®åŠå³¶ã‚„ä¸­å›½ã®çµŒæ¸ˆç™ºå±•ã‚’è¦³å¯Ÿã™ã‚‹ã®ã‚‚é¢ç™½ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;p&gt;ã•ã¦ã€ç”»åƒã¯å–å¾—ã§ãã¾ã—ãŸãŒã“ã®ã¾ã¾ã§ã¯è§£æãŒã§ãã¾ã›ã‚“ã€‚ã“ã“ã‹ã‚‰ã¯å¤œé–“å…‰ã‚’ãƒ”ã‚¯ã‚»ãƒ«å€¤ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æ•°å€¤çš„ãªè§£æã‚’è©¦ã¿ã¾ã™ã€‚ãŸã ã€å…ˆã»ã©ã¨ã¯ãƒ‡ãƒ¼ã‚¿å–å¾—ã®æ‰‹ç¶šããŒå°‘ã—å¤‰ã‚ã‚Šã¾ã™ã€‚ã¨ã„ã†ã®ã‚‚ã€ä»Šåº¦ã¯æ—¥æœ¬å„åœ°ã§å„ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã”ã¨ã«ã•ã¾ã–ã¾ãªå€¤ã‚’ã¨ã‚‹å¤œé–“å…‰ã‚’&lt;strong&gt;é›†ç´„&lt;/strong&gt;ã—ã€1ã¤ã®ä»£ç”¨å€¤ã«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‹ã‚‰ã§ã™ã€‚ãƒ”ã‚¯ã‚»ãƒ«ã”ã¨ã®æ•°å€¤ã‚’æ‰‹ã«å…¥ã‚ŒãŸã¨ã“ã‚ã§è§£æã™ã‚‹ã«ã¯æ‰‹ã«ä½™ã£ã¦ã—ã¾ã„ã¾ã™ã‹ã‚‰ã­ã€‚ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ï¼ˆEarth Engineã‚µã‚¤ãƒˆã‹ã‚‰å¼•ç”¨ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://developers.google.com/earth-engine/images/Reduce_region_diagram.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;å…ˆã»ã©å–å¾—ã—ãŸå¤œé–“å…‰ã®&lt;code&gt;ImageCollection&lt;/code&gt;ã®ã‚ã‚‹1æ™‚ç‚¹ã®è¡›æ˜Ÿç”»åƒãŒå·¦ã§ã™ã€‚ãã®ä¸­ã«æ—¥æœ¬ã¨ã„ã†&lt;code&gt;Region&lt;/code&gt;ãŒå­˜åœ¨ã—ã€ãã‚Œã‚’&lt;code&gt;ee.Reducer&lt;/code&gt;ã«ã‚ˆã£ã¦å®šé‡çš„ã«é›†ç´„ï¼ˆaggregateï¼‰ã—ã¾ã™ã€‚Earth Engine APIã«ã¯&lt;code&gt;.reduceRegions()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã®ã§ãã‚Œã‚’ç”¨ã„ã‚Œã°ã„ã„ã§ã™ã€‚å¼•æ•°ã¯ã€&lt;code&gt;reducer&lt;/code&gt;=é›†ç´„æ–¹æ³•ï¼ˆã“ã“ã§ã¯åˆè¨ˆå€¤ï¼‰ã€&lt;code&gt;collection&lt;/code&gt;=é›†ç´„ã‚’ã‹ã‘ã‚‹&lt;code&gt;region&lt;/code&gt;ï¼ˆ&lt;code&gt;FeatureCollection&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã€&lt;code&gt;scale&lt;/code&gt;=è§£åƒåº¦ã€ã§ã™ã€‚ä»¥ä¸‹ã§ã¯ã€&lt;code&gt;ImageCollection&lt;/code&gt;ï¼ˆdatasetï¼‰ã®ä¸­ã«ã‚ã‚‹1ç•ªç›®ã®&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«&lt;code&gt;.reduceRegions()&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã‹ã‘ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# initialize output box&lt;/span&gt;
time0 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dataset&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;first()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;system:time_start&amp;#39;&lt;/span&gt;);
first &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dataset&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;first()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;reduceRegions(reducer&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Reducer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sum(),collection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;japan,scale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;set(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;time_start&amp;#39;&lt;/span&gt;, time0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ã€…ã¯æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãŒæ¬²ã—ã„ã‚ã‘ã§ã™ã‹ã‚‰ã€&lt;code&gt;ImageCollection&lt;/code&gt;å†…ã«ã‚ã‚‹&lt;code&gt;Image&lt;/code&gt;ãã‚Œãã‚Œã«å¯¾ã—ã¦åŒã˜å‡¦ç†ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚Earth Engineã«ã¯&lt;code&gt;iterate&lt;/code&gt;ã¨ã„ã†ä¾¿åˆ©ãªé–¢æ•°ãŒã‚ã‚Šã€å¼•æ•°ã«å‡¦ç†ã—ãŸã„é–¢æ•°ã‚’æ¸¡ã›ã°foræ–‡ã„ã‚‰ãšã§ã“ã®å‡¦ç†ã‚’è¡Œã£ã¦ãã‚Œã¾ã™ã€‚ã“ã“ã§ã¯&lt;code&gt;Image&lt;/code&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«&lt;code&gt;reduceRegions&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‡¦ç†ã—ãŸ&lt;code&gt;Computed Object&lt;/code&gt;ã‚’ä»¥å‰ã«å‡¦ç†ã—ãŸã‚‚ã®ã¨mergeã™ã‚‹&lt;code&gt;myfunc&lt;/code&gt;ã¨ã„ã†é–¢æ•°ã‚’å®šç¾©ã—ã€ãã‚Œã‚’&lt;code&gt;iterate&lt;/code&gt;ã«æ¸¡ã—ã¦ã„ã¾ã™ã€‚æœ€å¾Œã«ã€å…ˆã»ã©ã¨åŒã˜ãç”Ÿæˆã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’&lt;code&gt;getDownloadURL&lt;/code&gt;ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã¦urlã‚’å–å¾—ã—ã¦ã„ã¾ã™ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã¯csvï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# define reduceRegions function for iteration&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;def&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;myfunc&lt;/span&gt;(image,first):
  added &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;reduceRegions(reducer&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Reducer&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;sum(),collection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;japan,scale&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;set(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;time_start&amp;#39;&lt;/span&gt;, image&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;get(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;system:time_start&amp;#39;&lt;/span&gt;))
  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;FeatureCollection(first)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;merge(added)

&lt;span style=&#34;color:#75715e&#34;&gt;# implement iteration&lt;/span&gt;
nightjp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dataset&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;filter(ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;Filter&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;date(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2014-02-01&amp;#39;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;2019-01-01&amp;#39;&lt;/span&gt;))&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;iterate(myfunc,first)

&lt;span style=&#34;color:#75715e&#34;&gt;# get url to download&lt;/span&gt;
ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;FeatureCollection(nightjp)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getDownloadURL(filetype&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;csv&amp;#39;&lt;/span&gt;,selectors&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;ee&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;FeatureCollection(nightjp)&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;first()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;propertyNames()&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;getInfo())
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;CSVãƒ•ã‚¡ã‚¤ãƒ«ã®urlãŒå–å¾—ã§ãã¾ã—ãŸã€‚ã“ã®æ™‚ç³»åˆ—ã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ä»Šæ—¥ã¯çµ‚ã‚ã‚Šã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; pandas &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; pd
&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; matplotlib.pyplot &lt;span style=&#34;color:#f92672&#34;&gt;as&lt;/span&gt; plt

plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;style&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;use(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;ggplot&amp;#39;&lt;/span&gt;)

nightjp_csv&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;head()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   system:index          sum Country  Unnamed: 3  Unnamed: 4
## 0     2014/1/1  881512.4572   Japan         NaN         NaN
## 1     2014/2/1  827345.3551   Japan         NaN         NaN
## 2     2014/3/1  729110.4619   Japan         NaN         NaN
## 3     2014/4/1  612665.8866   Japan         NaN         NaN
## 4     2014/5/1  661434.5027   Japan         NaN         NaN
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;plt&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;plot(pd&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;to_datetime(nightjp_csv[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;system:index&amp;#39;&lt;/span&gt;]),nightjp_csv[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;sum&amp;#39;&lt;/span&gt;])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;../../post/post12/index_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;ã‹ãªã‚Šå­£ç¯€æ€§ãŒã‚ã‚Šã¾ã™ã­ã€‚å†¬å ´ã¯æ—¥ç…§æ™‚é–“ãŒå°‘ãªã„ã“ã¨ã‚‚ã‚ã£ã¦å…‰é‡ãŒå¢—ãˆã¦ã„ã‚‹ã¿ãŸã„ã§ã™ã€‚ãã‚Œã«ã—ã¦ã‚‚æ€¥æ¿€ãªå¢—ãˆæ–¹ã§ã™ãŒã€‚æ¬¡å›ã¯ã“ã®ãƒ‡ãƒ¼ã‚¿ã¨æ™¯æ³æ„Ÿã®ä»£ç†å¤‰æ•°ã¨ãªã‚‹çµŒæ¸ˆçµ±è¨ˆã‚’å…ƒã«çµ±è¨ˆè§£æã‚’è¡Œã„ãŸã„ã¨æ€ã„ã¾ã™ã€‚ãŠãŸã®ã—ã¿ã«ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>rvestã§yahooç«¶é¦¬ã«ã‚ã‚‹éå»ã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ã¿ãŸï¼ˆ2å›ç›®ï¼‰</title>
      <link>/post/post11/</link>
      <pubDate>Sat, 13 Jul 2019 00:00:00 +0000</pubDate>
      <guid>/post/post11/</guid>
      <description>&lt;p&gt;2å›ç›®ã«ãªã‚Šã¾ã™ãŒã€ã¾ãŸrvestã§éå»ã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’è½ã¨ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚éå»ã®è¨˜äº‹ã‚’è¦‹ã¦ãªã„ã¨ã„ã†äººã¯å…ˆã«ãã¡ã‚‰ã‚’ã”è¦§ã«ãªã‚‰ã‚Œã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå›ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šç›´ãã†ã¨æ€ã£ãŸã®ã¯ã€ç«¶é¦¬ã®åˆ†æã‚’ã—ãŸéš›ã«ã‚ˆã‚Šå¤šãã®é …ç›®ã‚’èª¬æ˜å¤‰æ•°ã«åŠ ãˆã¦ã€åˆ†æã‚’ã—ãŸã„ã¨æ€ã£ãŸã‹ã‚‰ã§ã™ã€‚ãªã®ã§ã€ä»Šå›ã¯å‰å›ã®Rã‚¹ã‚¯ãƒªãƒ—ãƒˆã«è¿½è¨˜ã‚’è¡Œã†å½¢ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆã—ã¾ã—ãŸã€‚æ–°ãŸã«è¿½åŠ ã—ãŸãƒ‡ãƒ¼ã‚¿é …ç›®ã¯ä»¥ä¸‹ã®14å€‹ã§ã™ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;èŠã‹ãƒ€ãƒ¼ãƒˆã‹&lt;/li&gt;
&lt;li&gt;å³å›ã‚Šã‹å·¦å›ã‚Šã‹&lt;/li&gt;
&lt;li&gt;ãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ï¼ˆè‰¯ã‚„ç¨é‡ãªã©ï¼‰&lt;/li&gt;
&lt;li&gt;å¤©å€™&lt;/li&gt;
&lt;li&gt;é¦¬ã®æ¯›è‰²ï¼ˆæ —æ¯›ã€é¹¿æ¯›ãªã©ï¼‰&lt;/li&gt;
&lt;li&gt;é¦¬ä¸»&lt;/li&gt;
&lt;li&gt;ç”Ÿç”£è€…&lt;/li&gt;
&lt;li&gt;ç”£åœ°&lt;/li&gt;
&lt;li&gt;ç”Ÿå¹´æœˆæ—¥&lt;/li&gt;
&lt;li&gt;çˆ¶é¦¬&lt;/li&gt;
&lt;li&gt;æ¯é¦¬&lt;/li&gt;
&lt;li&gt;ãã®ãƒ¬ãƒ¼ã‚¹ã¾ã§ã®ç²å¾—è³é‡‘ï¼ˆ2003å¹´ã‹ã‚‰å…¥æ‰‹å¯èƒ½ï¼‰&lt;/li&gt;
&lt;li&gt;ã‚¸ãƒ§ãƒƒã‚­ãƒ¼ã®ä½“é‡&lt;/li&gt;
&lt;li&gt;ã‚¸ãƒ§ãƒƒã‚­ãƒ¼ã®ä½“é‡ã®å¢—æ¸›&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å®Ÿã¯ã¾ã ãƒ‡ãƒ¼ã‚¿åé›†ã¯çµ‚ã‚ã£ã¦ã„ãªãã¦ã€Rã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒãšã£ã¨å®Ÿè¡Œä¸­ã«ãªã£ã¦ã„ã¾ã™ï¼ˆ3æ—¥ãã‚‰ã„å›ã—ã¦ã„ã¾ã™ï¼‰ã€‚ã—ã‹ã—ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ è‡ªä½“ã¯ãã£ã¡ã‚Šå›ã£ã¦ã„ã‚‹ã®ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ç´¹ä»‹ã‚’ã—ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚ã‚‚ã—ã‹ã—ãŸã‚‰è¿½è¨˜ã§çµæœã‚’æ›¸ãã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸­èº«&#34;&gt;1. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸­èº«&lt;/h2&gt;
&lt;p&gt;ã¾ãšã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‘¼ã³å‡ºã—ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# rvestã«ã‚ˆã‚‹ç«¶é¦¬ãƒ‡ãƒ¼ã‚¿ã®webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;rvest&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#if (!require(&amp;#34;pacman&amp;#34;)) install.packages(&amp;#34;pacman&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;beepr&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;RSQLite&amp;#34;)&lt;/span&gt;
pacman&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;p_load&lt;/span&gt;(qdapRegex)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(rvest)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(dplyr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(beepr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(RSQLite)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã‹ãªã‚ŠwarnningãŒå‡ºã‚‹ã®ã§ãã‚Œã‚’ç¦æ­¢ã—ã€SQLiteã«æ¥ç¶šã—ã¦ã„ã¾ã™&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# warnningç¦æ­¢&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;options&lt;/span&gt;(warn&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;-1&lt;/span&gt;)

&lt;span style=&#34;color:#75715e&#34;&gt;# SQLiteã¸ã®æ¥ç¶š&lt;/span&gt;
con &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbConnect&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;SQLite&lt;/span&gt;(), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_data.db&amp;#34;&lt;/span&gt;, synchronous&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;off&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;1994å¹´ã‹ã‚‰ã—ã‹ã‚ªãƒƒã‚ºãŒå–ã‚Œãªã„ã®ã§ã€1994å¹´ã‹ã‚‰ç›´è¿‘ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚yahooç«¶é¦¬ã§ã¯æœˆã”ã¨ã«ãƒ¬ãƒ¼ã‚¹ãŒã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’å¤‰æ•°ã¨ã—ã¦ä½¿ç”¨ã—ãªãŒã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã¨ã£ã¦ã„ãã¾ã™ã€‚åŸºæœ¬çš„ã«ã¯ã€&lt;a href=&#34;https://keiba.yahoo.co.jp/schedule/list/2018/?month=7&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è©²å½“å¹´ã€è©²å½“æœˆã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§&lt;/a&gt;ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ãã®ãƒšãƒ¼ã‚¸ä¸Šã®å„æ—¥ã®&lt;a href=&#34;https://keiba.yahoo.co.jp/race/list/18020106/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å€‹ã€…ã®ç«¶é¦¬å ´ã”ã¨ã®ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«&lt;/a&gt;ã¸ã®ãƒªãƒ³ã‚¯ã‚’å–å¾—ã—ã¾ã™ã€‚å€‹ã€…ã®ç«¶é¦¬å ´ã§ãƒ¬ãƒ¼ã‚¹ã¯ã ã„ãŸã„12ã»ã©ã‚ã‚‹ã®ã§ã€ãã®ãƒªãƒ³ã‚¯ã‚’å–å¾—ã—ã€å„ãƒ¬ãƒ¼ã‚¹ã®&lt;a href=&#34;https://keiba.yahoo.co.jp/race/result/1802010601/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ãƒ¬ãƒ¼ã‚¹çµæœãƒšãƒ¼ã‚¸&lt;/a&gt;ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚ãã—ã¦ã€ãƒ¬ãƒ¼ã‚¹çµæœã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚ã¾ãšã€å„æ—¥ã®å€‹ã€…ã®ç«¶é¦¬å ´ã”ã¨ã®ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ã®å–å¾—æ–¹æ³•ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(year in &lt;span style=&#34;color:#ae81ff&#34;&gt;1994&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2019&lt;/span&gt;){
  start.time &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.time&lt;/span&gt;() &lt;span style=&#34;color:#75715e&#34;&gt;# è¨ˆç®—æ™‚é–“ã‚’å›³ã‚‹&lt;/span&gt;
  &lt;span style=&#34;color:#75715e&#34;&gt;# yahooç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§ãƒšãƒ¼ã‚¸ã®å–å¾—&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;){ &lt;span style=&#34;color:#75715e&#34;&gt;# kã¯æœˆã‚’è¡¨ã™&lt;/span&gt;
    
    &lt;span style=&#34;color:#a6e22e&#34;&gt;tryCatch&lt;/span&gt;(
      {
        keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp/schedule/list/&amp;#34;&lt;/span&gt;, year,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/?month=&amp;#34;&lt;/span&gt;,k)) &lt;span style=&#34;color:#75715e&#34;&gt;# è©²å½“å¹´ã€è©²å½“æœˆã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§ã«ã‚¢ã‚¯ã‚»ã‚¹&lt;/span&gt;
        &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
        race_lists &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
          &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
          &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å…¨urlã‚’å–å¾—&lt;/span&gt;
        
        &lt;span style=&#34;color:#75715e&#34;&gt;# ç«¶é¦¬å ´ã”ã¨ã®å„æ—¥ã®ãƒ¬ãƒ¼ã‚¹ãƒªã‚¹ãƒˆã‚’å–å¾—&lt;/span&gt;
        race_lists &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_lists&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_lists, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race/list/\\d+/&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œresultã€ãŒå«ã¾ã‚Œã‚‹urlã‚’æŠ½å‡º&lt;/span&gt;
      }
      , error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(e){signal &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;}
    )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã“ã§ã¯ã€å–å¾—ã—ãŸãƒªãƒ³ã‚¯ã®urlã«resultã¨ã„ã†æ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‚‚ã®ã ã‘ã‚’æŠ½å‡ºã—ã¦ã„ã¾ã™ã€‚è¦ã¯ãã‚ŒãŒå„ç«¶é¦¬å ´ã®ãƒ¬ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ã¨ãªã‚Šã¾ã™ã€‚ã“ã“ã‹ã‚‰ã¯å–å¾—ã—ãŸç«¶é¦¬å ´ã®ãƒ¬ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒªãƒ³ã‚¯ã‚’ç”¨ã„ã¦ã€ãã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€å…¨12ãƒ¬ãƒ¼ã‚¹ãã‚Œãã‚Œã®ãƒ¬ãƒ¼ã‚¹çµæœãŒæ²è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒšãƒ¼ã‚¸ã®ãƒªãƒ³ã‚¯ã‚’å–å¾—ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(j in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race_lists)){ &lt;span style=&#34;color:#75715e&#34;&gt;# jã¯å½“è©²å¹´æœˆã«ã‚ã£ãŸãƒ¬ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¡¨ã™&lt;/span&gt;
      
      &lt;span style=&#34;color:#a6e22e&#34;&gt;tryCatch&lt;/span&gt;(
        {
          race_list &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,race_lists[j]))
          race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_list &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å…¨urlã‚’å–å¾—&lt;/span&gt;
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®urlã‚’å–å¾—&lt;/span&gt;
          race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œresultã€ãŒå«ã¾ã‚Œã‚‹urlã‚’æŠ½å‡º&lt;/span&gt;
        }
        , error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(e){signal &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;}
      )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å„ãƒ¬ãƒ¼ã‚¹çµæœã¸ã®ãƒªãƒ³ã‚¯ãŒå–å¾—ã§ããŸã®ã§ã€ã“ã“ã‹ã‚‰ã¯ã„ã‚ˆã„ã‚ˆãƒ¬ãƒ¼ã‚¹çµæœã®å–å¾—ã¨ãã®æ•´å½¢ãƒ‘ãƒ¼ãƒˆã«å…¥ã‚Šã¾ã™ã€‚ã‹ãªã‚Šé•·ã£ãŸã‚‰ã—ãè¤‡é›‘ãªã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚ãƒ¬ãƒ¼ã‚¹çµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ†ãƒ¼ãƒ–ãƒ«å±æ€§ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã¾ãšãã‚Œã‚’å˜ç´”ã«å¼•ã£å¼µã£ã¦ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race_url)){ &lt;span style=&#34;color:#75715e&#34;&gt;# iã¯å½“è©²å¹´æœˆå½“è©²ç«¶é¦¬å ´ã§é–‹å‚¬ã•ã‚ŒãŸãƒ¬ãƒ¼ã‚¹ã‚’è¡¨ã™&lt;/span&gt;
        
        &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç¾åœ¨ã€&amp;#34;&lt;/span&gt;, year, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¹´&amp;#34;&lt;/span&gt;, k, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœˆ&amp;#34;&lt;/span&gt;,j, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã‚°ãƒ«ãƒ¼ãƒ—ã€&amp;#34;&lt;/span&gt;, i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç•ªç›®ã®ãƒ¬ãƒ¼ã‚¹ã®ä¿å­˜ä¸­ã§ã™&amp;#34;&lt;/span&gt;))
        
        &lt;span style=&#34;color:#a6e22e&#34;&gt;tryCatch&lt;/span&gt;(
          {
            race1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,race_url[i])) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®urlã‚’å–å¾—&lt;/span&gt;
            signal &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
          }
          , error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(e){signal &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;}
        )
        
        &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹ãŒä¸­æ­¢orã“ã‚Œã¾ã§ã®éç¨‹ã§ã‚¨ãƒ©ãƒ¼ã§ãªã‘ã‚Œã°å‡¦ç†ã‚’å®Ÿè¡Œ&lt;/span&gt;
        &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;identical&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
                      &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@class = &amp;#39;resultAtt mgnBL fntSS&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
                      &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;(),&lt;span style=&#34;color:#a6e22e&#34;&gt;character&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; signal &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;){
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//table[@id = &amp;#39;raceScore&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_table&lt;/span&gt;()
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,race_result) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒªã‚¹ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›´&lt;/span&gt;
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(race_result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;frame_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_name/age&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time/margin&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;passing_rank/last_3F&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jockey/weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;popularity/odds&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;trainer&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;#ã€€åˆ—åå¤‰æ›´&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;tableã‚’ãŸã å–å¾—ã—ãŸã ã‘ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«\nãŒå…¥ã£ã¦ã„ãŸã‚Šã€ä¸€ã¤ã®ã‚»ãƒ«ã«è¤‡æ•°ã®æƒ…å ±ãŒå…¥ã£ã¦ã„ãŸã‚Šã¨åˆ†æã«ã¯ä½¿ãˆãªã„ãƒ‡ãƒ¼ã‚¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚ãªã®ã§ã€ã“ã‚Œã‚’æˆå‹ã™ã‚‹å¿…è¦ãŒå‡ºã¦ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;# é€šéé †ä½ã¨ä¸Šã‚Š3Fã®ã‚¿ã‚¤ãƒ &lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,passing_rank&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(\\d{2}-\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2})&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,last_3F&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-6&lt;/span&gt;]
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¿ã‚¤ãƒ ã¨ç€å·®&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,time&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d\\.\\d{2}\\.\\d|\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,margin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;./.é¦¬èº«|.é¦¬èº«|.[:space:]./.é¦¬èº«|[ã‚¢-ãƒ³-]+&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;margin[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãƒˆãƒƒãƒ—&amp;#34;&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;margin[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;margin&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;character(0)&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¤§å·®&amp;#34;&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;margin[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;order&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-5&lt;/span&gt;]
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬åã€é¦¬é½¢ã€é¦¬ä½“é‡&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã‚¡-ãƒ´ãƒ¼ãƒ»]+&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_age&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‰¡\\d+|ç‰\\d+|ã›ã‚“\\d+&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_sex &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_age, pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‰¡|ç‰|ã›ã‚“&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_age &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_age, pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d&amp;#34;&lt;/span&gt;)
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{3}&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight_change&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\([\\+|\\-]\\d+\\)|\\([\\d+]\\)&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,brinker&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;brinker[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;brinker&lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;N&amp;#34;&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¸ãƒ§ãƒƒã‚­ãƒ¼&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,jockey&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã-ã‚“ä¸€-é¾ ]+\\s[ã-ã‚“ä¸€-é¾ ]+|[:upper:].[ã‚¡-ãƒ¶ãƒ¼]+&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,jockey_weight&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{2}&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;jockey_weight_change &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;jockey_weight_change&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â˜†&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;jockey_weight_change&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–³&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;jockey_weight_change&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;â–³&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]
          
          &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚ªãƒƒã‚ºã¨äººæ°—&lt;/span&gt;
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,odds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\(.+\\)&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,popularity&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+[^(\\d+.\\d)]&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«ã€ä»Šå–å¾—ã—ãŸtableä»¥å¤–ã®æƒ…å ±ã‚‚å–ã‚Šè¾¼ã‚€ã“ã¨ã«ã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€ãƒ¬ãƒ¼ã‚¹åã‚„å¤©å€™ã€é¦¬å ´çŠ¶æ…‹ã€æ—¥ä»˜ã€ç«¶é¦¬å ´ãªã©ã§ã™ã€‚ã“ã‚Œã‚‰ã®æƒ…å ±ã¯ãƒ¬ãƒ¼ã‚¹çµæœãƒšãƒ¼ã‚¸ã®ä¸Šéƒ¨ã«æ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹æƒ…å ±&lt;/span&gt;
          race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/p[@id = &amp;#39;raceTitDay&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
          race_name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/h1[@class = &amp;#39;fntB&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
          race_distance &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//p[@id = &amp;#39;raceTitMeta&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
        
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+å¹´\\d+æœˆ\\d+æ—¥&amp;#34;&lt;/span&gt;)))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¹´&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœˆ&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.Date&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_date)
          race_course &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_date,pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœ­å¹Œ|å‡½é¤¨|ç¦å³¶|æ–°æ½Ÿ|æ±äº¬|ä¸­å±±|ä¸­äº¬|äº¬éƒ½|é˜ªç¥|å°å€‰&amp;#34;&lt;/span&gt;))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_course &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_course
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_name,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_distance&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_distance,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+m&amp;#34;&lt;/span&gt;)))
          race_type&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_distance,pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;èŠ|ãƒ€ãƒ¼ãƒˆ&amp;#34;&lt;/span&gt;))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;type &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_type
          race_turn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_distance,pattern &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å³|å·¦&amp;#34;&lt;/span&gt;))
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_turn &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_turn
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg ryou&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è‰¯&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg yayaomo&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç¨é‡&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
                            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg omo&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é‡&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                            &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg furyou&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è‰¯&amp;#34;&lt;/span&gt;
          } else race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_condition &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;NA&amp;#34;&lt;/span&gt;
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg hare&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_weather &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ™´ã‚Œ&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg ame&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_weather &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ›‡ã‚Š&amp;#34;&lt;/span&gt;
          } else &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//img[@class = &amp;#39;spBg kumori&amp;#39;]&amp;#34;&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_weather &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é›¨&amp;#34;&lt;/span&gt;
          } else race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;race_weather &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ãã®ä»–&amp;#34;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã¯å„é¦¬ã®æƒ…å ±ã§ã™ã€‚ å®Ÿã¯ã•ãã»ã©å–å¾—ã—ãŸtableã®é¦¬åã¯ãƒªãƒ³ã‚¯ã«ãªã£ã¦ãŠã‚Šã€ãã®ãƒªãƒ³ã‚¯ã‚’ãŸã©ã‚‹ã¨&lt;a href=&#34;https://keiba.yahoo.co.jp/directory/horse/2015105508/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å„é¦¬ã®æƒ…å ±&lt;/a&gt;ãŒå–å¾—ã§ãã¾ã™ï¼ˆæ¯›è‰²ã‚„ç”Ÿå¹´æœˆæ—¥ãªã©ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          horse_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) 
          horse_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(horse_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;directory/horse&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬æƒ…å ±ã®ãƒªãƒ³ã‚¯ã ã‘æŠ½å‡ºã™ã‚‹&lt;/span&gt;
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(l in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(horse_url)){
            &lt;span style=&#34;color:#a6e22e&#34;&gt;tryCatch&lt;/span&gt;(
              {
                horse1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,horse_url[l]))
                &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;)
                horse_name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;dirTitName&amp;#39;]/h1[@class = &amp;#39;fntB&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                  &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
                horse &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;dirTitName&amp;#39;]/ul&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
                  &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;colour[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¯›è‰²ï¼š.+&amp;#34;&lt;/span&gt;)) 
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;owner[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¦¬ä¸»ï¼š.+&amp;#34;&lt;/span&gt;))
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;farm[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç”Ÿç”£è€…ï¼š.+&amp;#34;&lt;/span&gt;))
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;locality[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç”£åœ°ï¼š.+&amp;#34;&lt;/span&gt;))
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_birthday[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(horse,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+å¹´\\d+æœˆ\\d+æ—¥&amp;#34;&lt;/span&gt;))
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;father[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//td[@class = &amp;#39;bloodM&amp;#39;][@rowspan = &amp;#39;4&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;mother[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; horse1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//td[@class = &amp;#39;bloodF&amp;#39;][@rowspan = &amp;#39;4&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
              }
              , error &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(e){
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;colour[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt; 
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;owner[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;farm[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;locality[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_birthday[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;father[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;mother[race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_name&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;horse_name] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
                }
            )
          }
          
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;colour &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;colour,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¯›è‰²ï¼š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;owner &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;owner,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¦¬ä¸»ï¼š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;farm &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;farm,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç”Ÿç”£è€…ï¼š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;locality &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;locality,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç”£åœ°ï¼š&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
          &lt;span style=&#34;color:#75715e&#34;&gt;#race_result$horse_birthday &amp;lt;- str_replace_all(race_result$horse_birthday,&amp;#34;å¹´&amp;#34;,&amp;#34;/&amp;#34;)&lt;/span&gt;
          &lt;span style=&#34;color:#75715e&#34;&gt;#race_result$horse_birthday &amp;lt;- str_replace_all(race_result$horse_birthday,&amp;#34;æœˆ&amp;#34;,&amp;#34;/&amp;#34;)&lt;/span&gt;
          &lt;span style=&#34;color:#75715e&#34;&gt;#race_result$horse_birthday &amp;lt;- as.Date(race_result$horse_birthday)&lt;/span&gt;
          
          race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;arrange&lt;/span&gt;(race_result,horse_number) &lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬ç•ªé †ã«ä¸¦ã¹ã‚‹&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¬¡ã«ãã®ãƒ¬ãƒ¼ã‚¹ã¾ã§ã«ç²å¾—ã—ãŸè³é‡‘é¡ã‚’è½ã¨ã—ã«è¡Œãã¾ã™ã€‚ã“ã‚Œã¯ãƒ¬ãƒ¼ã‚¹çµæœã®ãƒšãƒ¼ã‚¸ã®&lt;a href=&#34;https://keiba.yahoo.co.jp/race/denma/1802010601/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‡ºé¦¬è¡¨&lt;/a&gt;ã¨æ›¸ã‹ã‚ŒãŸãƒªãƒ³ã‚¯ã‚’ãŸã©ã‚‹ã¨ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ã“ã“ã«è³é‡‘ãŒã‚ã‚‹ã®ã§ãã‚Œã‚’å–å¾—ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          yosou_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) 
          yosou_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; yosou_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(yosou_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;denma&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]
          
          &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(yosou_url)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
          yosou1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,yosou_url)) 
          &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;)
          yosou &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; yosou1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//td[@class = &amp;#39;txC&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;()
          prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; yosou&lt;span style=&#34;color:#a6e22e&#34;&gt;[grepl&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸‡&amp;#34;&lt;/span&gt;,yosou)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+ä¸‡&amp;#34;&lt;/span&gt;)
          prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,prize)) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;()
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; prize
          race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;prize,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸‡&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;as.numeric&lt;/span&gt;()
          } else race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;prize &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;NA&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å–å¾—ã—ãŸå„ãƒ¬ãƒ¼ã‚¹çµæœã‚’æ ¼ç´ã™ã‚‹datasetã¨ã„ã†ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ä½œæˆã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ã¦ã„ãã¾ã™ã€‚1å¹´ã”ã¨ã«ãã‚Œã‚’SQLite
ã¸ä¿å­˜ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;          &lt;span style=&#34;color:#75715e&#34;&gt;## ãƒ•ã‚¡ã‚¤ãƒ«è²¯ã‚ã‚‹ã®ã‹ã&lt;/span&gt;
          &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; j &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
            dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result
          } else {
            dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(dataset,race_result)
          } &lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡2ã®çµ‚ã‚ã‚Š&lt;/span&gt;
        }else
        {
          &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¿å­˜ã§ãã¾ã›ã‚“ã§ã—ãŸ&amp;#34;&lt;/span&gt;) 
        }&lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡1ã®çµ‚ã‚ã‚Š&lt;/span&gt;
      } &lt;span style=&#34;color:#75715e&#34;&gt;# iãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    } &lt;span style=&#34;color:#75715e&#34;&gt;# jãƒ«ãƒ¼ãƒ—çµ‚ã‚ã‚Š&lt;/span&gt;
  } &lt;span style=&#34;color:#75715e&#34;&gt;# kãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;beep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;write.csv&lt;/span&gt;(dataset,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race_result2.csv&amp;#34;&lt;/span&gt;, row.names &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
  
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(year &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1994&lt;/span&gt;){
    &lt;span style=&#34;color:#a6e22e&#34;&gt;dbWriteTable&lt;/span&gt;(con, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race_result&amp;#34;&lt;/span&gt;, dataset)
  } else {
    &lt;span style=&#34;color:#a6e22e&#34;&gt;dbWriteTable&lt;/span&gt;(con, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;temp&amp;#34;&lt;/span&gt;, dataset)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;dbSendQuery&lt;/span&gt;(con, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;INSERT INTO race_result select * from temp&amp;#34;&lt;/span&gt;)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;dbSendQuery&lt;/span&gt;(con, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DROP TABLE temp&amp;#34;&lt;/span&gt;)
  } &lt;span style=&#34;color:#75715e&#34;&gt;# ifã®çµ‚ã‚ã‚Š&lt;/span&gt;
} &lt;span style=&#34;color:#75715e&#34;&gt;# yearãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
end.time &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.time&lt;/span&gt;()
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å‡¦ç†æ™‚é–“ã¯&amp;#34;&lt;/span&gt;,end.time&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;start.time,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ã§ã™ã€‚&amp;#34;&lt;/span&gt;))
&lt;span style=&#34;color:#a6e22e&#34;&gt;beep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)

&lt;span style=&#34;color:#a6e22e&#34;&gt;options&lt;/span&gt;(warn &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)

&lt;span style=&#34;color:#a6e22e&#34;&gt;dbDisconnect&lt;/span&gt;(con)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥ä¸Šã§ã™ã€‚å–ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(race_result)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##   order frame_number horse_number   trainer passing_rank last_3F   time
## 1    10            1            1   ç”°ä¸­ å‰›        09-09    39.0 1.14.3
## 2    16            1            2 å¤©é–“ æ˜­ä¸€        11-11    40.3 1.15.7
## 3    15            2            3 ç”°ä¸­ æ¸…éš†        14-14    39.4 1.15.1
## 4     9            2            4 ä¸­èˆ˜ è‹±äºŒ        08-08    39.1 1.14.3
## 5    12            3            5 æ ¹æœ¬ åº·åºƒ        11-11    39.0 1.14.4
## 6     4            3            6 æ‰æµ¦ å®æ˜­        04-04    38.4 1.13.2
##      margin         horse_name horse_age horse_sex horse_weight
## 1    ã‚¢ã‚¿ãƒ     ã‚µãƒˆãƒã‚¸ãƒ§ãƒ‹ãƒ¼         3        ç‰¡          512
## 2 3 1/2é¦¬èº«       ãƒ„ã‚®ãƒã‚¤ãƒƒãƒ†         3        ç‰¡          464
## 3     3é¦¬èº«           ã‚®ãƒ¥ã‚¦ãƒ›         3        ç‰¡          444
## 4 2 1/2é¦¬èº« ã‚»ã‚¤ã‚¦ãƒ³ãƒ¡ãƒ©ãƒ“ãƒªã‚¢         3        ç‰          466
## 5      ã‚¯ãƒ“ ã‚µãƒã‚¤ãƒãƒ«ãƒˆãƒªãƒƒã‚¯         3        ç‰          450
## 6    ã‚¢ã‚¿ãƒ       ã‚¹ãƒ†ã‚¤ãƒ›ãƒƒãƒˆ         3        ç‰          474
##   horse_weight_change brinker      jockey jockey_weight jockey_weight_change
## 1                 +30       N   æ¾å²¡ æ­£æµ·            56                    0
## 2                  +8       N è¥¿ç”° é›„ä¸€éƒ            56                    0
## 3                  +8       N   æ‰åŸ èª äºº            56                    0
## 4                 +10       N   æ‘ç”° ä¸€èª             54                    0
## 5                  -2       N é‡ä¸­ æ‚ å¤ªéƒ            51                    0
## 6                  -2       N   å¤§é‡ æ‹“å¼¥            54                    0
##    odds popularity  race_date race_course       race_name race_distance   type
## 1  40.3         9  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 2 340.9        16  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 3 283.1        14  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 4 299.7        15  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 5  26.7         8  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
## 6   2.4         1  2019-01-05        ä¸­å±± ã‚µãƒ©ç³»3æ­³æœªå‹åˆ©         1200m ãƒ€ãƒ¼ãƒˆ
##   race_turn race_condition race_weather colour                           owner
## 1        å³             è‰¯         æ™´ã‚Œ   æ —æ¯› æ ªå¼ä¼šç¤¾ ã‚µãƒˆãƒŸãƒ›ãƒ¼ã‚¹ã‚«ãƒ³ãƒ‘ãƒ‹ãƒ¼
## 2        å³             è‰¯         æ™´ã‚Œ é»’é¹¿æ¯›                     è¥¿æ‘ æ–°ä¸€éƒ
## 3        å³             è‰¯         æ™´ã‚Œ   é¹¿æ¯›           æœ‰é™ä¼šç¤¾ ãƒŸãƒ«ãƒ•ã‚¡ãƒ¼ãƒ 
## 4        å³             è‰¯         æ™´ã‚Œ é’é¹¿æ¯›                       è¥¿å±± èŒ‚è¡Œ
## 5        å³             è‰¯         æ™´ã‚Œ é»’é¹¿æ¯›                       ç¦ç”° å…‰åš
## 6        å³             è‰¯         æ™´ã‚Œ   æ —æ¯›                       å°æ— å–„ä¸€
##           farm   locality horse_birthday                 father
## 1   åƒä»£ç”°ç‰§å ´ æ–°ã²ã ã‹ç”º  2016å¹´1æœˆ29æ—¥         ã‚ªãƒ«ãƒ•ã‚§ãƒ¼ãƒ´ãƒ«
## 2    ç¹”ç¬  æ™‚ç”·     é’æ£®çœŒ  2016å¹´4æœˆ17æ—¥ ã‚¹ã‚¯ãƒ¯ãƒ¼ãƒˆãƒ«ã‚¹ã‚¯ãƒ¯ãƒ¼ãƒˆ
## 3    ç¥å£ é“å¼˜ æ–°ã²ã ã‹ç”º  2016å¹´4æœˆ19æ—¥     ã‚¸ãƒ£ãƒ³ã‚°ãƒ«ãƒã‚±ãƒƒãƒˆ
## 4  çŸ³éƒ·å²¡ é›…æ¨¹     æ–°å† ç”º  2016å¹´4æœˆ21æ—¥     ã‚­ãƒ³ã‚·ãƒ£ã‚µãƒã‚­ã‚»ã‚­
## 5     åŸç”°ç‰§å ´     æ—¥é«˜ç”º  2016å¹´4æœˆ30æ—¥       ãƒªãƒ¼ãƒã‚¶ã‚¯ãƒ©ã‚¦ãƒ³
## 6 ç¤¾å°ãƒ•ã‚¡ãƒ¼ãƒ      åƒæ­³å¸‚  2016å¹´3æœˆ13æ—¥     ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ãƒˆã‚¥ãƒ¼ãƒ¬
##               mother prize
## 1 ã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ«ã‚¸ãƒ¥ã‚¨ãƒ«     0
## 2   ã‚¨ãƒ—ã‚½ãƒ ã‚¢ã‚¤ãƒªã‚¹     0
## 3     ãƒ‡ãƒ©ã‚¤ãƒˆã‚·ãƒ¼ãƒ³     0
## 4     ãƒ‰ãƒªãƒ¼ãƒ ã‚·ãƒƒãƒ—     0
## 5   ãƒ•ãƒªãƒ¼ãƒ€ãƒ ã‚¬ãƒ¼ãƒ«   180
## 6     ã‚¹ãƒ†ã‚¤ã‚¢ãƒ©ã‚¤ãƒ´   455
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>rvestã§yahooç«¶é¦¬ã«ã‚ã‚‹éå»ã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã—ã¦ã¿ãŸ</title>
      <link>/post/post9/</link>
      <pubDate>Sat, 19 May 2018 00:00:00 +0000</pubDate>
      <guid>/post/post9/</guid>
      <description>&lt;p&gt;ã¿ãªã•ã‚“ã€ãŠã¯ã“ã‚“ã°ã‚“ã«ã¡ã¯ã€‚&lt;/p&gt;
&lt;p&gt;ç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’çš„ä¸­ã•ã›ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚ã†ã¨ã„ã†ã“ã¨ã§ç ”ç©¶ã‚’ã¯ã˜ã‚ã¾ã—ãŸãŒã€ã¾ãšã¯ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªåˆ†ã§å–ã£ã¦ãã‚‹ã¨ã“ã‚ã‹ã‚‰ã‚„ã‚ã†ã¨ãŠã‚‚ã„ã¾ã™ã€‚ã©ã“ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–ã£ã¦ãã‚‹ã®ã‹ã¨ã„ã†ç‚¹ãŒé‡è¦ã«ãªã‚‹ã‚ã‘ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿å…ˆã¨ã—ã¦ã¯datascisotistã•ã‚“ãŒã¾ã¨ã‚ã‚‰ã‚ŒãŸéå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ã„è¨˜äº‹ãŒã‚ã‚Šã¾ã™ã€‚ã©ã“ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãŒå–ã‚Œã‚‹ã®ã‹ã¨ã„ã†ã¨å¤§ããåˆ†ã‘ã¦äºŒã¤ã§ã€â‘ JRAæä¾›ã®JRA-VANã‚„é›»å­ç«¶é¦¬æ–°èã§ãŠãªã˜ã¿ã®ï¼ŸJRJDã¨ã„ã£ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€â‘¡netkeibaã€yahooç«¶é¦¬ã¨ã¨ã„ã£ãŸç«¶é¦¬æƒ…å ±ã‚µã‚¤ãƒˆã€ã¨ãªã£ã¦ã„ã¾ã™ã€‚â‘¡ã®å ´åˆã¯è‡ªåˆ†ã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã€ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»Šå›ã¯â‘¡ã‚’é¸æŠã—ã€yahooç«¶é¦¬ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã§è½ã¨ã—ã¦ããŸã„ã¨æ€ã„ã¾ã™ã€‚Rã§ã‚¯ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚’è¡Œã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã¯ã€rvest, httr, XMLãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯1ç•ªç°¡å˜ã«ä½¿ãˆã‚‹rvestã‚’ç”¨ã„ã¾ã™ã€‚yahooç«¶é¦¬ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å„ãƒ¬ãƒ¼ã‚¹çµæœãŒè¡¨ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ï¼ˆ5æœˆã®æ—¥æœ¬ãƒ€ãƒ¼ãƒ“ãƒ¼ã®çµæœï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://keiba.yahoo.co.jp/race/result/1805021210/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;yahooç«¶é¦¬&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å„é¦¬ã®ã–ã£ãã‚Šã¨ã—ãŸç‰¹å¾´ã‚„ãƒ¬ãƒ¼ã‚¹çµæœï¼ˆé€šéé †ä½ç­‰å«ã‚€ï¼‰ã€ã‚ªãƒƒã‚ºãŒæ²è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¨ã‚Šã‚ãˆãšã€ã“ã®ãã‚‰ã„æƒ…å ±ãŒã‚ã‚Œã°è‰¯ã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ï¼ˆã‚ªãƒƒã‚ºã®æƒ…å ±ã¯ã‚‚ã†å°‘ã—æ¬²ã—ã„ã®ã§ã™ãŒï¼‰ã€‚ãŸã ã€ä»Šå¾Œã¯å°‘ã—ãšã¤å¿…è¦ã«ãªã£ãŸæƒ…å ±ã‚’æ‹¡å……ã—ã¦ã„ã“ã†ã¨ã‚‚æ€ã£ã¦ã„ã¾ã™ã€‚1986å¹´ã¾ã§ã®ãƒ¬ãƒ¼ã‚¹çµæœãŒæ ¼ç´ã•ã‚Œã¦ãŠã‚Šã€å…¨ãƒ‡ãƒ¼ã‚¿æ•°ã¯50ä¸‡ä»¶ã‚’è¶…ãˆã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚ãŸã ã€å˜å‹ã‚ªãƒƒã‚ºãŒåˆ©ç”¨ã§ãã‚‹ã®ã¯1994å¹´ã‹ã‚‰ã®ã‚ˆã†ãªã®ã§ä»Šå›ã¯1994å¹´ã‹ã‚‰ç›´è¿‘ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’è½ã¨ã—ã¦ãã¾ã™ã€‚ä»Šå›ã®ã‚´ãƒ¼ãƒ«ã¯ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’csvãƒ•ã‚¡ã‚¤ãƒ« or SQLã«æ ¼ç´ã™ã‚‹ã“ã¨ã§ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-rvestã¨ã¯&#34;&gt;1. Rvestã¨ã¯&lt;/h2&gt;
&lt;p&gt;Rvestã¨ã¯ã€webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€ç¨®ã§dplyrã§ãŠãªã˜ã¿ã®Hadley Wickhamã•ã‚“ã«ã‚ˆã£ã¦ä½œæˆã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚ãŸã£ãŸæ•°è¡Œã§webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ãŒã§ãã‚‹å„ªã‚Œã‚‚ã®ã¨ãªã£ã¦ãŠã‚Šã€æ“ä½œãŒéå¸¸ã«ç°¡å˜ã§ã‚ã‚‹ã®ãŒç‰¹å¾´ã§ã™ã€‚ä»Šå›ã¯ä»¥ä¸‹ã®æœ¬ã‚’å‚è€ƒã«ã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://www.amazon.co.jp/exec/obidos/ASIN/486354216X/hatena-blog-22/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Rã«ã‚ˆã‚‹ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å…¥é–€&lt;/a&gt;
&lt;img src=&#34;https://images-na.ssl-images-amazon.com/images/I/51ZBnu8oSvL._SX350_BO1,204,203,200_.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;ãã‚‚ãã‚‚ã€htmlã‚‚å¤§å­¦1å¹´ç”Ÿã«ã‚„ã£ãŸç¨‹åº¦ã§ã»ã¨ã‚“ã©å¿˜ã‚Œã¦ã„ãŸã®ã§ã™ãŒã€ã“ã®æœ¬ã¯ãã“ã‚‚éå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã•ã‚Œã¦ãŠã‚Šã€éå¸¸ã«å®Ÿè·µçš„ãªæœ¬ã ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ã¿ã‚‹&#34;&gt;2. ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ã¿ã‚‹&lt;/h2&gt;
&lt;p&gt;å®Ÿéš›ã«yahooç«¶é¦¬ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’è½ã¨ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚ã”ç•™æ„é ‚ããŸã„ã®ã¯ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾ä½¿ç”¨ã—ã¦ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡Œã†ã“ã¨ã¯ã”é æ…®ã„ãŸã ããŸã„ã¨ã„ã†äº‹ã§ã™ã€‚webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã¯é«˜é€Ÿã§ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã€ã‚µã‚¤ãƒˆã¸ã®è² è·ãŒå¤§ãããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡Œã†éš›ã¯ã€æ™‚é–“ã‚’ç©ºã‘ã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ãªã©ãã®ç‚¹ã«ç•™æ„ã‚’ã—ã¦è¡Œã£ã¦ãã ã•ã„ï¼ˆæœ€æ‚ªè¨´ãˆã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ãŒã€ã“ã¡ã‚‰ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’å–ã‚Šã¾ã›ã‚“ï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# rvestã«ã‚ˆã‚‹ç«¶é¦¬ãƒ‡ãƒ¼ã‚¿ã®webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;rvest&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#if (!require(&amp;#34;pacman&amp;#34;)) install.packages(&amp;#34;pacman&amp;#34;)&lt;/span&gt;
pacman&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;p_load&lt;/span&gt;(qdapRegex)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(rvest)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(dplyr)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯&lt;code&gt;qdapRegex&lt;/code&gt;ã€&lt;code&gt;rvest&lt;/code&gt;ã€&lt;code&gt;stringr&lt;/code&gt;ã€&lt;code&gt;dplyr&lt;/code&gt;ã§ã™ã€‚&lt;code&gt;qdapRegex&lt;/code&gt;ã¯ã‚«ãƒƒã‚³å†…ã®æ–‡å­—ã‚’å–ã‚Šå‡ºã™ãŸã‚ã«ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp/schedule/list/2016/?month=&amp;#34;&lt;/span&gt;,k))
race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
&lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å…¨urlã‚’å–å¾—&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®ã‚’urlã‚’å–å¾—&lt;/span&gt;
race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œresultã€ãŒå«ã¾ã‚Œã‚‹urlã‚’æŠ½å‡º&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã¾ãšã€read_htmlã§yahooç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§ã®htmlæ§‹é€ ã‚’å¼•ã£å¼µã£ã¦ãã¾ã™ï¼ˆãƒªãƒ³ã‚¯ã¯2016å¹´1æœˆã®å…¨ãƒ¬ãƒ¼ã‚¹ï¼‰ã€‚ã“ã“ã§ã€kã¨å‡ºã¦ã„ã‚‹ã®ã¯æœˆã‚’è¡¨ã—ã€k=1ã§ã‚ã‚Œã°2016å¹´1æœˆã®ãƒ¬ãƒ¼ã‚¹çµæœã‚’å¼•ã£å¼µã£ã¦ãã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚keiba.yahooã‚’è¦—ã„ã¦ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãã®ãƒšãƒ¼ã‚¸å…¨ä½“ã®htmlæ§‹é€ ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;keiba.yahoo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## {html_document}
## &amp;lt;html xmlns=&amp;quot;http://www.w3.org/1999/xhtml&amp;quot;&amp;gt;
## [1] &amp;lt;head&amp;gt;\n&amp;lt;!---äº¬---&amp;gt;&amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; cha ...
## [2] &amp;lt;body&amp;gt;\n&amp;lt;noscript&amp;gt;\n  &amp;lt;iframe src=&amp;quot;//b.yjtag.jp/iframe?c=QXMP4c3&amp;quot; width=&amp;quot; ...
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;race_urlã«ã¯yahoo.keibaã®ã†ã¡ã®2016å¹´kæœˆã«ã‚ã£ãŸå…¨ãƒ¬ãƒ¼ã‚¹çµæœã®ãƒªãƒ³ã‚¯ã‚’æ ¼ç´ã—ã¦ã„ã¾ã™ã€‚html_nodeã¨ã¯htmlæ§‹é€ ã®ã†ã¡ã©ã®è¦ç´ ã‚’å¼•ã£å¼µã‚‹ã‹ã‚’æŒ‡å®šã—ã€ãã‚Œã‚’å¼•ã£å¼µã‚‹é–¢æ•°ã§ã€ç°¡å˜ã«è¨€ãˆã°ã»ã—ã„ãƒ‡ãƒ¼ã‚¿ã®ä½æ‰€ã‚’å…¥åŠ›ã™ã‚‹é–¢æ•°ã§ã‚ã‚‹ã¨èªè­˜ã—ã¦ã„ã¾ã™ï¼ˆãŠãã‚‰ãæ­£ã—ããªã„ï¼‰ã€‚ã“ã“ã§ã¯aè¦ç´ ã‚’å¼•ã£å¼µã‚‹ã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚æ³¨æ„ã™ã¹ãã“ã¨ã¯ã€html_nodeã¯æ¬²ã—ã„æƒ…å ±ã‚’htmlå½¢å¼ã§å¼•ã£å¼µã‚‹ã“ã¨ã§ã™ã€‚ãªã®ã§ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ãƒªãƒ³ã‚¯ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã«ã¯html_attrã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚html_attrã®å¼•æ•°ã¨ã—ã¦ã€ãƒªãƒ³ã‚¯å±æ€§ã‚’è¡¨ã™hrefã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã§ãƒ¬ãƒ¼ã‚¹çµæœã®urlãŒå–ã‚ŒãŸã¨æ€ã„ãã‚„ã€å®Ÿã¯ã“ã‚Œã§ã¯ä»–ã®ãƒªãƒ³ã‚¯ã‚‚ã¨ã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚ä¸€ç•ªã‚ã‹ã‚Šã‚„ã™ã„ã®ãŒåºƒå‘Šã®ãƒªãƒ³ã‚¯ã§ã™ã€‚ã“ã†ã„ã£ãŸãƒªãƒ³ã‚¯ã¯é™¤å¤–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ãƒ¬ãƒ¼ã‚¹çµæœã®urlã«ã¯&amp;quot;result&amp;quot;ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã®æ–‡å­—ãŒå…¥ã£ã¦ã„ã‚‹è¦ç´ ã ã‘ã‚’æŠ½å‡ºã—ãŸã®ãŒä¸€ç•ªæœ€å¾Œã®ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race_url)){
  race1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,race_url[i])) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®urlã‚’å–å¾—&lt;/span&gt;

  &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//table[@id = &amp;#39;raceScore&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;html_table&lt;/span&gt;()
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,race_result) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒªã‚¹ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›´&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(race_result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;frame_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_name/age&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time/margin&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;passing_rank/last_3F&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jockey/weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;popularity/odds&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;trainer&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;#ã€€åˆ—åå¤‰æ›´&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã•ã¦ã€ã„ã‚ˆã„ã‚ˆãƒ¬ãƒ¼ã‚¹çµæœã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡Œã„ã¾ã™ã€‚ã•ãã»ã©å–å¾—ã—ãŸãƒªãƒ³ã‚¯å…ˆã®htmlæ§‹é€ ã‚’ä¸€ã¤ä¸€ã¤å–å¾—ã—ã€ãã®ä¸­ã§å¿…è¦ãªãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‚’å¼•ã£å¼µã‚‹ã¨ã„ã†ä½œæ¥­ã‚’Rã«å®Ÿè¡Œã•ã›ã¾ã™ï¼ˆãªã®ã§ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ã†ï¼‰ã€‚race_1ã«ã¯ã‚ã‚‹ãƒ¬ãƒ¼ã‚¹çµæœãƒšãƒ¼ã‚¸ã®htmlæ§‹é€ ãŒæ ¼ç´ã•ã‚ŒãŠã‚Šã€race_resultã«ã¯ãã®çµæœãŒå…¥ã£ã¦ã„ã¾ã™ã€‚html_nodesã®å¼•æ•°ã«å…¥ã£ã¦ã„ã‚‹xpathã§ã™ãŒã€ã“ã‚Œã¯XLMãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰åŠ¹ç‡çš„ã«è¦ç´ ã‚’æŠœãå‡ºã™è¨€èªã§ã™ã€‚å…ˆã»ã©èª¬æ˜ã—ãŸä½æ‰€ã®ã‚ˆã†ãªã‚‚ã®ã¨æ€ã£ã¦ã„ãŸã ã‘ã‚Œã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚ãã®æ¨ªã«æ›¸ã„ã¦ã‚ã‚‹&lt;code&gt;//table[@id = &#39;raceScore&#39;]&lt;/code&gt;ãŒä½æ‰€ã§ã™ã€‚ã“ã‚Œã¯webãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ç°¡å˜ã«æ¢ã™ã“ã¨ãŒã§ãã¾ã™ã€‚Firefoxã®èª¬æ˜ã«ãªã‚Šã¾ã™ãŒã€ã»ã‹ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚åŒã˜ã‚ˆã†ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ—ã—ãŸã„ç”»é¢ã§&lt;code&gt;Ctrl+Shift+C&lt;/code&gt;ã‚’æŠ¼ã™ã¨ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã“ã®ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼ã®æ¨ªã®ãƒãƒ¼ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ã‚«ãƒ¼ã‚½ãƒ«ã§æŒ‡ã—ãŸéƒ¨åˆ†ã®htmlæ§‹é€ ï¼ˆä½æ‰€ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã“ã®å ´åˆã ã¨ã€ãƒ¬ãƒ¼ã‚¹çµæœã¯tableå±æ€§ã®&lt;code&gt;id&lt;/code&gt;ãŒraceScoreã®å ´æ‰€ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚ãªã®ã§ã€ä¸Šã®ã‚³ãƒ¼ãƒ‰ã§ã¯&lt;code&gt;xpath=&lt;/code&gt;ã®ã¨ã“ã‚ã«ãã‚Œã‚’è¨˜è¿°ã—ã¦ã„ã‚‹ã®ã§ã™ã€‚ãã—ã¦ã€ãƒ¬ãƒ¼ã‚¹çµæœã¯è¡¨ï¼ˆtableï¼‰å½¢å¼ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€&lt;code&gt;html_table&lt;/code&gt;ã§ã”ã£ãã‚Šã¨ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ—ã—ã¾ã—ãŸã€‚åŸºæœ¬çš„ã«ãƒªã‚¹ãƒˆå½¢å¼ã§è¿”ã•ã‚Œã‚‹ã®ã§ã€ãã‚Œã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›ã—ã€é©å½“ã«åˆ—åã‚’ã¤ã‘ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# é€šéé †ä½ã¨ä¸Šã‚Š3Fã®ã‚¿ã‚¤ãƒ &lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,passing_rank&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(\\d{2}-\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2})&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,last_3F&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-6&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¿ã‚¤ãƒ ã¨ç€å·®&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,time&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d\\.\\d{2}\\.\\d|\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,margin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;./.é¦¬èº«|.é¦¬èº«|.[:space:]./.é¦¬èº«|[ã‚¢-ãƒ³-]+&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-5&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬åã€é¦¬é½¢ã€é¦¬ä½“é‡&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã‚¡-ãƒ´ãƒ¼ãƒ»]+&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_age&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‰¡\\d+|ç‰\\d+|ã›ã‚“\\d+&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{3}&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight_change&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\([\\+|\\-]\\d+\\)|\\([\\d+]\\)&amp;#34;&lt;/span&gt;)))
  race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¸ãƒ§ãƒƒã‚­ãƒ¼&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,jockey&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã-ã‚“ä¸€-é¾ ]+\\s[ã-ã‚“ä¸€-é¾ ]+|[:upper:].[ã‚¡-ãƒ¶ãƒ¼]+&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

&lt;span style=&#34;color:#75715e&#34;&gt;# ã‚ªãƒƒã‚ºã¨äººæ°—&lt;/span&gt;
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,odds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\(.+\\)&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,popularity&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+[^(\\d+.\\d)]&amp;#34;&lt;/span&gt;)))
  race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã“ã¾ã§ã§ãƒ‡ãƒ¼ã‚¿ã¯å–å¾—ã§ããŸã‚ã‘ãªã®ã§ã™ãŒã€ãã®ãƒ‡ãƒ¼ã‚¿ã¯ç¶ºéº—ãªã‚‚ã®ã«ã¯ãªã£ã¦ã„ã¾ã›ã‚“ã€‚ ä¸Šã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãã®æ•´å½¢ä½œæ¥­ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ç¾åœ¨ã€å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(race_result)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div data-pagedtable=&#34;false&#34;&gt;
  &lt;script data-pagedtable-source type=&#34;application/json&#34;&gt;
{&#34;columns&#34;:[{&#34;label&#34;:[&#34;&#34;],&#34;name&#34;:[&#34;_rn_&#34;],&#34;type&#34;:[&#34;&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;order&#34;],&#34;name&#34;:[1],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;frame_number&#34;],&#34;name&#34;:[2],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;horse_number&#34;],&#34;name&#34;:[3],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;trainer&#34;],&#34;name&#34;:[4],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;passing_rank&#34;],&#34;name&#34;:[5],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;last_3F&#34;],&#34;name&#34;:[6],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;time&#34;],&#34;name&#34;:[7],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;margin&#34;],&#34;name&#34;:[8],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_name&#34;],&#34;name&#34;:[9],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_age&#34;],&#34;name&#34;:[10],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_weight&#34;],&#34;name&#34;:[11],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_weight_change&#34;],&#34;name&#34;:[12],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;jockey&#34;],&#34;name&#34;:[13],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;odds&#34;],&#34;name&#34;:[14],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;popularity&#34;],&#34;name&#34;:[15],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;race_date&#34;],&#34;name&#34;:[16],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;race_name&#34;],&#34;name&#34;:[17],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]}],&#34;data&#34;:[{&#34;1&#34;:&#34;1&#34;,&#34;2&#34;:&#34;2&#34;,&#34;3&#34;:&#34;2&#34;,&#34;4&#34;:&#34;æ²³é‡ é€šæ–‡&#34;,&#34;5&#34;:&#34;06-07-06-06&#34;,&#34;6&#34;:&#34;35.1&#34;,&#34;7&#34;:&#34;3.19.7&#34;,&#34;8&#34;:&#34;character(0)&#34;,&#34;9&#34;:&#34;ã‚»ãƒ³ã‚´ã‚¯ã‚·ãƒ«ãƒãƒ¼&#34;,&#34;10&#34;:&#34;ç‰¡6&#34;,&#34;11&#34;:&#34;478&#34;,&#34;12&#34;:&#34;+2&#34;,&#34;13&#34;:&#34;ç”°ä¸­ å‹æ˜¥&#34;,&#34;14&#34;:&#34;2.3&#34;,&#34;15&#34;:&#34;1&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;1&#34;},{&#34;1&#34;:&#34;2&#34;,&#34;2&#34;:&#34;6&#34;,&#34;3&#34;:&#34;9&#34;,&#34;4&#34;:&#34;æ­¦ é‚¦å½¦&#34;,&#34;5&#34;:&#34;06-05-04-04&#34;,&#34;6&#34;:&#34;35.7&#34;,&#34;7&#34;:&#34;3.19.9&#34;,&#34;8&#34;:&#34;1 1/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ã‚¸ãƒ£ãƒ ã‚·ãƒ¼ãƒ‰&#34;,&#34;10&#34;:&#34;ç‰¡6&#34;,&#34;11&#34;:&#34;480&#34;,&#34;12&#34;:&#34;0&#34;,&#34;13&#34;:&#34;æŸ´ç”° æ”¿äºº&#34;,&#34;14&#34;:&#34;14&#34;,&#34;15&#34;:&#34;7&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;2&#34;},{&#34;1&#34;:&#34;3&#34;,&#34;2&#34;:&#34;7&#34;,&#34;3&#34;:&#34;10&#34;,&#34;4&#34;:&#34;ç™½äº• å¯¿æ˜­&#34;,&#34;5&#34;:&#34;08-07-06-06&#34;,&#34;6&#34;:&#34;35.7&#34;,&#34;7&#34;:&#34;3.20.1&#34;,&#34;8&#34;:&#34;1 1/2é¦¬èº«&#34;,&#34;9&#34;:&#34;ãƒ›ã‚¯ã‚»ãƒ„ã‚®ãƒ³ã‚¬&#34;,&#34;10&#34;:&#34;ç‰¡6&#34;,&#34;11&#34;:&#34;500&#34;,&#34;12&#34;:&#34;+4&#34;,&#34;13&#34;:&#34;å°å±‹æ•· æ˜­&#34;,&#34;14&#34;:&#34;7.5&#34;,&#34;15&#34;:&#34;3&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;3&#34;},{&#34;1&#34;:&#34;4&#34;,&#34;2&#34;:&#34;7&#34;,&#34;3&#34;:&#34;11&#34;,&#34;4&#34;:&#34;çŸ¢é‡ é€²&#34;,&#34;5&#34;:&#34;03-03-03-02&#34;,&#34;6&#34;:&#34;36.3&#34;,&#34;7&#34;:&#34;3.20.4&#34;,&#34;8&#34;:&#34;1 3/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ã‚µãƒãƒ¼ãƒ¯ã‚¤ãƒ³&#34;,&#34;10&#34;:&#34;ç‰5&#34;,&#34;11&#34;:&#34;422&#34;,&#34;12&#34;:&#34;-4&#34;,&#34;13&#34;:&#34;æœ¨å¹¡ åˆåºƒ&#34;,&#34;14&#34;:&#34;32.6&#34;,&#34;15&#34;:&#34;9&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;4&#34;},{&#34;1&#34;:&#34;5&#34;,&#34;2&#34;:&#34;1&#34;,&#34;3&#34;:&#34;1&#34;,&#34;4&#34;:&#34;ç§‹å±± å²éƒ&#34;,&#34;5&#34;:&#34;12-12-12-12&#34;,&#34;6&#34;:&#34;35.6&#34;,&#34;7&#34;:&#34;3.20.5&#34;,&#34;8&#34;:&#34;1/2é¦¬èº«&#34;,&#34;9&#34;:&#34;ãƒ€ã‚¤ãƒ¯ã‚¸ã‚§ãƒ¼ãƒ ã‚¹&#34;,&#34;10&#34;:&#34;ç‰¡6&#34;,&#34;11&#34;:&#34;472&#34;,&#34;12&#34;:&#34;+6&#34;,&#34;13&#34;:&#34;å¤§å¡š æ „ä¸‰éƒ&#34;,&#34;14&#34;:&#34;5.9&#34;,&#34;15&#34;:&#34;2&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;5&#34;},{&#34;1&#34;:&#34;6&#34;,&#34;2&#34;:&#34;5&#34;,&#34;3&#34;:&#34;7&#34;,&#34;4&#34;:&#34;é ˆè² å½¦ä¸‰&#34;,&#34;5&#34;:&#34;11-10-06-06&#34;,&#34;6&#34;:&#34;36.1&#34;,&#34;7&#34;:&#34;3.20.5&#34;,&#34;8&#34;:&#34;ãƒãƒŠ&#34;,&#34;9&#34;:&#34;ã‚·ã‚²ãƒãƒ©ãƒ³ãƒœãƒ¼&#34;,&#34;10&#34;:&#34;ç‰¡7&#34;,&#34;11&#34;:&#34;438&#34;,&#34;12&#34;:&#34;-6&#34;,&#34;13&#34;:&#34;é ˆè² å°šä»‹&#34;,&#34;14&#34;:&#34;8.7&#34;,&#34;15&#34;:&#34;4&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ31æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬44å›ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¯ã‚¹ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;6&#34;}],&#34;options&#34;:{&#34;columns&#34;:{&#34;min&#34;:{},&#34;max&#34;:[10]},&#34;rows&#34;:{&#34;min&#34;:[10],&#34;max&#34;:[10]},&#34;pages&#34;:{}}}
  &lt;/script&gt;
&lt;/div&gt;
&lt;p&gt;ã”è¦§ã®ã‚ˆã†ã«ã€&lt;code&gt;\n&lt;/code&gt;ãŒå…¥ã£ã¦ã„ãŸã‚Šã€é€šéé †ä½ã¨ä¸Šã‚Š3ãƒãƒ­ãƒ³ã®ã‚¿ã‚¤ãƒ ãŒä¸€ã¤ã®ã‚»ãƒ«ã«å…¥ã£ã¦ã„ãŸã‚Šã¨ã“ã®ã¾ã¾ã§ã¯åˆ†æãŒã§ãã¾ã›ã‚“ã€‚ä¸è¦ãªã‚‚ã®ã‚’å–ã‚Šé™¤ã„ãŸã‚Šã€ãƒ‡ãƒ¼ã‚¿ã‚’äºŒã¤ã«åˆ†å‰²ã™ã‚‹ä½œæ¥­ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚ä»Šå›ã®è¨˜äº‹ã§ã¯ã“ã®éƒ¨åˆ†ã«ã¤ã„ã¦è©³ã—ãã¯èª¬æ˜ã—ã¾ã›ã‚“ã€‚ã“ã®éƒ¨åˆ†ã¯æ­£è¦è¡¨ç¾ã‚’é§†ä½¿ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ç§è‡ªèº«å…¨ãè©³ã—ããªã„ã‹ã‚‰ã§ã™ã€‚ä»Šå›ã‚‚æ‰‹æ¢ã‚Šã§ã‚„ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹æƒ…å ±&lt;/span&gt;
  race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/p[@id = &amp;#39;raceTitDay&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
  race_name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/h1[@class = &amp;#39;fntB&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()

  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+å¹´\\d+æœˆ\\d+æ—¥&amp;#34;&lt;/span&gt;)))
  race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_name,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))

&lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ•ã‚¡ã‚¤ãƒ«æ ¼ç´&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;){
    dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result
  } else {
    dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(dataset,race_result)
  }&lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡ã®çµ‚ã‚ã‚Š&lt;/span&gt;
} &lt;span style=&#34;color:#75715e&#34;&gt;# iãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;write.csv&lt;/span&gt;(race_result,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race_result.csv&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€å¾Œã«ã€ãƒ¬ãƒ¼ã‚¹æ—¥æ™‚ã¨ãƒ¬ãƒ¼ã‚¹åã‚’æŠœãå‡ºã—ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ™‚çš„ã«æ ¼ç´ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¨csvãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãå‡ºã™ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦çµ‚äº†ã§ã™ã€‚å®Œæˆãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ…‹ã«ãªã£ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(dataset)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div data-pagedtable=&#34;false&#34;&gt;
  &lt;script data-pagedtable-source type=&#34;application/json&#34;&gt;
{&#34;columns&#34;:[{&#34;label&#34;:[&#34;&#34;],&#34;name&#34;:[&#34;_rn_&#34;],&#34;type&#34;:[&#34;&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;order&#34;],&#34;name&#34;:[1],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;frame_number&#34;],&#34;name&#34;:[2],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;horse_number&#34;],&#34;name&#34;:[3],&#34;type&#34;:[&#34;int&#34;],&#34;align&#34;:[&#34;right&#34;]},{&#34;label&#34;:[&#34;trainer&#34;],&#34;name&#34;:[4],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;passing_rank&#34;],&#34;name&#34;:[5],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;last_3F&#34;],&#34;name&#34;:[6],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;time&#34;],&#34;name&#34;:[7],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;margin&#34;],&#34;name&#34;:[8],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_name&#34;],&#34;name&#34;:[9],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_age&#34;],&#34;name&#34;:[10],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_weight&#34;],&#34;name&#34;:[11],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;horse_weight_change&#34;],&#34;name&#34;:[12],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;jockey&#34;],&#34;name&#34;:[13],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;odds&#34;],&#34;name&#34;:[14],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;popularity&#34;],&#34;name&#34;:[15],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;race_date&#34;],&#34;name&#34;:[16],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]},{&#34;label&#34;:[&#34;race_name&#34;],&#34;name&#34;:[17],&#34;type&#34;:[&#34;chr&#34;],&#34;align&#34;:[&#34;left&#34;]}],&#34;data&#34;:[{&#34;1&#34;:&#34;1&#34;,&#34;2&#34;:&#34;8&#34;,&#34;3&#34;:&#34;11&#34;,&#34;4&#34;:&#34;æ£®å®‰ å¼˜æ˜­&#34;,&#34;5&#34;:&#34;01-01-01-01&#34;,&#34;6&#34;:&#34;35.7&#34;,&#34;7&#34;:&#34;2.00.7&#34;,&#34;8&#34;:&#34;character(0)&#34;,&#34;9&#34;:&#34;ãƒ’ãƒ€ã‚«ãƒãƒ¤ãƒˆ&#34;,&#34;10&#34;:&#34;ç‰¡8&#34;,&#34;11&#34;:&#34;488&#34;,&#34;12&#34;:&#34;-2&#34;,&#34;13&#34;:&#34;å¤§å¡š æ „ä¸‰éƒ&#34;,&#34;14&#34;:&#34;29&#34;,&#34;15&#34;:&#34;10&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;1&#34;},{&#34;1&#34;:&#34;2&#34;,&#34;2&#34;:&#34;5&#34;,&#34;3&#34;:&#34;6&#34;,&#34;4&#34;:&#34;çŸ¢é‡ é€²&#34;,&#34;5&#34;:&#34;06-06-04-03&#34;,&#34;6&#34;:&#34;35.3&#34;,&#34;7&#34;:&#34;2.00.8&#34;,&#34;8&#34;:&#34;3/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ã‚¹ãƒ†ãƒ¼ã‚¸ãƒãƒ£ãƒ³ãƒ—&#34;,&#34;10&#34;:&#34;ç‰¡5&#34;,&#34;11&#34;:&#34;462&#34;,&#34;12&#34;:&#34;+14&#34;,&#34;13&#34;:&#34;å²¡éƒ¨ å¹¸é›„&#34;,&#34;14&#34;:&#34;3.2&#34;,&#34;15&#34;:&#34;1&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;2&#34;},{&#34;1&#34;:&#34;3&#34;,&#34;2&#34;:&#34;4&#34;,&#34;3&#34;:&#34;4&#34;,&#34;4&#34;:&#34;æ–°é–¢ åŠ›&#34;,&#34;5&#34;:&#34;03-03-02-02&#34;,&#34;6&#34;:&#34;35.8&#34;,&#34;7&#34;:&#34;2.01.1&#34;,&#34;8&#34;:&#34;1 3/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ãƒã‚­ãƒãƒˆã‚¦ã‚·ãƒ§ã‚¦&#34;,&#34;10&#34;:&#34;ç‰¡5&#34;,&#34;11&#34;:&#34;502&#34;,&#34;12&#34;:&#34;+6&#34;,&#34;13&#34;:&#34;çš„å ´ å‡&#34;,&#34;14&#34;:&#34;6.9&#34;,&#34;15&#34;:&#34;4&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;3&#34;},{&#34;1&#34;:&#34;4&#34;,&#34;2&#34;:&#34;8&#34;,&#34;3&#34;:&#34;12&#34;,&#34;4&#34;:&#34;å¤§å’Œç”° ç¨”&#34;,&#34;5&#34;:&#34;02-02-03-03&#34;,&#34;6&#34;:&#34;35.7&#34;,&#34;7&#34;:&#34;2.01.1&#34;,&#34;8&#34;:&#34;ãƒãƒŠ&#34;,&#34;9&#34;:&#34;ãƒšã‚¬ã‚µã‚¹&#34;,&#34;10&#34;:&#34;ç‰¡5&#34;,&#34;11&#34;:&#34;464&#34;,&#34;12&#34;:&#34;+4&#34;,&#34;13&#34;:&#34;å®‰ç”° å¯Œç”·&#34;,&#34;14&#34;:&#34;5.7&#34;,&#34;15&#34;:&#34;2&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;4&#34;},{&#34;1&#34;:&#34;5&#34;,&#34;2&#34;:&#34;7&#34;,&#34;3&#34;:&#34;9&#34;,&#34;4&#34;:&#34;ç”°ä¸­ å’Œå¤«&#34;,&#34;5&#34;:&#34;07-07-07-05&#34;,&#34;6&#34;:&#34;35.8&#34;,&#34;7&#34;:&#34;2.01.6&#34;,&#34;8&#34;:&#34;3é¦¬èº«&#34;,&#34;9&#34;:&#34;ã‚·ãƒ£ãƒãƒ¼ãƒ‰ã‚·ãƒ³ãƒœãƒª&#34;,&#34;10&#34;:&#34;ç‰¡7&#34;,&#34;11&#34;:&#34;520&#34;,&#34;12&#34;:&#34;+4&#34;,&#34;13&#34;:&#34;ç”°ä¸­ å‰›&#34;,&#34;14&#34;:&#34;29.6&#34;,&#34;15&#34;:&#34;12&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;5&#34;},{&#34;1&#34;:&#34;6&#34;,&#34;2&#34;:&#34;3&#34;,&#34;3&#34;:&#34;3&#34;,&#34;4&#34;:&#34;ä¸­å³¶ æ•æ–‡&#34;,&#34;5&#34;:&#34;09-10-10-09&#34;,&#34;6&#34;:&#34;35.5&#34;,&#34;7&#34;:&#34;2.01.7&#34;,&#34;8&#34;:&#34;3/4é¦¬èº«&#34;,&#34;9&#34;:&#34;ãƒ¢ãƒ³ã‚¿ãƒŸãƒ¼ãƒ«&#34;,&#34;10&#34;:&#34;ç‰¡7&#34;,&#34;11&#34;:&#34;474&#34;,&#34;12&#34;:&#34;+4&#34;,&#34;13&#34;:&#34;è“‘ç”° æ—©äºº&#34;,&#34;14&#34;:&#34;10.4&#34;,&#34;15&#34;:&#34;6&#34;,&#34;16&#34;:&#34;1994å¹´1æœˆ5æ—¥&#34;,&#34;17&#34;:&#34;ç¬¬43å›æ—¥åˆŠã‚¹ãƒãƒ¼ãƒ„è³é‡‘æ¯ï¼ˆGIIIï¼‰&#34;,&#34;_rn_&#34;:&#34;6&#34;}],&#34;options&#34;:{&#34;columns&#34;:{&#34;min&#34;:{},&#34;max&#34;:[10]},&#34;rows&#34;:{&#34;min&#34;:[10],&#34;max&#34;:[10]},&#34;pages&#34;:{}}}
  &lt;/script&gt;
&lt;/div&gt;
&lt;p&gt;ä»¥ä¸Šã§ã™ã€‚æ¬¡å›ã¯ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã€åˆ†æã‚’è¡Œã£ã¦ã„ãã¾ã™ã€‚æ¬¡å›ã¾ã§ã«ã¯1994å¹´ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã—ã¦ãã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;ã€è¿½è¨˜ï¼ˆ2018/6/10ï¼‰ã€‘&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”¨ã„ã¦ã€ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡Œã£ãŸã¨ã“ã‚ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚ã©ã†ã‚„ã‚‰ãƒ¬ãƒ¼ã‚¹çµæœã®ä¸­ã«ã¯å¼·é¢¨ãªã©ã§ä¸­æ­¢ã«ãªã£ãŸã‚‚ã®ã‚‚å«ã¾ã‚Œã¦ã„ã‚‹ã‚‰ã—ãã€ãã“ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹æ§˜å­ï¼ˆrace_resultãŒcharacter(0)ã«ãªã£ã¦ã—ã¾ã†ï¼‰ã€‚ãªã®ã§ã€ã“ã®éƒ¨åˆ†ã‚’ä¿®æ­£ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä»¥ä¸‹ã§å…¬é–‹ã—ã¦ãŠãã¾ã™ã€‚ã“ã¡ã‚‰ã¯ç§ã® PCç’°å¢ƒã§ã¯æ­£å¸¸ã«ä½œå‹•ã—ã¦ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# rvestã«ã‚ˆã‚‹ç«¶é¦¬ãƒ‡ãƒ¼ã‚¿ã®webã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;

&lt;span style=&#34;color:#75715e&#34;&gt;#install.packages(&amp;#34;rvest&amp;#34;)&lt;/span&gt;
&lt;span style=&#34;color:#75715e&#34;&gt;#if (!require(&amp;#34;pacman&amp;#34;)) install.packages(&amp;#34;pacman&amp;#34;)&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;install.packages&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;beepr&amp;#34;&lt;/span&gt;)
  pacman&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;p_load&lt;/span&gt;(qdapRegex)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(rvest)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(stringr)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(dplyr)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(beepr)

&lt;span style=&#34;color:#75715e&#34;&gt;# pathã®è¨­å®š&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;setwd&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C:/Users/assiy/Dropbox/ç«¶é¦¬çµ±è¨ˆè§£æ&amp;#34;&lt;/span&gt;)

  &lt;span style=&#34;color:#a6e22e&#34;&gt;for&lt;/span&gt;(year in &lt;span style=&#34;color:#ae81ff&#34;&gt;1994&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2018&lt;/span&gt;){

  &lt;span style=&#34;color:#75715e&#34;&gt;# yahooç«¶é¦¬ã®ãƒ¬ãƒ¼ã‚¹çµæœä¸€è¦§ãƒšãƒ¼ã‚¸ã®å–å¾—&lt;/span&gt;
  &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(k in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt;){

    keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp/schedule/list/&amp;#34;&lt;/span&gt;, year,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/?month=&amp;#34;&lt;/span&gt;,k))
    race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; keiba.yahoo &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_attr&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;href&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# å…¨urlã‚’å–å¾—&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®ã‚’urlã‚’å–å¾—&lt;/span&gt;
    race_url &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_url&lt;span style=&#34;color:#a6e22e&#34;&gt;[str_detect&lt;/span&gt;(race_url, pattern&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;result&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#75715e&#34;&gt;# ã€Œresultã€ãŒå«ã¾ã‚Œã‚‹urlã‚’æŠ½å‡º&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;for &lt;/span&gt;(i in &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;length&lt;/span&gt;(race_url)){

    &lt;span style=&#34;color:#a6e22e&#34;&gt;Sys.sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)
    &lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç¾åœ¨ã€&amp;#34;&lt;/span&gt;, year, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¹´&amp;#34;&lt;/span&gt;, k, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœˆ&amp;#34;&lt;/span&gt;, i,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç•ªç›®ã®ãƒ¬ãƒ¼ã‚¹ã®ä¿å­˜ä¸­ã§ã™&amp;#34;&lt;/span&gt;))

    race1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;read_html&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://keiba.yahoo.co.jp&amp;#34;&lt;/span&gt;,race_url[i])) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã®urlã‚’å–å¾—&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹ãŒä¸­æ­¢ã§ãªã‘ã‚Œã°å‡¦ç†ã‚’å®Ÿè¡Œ&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;identical&lt;/span&gt;(race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@class = &amp;#39;resultAtt mgnBL fntSS&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;(),&lt;span style=&#34;color:#a6e22e&#34;&gt;character&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;){

    &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹çµæœã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//table[@id = &amp;#39;raceScore&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_table&lt;/span&gt;()
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;do.call&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data.frame&amp;#34;&lt;/span&gt;,race_result) &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒªã‚¹ãƒˆã‚’ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«å¤‰æ›´&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;colnames&lt;/span&gt;(race_result) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;order&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;frame_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_number&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;horse_name/age&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time/margin&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;passing_rank/last_3F&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;jockey/weight&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;popularity/odds&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;trainer&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;#ã€€åˆ—åå¤‰æ›´&lt;/span&gt;

    &lt;span style=&#34;color:#75715e&#34;&gt;# é€šéé †ä½ã¨ä¸Šã‚Š3Fã®ã‚¿ã‚¤ãƒ &lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,passing_rank&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;(\\d{2}-\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2}-\\d{2})|(\\d{2}-\\d{2})&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,last_3F&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`passing_rank/last_3F`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-6&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¿ã‚¤ãƒ ã¨ç€å·®&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,time&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d\\.\\d{2}\\.\\d|\\d{2}\\.\\d&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,margin&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`time/margin`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;./.é¦¬èº«|.é¦¬èº«|.[:space:]./.é¦¬èº«|[ã‚¢-ãƒ³-]+&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-5&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# é¦¬åã€é¦¬é½¢ã€é¦¬ä½“é‡&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã‚¡-ãƒ´ãƒ¼ãƒ»]+&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_age&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç‰¡\\d+|ç‰\\d+|ã›ã‚“\\d+&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d{3}&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,horse_weight_change&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`horse_name/age`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\([\\+|\\-]\\d+\\)|\\([\\d+]\\)&amp;#34;&lt;/span&gt;)))
    race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;horse_weight_change, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚¸ãƒ§ãƒƒã‚­ãƒ¼&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,jockey&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`jockey/weight`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;[ã-ã‚“ä¸€-é¾ ]+\\s[ã-ã‚“ä¸€-é¾ ]+|[:upper:].[ã‚¡-ãƒ¶ãƒ¼]+&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# ã‚ªãƒƒã‚ºã¨äººæ°—&lt;/span&gt;
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,odds&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\(.+\\)&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,popularity&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;`popularity/odds`,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+[^(\\d+.\\d)]&amp;#34;&lt;/span&gt;)))
    race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sapply&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rm_round&lt;/span&gt;(race_result&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;odds, extract&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;TRUE&lt;/span&gt;), paste, collapse&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result[&lt;span style=&#34;color:#ae81ff&#34;&gt;-4&lt;/span&gt;]

    &lt;span style=&#34;color:#75715e&#34;&gt;# ãƒ¬ãƒ¼ã‚¹æƒ…å ±&lt;/span&gt;
    race_date &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/p[@id = &amp;#39;raceTitDay&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()
    race_name &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race1 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;html_nodes&lt;/span&gt;(xpath &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;//div[@id = &amp;#39;raceTitName&amp;#39;]/h1[@class = &amp;#39;fntB&amp;#39;]&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;html_text&lt;/span&gt;()

    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_date&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_extract_all&lt;/span&gt;(race_date,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\d+å¹´\\d+æœˆ\\d+æ—¥&amp;#34;&lt;/span&gt;)))
    race_result &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; dplyr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(race_result,race_name&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;as.character&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;str_replace_all&lt;/span&gt;(race_name,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;\\s&amp;#34;&lt;/span&gt;,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;)))

    &lt;span style=&#34;color:#75715e&#34;&gt;## ãƒ•ã‚¡ã‚¤ãƒ«è²¯ã‚ã‚‹ã®ã‹ã&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;if &lt;/span&gt;(k &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; year &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1994&lt;/span&gt;){
    dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; race_result
    } else {
    dataset &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;rbind&lt;/span&gt;(dataset,race_result)
    } &lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡2ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    } &lt;span style=&#34;color:#75715e&#34;&gt;# ifæ–‡1ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    } &lt;span style=&#34;color:#75715e&#34;&gt;# iãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    } &lt;span style=&#34;color:#75715e&#34;&gt;# kãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;
    &lt;span style=&#34;color:#a6e22e&#34;&gt;beep&lt;/span&gt;()
    } &lt;span style=&#34;color:#75715e&#34;&gt;# yearãƒ«ãƒ¼ãƒ—ã®çµ‚ã‚ã‚Š&lt;/span&gt;

    &lt;span style=&#34;color:#a6e22e&#34;&gt;write.csv&lt;/span&gt;(dataset,&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;race_result.csv&amp;#34;&lt;/span&gt;, row.names &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ã“ã‚Œã‚’å›ã™ã®ã«16æ™‚é–“ã‹ã‹ã‚Šã¾ã—ãŸï¼ˆç¬‘ï¼‰ãƒ‡ãƒ¼ã‚¿æ•°ã¯æƒ³å®šã—ã¦ã„ãŸã‚ˆã‚Šã¯å°‘ãªãã€97939ã«ãªã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
